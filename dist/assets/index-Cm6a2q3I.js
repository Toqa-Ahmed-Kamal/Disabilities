function rR(e,t){for(var i=0;i<t.length;i++){const s=t[i];if(typeof s!="string"&&!Array.isArray(s)){for(const m in s)if(m!=="default"&&!(m in e)){const y=Object.getOwnPropertyDescriptor(s,m);y&&Object.defineProperty(e,m,y.get?y:{enumerable:!0,get:()=>s[m]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))s(m);new MutationObserver(m=>{for(const y of m)if(y.type==="childList")for(const _ of y.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&s(_)}).observe(document,{childList:!0,subtree:!0});function i(m){const y={};return m.integrity&&(y.integrity=m.integrity),m.referrerPolicy&&(y.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?y.credentials="include":m.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function s(m){if(m.ep)return;m.ep=!0;const y=i(m);fetch(m.href,y)}})();function Xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tb={exports:{}},Wy={};var lA;function nR(){if(lA)return Wy;lA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,m,y){var _=null;if(y!==void 0&&(_=""+y),m.key!==void 0&&(_=""+m.key),"key"in m){y={};for(var c in m)c!=="key"&&(y[c]=m[c])}else y=m;return m=y.ref,{$$typeof:e,type:s,key:_,ref:m!==void 0?m:null,props:y}}return Wy.Fragment=t,Wy.jsx=i,Wy.jsxs=i,Wy}var uA;function iR(){return uA||(uA=1,Tb.exports=nR()),Tb.exports}var we=iR(),Eb={exports:{}},_r={};var cA;function aR(){if(cA)return _r;cA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),_=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.iterator;function V(Oe){return Oe===null||typeof Oe!="object"?null:(Oe=U&&Oe[U]||Oe["@@iterator"],typeof Oe=="function"?Oe:null)}var Q={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,G={};function oe(Oe,ot,Dt){this.props=Oe,this.context=ot,this.refs=G,this.updater=Dt||Q}oe.prototype.isReactComponent={},oe.prototype.setState=function(Oe,ot){if(typeof Oe!="object"&&typeof Oe!="function"&&Oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Oe,ot,"setState")},oe.prototype.forceUpdate=function(Oe){this.updater.enqueueForceUpdate(this,Oe,"forceUpdate")};function he(){}he.prototype=oe.prototype;function me(Oe,ot,Dt){this.props=Oe,this.context=ot,this.refs=G,this.updater=Dt||Q}var Ce=me.prototype=new he;Ce.constructor=me,Z(Ce,oe.prototype),Ce.isPureReactComponent=!0;var be=Array.isArray;function ke(){}var je={H:null,A:null,T:null,S:null},gt=Object.prototype.hasOwnProperty;function bt(Oe,ot,Dt){var Rt=Dt.ref;return{$$typeof:e,type:Oe,key:ot,ref:Rt!==void 0?Rt:null,props:Dt}}function It(Oe,ot){return bt(Oe.type,ot,Oe.props)}function yt(Oe){return typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===e}function De(Oe){var ot={"=":"=0",":":"=2"};return"$"+Oe.replace(/[=:]/g,function(Dt){return ot[Dt]})}var Tt=/\/+/g;function Ct(Oe,ot){return typeof Oe=="object"&&Oe!==null&&Oe.key!=null?De(""+Oe.key):ot.toString(36)}function Ft(Oe){switch(Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason;default:switch(typeof Oe.status=="string"?Oe.then(ke,ke):(Oe.status="pending",Oe.then(function(ot){Oe.status==="pending"&&(Oe.status="fulfilled",Oe.value=ot)},function(ot){Oe.status==="pending"&&(Oe.status="rejected",Oe.reason=ot)})),Oe.status){case"fulfilled":return Oe.value;case"rejected":throw Oe.reason}}throw Oe}function Le(Oe,ot,Dt,Rt,Gt){var Qt=typeof Oe;(Qt==="undefined"||Qt==="boolean")&&(Oe=null);var Jt=!1;if(Oe===null)Jt=!0;else switch(Qt){case"bigint":case"string":case"number":Jt=!0;break;case"object":switch(Oe.$$typeof){case e:case t:Jt=!0;break;case D:return Jt=Oe._init,Le(Jt(Oe._payload),ot,Dt,Rt,Gt)}}if(Jt)return Gt=Gt(Oe),Jt=Rt===""?"."+Ct(Oe,0):Rt,be(Gt)?(Dt="",Jt!=null&&(Dt=Jt.replace(Tt,"$&/")+"/"),Le(Gt,ot,Dt,"",function(tr){return tr})):Gt!=null&&(yt(Gt)&&(Gt=It(Gt,Dt+(Gt.key==null||Oe&&Oe.key===Gt.key?"":(""+Gt.key).replace(Tt,"$&/")+"/")+Jt)),ot.push(Gt)),1;Jt=0;var zr=Rt===""?".":Rt+":";if(be(Oe))for(var ct=0;ct<Oe.length;ct++)Rt=Oe[ct],Qt=zr+Ct(Rt,ct),Jt+=Le(Rt,ot,Dt,Qt,Gt);else if(ct=V(Oe),typeof ct=="function")for(Oe=ct.call(Oe),ct=0;!(Rt=Oe.next()).done;)Rt=Rt.value,Qt=zr+Ct(Rt,ct++),Jt+=Le(Rt,ot,Dt,Qt,Gt);else if(Qt==="object"){if(typeof Oe.then=="function")return Le(Ft(Oe),ot,Dt,Rt,Gt);throw ot=String(Oe),Error("Objects are not valid as a React child (found: "+(ot==="[object Object]"?"object with keys {"+Object.keys(Oe).join(", ")+"}":ot)+"). If you meant to render a collection of children, use an array instead.")}return Jt}function We(Oe,ot,Dt){if(Oe==null)return Oe;var Rt=[],Gt=0;return Le(Oe,Rt,"","",function(Qt){return ot.call(Dt,Qt,Gt++)}),Rt}function _t(Oe){if(Oe._status===-1){var ot=Oe._result;ot=ot(),ot.then(function(Dt){(Oe._status===0||Oe._status===-1)&&(Oe._status=1,Oe._result=Dt)},function(Dt){(Oe._status===0||Oe._status===-1)&&(Oe._status=2,Oe._result=Dt)}),Oe._status===-1&&(Oe._status=0,Oe._result=ot)}if(Oe._status===1)return Oe._result.default;throw Oe._result}var at=typeof reportError=="function"?reportError:function(Oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ot=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Oe=="object"&&Oe!==null&&typeof Oe.message=="string"?String(Oe.message):String(Oe),error:Oe});if(!window.dispatchEvent(ot))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Oe);return}console.error(Oe)},Kt={map:We,forEach:function(Oe,ot,Dt){We(Oe,function(){ot.apply(this,arguments)},Dt)},count:function(Oe){var ot=0;return We(Oe,function(){ot++}),ot},toArray:function(Oe){return We(Oe,function(ot){return ot})||[]},only:function(Oe){if(!yt(Oe))throw Error("React.Children.only expected to receive a single React element child.");return Oe}};return _r.Activity=k,_r.Children=Kt,_r.Component=oe,_r.Fragment=i,_r.Profiler=m,_r.PureComponent=me,_r.StrictMode=s,_r.Suspense=P,_r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=je,_r.__COMPILER_RUNTIME={__proto__:null,c:function(Oe){return je.H.useMemoCache(Oe)}},_r.cache=function(Oe){return function(){return Oe.apply(null,arguments)}},_r.cacheSignal=function(){return null},_r.cloneElement=function(Oe,ot,Dt){if(Oe==null)throw Error("The argument must be a React element, but you passed "+Oe+".");var Rt=Z({},Oe.props),Gt=Oe.key;if(ot!=null)for(Qt in ot.key!==void 0&&(Gt=""+ot.key),ot)!gt.call(ot,Qt)||Qt==="key"||Qt==="__self"||Qt==="__source"||Qt==="ref"&&ot.ref===void 0||(Rt[Qt]=ot[Qt]);var Qt=arguments.length-2;if(Qt===1)Rt.children=Dt;else if(1<Qt){for(var Jt=Array(Qt),zr=0;zr<Qt;zr++)Jt[zr]=arguments[zr+2];Rt.children=Jt}return bt(Oe.type,Gt,Rt)},_r.createContext=function(Oe){return Oe={$$typeof:_,_currentValue:Oe,_currentValue2:Oe,_threadCount:0,Provider:null,Consumer:null},Oe.Provider=Oe,Oe.Consumer={$$typeof:y,_context:Oe},Oe},_r.createElement=function(Oe,ot,Dt){var Rt,Gt={},Qt=null;if(ot!=null)for(Rt in ot.key!==void 0&&(Qt=""+ot.key),ot)gt.call(ot,Rt)&&Rt!=="key"&&Rt!=="__self"&&Rt!=="__source"&&(Gt[Rt]=ot[Rt]);var Jt=arguments.length-2;if(Jt===1)Gt.children=Dt;else if(1<Jt){for(var zr=Array(Jt),ct=0;ct<Jt;ct++)zr[ct]=arguments[ct+2];Gt.children=zr}if(Oe&&Oe.defaultProps)for(Rt in Jt=Oe.defaultProps,Jt)Gt[Rt]===void 0&&(Gt[Rt]=Jt[Rt]);return bt(Oe,Qt,Gt)},_r.createRef=function(){return{current:null}},_r.forwardRef=function(Oe){return{$$typeof:c,render:Oe}},_r.isValidElement=yt,_r.lazy=function(Oe){return{$$typeof:D,_payload:{_status:-1,_result:Oe},_init:_t}},_r.memo=function(Oe,ot){return{$$typeof:C,type:Oe,compare:ot===void 0?null:ot}},_r.startTransition=function(Oe){var ot=je.T,Dt={};je.T=Dt;try{var Rt=Oe(),Gt=je.S;Gt!==null&&Gt(Dt,Rt),typeof Rt=="object"&&Rt!==null&&typeof Rt.then=="function"&&Rt.then(ke,at)}catch(Qt){at(Qt)}finally{ot!==null&&Dt.types!==null&&(ot.types=Dt.types),je.T=ot}},_r.unstable_useCacheRefresh=function(){return je.H.useCacheRefresh()},_r.use=function(Oe){return je.H.use(Oe)},_r.useActionState=function(Oe,ot,Dt){return je.H.useActionState(Oe,ot,Dt)},_r.useCallback=function(Oe,ot){return je.H.useCallback(Oe,ot)},_r.useContext=function(Oe){return je.H.useContext(Oe)},_r.useDebugValue=function(){},_r.useDeferredValue=function(Oe,ot){return je.H.useDeferredValue(Oe,ot)},_r.useEffect=function(Oe,ot){return je.H.useEffect(Oe,ot)},_r.useEffectEvent=function(Oe){return je.H.useEffectEvent(Oe)},_r.useId=function(){return je.H.useId()},_r.useImperativeHandle=function(Oe,ot,Dt){return je.H.useImperativeHandle(Oe,ot,Dt)},_r.useInsertionEffect=function(Oe,ot){return je.H.useInsertionEffect(Oe,ot)},_r.useLayoutEffect=function(Oe,ot){return je.H.useLayoutEffect(Oe,ot)},_r.useMemo=function(Oe,ot){return je.H.useMemo(Oe,ot)},_r.useOptimistic=function(Oe,ot){return je.H.useOptimistic(Oe,ot)},_r.useReducer=function(Oe,ot,Dt){return je.H.useReducer(Oe,ot,Dt)},_r.useRef=function(Oe){return je.H.useRef(Oe)},_r.useState=function(Oe){return je.H.useState(Oe)},_r.useSyncExternalStore=function(Oe,ot,Dt){return je.H.useSyncExternalStore(Oe,ot,Dt)},_r.useTransition=function(){return je.H.useTransition()},_r.version="19.2.3",_r}var hA;function Og(){return hA||(hA=1,Eb.exports=aR()),Eb.exports}var H=Og();const oR=Xh(H),sR=rR({__proto__:null,default:oR},[H]);var Mb={exports:{}},Ky={},Pb={exports:{}},Cb={};var fA;function lR(){return fA||(fA=1,(function(e){function t(Le,We){var _t=Le.length;Le.push(We);e:for(;0<_t;){var at=_t-1>>>1,Kt=Le[at];if(0<m(Kt,We))Le[at]=We,Le[_t]=Kt,_t=at;else break e}}function i(Le){return Le.length===0?null:Le[0]}function s(Le){if(Le.length===0)return null;var We=Le[0],_t=Le.pop();if(_t!==We){Le[0]=_t;e:for(var at=0,Kt=Le.length,Oe=Kt>>>1;at<Oe;){var ot=2*(at+1)-1,Dt=Le[ot],Rt=ot+1,Gt=Le[Rt];if(0>m(Dt,_t))Rt<Kt&&0>m(Gt,Dt)?(Le[at]=Gt,Le[Rt]=_t,at=Rt):(Le[at]=Dt,Le[ot]=_t,at=ot);else if(Rt<Kt&&0>m(Gt,_t))Le[at]=Gt,Le[Rt]=_t,at=Rt;else break e}}return We}function m(Le,We){var _t=Le.sortIndex-We.sortIndex;return _t!==0?_t:Le.id-We.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var _=Date,c=_.now();e.unstable_now=function(){return _.now()-c}}var P=[],C=[],D=1,k=null,U=3,V=!1,Q=!1,Z=!1,G=!1,oe=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Ce(Le){for(var We=i(C);We!==null;){if(We.callback===null)s(C);else if(We.startTime<=Le)s(C),We.sortIndex=We.expirationTime,t(P,We);else break;We=i(C)}}function be(Le){if(Z=!1,Ce(Le),!Q)if(i(P)!==null)Q=!0,ke||(ke=!0,De());else{var We=i(C);We!==null&&Ft(be,We.startTime-Le)}}var ke=!1,je=-1,gt=5,bt=-1;function It(){return G?!0:!(e.unstable_now()-bt<gt)}function yt(){if(G=!1,ke){var Le=e.unstable_now();bt=Le;var We=!0;try{e:{Q=!1,Z&&(Z=!1,he(je),je=-1),V=!0;var _t=U;try{t:{for(Ce(Le),k=i(P);k!==null&&!(k.expirationTime>Le&&It());){var at=k.callback;if(typeof at=="function"){k.callback=null,U=k.priorityLevel;var Kt=at(k.expirationTime<=Le);if(Le=e.unstable_now(),typeof Kt=="function"){k.callback=Kt,Ce(Le),We=!0;break t}k===i(P)&&s(P),Ce(Le)}else s(P);k=i(P)}if(k!==null)We=!0;else{var Oe=i(C);Oe!==null&&Ft(be,Oe.startTime-Le),We=!1}}break e}finally{k=null,U=_t,V=!1}We=void 0}}finally{We?De():ke=!1}}}var De;if(typeof me=="function")De=function(){me(yt)};else if(typeof MessageChannel<"u"){var Tt=new MessageChannel,Ct=Tt.port2;Tt.port1.onmessage=yt,De=function(){Ct.postMessage(null)}}else De=function(){oe(yt,0)};function Ft(Le,We){je=oe(function(){Le(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):gt=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return U},e.unstable_next=function(Le){switch(U){case 1:case 2:case 3:var We=3;break;default:We=U}var _t=U;U=We;try{return Le()}finally{U=_t}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(Le,We){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var _t=U;U=Le;try{return We()}finally{U=_t}},e.unstable_scheduleCallback=function(Le,We,_t){var at=e.unstable_now();switch(typeof _t=="object"&&_t!==null?(_t=_t.delay,_t=typeof _t=="number"&&0<_t?at+_t:at):_t=at,Le){case 1:var Kt=-1;break;case 2:Kt=250;break;case 5:Kt=1073741823;break;case 4:Kt=1e4;break;default:Kt=5e3}return Kt=_t+Kt,Le={id:D++,callback:We,priorityLevel:Le,startTime:_t,expirationTime:Kt,sortIndex:-1},_t>at?(Le.sortIndex=_t,t(C,Le),i(P)===null&&Le===i(C)&&(Z?(he(je),je=-1):Z=!0,Ft(be,_t-at))):(Le.sortIndex=Kt,t(P,Le),Q||V||(Q=!0,ke||(ke=!0,De()))),Le},e.unstable_shouldYield=It,e.unstable_wrapCallback=function(Le){var We=U;return function(){var _t=U;U=We;try{return Le.apply(this,arguments)}finally{U=_t}}}})(Cb)),Cb}var dA;function uR(){return dA||(dA=1,Pb.exports=lR()),Pb.exports}var Db={exports:{}},mo={};var pA;function cR(){if(pA)return mo;pA=1;var e=Og();function t(P){var C="https://react.dev/errors/"+P;if(1<arguments.length){C+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)C+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+P+"; visit "+C+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},m=Symbol.for("react.portal");function y(P,C,D){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:k==null?null:""+k,children:P,containerInfo:C,implementation:D}}var _=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(P,C){if(P==="font")return"";if(typeof C=="string")return C==="use-credentials"?C:""}return mo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,mo.createPortal=function(P,C){var D=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)throw Error(t(299));return y(P,C,null,D)},mo.flushSync=function(P){var C=_.T,D=s.p;try{if(_.T=null,s.p=2,P)return P()}finally{_.T=C,s.p=D,s.d.f()}},mo.preconnect=function(P,C){typeof P=="string"&&(C?(C=C.crossOrigin,C=typeof C=="string"?C==="use-credentials"?C:"":void 0):C=null,s.d.C(P,C))},mo.prefetchDNS=function(P){typeof P=="string"&&s.d.D(P)},mo.preinit=function(P,C){if(typeof P=="string"&&C&&typeof C.as=="string"){var D=C.as,k=c(D,C.crossOrigin),U=typeof C.integrity=="string"?C.integrity:void 0,V=typeof C.fetchPriority=="string"?C.fetchPriority:void 0;D==="style"?s.d.S(P,typeof C.precedence=="string"?C.precedence:void 0,{crossOrigin:k,integrity:U,fetchPriority:V}):D==="script"&&s.d.X(P,{crossOrigin:k,integrity:U,fetchPriority:V,nonce:typeof C.nonce=="string"?C.nonce:void 0})}},mo.preinitModule=function(P,C){if(typeof P=="string")if(typeof C=="object"&&C!==null){if(C.as==null||C.as==="script"){var D=c(C.as,C.crossOrigin);s.d.M(P,{crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0})}}else C==null&&s.d.M(P)},mo.preload=function(P,C){if(typeof P=="string"&&typeof C=="object"&&C!==null&&typeof C.as=="string"){var D=C.as,k=c(D,C.crossOrigin);s.d.L(P,D,{crossOrigin:k,integrity:typeof C.integrity=="string"?C.integrity:void 0,nonce:typeof C.nonce=="string"?C.nonce:void 0,type:typeof C.type=="string"?C.type:void 0,fetchPriority:typeof C.fetchPriority=="string"?C.fetchPriority:void 0,referrerPolicy:typeof C.referrerPolicy=="string"?C.referrerPolicy:void 0,imageSrcSet:typeof C.imageSrcSet=="string"?C.imageSrcSet:void 0,imageSizes:typeof C.imageSizes=="string"?C.imageSizes:void 0,media:typeof C.media=="string"?C.media:void 0})}},mo.preloadModule=function(P,C){if(typeof P=="string")if(C){var D=c(C.as,C.crossOrigin);s.d.m(P,{as:typeof C.as=="string"&&C.as!=="script"?C.as:void 0,crossOrigin:D,integrity:typeof C.integrity=="string"?C.integrity:void 0})}else s.d.m(P)},mo.requestFormReset=function(P){s.d.r(P)},mo.unstable_batchedUpdates=function(P,C){return P(C)},mo.useFormState=function(P,C,D){return _.H.useFormState(P,C,D)},mo.useFormStatus=function(){return _.H.useHostTransitionStatus()},mo.version="19.2.3",mo}var mA;function sC(){if(mA)return Db.exports;mA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Db.exports=cR(),Db.exports}var gA;function hR(){if(gA)return Ky;gA=1;var e=uR(),t=Og(),i=sC();function s(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function y(l){var h=l,g=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(g=h.return),l=h.return;while(l)}return h.tag===3?g:null}function _(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function c(l){if(l.tag===31){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function P(l){if(y(l)!==l)throw Error(s(188))}function C(l){var h=l.alternate;if(!h){if(h=y(l),h===null)throw Error(s(188));return h!==l?null:l}for(var g=l,S=h;;){var O=g.return;if(O===null)break;var L=O.alternate;if(L===null){if(S=O.return,S!==null){g=S;continue}break}if(O.child===L.child){for(L=O.child;L;){if(L===g)return P(O),l;if(L===S)return P(O),h;L=L.sibling}throw Error(s(188))}if(g.return!==S.return)g=O,S=L;else{for(var W=!1,le=O.child;le;){if(le===g){W=!0,g=O,S=L;break}if(le===S){W=!0,S=O,g=L;break}le=le.sibling}if(!W){for(le=L.child;le;){if(le===g){W=!0,g=L,S=O;break}if(le===S){W=!0,S=L,g=O;break}le=le.sibling}if(!W)throw Error(s(189))}}if(g.alternate!==S)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?l:h}function D(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=D(l),h!==null)return h;l=l.sibling}return null}var k=Object.assign,U=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),Q=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Ce=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),je=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),bt=Symbol.for("react.activity"),It=Symbol.for("react.memo_cache_sentinel"),yt=Symbol.iterator;function De(l){return l===null||typeof l!="object"?null:(l=yt&&l[yt]||l["@@iterator"],typeof l=="function"?l:null)}var Tt=Symbol.for("react.client.reference");function Ct(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===Tt?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case Z:return"Fragment";case oe:return"Profiler";case G:return"StrictMode";case be:return"Suspense";case ke:return"SuspenseList";case bt:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case Q:return"Portal";case me:return l.displayName||"Context";case he:return(l._context.displayName||"Context")+".Consumer";case Ce:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case je:return h=l.displayName||null,h!==null?h:Ct(l.type)||"Memo";case gt:h=l._payload,l=l._init;try{return Ct(l(h))}catch{}}return null}var Ft=Array.isArray,Le=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,We=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_t={pending:!1,data:null,method:null,action:null},at=[],Kt=-1;function Oe(l){return{current:l}}function ot(l){0>Kt||(l.current=at[Kt],at[Kt]=null,Kt--)}function Dt(l,h){Kt++,at[Kt]=l.current,l.current=h}var Rt=Oe(null),Gt=Oe(null),Qt=Oe(null),Jt=Oe(null);function zr(l,h){switch(Dt(Qt,h),Dt(Gt,l),Dt(Rt,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?_c(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=_c(h),l=Ey(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}ot(Rt),Dt(Rt,l)}function ct(){ot(Rt),ot(Gt),ot(Qt)}function tr(l){l.memoizedState!==null&&Dt(Jt,l);var h=Rt.current,g=Ey(h,l.type);h!==g&&(Dt(Gt,l),Dt(Rt,g))}function gr(l){Gt.current===l&&(ot(Rt),ot(Gt)),Jt.current===l&&(ot(Jt),Jf._currentValue=_t)}var wt,Hn;function ar(l){if(wt===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);wt=h&&h[1]||"",Hn=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+l+Hn}var rn=!1;function cn(l,h){if(!l||rn)return"";rn=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var vt=function(){throw Error()};if(Object.defineProperty(vt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vt,[])}catch(rt){var et=rt}Reflect.construct(l,[],vt)}else{try{vt.call()}catch(rt){et=rt}l.call(vt.prototype)}}else{try{throw Error()}catch(rt){et=rt}(vt=l())&&typeof vt.catch=="function"&&vt.catch(function(){})}}catch(rt){if(rt&&et&&typeof rt.stack=="string")return[rt.stack,et.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var O=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");O&&O.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=S.DetermineComponentFrameRoot(),W=L[0],le=L[1];if(W&&le){var Ie=W.split(`
`),Je=le.split(`
`);for(O=S=0;S<Ie.length&&!Ie[S].includes("DetermineComponentFrameRoot");)S++;for(;O<Je.length&&!Je[O].includes("DetermineComponentFrameRoot");)O++;if(S===Ie.length||O===Je.length)for(S=Ie.length-1,O=Je.length-1;1<=S&&0<=O&&Ie[S]!==Je[O];)O--;for(;1<=S&&0<=O;S--,O--)if(Ie[S]!==Je[O]){if(S!==1||O!==1)do if(S--,O--,0>O||Ie[S]!==Je[O]){var ht=`
`+Ie[S].replace(" at new "," at ");return l.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",l.displayName)),ht}while(1<=S&&0<=O);break}}}finally{rn=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?ar(g):""}function Br(l,h){switch(l.tag){case 26:case 27:case 5:return ar(l.type);case 16:return ar("Lazy");case 13:return l.child!==h&&h!==null?ar("Suspense Fallback"):ar("Suspense");case 19:return ar("SuspenseList");case 0:case 15:return cn(l.type,!1);case 11:return cn(l.type.render,!1);case 1:return cn(l.type,!0);case 31:return ar("Activity");default:return""}}function Xa(l){try{var h="",g=null;do h+=Br(l,g),g=l,l=l.return;while(l);return h}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}var ws=Object.prototype.hasOwnProperty,Qs=e.unstable_scheduleCallback,qo=e.unstable_cancelCallback,_o=e.unstable_shouldYield,Nu=e.unstable_requestPaint,gi=e.unstable_now,la=e.unstable_getCurrentPriorityLevel,Ue=e.unstable_ImmediatePriority,ne=e.unstable_UserBlockingPriority,re=e.unstable_NormalPriority,ue=e.unstable_LowPriority,Ee=e.unstable_IdlePriority,Pe=e.log,He=e.unstable_setDisableYieldValue,Ne=null,ze=null;function Ze(l){if(typeof Pe=="function"&&He(l),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Ne,l)}catch{}}var lt=Math.clz32?Math.clz32:Vt,ut=Math.log,Lt=Math.LN2;function Vt(l){return l>>>=0,l===0?32:31-(ut(l)/Lt|0)|0}var rr=256,kr=262144,wr=4194304;function Ve(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function jr(l,h,g){var S=l.pendingLanes;if(S===0)return 0;var O=0,L=l.suspendedLanes,W=l.pingedLanes;l=l.warmLanes;var le=S&134217727;return le!==0?(S=le&~L,S!==0?O=Ve(S):(W&=le,W!==0?O=Ve(W):g||(g=le&~l,g!==0&&(O=Ve(g))))):(le=S&~L,le!==0?O=Ve(le):W!==0?O=Ve(W):g||(g=S&~l,g!==0&&(O=Ve(g)))),O===0?0:h!==0&&h!==O&&(h&L)===0&&(L=O&-O,g=h&-h,L>=g||L===32&&(g&4194048)!==0)?h:O}function Zn(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function sr(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nr(){var l=wr;return wr<<=1,(wr&62914560)===0&&(wr=4194304),l}function li(l){for(var h=[],g=0;31>g;g++)h.push(l);return h}function Gr(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Mn(l,h,g,S,O,L){var W=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var le=l.entanglements,Ie=l.expirationTimes,Je=l.hiddenUpdates;for(g=W&~g;0<g;){var ht=31-lt(g),vt=1<<ht;le[ht]=0,Ie[ht]=-1;var et=Je[ht];if(et!==null)for(Je[ht]=null,ht=0;ht<et.length;ht++){var rt=et[ht];rt!==null&&(rt.lane&=-536870913)}g&=~vt}S!==0&&Yr(l,S,0),L!==0&&O===0&&l.tag!==0&&(l.suspendedLanes|=L&~(W&~h))}function Yr(l,h,g){l.pendingLanes|=h,l.suspendedLanes&=~h;var S=31-lt(h);l.entangledLanes|=h,l.entanglements[S]=l.entanglements[S]|1073741824|g&261930}function $n(l,h){var g=l.entangledLanes|=h;for(l=l.entanglements;g;){var S=31-lt(g),O=1<<S;O&h|l[S]&h&&(l[S]|=h),g&=~O}}function Fu(l,h){var g=h&-h;return g=(g&42)!==0?1:Nl(g),(g&(l.suspendedLanes|h))!==0?0:g}function Nl(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function xt(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function Bi(){var l=We.p;return l!==0?l:(l=window.event,l===void 0?32:Dh(l.type))}function ji(l,h){var g=We.p;try{return We.p=l,h()}finally{We.p=g}}var xo=Math.random().toString(36).slice(2),nn="__reactFiber$"+xo,Et="__reactProps$"+xo,ur="__reactContainer$"+xo,dr="__reactEvents$"+xo,Pa="__reactListeners$"+xo,nf="__reactHandles$"+xo,Ho="__reactResources$"+xo,lr="__reactMarker$"+xo;function Fl(l){delete l[nn],delete l[Et],delete l[dr],delete l[Pa],delete l[nf]}function Zo(l){var h=l[nn];if(h)return h;for(var g=l.parentNode;g;){if(h=g[ur]||g[nn]){if(g=h.alternate,h.child!==null||g!==null&&g.child!==null)for(l=op(l);l!==null;){if(g=l[nn])return g;l=op(l)}return h}l=g,g=l.parentNode}return null}function Ss(l){if(l=l[nn]||l[ur]){var h=l.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return l}return null}function $o(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(s(33))}function Xo(l){var h=l[Ho];return h||(h=l[Ho]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Pn(l){l[lr]=!0}var Uu=new Set,Ni={};function Sr(l,h){As(l,h),As(l+"Capture",h)}function As(l,h){for(Ni[l]=h,l=0;l<h.length;l++)Uu.add(h[l])}var Vu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gu={},Js={};function bo(l){return ws.call(Js,l)?!0:ws.call(Gu,l)?!1:Vu.test(l)?Js[l]=!0:(Gu[l]=!0,!1)}function Rc(l,h,g){if(bo(h))if(g===null)l.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+g)}}function Yo(l,h,g){if(g===null)l.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+g)}}function Ya(l,h,g,S){if(S===null)l.removeAttribute(g);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(h,g,""+S)}}function Cr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function pd(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Xp(l,h,g){var S=Object.getOwnPropertyDescriptor(l.constructor.prototype,h);if(!l.hasOwnProperty(h)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var O=S.get,L=S.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return O.call(this)},set:function(W){g=""+W,L.call(this,W)}}),Object.defineProperty(l,h,{enumerable:S.enumerable}),{getValue:function(){return g},setValue:function(W){g=""+W},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function Ul(l){if(!l._valueTracker){var h=pd(l)?"checked":"value";l._valueTracker=Xp(l,h,""+l[h])}}function md(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var g=h.getValue(),S="";return l&&(S=pd(l)?l.checked?"true":"false":l.value),l=S,l!==g?(h.setValue(l),!0):!1}function Lc(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var Yp=/[\n"\\]/g;function Yi(l){return l.replace(Yp,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Bc(l,h,g,S,O,L,W,le){l.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?l.type=W:l.removeAttribute("type"),h!=null?W==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Cr(h)):l.value!==""+Cr(h)&&(l.value=""+Cr(h)):W!=="submit"&&W!=="reset"||l.removeAttribute("value"),h!=null?jc(l,W,Cr(h)):g!=null?jc(l,W,Cr(g)):S!=null&&l.removeAttribute("value"),O==null&&L!=null&&(l.defaultChecked=!!L),O!=null&&(l.checked=O&&typeof O!="function"&&typeof O!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?l.name=""+Cr(le):l.removeAttribute("name")}function af(l,h,g,S,O,L,W,le){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(l.type=L),h!=null||g!=null){if(!(L!=="submit"&&L!=="reset"||h!=null)){Ul(l);return}g=g!=null?""+Cr(g):"",h=h!=null?""+Cr(h):g,le||h===l.value||(l.value=h),l.defaultValue=h}S=S??O,S=typeof S!="function"&&typeof S!="symbol"&&!!S,l.checked=le?l.checked:!!S,l.defaultChecked=!!S,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(l.name=W),Ul(l)}function jc(l,h,g){h==="number"&&Lc(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function el(l,h,g,S){if(l=l.options,h){h={};for(var O=0;O<g.length;O++)h["$"+g[O]]=!0;for(g=0;g<l.length;g++)O=h.hasOwnProperty("$"+l[g].value),l[g].selected!==O&&(l[g].selected=O),O&&S&&(l[g].defaultSelected=!0)}else{for(g=""+Cr(g),h=null,O=0;O<l.length;O++){if(l[O].value===g){l[O].selected=!0,S&&(l[O].defaultSelected=!0);return}h!==null||l[O].disabled||(h=l[O])}h!==null&&(h.selected=!0)}}function Wp(l,h,g){if(h!=null&&(h=""+Cr(h),h!==l.value&&(l.value=h),g==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=g!=null?""+Cr(g):""}function qu(l,h,g,S){if(h==null){if(S!=null){if(g!=null)throw Error(s(92));if(Ft(S)){if(1<S.length)throw Error(s(93));S=S[0]}g=S}g==null&&(g=""),h=g}g=Cr(h),l.defaultValue=g,S=l.textContent,S===g&&S!==""&&S!==null&&(l.value=S),Ul(l)}function Ts(l,h){if(h){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=h;return}}l.textContent=h}var Kp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vl(l,h,g){var S=h.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?S?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":S?l.setProperty(h,g):typeof g!="number"||g===0||Kp.has(h)?h==="float"?l.cssFloat=g:l[h]=(""+g).trim():l[h]=g+"px"}function of(l,h,g){if(h!=null&&typeof h!="object")throw Error(s(62));if(l=l.style,g!=null){for(var S in g)!g.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?l.setProperty(S,""):S==="float"?l.cssFloat="":l[S]="");for(var O in h)S=h[O],h.hasOwnProperty(O)&&g[O]!==S&&Vl(l,O,S)}else for(var L in h)h.hasOwnProperty(L)&&Vl(l,L,h[L])}function Gl(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fr(l){return Hu.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function wo(){}var gd=null;function Nc(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var ui=null,Xn=null;function pn(l){var h=Ss(l);if(h&&(l=h.stateNode)){var g=l[Et]||null;e:switch(l=h.stateNode,h.type){case"input":if(Bc(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),h=g.name,g.type==="radio"&&h!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Yi(""+h)+'"][type="radio"]'),h=0;h<g.length;h++){var S=g[h];if(S!==l&&S.form===l.form){var O=S[Et]||null;if(!O)throw Error(s(90));Bc(S,O.value,O.defaultValue,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name)}}for(h=0;h<g.length;h++)S=g[h],S.form===l.form&&md(S)}break e;case"textarea":Wp(l,g.value,g.defaultValue);break e;case"select":h=g.value,h!=null&&el(l,!!g.multiple,h,!1)}}}var Wt=!1;function Wr(l,h,g){if(Wt)return l(h,g);Wt=!0;try{var S=l(h);return S}finally{if(Wt=!1,(ui!==null||Xn!==null)&&(Qd(),ui&&(h=ui,l=Xn,Xn=ui=null,pn(h),l)))for(h=0;h<l.length;h++)pn(l[h])}}function Wa(l,h){var g=l.stateNode;if(g===null)return null;var S=g[Et]||null;if(S===null)return null;g=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(l=l.type,S=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!S;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(s(231,h,typeof g));return g}var Cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wi=!1;if(Cn)try{var ci={};Object.defineProperty(ci,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",ci,ci),window.removeEventListener("test",ci,ci)}catch{Wi=!1}var Ca=null,Wo=null,mn=null;function rl(){if(mn)return mn;var l,h=Wo,g=h.length,S,O="value"in Ca?Ca.value:Ca.textContent,L=O.length;for(l=0;l<g&&h[l]===O[l];l++);var W=g-l;for(S=1;S<=W&&h[g-S]===O[L-S];S++);return mn=O.slice(l,1<S?1-S:void 0)}function Da(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function ql(){return!0}function Ki(){return!1}function ti(l){function h(g,S,O,L,W){this._reactName=g,this._targetInst=O,this.type=S,this.nativeEvent=L,this.target=W,this.currentTarget=null;for(var le in l)l.hasOwnProperty(le)&&(g=l[le],this[le]=g?g(L):L[le]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?ql:Ki,this.isPropagationStopped=Ki,this}return k(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),h}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fc=ti(Qi),Hl=k({},Qi,{view:0,detail:0}),Zl=ti(Hl),qr,nl,yr,cr=k({},Hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gc,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==yr&&(yr&&l.type==="mousemove"?(qr=l.screenX-yr.screenX,nl=l.screenY-yr.screenY):nl=qr=0,yr=l),qr)},movementY:function(l){return"movementY"in l?l.movementY:nl}}),$l=ti(cr),Ar=k({},cr,{dataTransfer:0}),Uc=ti(Ar),Ka=k({},Hl,{relatedTarget:0}),il=ti(Ka),al=k({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),Qp=ti(al),Vc=k({},Qi,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),yd=ti(Vc),qg=k({},Qi,{data:0}),vd=ti(qg),Ji={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xl(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=gn[l])?!!h[l]:!1}function Gc(){return Xl}var qc=k({},Hl,{key:function(l){if(l.key){var h=Ji[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=Da(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Ko[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gc,charCode:function(l){return l.type==="keypress"?Da(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?Da(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Dn=ti(qc),Jp=k({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sf=ti(Jp),em=k({},Hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gc}),Hg=ti(em),Zu=k({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),lf=ti(Zu),$u=k({},cr,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),_d=ti($u),Hc=k({},Qi,{newState:0,oldState:0}),Xu=ti(Hc),Yu=[9,13,27,32],Nn=Cn&&"CompositionEvent"in window,Wu=null;Cn&&"documentMode"in document&&(Wu=document.documentMode);var Ku=Cn&&"TextEvent"in window&&!Wu,Qu=Cn&&(!Nn||Wu&&8<Wu&&11>=Wu),ol=" ",tm=!1;function Zc(l,h){switch(l){case"keyup":return Yu.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rm(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var So=!1;function uf(l,h){switch(l){case"compositionend":return rm(h);case"keypress":return h.which!==32?null:(tm=!0,ol);case"textInput":return l=h.data,l===ol&&tm?null:l;default:return null}}function nm(l,h){if(So)return l==="compositionend"||!Nn&&Zc(l,h)?(l=rl(),mn=Wo=Ca=null,So=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Qu&&h.locale!=="ko"?null:h.data;default:return null}}var im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cf(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!im[l.type]:h==="textarea"}function hf(l,h,g,S){ui?Xn?Xn.push(S):Xn=[S]:ui=S,h=rp(h,"onChange"),0<h.length&&(g=new Fc("onChange","change",null,g,S),l.push({event:g,listeners:h}))}var Yl=null,Ju=null;function am(l){P_(l,0)}function $c(l){var h=$o(l);if(md(h))return l}function sl(l,h){if(l==="change")return h}var xd=!1;if(Cn){var Xc;if(Cn){var ll="oninput"in document;if(!ll){var bd=document.createElement("div");bd.setAttribute("oninput","return;"),ll=typeof bd.oninput=="function"}Xc=ll}else Xc=!1;xd=Xc&&(!document.documentMode||9<document.documentMode)}function Yc(){Yl&&(Yl.detachEvent("onpropertychange",om),Ju=Yl=null)}function om(l){if(l.propertyName==="value"&&$c(Ju)){var h=[];hf(h,Ju,l,Nc(l)),Wr(am,h)}}function Zg(l,h,g){l==="focusin"?(Yc(),Yl=h,Ju=g,Yl.attachEvent("onpropertychange",om)):l==="focusout"&&Yc()}function sm(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return $c(Ju)}function Wc(l,h){if(l==="click")return $c(h)}function lm(l,h){if(l==="input"||l==="change")return $c(h)}function wd(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var ua=typeof Object.is=="function"?Object.is:wd;function ul(l,h){if(ua(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var g=Object.keys(l),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var O=g[S];if(!ws.call(h,O)||!ua(l[O],h[O]))return!1}return!0}function Qa(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Kc(l,h){var g=Qa(l);l=0;for(var S;g;){if(g.nodeType===3){if(S=l+g.textContent.length,l<=h&&S>=h)return{node:g,offset:h-l};l=S}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Qa(g)}}function ff(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?ff(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function df(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=Lc(l.document);h instanceof l.HTMLIFrameElement;){try{var g=typeof h.contentWindow.location.href=="string"}catch{g=!1}if(g)l=h.contentWindow;else break;h=Lc(l.document)}return h}function Qc(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var pf=Cn&&"documentMode"in document&&11>=document.documentMode,Ja=null,Jc=null,eh=null,mf=!1;function um(l,h,g){var S=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;mf||Ja==null||Ja!==Lc(S)||(S=Ja,"selectionStart"in S&&Qc(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),eh&&ul(eh,S)||(eh=S,S=rp(Jc,"onSelect"),0<S.length&&(h=new Fc("onSelect","select",null,h,g),l.push({event:h,listeners:S}),h.target=Ja)))}function Wl(l,h){var g={};return g[l.toLowerCase()]=h.toLowerCase(),g["Webkit"+l]="webkit"+h,g["Moz"+l]="moz"+h,g}var Kl={animationend:Wl("Animation","AnimationEnd"),animationiteration:Wl("Animation","AnimationIteration"),animationstart:Wl("Animation","AnimationStart"),transitionrun:Wl("Transition","TransitionRun"),transitionstart:Wl("Transition","TransitionStart"),transitioncancel:Wl("Transition","TransitionCancel"),transitionend:Wl("Transition","TransitionEnd")},Sd={},Dr={};Cn&&(Dr=document.createElement("div").style,"AnimationEvent"in window||(delete Kl.animationend.animation,delete Kl.animationiteration.animation,delete Kl.animationstart.animation),"TransitionEvent"in window||delete Kl.transitionend.transition);function Qo(l){if(Sd[l])return Sd[l];if(!Kl[l])return l;var h=Kl[l],g;for(g in h)if(h.hasOwnProperty(g)&&g in Dr)return Sd[l]=h[g];return l}var th=Qo("animationend"),rh=Qo("animationiteration"),gf=Qo("animationstart"),Ql=Qo("transitionrun"),nh=Qo("transitionstart"),ec=Qo("transitioncancel"),Ia=Qo("transitionend"),Ad=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function Oa(l,h){Ad.set(l,h),Sr(h,[l])}var Jo=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},ea=[],Es=0,Jl=0;function eu(){for(var l=Es,h=Jl=Es=0;h<l;){var g=ea[h];ea[h++]=null;var S=ea[h];ea[h++]=null;var O=ea[h];ea[h++]=null;var L=ea[h];if(ea[h++]=null,S!==null&&O!==null){var W=S.pending;W===null?O.next=O:(O.next=W.next,W.next=O),S.pending=O}L!==0&&Td(g,O,L)}}function ih(l,h,g,S){ea[Es++]=l,ea[Es++]=h,ea[Es++]=g,ea[Es++]=S,Jl|=S,l.lanes|=S,l=l.alternate,l!==null&&(l.lanes|=S)}function cl(l,h,g,S){return ih(l,h,g,S),tc(l)}function eo(l,h){return ih(l,null,null,h),tc(l)}function Td(l,h,g){l.lanes|=g;var S=l.alternate;S!==null&&(S.lanes|=g);for(var O=!1,L=l.return;L!==null;)L.childLanes|=g,S=L.alternate,S!==null&&(S.childLanes|=g),L.tag===22&&(l=L.stateNode,l===null||l._visibility&1||(O=!0)),l=L,L=L.return;return l.tag===3?(L=l.stateNode,O&&h!==null&&(O=31-lt(g),l=L.hiddenUpdates,S=l[O],S===null?l[O]=[h]:S.push(h),h.lane=g|536870912),L):null}function tc(l){if(50<Kd)throw Kd=0,cy=null,Error(s(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var hr={};function vf(l,h,g,S){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(l,h,g,S){return new vf(l,h,g,S)}function _f(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ka(l,h){var g=l.alternate;return g===null?(g=za(l.tag,h,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=h,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,h=l.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function cm(l,h){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,h=g.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function xf(l,h,g,S,O,L){var W=0;if(S=l,typeof l=="function")_f(l)&&(W=1);else if(typeof l=="string")W=ng(l,g,Rt.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case bt:return l=za(31,g,h,O),l.elementType=bt,l.lanes=L,l;case Z:return hl(g.children,O,L,h);case G:W=8,O|=24;break;case oe:return l=za(12,g,h,O|2),l.elementType=oe,l.lanes=L,l;case be:return l=za(13,g,h,O),l.elementType=be,l.lanes=L,l;case ke:return l=za(19,g,h,O),l.elementType=ke,l.lanes=L,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case me:W=10;break e;case he:W=9;break e;case Ce:W=11;break e;case je:W=14;break e;case gt:W=16,S=null;break e}W=29,g=Error(s(130,l===null?"null":typeof l,"")),S=null}return h=za(W,g,h,O),h.elementType=l,h.type=S,h.lanes=L,h}function hl(l,h,g,S){return l=za(7,l,S,h),l.lanes=g,l}function Ed(l,h,g){return l=za(6,l,null,h),l.lanes=g,l}function bf(l){var h=za(18,null,null,0);return h.stateNode=l,h}function fl(l,h,g){return h=za(4,l.children!==null?l.children:[],l.key,h),h.lanes=g,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var rc=new WeakMap;function ta(l,h){if(typeof l=="object"&&l!==null){var g=rc.get(l);return g!==void 0?g:(h={value:l,source:h,stack:Xa(h)},rc.set(l,h),h)}return{value:l,source:h,stack:Xa(h)}}var dl=[],pl=0,tu=null,ml=0,hi=[],yi=0,es=null,ts=1,ca="";function Ms(l,h){dl[pl++]=ml,dl[pl++]=tu,tu=l,ml=h}function Md(l,h,g){hi[yi++]=ts,hi[yi++]=ca,hi[yi++]=es,es=l;var S=ts;l=ca;var O=32-lt(S)-1;S&=~(1<<O),g+=1;var L=32-lt(h)+O;if(30<L){var W=O-O%5;L=(S&(1<<W)-1).toString(32),S>>=W,O-=W,ts=1<<32-lt(h)+O|g<<O|S,ca=L+l}else ts=1<<L|g<<O|S,ca=l}function ru(l){l.return!==null&&(Ms(l,1),Md(l,1,0))}function nc(l){for(;l===tu;)tu=dl[--pl],dl[pl]=null,ml=dl[--pl],dl[pl]=null;for(;l===es;)es=hi[--yi],hi[yi]=null,ca=hi[--yi],hi[yi]=null,ts=hi[--yi],hi[yi]=null}function Pd(l,h){hi[yi++]=ts,hi[yi++]=ca,hi[yi++]=es,ts=h.id,ca=h.overflow,es=l}var vi=null,Kr=null,br=!1,Ps=null,Ra=!1,wn=Error(s(519));function ha(l){var h=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cs(ta(h,l)),wn}function fa(l){var h=l.stateNode,g=l.type,S=l.memoizedProps;switch(h[nn]=l,h[Et]=S,g){case"dialog":Pr("cancel",h),Pr("close",h);break;case"iframe":case"object":case"embed":Pr("load",h);break;case"video":case"audio":for(g=0;g<vc.length;g++)Pr(vc[g],h);break;case"source":Pr("error",h);break;case"img":case"image":case"link":Pr("error",h),Pr("load",h);break;case"details":Pr("toggle",h);break;case"input":Pr("invalid",h),af(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0);break;case"select":Pr("invalid",h);break;case"textarea":Pr("invalid",h),qu(h,S.value,S.defaultValue,S.children)}g=S.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||h.textContent===""+g||S.suppressHydrationWarning===!0||Ay(h.textContent,g)?(S.popover!=null&&(Pr("beforetoggle",h),Pr("toggle",h)),S.onScroll!=null&&Pr("scroll",h),S.onScrollEnd!=null&&Pr("scrollend",h),S.onClick!=null&&(h.onclick=wo),h=!0):h=!1,h||ha(l,!0)}function ah(l){for(vi=l.return;vi;)switch(vi.tag){case 5:case 31:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:vi=vi.return}}function rs(l){if(l!==vi)return!1;if(!br)return ah(l),br=!0,!1;var h=l.tag,g;if((g=h!==3&&h!==27)&&((g=h===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||Wm(l.type,l.memoizedProps)),g=!g),g&&Kr&&ha(l),ah(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Kr=Ei(l)}else if(h===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));Kr=Ei(l)}else h===27?(h=Kr,bc(l.type)?(l=Ga,Ga=null,Kr=l):Kr=h):Kr=vi?Ro(l.stateNode.nextSibling):null;return!0}function ns(){Kr=vi=null,br=!1}function is(){var l=Ps;return l!==null&&(co===null?co=l:co.push.apply(co,l),Ps=null),l}function Cs(l){Ps===null?Ps=[l]:Ps.push(l)}var Ds=Oe(null),to=null,as=null;function Is(l,h,g){Dt(Ds,h._currentValue),h._currentValue=g}function os(l){l._currentValue=Ds.current,ot(Ds)}function wf(l,h,g){for(;l!==null;){var S=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),l===g)break;l=l.return}}function Sf(l,h,g,S){var O=l.child;for(O!==null&&(O.return=l);O!==null;){var L=O.dependencies;if(L!==null){var W=O.child;L=L.firstContext;e:for(;L!==null;){var le=L;L=O;for(var Ie=0;Ie<h.length;Ie++)if(le.context===h[Ie]){L.lanes|=g,le=L.alternate,le!==null&&(le.lanes|=g),wf(L.return,g,l),S||(W=null);break e}L=le.next}}else if(O.tag===18){if(W=O.return,W===null)throw Error(s(341));W.lanes|=g,L=W.alternate,L!==null&&(L.lanes|=g),wf(W,g,l),W=null}else W=O.child;if(W!==null)W.return=O;else for(W=O;W!==null;){if(W===l){W=null;break}if(O=W.sibling,O!==null){O.return=W.return,W=O;break}W=W.return}O=W}}function La(l,h,g,S){l=null;for(var O=h,L=!1;O!==null;){if(!L){if((O.flags&524288)!==0)L=!0;else if((O.flags&262144)!==0)break}if(O.tag===10){var W=O.alternate;if(W===null)throw Error(s(387));if(W=W.memoizedProps,W!==null){var le=O.type;ua(O.pendingProps.value,W.value)||(l!==null?l.push(le):l=[le])}}else if(O===Jt.current){if(W=O.alternate,W===null)throw Error(s(387));W.memoizedState.memoizedState!==O.memoizedState.memoizedState&&(l!==null?l.push(Jf):l=[Jf])}O=O.return}l!==null&&Sf(h,l,g,S),h.flags|=262144}function ic(l){for(l=l.firstContext;l!==null;){if(!ua(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Os(l){to=l,as=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Yn(l){return Af(to,l)}function oh(l,h){return to===null&&Os(l),Af(l,h)}function Af(l,h){var g=h._currentValue;if(h={context:h,memoizedValue:g,next:null},as===null){if(l===null)throw Error(s(308));as=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else as=as.next=h;return g}var Cd=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(g,S){l.push(S)}};this.abort=function(){h.aborted=!0,l.forEach(function(g){return g()})}},hm=e.unstable_scheduleCallback,Dd=e.unstable_NormalPriority,Fn={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ss(){return{controller:new Cd,data:new Map,refCount:0}}function ac(l){l.refCount--,l.refCount===0&&hm(Dd,function(){l.controller.abort()})}var Fi=null,Ba=0,nu=0,Ui=null;function $g(l,h){if(Fi===null){var g=Fi=[];Ba=0,nu=_y(),Ui={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Ba++,h.then(oc,oc),h}function oc(){if(--Ba===0&&Fi!==null){Ui!==null&&(Ui.status="fulfilled");var l=Fi;Fi=null,nu=0,Ui=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function sh(l,h){var g=[],S={status:"pending",value:null,reason:null,then:function(O){g.push(O)}};return l.then(function(){S.status="fulfilled",S.value=h;for(var O=0;O<g.length;O++)(0,g[O])(h)},function(O){for(S.status="rejected",S.reason=O,O=0;O<g.length;O++)(0,g[O])(void 0)}),S}var fi=Le.S;Le.S=function(l,h){h_=gi(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&$g(l,h),fi!==null&&fi(l,h)};var Ao=Oe(null);function Tf(){var l=Ao.current;return l!==null?l:_n.pooledCache}function Ef(l,h){h===null?Dt(Ao,Ao.current):Dt(Ao,h.pool)}function fm(){var l=Tf();return l===null?null:{parent:Fn._currentValue,pool:l}}var To=Error(s(460)),gl=Error(s(474)),da=Error(s(542)),zt={then:function(){}};function lh(l){return l=l.status,l==="fulfilled"||l==="rejected"}function Mf(l,h,g){switch(g=l[g],g===void 0?l.push(h):g!==h&&(h.then(wo,wo),h=g),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,Pf(l),l;default:if(typeof h.status=="string")h.then(wo,wo);else{if(l=_n,l!==null&&100<l.shellSuspendCounter)throw Error(s(482));l=h,l.status="pending",l.then(function(S){if(h.status==="pending"){var O=h;O.status="fulfilled",O.value=S}},function(S){if(h.status==="pending"){var O=h;O.status="rejected",O.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,Pf(l),l}throw Eo=h,To}}function ro(l){try{var h=l._init;return h(l._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Eo=g,To):g}}var Eo=null;function sc(){if(Eo===null)throw Error(s(459));var l=Eo;return Eo=null,l}function Pf(l){if(l===To||l===da)throw Error(s(483))}var ls=null,iu=0;function uh(l){var h=iu;return iu+=1,ls===null&&(ls=[]),Mf(ls,l,h)}function us(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function Cf(l,h){throw h.$$typeof===U?Error(s(525)):(l=Object.prototype.toString.call(h),Error(s(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function ch(l){function h(Fe,Be){if(l){var Ke=Fe.deletions;Ke===null?(Fe.deletions=[Be],Fe.flags|=16):Ke.push(Be)}}function g(Fe,Be){if(!l)return null;for(;Be!==null;)h(Fe,Be),Be=Be.sibling;return null}function S(Fe){for(var Be=new Map;Fe!==null;)Fe.key!==null?Be.set(Fe.key,Fe):Be.set(Fe.index,Fe),Fe=Fe.sibling;return Be}function O(Fe,Be){return Fe=ka(Fe,Be),Fe.index=0,Fe.sibling=null,Fe}function L(Fe,Be,Ke){return Fe.index=Ke,l?(Ke=Fe.alternate,Ke!==null?(Ke=Ke.index,Ke<Be?(Fe.flags|=67108866,Be):Ke):(Fe.flags|=67108866,Be)):(Fe.flags|=1048576,Be)}function W(Fe){return l&&Fe.alternate===null&&(Fe.flags|=67108866),Fe}function le(Fe,Be,Ke,pt){return Be===null||Be.tag!==6?(Be=Ed(Ke,Fe.mode,pt),Be.return=Fe,Be):(Be=O(Be,Ke),Be.return=Fe,Be)}function Ie(Fe,Be,Ke,pt){var er=Ke.type;return er===Z?ht(Fe,Be,Ke.props.children,pt,Ke.key):Be!==null&&(Be.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===gt&&ro(er)===Be.type)?(Be=O(Be,Ke.props),us(Be,Ke),Be.return=Fe,Be):(Be=xf(Ke.type,Ke.key,Ke.props,null,Fe.mode,pt),us(Be,Ke),Be.return=Fe,Be)}function Je(Fe,Be,Ke,pt){return Be===null||Be.tag!==4||Be.stateNode.containerInfo!==Ke.containerInfo||Be.stateNode.implementation!==Ke.implementation?(Be=fl(Ke,Fe.mode,pt),Be.return=Fe,Be):(Be=O(Be,Ke.children||[]),Be.return=Fe,Be)}function ht(Fe,Be,Ke,pt,er){return Be===null||Be.tag!==7?(Be=hl(Ke,Fe.mode,pt,er),Be.return=Fe,Be):(Be=O(Be,Ke),Be.return=Fe,Be)}function vt(Fe,Be,Ke){if(typeof Be=="string"&&Be!==""||typeof Be=="number"||typeof Be=="bigint")return Be=Ed(""+Be,Fe.mode,Ke),Be.return=Fe,Be;if(typeof Be=="object"&&Be!==null){switch(Be.$$typeof){case V:return Ke=xf(Be.type,Be.key,Be.props,null,Fe.mode,Ke),us(Ke,Be),Ke.return=Fe,Ke;case Q:return Be=fl(Be,Fe.mode,Ke),Be.return=Fe,Be;case gt:return Be=ro(Be),vt(Fe,Be,Ke)}if(Ft(Be)||De(Be))return Be=hl(Be,Fe.mode,Ke,null),Be.return=Fe,Be;if(typeof Be.then=="function")return vt(Fe,uh(Be),Ke);if(Be.$$typeof===me)return vt(Fe,oh(Fe,Be),Ke);Cf(Fe,Be)}return null}function et(Fe,Be,Ke,pt){var er=Be!==null?Be.key:null;if(typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint")return er!==null?null:le(Fe,Be,""+Ke,pt);if(typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case V:return Ke.key===er?Ie(Fe,Be,Ke,pt):null;case Q:return Ke.key===er?Je(Fe,Be,Ke,pt):null;case gt:return Ke=ro(Ke),et(Fe,Be,Ke,pt)}if(Ft(Ke)||De(Ke))return er!==null?null:ht(Fe,Be,Ke,pt,null);if(typeof Ke.then=="function")return et(Fe,Be,uh(Ke),pt);if(Ke.$$typeof===me)return et(Fe,Be,oh(Fe,Ke),pt);Cf(Fe,Ke)}return null}function rt(Fe,Be,Ke,pt,er){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return Fe=Fe.get(Ke)||null,le(Be,Fe,""+pt,er);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case V:return Fe=Fe.get(pt.key===null?Ke:pt.key)||null,Ie(Be,Fe,pt,er);case Q:return Fe=Fe.get(pt.key===null?Ke:pt.key)||null,Je(Be,Fe,pt,er);case gt:return pt=ro(pt),rt(Fe,Be,Ke,pt,er)}if(Ft(pt)||De(pt))return Fe=Fe.get(Ke)||null,ht(Be,Fe,pt,er,null);if(typeof pt.then=="function")return rt(Fe,Be,Ke,uh(pt),er);if(pt.$$typeof===me)return rt(Fe,Be,Ke,oh(Be,pt),er);Cf(Be,pt)}return null}function qt(Fe,Be,Ke,pt){for(var er=null,$r=null,Ht=Be,Xt=Be=0,Tr=null;Ht!==null&&Xt<Ke.length;Xt++){Ht.index>Xt?(Tr=Ht,Ht=null):Tr=Ht.sibling;var Vr=et(Fe,Ht,Ke[Xt],pt);if(Vr===null){Ht===null&&(Ht=Tr);break}l&&Ht&&Vr.alternate===null&&h(Fe,Ht),Be=L(Vr,Be,Xt),$r===null?er=Vr:$r.sibling=Vr,$r=Vr,Ht=Tr}if(Xt===Ke.length)return g(Fe,Ht),br&&Ms(Fe,Xt),er;if(Ht===null){for(;Xt<Ke.length;Xt++)Ht=vt(Fe,Ke[Xt],pt),Ht!==null&&(Be=L(Ht,Be,Xt),$r===null?er=Ht:$r.sibling=Ht,$r=Ht);return br&&Ms(Fe,Xt),er}for(Ht=S(Ht);Xt<Ke.length;Xt++)Tr=rt(Ht,Fe,Xt,Ke[Xt],pt),Tr!==null&&(l&&Tr.alternate!==null&&Ht.delete(Tr.key===null?Xt:Tr.key),Be=L(Tr,Be,Xt),$r===null?er=Tr:$r.sibling=Tr,$r=Tr);return l&&Ht.forEach(function(Tu){return h(Fe,Tu)}),br&&Ms(Fe,Xt),er}function nr(Fe,Be,Ke,pt){if(Ke==null)throw Error(s(151));for(var er=null,$r=null,Ht=Be,Xt=Be=0,Tr=null,Vr=Ke.next();Ht!==null&&!Vr.done;Xt++,Vr=Ke.next()){Ht.index>Xt?(Tr=Ht,Ht=null):Tr=Ht.sibling;var Tu=et(Fe,Ht,Vr.value,pt);if(Tu===null){Ht===null&&(Ht=Tr);break}l&&Ht&&Tu.alternate===null&&h(Fe,Ht),Be=L(Tu,Be,Xt),$r===null?er=Tu:$r.sibling=Tu,$r=Tu,Ht=Tr}if(Vr.done)return g(Fe,Ht),br&&Ms(Fe,Xt),er;if(Ht===null){for(;!Vr.done;Xt++,Vr=Ke.next())Vr=vt(Fe,Vr.value,pt),Vr!==null&&(Be=L(Vr,Be,Xt),$r===null?er=Vr:$r.sibling=Vr,$r=Vr);return br&&Ms(Fe,Xt),er}for(Ht=S(Ht);!Vr.done;Xt++,Vr=Ke.next())Vr=rt(Ht,Fe,Xt,Vr.value,pt),Vr!==null&&(l&&Vr.alternate!==null&&Ht.delete(Vr.key===null?Xt:Vr.key),Be=L(Vr,Be,Xt),$r===null?er=Vr:$r.sibling=Vr,$r=Vr);return l&&Ht.forEach(function(Zy){return h(Fe,Zy)}),br&&Ms(Fe,Xt),er}function ln(Fe,Be,Ke,pt){if(typeof Ke=="object"&&Ke!==null&&Ke.type===Z&&Ke.key===null&&(Ke=Ke.props.children),typeof Ke=="object"&&Ke!==null){switch(Ke.$$typeof){case V:e:{for(var er=Ke.key;Be!==null;){if(Be.key===er){if(er=Ke.type,er===Z){if(Be.tag===7){g(Fe,Be.sibling),pt=O(Be,Ke.props.children),pt.return=Fe,Fe=pt;break e}}else if(Be.elementType===er||typeof er=="object"&&er!==null&&er.$$typeof===gt&&ro(er)===Be.type){g(Fe,Be.sibling),pt=O(Be,Ke.props),us(pt,Ke),pt.return=Fe,Fe=pt;break e}g(Fe,Be);break}else h(Fe,Be);Be=Be.sibling}Ke.type===Z?(pt=hl(Ke.props.children,Fe.mode,pt,Ke.key),pt.return=Fe,Fe=pt):(pt=xf(Ke.type,Ke.key,Ke.props,null,Fe.mode,pt),us(pt,Ke),pt.return=Fe,Fe=pt)}return W(Fe);case Q:e:{for(er=Ke.key;Be!==null;){if(Be.key===er)if(Be.tag===4&&Be.stateNode.containerInfo===Ke.containerInfo&&Be.stateNode.implementation===Ke.implementation){g(Fe,Be.sibling),pt=O(Be,Ke.children||[]),pt.return=Fe,Fe=pt;break e}else{g(Fe,Be);break}else h(Fe,Be);Be=Be.sibling}pt=fl(Ke,Fe.mode,pt),pt.return=Fe,Fe=pt}return W(Fe);case gt:return Ke=ro(Ke),ln(Fe,Be,Ke,pt)}if(Ft(Ke))return qt(Fe,Be,Ke,pt);if(De(Ke)){if(er=De(Ke),typeof er!="function")throw Error(s(150));return Ke=er.call(Ke),nr(Fe,Be,Ke,pt)}if(typeof Ke.then=="function")return ln(Fe,Be,uh(Ke),pt);if(Ke.$$typeof===me)return ln(Fe,Be,oh(Fe,Ke),pt);Cf(Fe,Ke)}return typeof Ke=="string"&&Ke!==""||typeof Ke=="number"||typeof Ke=="bigint"?(Ke=""+Ke,Be!==null&&Be.tag===6?(g(Fe,Be.sibling),pt=O(Be,Ke),pt.return=Fe,Fe=pt):(g(Fe,Be),pt=Ed(Ke,Fe.mode,pt),pt.return=Fe,Fe=pt),W(Fe)):g(Fe,Be)}return function(Fe,Be,Ke,pt){try{iu=0;var er=ln(Fe,Be,Ke,pt);return ls=null,er}catch(Ht){if(Ht===To||Ht===da)throw Ht;var $r=za(29,Ht,null,Fe.mode);return $r.lanes=pt,$r.return=Fe,$r}}}var cs=ch(!0),Id=ch(!1),hs=!1;function Df(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hh(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function fs(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function zs(l,h,g){var S=l.updateQueue;if(S===null)return null;if(S=S.shared,(en&2)!==0){var O=S.pending;return O===null?h.next=h:(h.next=O.next,O.next=h),S.pending=h,h=tc(l),Td(l,null,g),h}return ih(l,S,h,g),tc(l)}function no(l,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194048)!==0)){var S=h.lanes;S&=l.pendingLanes,g|=S,h.lanes=g,$n(l,g)}}function Fr(l,h){var g=l.updateQueue,S=l.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var O=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var W={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};L===null?O=L=W:L=L.next=W,g=g.next}while(g!==null);L===null?O=L=h:L=L.next=h}else O=L=h;g={baseState:S.baseState,firstBaseUpdate:O,lastBaseUpdate:L,shared:S.shared,callbacks:S.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=h:l.next=h,g.lastBaseUpdate=h}var Od=!1;function ks(){if(Od){var l=Ui;if(l!==null)throw l}}function yl(l,h,g,S){Od=!1;var O=l.updateQueue;hs=!1;var L=O.firstBaseUpdate,W=O.lastBaseUpdate,le=O.shared.pending;if(le!==null){O.shared.pending=null;var Ie=le,Je=Ie.next;Ie.next=null,W===null?L=Je:W.next=Je,W=Ie;var ht=l.alternate;ht!==null&&(ht=ht.updateQueue,le=ht.lastBaseUpdate,le!==W&&(le===null?ht.firstBaseUpdate=Je:le.next=Je,ht.lastBaseUpdate=Ie))}if(L!==null){var vt=O.baseState;W=0,ht=Je=Ie=null,le=L;do{var et=le.lane&-536870913,rt=et!==le.lane;if(rt?(Mr&et)===et:(S&et)===et){et!==0&&et===nu&&(Od=!0),ht!==null&&(ht=ht.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var qt=l,nr=le;et=h;var ln=g;switch(nr.tag){case 1:if(qt=nr.payload,typeof qt=="function"){vt=qt.call(ln,vt,et);break e}vt=qt;break e;case 3:qt.flags=qt.flags&-65537|128;case 0:if(qt=nr.payload,et=typeof qt=="function"?qt.call(ln,vt,et):qt,et==null)break e;vt=k({},vt,et);break e;case 2:hs=!0}}et=le.callback,et!==null&&(l.flags|=64,rt&&(l.flags|=8192),rt=O.callbacks,rt===null?O.callbacks=[et]:rt.push(et))}else rt={lane:et,tag:le.tag,payload:le.payload,callback:le.callback,next:null},ht===null?(Je=ht=rt,Ie=vt):ht=ht.next=rt,W|=et;if(le=le.next,le===null){if(le=O.shared.pending,le===null)break;rt=le,le=rt.next,rt.next=null,O.lastBaseUpdate=rt,O.shared.pending=null}}while(!0);ht===null&&(Ie=vt),O.baseState=Ie,O.firstBaseUpdate=Je,O.lastBaseUpdate=ht,L===null&&(O.shared.lanes=0),vu|=W,l.lanes=W,l.memoizedState=vt}}function fh(l,h){if(typeof l!="function")throw Error(s(191,l));l.call(h)}function If(l,h){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)fh(g[l],h)}var au=Oe(null),dh=Oe(0);function zd(l,h){l=yu,Dt(dh,l),Dt(au,h),yu=l|h.baseLanes}function ja(){Dt(dh,yu),Dt(au,au.current)}function ou(){yu=dh.current,ot(au),ot(dh)}var Bt=Oe(null),Ut=null;function io(l){var h=l.alternate;Dt(In,In.current&1),Dt(Bt,l),Ut===null&&(h===null||au.current!==null||h.memoizedState!==null)&&(Ut=l)}function lc(l){Dt(In,In.current),Dt(Bt,l),Ut===null&&(Ut=l)}function ph(l){l.tag===22?(Dt(In,In.current),Dt(Bt,l),Ut===null&&(Ut=l)):Un()}function Un(){Dt(In,In.current),Dt(Bt,Bt.current)}function Sn(l){ot(Bt),Ut===l&&(Ut=null),ot(In)}var In=Oe(0);function mh(l){for(var h=l;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||ya(g)||ni(g)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Rs=0,mr=null,Rr=null,pr=null,yn=!1,ao=!1,Mo=!1,su=0,lu=0,Ls=null,kd=0;function hn(){throw Error(s(321))}function Po(l,h){if(h===null)return!1;for(var g=0;g<h.length&&g<l.length;g++)if(!ua(l[g],h[g]))return!1;return!0}function uc(l,h,g,S,O,L){return Rs=L,mr=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Le.H=l===null||l.memoizedState===null?Jr:Wn,Mo=!1,L=g(S,O),Mo=!1,ao&&(L=gh(h,g,S,O)),cc(l),L}function cc(l){Le.H=Ur;var h=Rr!==null&&Rr.next!==null;if(Rs=0,pr=Rr=mr=null,yn=!1,lu=0,Ls=null,h)throw Error(s(300));l===null||bi||(l=l.dependencies,l!==null&&ic(l)&&(bi=!0))}function gh(l,h,g,S){mr=l;var O=0;do{if(ao&&(Ls=null),lu=0,ao=!1,25<=O)throw Error(s(301));if(O+=1,pr=Rr=null,l.updateQueue!=null){var L=l.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}Le.H=ri,L=h(g,S)}while(ao);return L}function yh(){var l=Le.H,h=l.useState()[0];return h=typeof h.then=="function"?uu(h):h,l=l.useState()[0],(Rr!==null?Rr.memoizedState:null)!==l&&(mr.flags|=1024),h}function vh(){var l=su!==0;return su=0,l}function vl(l,h,g){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~g}function Bs(l){if(yn){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}yn=!1}Rs=0,pr=Rr=mr=null,ao=!1,lu=su=0,Ls=null}function Ii(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?mr.memoizedState=pr=l:pr=pr.next=l,pr}function vn(){if(Rr===null){var l=mr.alternate;l=l!==null?l.memoizedState:null}else l=Rr.next;var h=pr===null?mr.memoizedState:pr.next;if(h!==null)pr=h,Rr=l;else{if(l===null)throw mr.alternate===null?Error(s(467)):Error(s(310));Rr=l,l={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},pr===null?mr.memoizedState=pr=l:pr=pr.next=l}return pr}function ds(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(l){var h=lu;return lu+=1,Ls===null&&(Ls=[]),l=Mf(Ls,l,h),h=mr,(pr===null?h.memoizedState:pr.next)===null&&(h=h.alternate,Le.H=h===null||h.memoizedState===null?Jr:Wn),l}function cu(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return uu(l);if(l.$$typeof===me)return Yn(l)}throw Error(s(438,String(l)))}function hc(l){var h=null,g=mr.updateQueue;if(g!==null&&(h=g.memoCache),h==null){var S=mr.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(O){return O.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),g===null&&(g=ds(),mr.updateQueue=g),g.memoCache=h,g=h.data[h.index],g===void 0)for(g=h.data[h.index]=Array(l),S=0;S<l;S++)g[S]=It;return h.index++,g}function Co(l,h){return typeof h=="function"?h(l):h}function w(l){var h=vn();return n(h,Rr,l)}function n(l,h,g){var S=l.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=g;var O=l.baseQueue,L=S.pending;if(L!==null){if(O!==null){var W=O.next;O.next=L.next,L.next=W}h.baseQueue=O=L,S.pending=null}if(L=l.baseState,O===null)l.memoizedState=L;else{h=O.next;var le=W=null,Ie=null,Je=h,ht=!1;do{var vt=Je.lane&-536870913;if(vt!==Je.lane?(Mr&vt)===vt:(Rs&vt)===vt){var et=Je.revertLane;if(et===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null}),vt===nu&&(ht=!0);else if((Rs&et)===et){Je=Je.next,et===nu&&(ht=!0);continue}else vt={lane:0,revertLane:Je.revertLane,gesture:null,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Ie===null?(le=Ie=vt,W=L):Ie=Ie.next=vt,mr.lanes|=et,vu|=et;vt=Je.action,Mo&&g(L,vt),L=Je.hasEagerState?Je.eagerState:g(L,vt)}else et={lane:vt,revertLane:Je.revertLane,gesture:Je.gesture,action:Je.action,hasEagerState:Je.hasEagerState,eagerState:Je.eagerState,next:null},Ie===null?(le=Ie=et,W=L):Ie=Ie.next=et,mr.lanes|=vt,vu|=vt;Je=Je.next}while(Je!==null&&Je!==h);if(Ie===null?W=L:Ie.next=le,!ua(L,l.memoizedState)&&(bi=!0,ht&&(g=Ui,g!==null)))throw g;l.memoizedState=L,l.baseState=W,l.baseQueue=Ie,S.lastRenderedState=L}return O===null&&(S.lanes=0),[l.memoizedState,S.dispatch]}function u(l){var h=vn(),g=h.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=l;var S=g.dispatch,O=g.pending,L=h.memoizedState;if(O!==null){g.pending=null;var W=O=O.next;do L=l(L,W.action),W=W.next;while(W!==O);ua(L,h.memoizedState)||(bi=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),g.lastRenderedState=L}return[L,S]}function d(l,h,g){var S=mr,O=vn(),L=br;if(L){if(g===void 0)throw Error(s(407));g=g()}else g=h();var W=!ua((Rr||O).memoizedState,g);if(W&&(O.memoizedState=g,bi=!0),O=O.queue,Xe(E.bind(null,S,O,l),[l]),O.getSnapshot!==h||W||pr!==null&&pr.memoizedState.tag&1){if(S.flags|=2048,_e(9,{destroy:void 0},A.bind(null,S,O,g,h),null),_n===null)throw Error(s(349));L||(Rs&127)!==0||v(S,h,g)}return g}function v(l,h,g){l.flags|=16384,l={getSnapshot:h,value:g},h=mr.updateQueue,h===null?(h=ds(),mr.updateQueue=h,h.stores=[l]):(g=h.stores,g===null?h.stores=[l]:g.push(l))}function A(l,h,g,S){h.value=g,h.getSnapshot=S,I(h)&&R(l)}function E(l,h,g){return g(function(){I(h)&&R(l)})}function I(l){var h=l.getSnapshot;l=l.value;try{var g=h();return!ua(l,g)}catch{return!0}}function R(l){var h=eo(l,2);h!==null&&fo(h,l,2)}function j(l){var h=Ii();if(typeof l=="function"){var g=l;if(l=g(),Mo){Ze(!0);try{g()}finally{Ze(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:l},h}function F(l,h,g,S){return l.baseState=g,n(l,Rr,typeof S=="function"?S:Co)}function Y(l,h,g,S,O){if(Na(l))throw Error(s(485));if(l=h.action,l!==null){var L={payload:O,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){L.listeners.push(W)}};Le.T!==null?g(!0):L.isTransition=!1,S(L),g=h.pending,g===null?(L.next=h.pending=L,X(h,L)):(L.next=g.next,h.pending=g.next=L)}}function X(l,h){var g=h.action,S=h.payload,O=l.state;if(h.isTransition){var L=Le.T,W={};Le.T=W;try{var le=g(O,S),Ie=Le.S;Ie!==null&&Ie(W,le),ee(l,h,le)}catch(Je){fe(l,h,Je)}finally{L!==null&&W.types!==null&&(L.types=W.types),Le.T=L}}else try{L=g(O,S),ee(l,h,L)}catch(Je){fe(l,h,Je)}}function ee(l,h,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){ie(l,h,S)},function(S){return fe(l,h,S)}):ie(l,h,g)}function ie(l,h,g){h.status="fulfilled",h.value=g,pe(h),l.state=g,h=l.pending,h!==null&&(g=h.next,g===h?l.pending=null:(g=g.next,h.next=g,X(l,g)))}function fe(l,h,g){var S=l.pending;if(l.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=g,pe(h),h=h.next;while(h!==S)}l.action=null}function pe(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function de(l,h){return h}function ye(l,h){if(br){var g=_n.formState;if(g!==null){e:{var S=mr;if(br){if(Kr){t:{for(var O=Kr,L=Ra;O.nodeType!==8;){if(!L){O=null;break t}if(O=Ro(O.nextSibling),O===null){O=null;break t}}L=O.data,O=L==="F!"||L==="F"?O:null}if(O){Kr=Ro(O.nextSibling),S=O.data==="F!";break e}}ha(S)}S=!1}S&&(h=g[0])}}return g=Ii(),g.memoizedState=g.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:de,lastRenderedState:h},g.queue=S,g=fc.bind(null,mr,S),S.dispatch=g,S=j(!1),L=ma.bind(null,mr,!1,S.queue),S=Ii(),O={state:h,dispatch:null,action:l,pending:null},S.queue=O,g=Y.bind(null,mr,O,L,g),O.dispatch=g,S.memoizedState=l,[h,g,!1]}function Ae(l){var h=vn();return ge(h,Rr,l)}function ge(l,h,g){if(h=n(l,h,de)[0],l=w(Co)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=uu(h)}catch(W){throw W===To?da:W}else S=h;h=vn();var O=h.queue,L=O.dispatch;return g!==h.memoizedState&&(mr.flags|=2048,_e(9,{destroy:void 0},Se.bind(null,O,g),null)),[S,L,l]}function Se(l,h){l.action=h}function Me(l){var h=vn(),g=Rr;if(g!==null)return ge(h,g,l);vn(),h=h.memoizedState,g=vn();var S=g.queue.dispatch;return g.memoizedState=l,[h,S,!1]}function _e(l,h,g,S){return l={tag:l,create:g,deps:S,inst:h,next:null},h=mr.updateQueue,h===null&&(h=ds(),mr.updateQueue=h),g=h.lastEffect,g===null?h.lastEffect=l.next=l:(S=g.next,g.next=l,l.next=S,h.lastEffect=l),l}function Re(){return vn().memoizedState}function Ye(l,h,g,S){var O=Ii();mr.flags|=l,O.memoizedState=_e(1|h,{destroy:void 0},g,S===void 0?null:S)}function Ge(l,h,g,S){var O=vn();S=S===void 0?null:S;var L=O.memoizedState.inst;Rr!==null&&S!==null&&Po(S,Rr.memoizedState.deps)?O.memoizedState=_e(h,L,g,S):(mr.flags|=l,O.memoizedState=_e(1|h,L,g,S))}function $e(l,h){Ye(8390656,8,l,h)}function Xe(l,h){Ge(2048,8,l,h)}function St(l){mr.flags|=4;var h=mr.updateQueue;if(h===null)h=ds(),mr.updateQueue=h,h.events=[l];else{var g=h.events;g===null?h.events=[l]:g.push(l)}}function At(l){var h=vn().memoizedState;return St({ref:h,nextImpl:l}),function(){if((en&2)!==0)throw Error(s(440));return h.impl.apply(void 0,arguments)}}function ft(l,h){return Ge(4,2,l,h)}function Mt(l,h){return Ge(4,4,l,h)}function or(l,h){if(typeof h=="function"){l=l();var g=h(l);return function(){typeof g=="function"?g():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function Lr(l,h,g){g=g!=null?g.concat([l]):null,Ge(4,4,or.bind(null,h,l),g)}function an(){}function Qr(l,h){var g=vn();h=h===void 0?null:h;var S=g.memoizedState;return h!==null&&Po(h,S[1])?S[0]:(g.memoizedState=[l,h],l)}function fn(l,h){var g=vn();h=h===void 0?null:h;var S=g.memoizedState;if(h!==null&&Po(h,S[1]))return S[0];if(S=l(),Mo){Ze(!0);try{l()}finally{Ze(!1)}}return g.memoizedState=[S,h],S}function Hr(l,h,g){return g===void 0||(Rs&1073741824)!==0&&(Mr&261930)===0?l.memoizedState=h:(l.memoizedState=g,l=d_(),mr.lanes|=l,vu|=l,g)}function An(l,h,g,S){return ua(g,h)?g:au.current!==null?(l=Hr(l,g,S),ua(l,h)||(bi=!0),l):(Rs&42)===0||(Rs&1073741824)!==0&&(Mr&261930)===0?(bi=!0,l.memoizedState=g):(l=d_(),mr.lanes|=l,vu|=l,h)}function dn(l,h,g,S,O){var L=We.p;We.p=L!==0&&8>L?L:8;var W=Le.T,le={};Le.T=le,ma(l,!1,h,g);try{var Ie=O(),Je=Le.S;if(Je!==null&&Je(le,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var ht=sh(Ie,S);Io(l,h,ht,ho(l))}else Io(l,h,S,ho(l))}catch(vt){Io(l,h,{then:function(){},status:"rejected",reason:vt},ho())}finally{We.p=L,W!==null&&le.types!==null&&(W.types=le.types),Le.T=W}}function _i(){}function On(l,h,g,S){if(l.tag!==5)throw Error(s(476));var O=zn(l).queue;dn(l,O,h,_t,g===null?_i:function(){return xi(l),g(S)})}function zn(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:_t,baseState:_t,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:_t},next:null};var g={};return h.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:g},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function xi(l){var h=zn(l);h.next===null&&(h=l.alternate.memoizedState),Io(l,h.next.queue,{},ho())}function ps(){return Yn(Jf)}function ms(){return vn().memoizedState}function Do(){return vn().memoizedState}function pa(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var g=ho();l=fs(g);var S=zs(h,l,g);S!==null&&(fo(S,h,g),no(S,h,g)),h={cache:ss()},l.payload=h;return}h=h.return}}function hu(l,h,g){var S=ho();g={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},Na(l)?oo(h,g):(g=cl(l,h,g,S),g!==null&&(fo(g,l,S),so(g,h,S)))}function fc(l,h,g){var S=ho();Io(l,h,g,S)}function Io(l,h,g,S){var O={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(Na(l))oo(h,O);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var W=h.lastRenderedState,le=L(W,g);if(O.hasEagerState=!0,O.eagerState=le,ua(le,W))return ih(l,h,O,0),_n===null&&eu(),!1}catch{}if(g=cl(l,h,O,S),g!==null)return fo(g,l,S),so(g,h,S),!0}return!1}function ma(l,h,g,S){if(S={lane:2,revertLane:_y(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},Na(l)){if(h)throw Error(s(479))}else h=cl(l,g,S,2),h!==null&&fo(h,l,2)}function Na(l){var h=l.alternate;return l===mr||h!==null&&h===mr}function oo(l,h){ao=yn=!0;var g=l.pending;g===null?h.next=h:(h.next=g.next,g.next=h),l.pending=h}function so(l,h,g){if((g&4194048)!==0){var S=h.lanes;S&=l.pendingLanes,g|=S,h.lanes=g,$n(l,g)}}var Ur={readContext:Yn,use:cu,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn};Ur.useEffectEvent=hn;var Jr={readContext:Yn,use:cu,useCallback:function(l,h){return Ii().memoizedState=[l,h===void 0?null:h],l},useContext:Yn,useEffect:$e,useImperativeHandle:function(l,h,g){g=g!=null?g.concat([l]):null,Ye(4194308,4,or.bind(null,h,l),g)},useLayoutEffect:function(l,h){return Ye(4194308,4,l,h)},useInsertionEffect:function(l,h){Ye(4,2,l,h)},useMemo:function(l,h){var g=Ii();h=h===void 0?null:h;var S=l();if(Mo){Ze(!0);try{l()}finally{Ze(!1)}}return g.memoizedState=[S,h],S},useReducer:function(l,h,g){var S=Ii();if(g!==void 0){var O=g(h);if(Mo){Ze(!0);try{g(h)}finally{Ze(!1)}}}else O=h;return S.memoizedState=S.baseState=O,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:O},S.queue=l,l=l.dispatch=hu.bind(null,mr,l),[S.memoizedState,l]},useRef:function(l){var h=Ii();return l={current:l},h.memoizedState=l},useState:function(l){l=j(l);var h=l.queue,g=fc.bind(null,mr,h);return h.dispatch=g,[l.memoizedState,g]},useDebugValue:an,useDeferredValue:function(l,h){var g=Ii();return Hr(g,l,h)},useTransition:function(){var l=j(!1);return l=dn.bind(null,mr,l.queue,!0,!1),Ii().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,g){var S=mr,O=Ii();if(br){if(g===void 0)throw Error(s(407));g=g()}else{if(g=h(),_n===null)throw Error(s(349));(Mr&127)!==0||v(S,h,g)}O.memoizedState=g;var L={value:g,getSnapshot:h};return O.queue=L,$e(E.bind(null,S,L,l),[l]),S.flags|=2048,_e(9,{destroy:void 0},A.bind(null,S,L,g,h),null),g},useId:function(){var l=Ii(),h=_n.identifierPrefix;if(br){var g=ca,S=ts;g=(S&~(1<<32-lt(S)-1)).toString(32)+g,h="_"+h+"R_"+g,g=su++,0<g&&(h+="H"+g.toString(32)),h+="_"}else g=kd++,h="_"+h+"r_"+g.toString(32)+"_";return l.memoizedState=h},useHostTransitionStatus:ps,useFormState:ye,useActionState:ye,useOptimistic:function(l){var h=Ii();h.memoizedState=h.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=g,h=ma.bind(null,mr,!0,g),g.dispatch=h,[l,h]},useMemoCache:hc,useCacheRefresh:function(){return Ii().memoizedState=pa.bind(null,mr)},useEffectEvent:function(l){var h=Ii(),g={impl:l};return h.memoizedState=g,function(){if((en&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}},Wn={readContext:Yn,use:cu,useCallback:Qr,useContext:Yn,useEffect:Xe,useImperativeHandle:Lr,useInsertionEffect:ft,useLayoutEffect:Mt,useMemo:fn,useReducer:w,useRef:Re,useState:function(){return w(Co)},useDebugValue:an,useDeferredValue:function(l,h){var g=vn();return An(g,Rr.memoizedState,l,h)},useTransition:function(){var l=w(Co)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:uu(l),h]},useSyncExternalStore:d,useId:ms,useHostTransitionStatus:ps,useFormState:Ae,useActionState:Ae,useOptimistic:function(l,h){var g=vn();return F(g,Rr,l,h)},useMemoCache:hc,useCacheRefresh:Do};Wn.useEffectEvent=At;var ri={readContext:Yn,use:cu,useCallback:Qr,useContext:Yn,useEffect:Xe,useImperativeHandle:Lr,useInsertionEffect:ft,useLayoutEffect:Mt,useMemo:fn,useReducer:u,useRef:Re,useState:function(){return u(Co)},useDebugValue:an,useDeferredValue:function(l,h){var g=vn();return Rr===null?Hr(g,l,h):An(g,Rr.memoizedState,l,h)},useTransition:function(){var l=u(Co)[0],h=vn().memoizedState;return[typeof l=="boolean"?l:uu(l),h]},useSyncExternalStore:d,useId:ms,useHostTransitionStatus:ps,useFormState:Me,useActionState:Me,useOptimistic:function(l,h){var g=vn();return Rr!==null?F(g,Rr,l,h):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:hc,useCacheRefresh:Do};ri.useEffectEvent=At;function Of(l,h,g,S){h=l.memoizedState,g=g(S,h),g=g==null?h:k({},h,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var zf={enqueueSetState:function(l,h,g){l=l._reactInternals;var S=ho(),O=fs(S);O.payload=h,g!=null&&(O.callback=g),h=zs(l,O,S),h!==null&&(fo(h,l,S),no(h,l,S))},enqueueReplaceState:function(l,h,g){l=l._reactInternals;var S=ho(),O=fs(S);O.tag=1,O.payload=h,g!=null&&(O.callback=g),h=zs(l,O,S),h!==null&&(fo(h,l,S),no(h,l,S))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var g=ho(),S=fs(g);S.tag=2,h!=null&&(S.callback=h),h=zs(l,S,g),h!==null&&(fo(h,l,g),no(h,l,g))}};function _l(l,h,g,S,O,L,W){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(S,L,W):h.prototype&&h.prototype.isPureReactComponent?!ul(g,S)||!ul(O,L):!0}function dm(l,h,g,S){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==l&&zf.enqueueReplaceState(h,h.state,null)}function xl(l,h){var g=h;if("ref"in h){g={};for(var S in h)S!=="ref"&&(g[S]=h[S])}if(l=l.defaultProps){g===h&&(g=k({},g));for(var O in l)g[O]===void 0&&(g[O]=l[O])}return g}function kf(l){Jo(l)}function js(l){console.error(l)}function Ns(l){Jo(l)}function Oo(l,h){try{var g=l.onUncaughtError;g(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function Rf(l,h,g){try{var S=l.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(O){setTimeout(function(){throw O})}}function _h(l,h,g){return g=fs(g),g.tag=3,g.payload={element:null},g.callback=function(){Oo(l,h)},g}function xh(l){return l=fs(l),l.tag=3,l}function bh(l,h,g,S){var O=g.type.getDerivedStateFromError;if(typeof O=="function"){var L=S.value;l.payload=function(){return O(L)},l.callback=function(){Rf(h,g,S)}}var W=g.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(l.callback=function(){Rf(h,g,S),typeof O!="function"&&(_u===null?_u=new Set([this]):_u.add(this));var le=S.stack;this.componentDidCatch(S.value,{componentStack:le!==null?le:""})})}function pm(l,h,g,S,O){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=g.alternate,h!==null&&La(h,g,O,!0),g=Bt.current,g!==null){switch(g.tag){case 31:case 13:return Ut===null?Jd():g.alternate===null&&Kn===0&&(Kn=3),g.flags&=-257,g.flags|=65536,g.lanes=O,S===zt?g.flags|=16384:(h=g.updateQueue,h===null?g.updateQueue=new Set([S]):h.add(S),Nm(l,S,O)),!1;case 22:return g.flags|=65536,S===zt?g.flags|=16384:(h=g.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=h):(g=h.retryQueue,g===null?h.retryQueue=new Set([S]):g.add(S)),Nm(l,S,O)),!1}throw Error(s(435,g.tag))}return Nm(l,S,O),Jd(),!1}if(br)return h=Bt.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=O,S!==wn&&(l=Error(s(422),{cause:S}),Cs(ta(l,g)))):(S!==wn&&(h=Error(s(423),{cause:S}),Cs(ta(h,g))),l=l.current.alternate,l.flags|=65536,O&=-O,l.lanes|=O,S=ta(S,g),O=_h(l.stateNode,S,O),Fr(l,O),Kn!==4&&(Kn=2)),!1;var L=Error(s(520),{cause:S});if(L=ta(L,g),Yd===null?Yd=[L]:Yd.push(L),Kn!==4&&(Kn=2),h===null)return!0;S=ta(S,g),g=h;do{switch(g.tag){case 3:return g.flags|=65536,l=O&-O,g.lanes|=l,l=_h(g.stateNode,S,l),Fr(g,l),!1;case 1:if(h=g.type,L=g.stateNode,(g.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(_u===null||!_u.has(L))))return g.flags|=65536,O&=-O,g.lanes|=O,O=xh(O),bh(O,l,g,S),Fr(g,O),!1}g=g.return}while(g!==null);return!1}var mm=Error(s(461)),bi=!1;function Oi(l,h,g,S){h.child=l===null?Id(h,null,g,S):cs(h,l.child,g,S)}function Wv(l,h,g,S,O){g=g.render;var L=h.ref;if("ref"in S){var W={};for(var le in S)le!=="ref"&&(W[le]=S[le])}else W=S;return Os(h),S=uc(l,h,g,W,L,O),le=vh(),l!==null&&!bi?(vl(l,h,O),wl(l,h,O)):(br&&le&&ru(h),h.flags|=1,Oi(l,h,S,O),h.child)}function gm(l,h,g,S,O){if(l===null){var L=g.type;return typeof L=="function"&&!_f(L)&&L.defaultProps===void 0&&g.compare===null?(h.tag=15,h.type=L,Xg(l,h,L,S,O)):(l=xf(g.type,null,S,h,h.mode,O),l.ref=h.ref,l.return=h,h.child=l)}if(L=l.child,!Bd(l,O)){var W=L.memoizedProps;if(g=g.compare,g=g!==null?g:ul,g(W,S)&&l.ref===h.ref)return wl(l,h,O)}return h.flags|=1,l=ka(L,S),l.ref=h.ref,l.return=h,h.child=l}function Xg(l,h,g,S,O){if(l!==null){var L=l.memoizedProps;if(ul(L,S)&&l.ref===h.ref)if(bi=!1,h.pendingProps=S=L,Bd(l,O))(l.flags&131072)!==0&&(bi=!0);else return h.lanes=l.lanes,wl(l,h,O)}return Wg(l,h,g,S,O)}function Yg(l,h,g,S){var O=S.children,L=l!==null?l.memoizedState:null;if(l===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((h.flags&128)!==0){if(L=L!==null?L.baseLanes|g:g,l!==null){for(S=h.child=l.child,O=0;S!==null;)O=O|S.lanes|S.childLanes,S=S.sibling;S=O&~L}else S=0,h.child=null;return Kv(l,h,L,g,S)}if((g&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&Ef(h,L!==null?L.cachePool:null),L!==null?zd(h,L):ja(),ph(h);else return S=h.lanes=536870912,Kv(l,h,L!==null?L.baseLanes|g:g,g,S)}else L!==null?(Ef(h,L.cachePool),zd(h,L),Un(),h.memoizedState=null):(l!==null&&Ef(h,null),ja(),Un());return Oi(l,h,O,g),h.child}function bl(l,h){return l!==null&&l.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function Kv(l,h,g,S,O){var L=Tf();return L=L===null?null:{parent:Fn._currentValue,pool:L},h.memoizedState={baseLanes:g,cachePool:L},l!==null&&Ef(h,null),ja(),ph(h),l!==null&&La(l,h,S,!0),h.childLanes=O,null}function fu(l,h){return h=bm({mode:h.mode,children:h.children},l.mode),h.ref=l.ref,l.child=h,h.return=l,h}function Rd(l,h,g){return cs(h,l.child,null,g),l=fu(h,h.pendingProps),l.flags|=2,Sn(h),h.memoizedState=null,l}function ym(l,h,g){var S=h.pendingProps,O=(h.flags&128)!==0;if(h.flags&=-129,l===null){if(br){if(S.mode==="hidden")return l=fu(h,S),h.lanes=536870912,bl(null,l);if(lc(h),(l=Kr)?(l=wc(l,Ra),l=l!==null&&l.data==="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:es!==null?{id:ts,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},g=bf(l),g.return=h,h.child=g,vi=h,Kr=null)):l=null,l===null)throw ha(h);return h.lanes=536870912,null}return fu(h,S)}var L=l.memoizedState;if(L!==null){var W=L.dehydrated;if(lc(h),O)if(h.flags&256)h.flags&=-257,h=Rd(l,h,g);else if(h.memoizedState!==null)h.child=l.child,h.flags|=128,h=null;else throw Error(s(558));else if(bi||La(l,h,g,!1),O=(g&l.childLanes)!==0,bi||O){if(S=_n,S!==null&&(W=Fu(S,g),W!==0&&W!==L.retryLane))throw L.retryLane=W,eo(l,W),fo(S,l,W),mm;Jd(),h=Rd(l,h,g)}else l=L.treeContext,Kr=Ro(W.nextSibling),vi=h,br=!0,Ps=null,Ra=!1,l!==null&&Pd(h,l),h=fu(h,S),h.flags|=4096;return h}return l=ka(l.child,{mode:S.mode,children:S.children}),l.ref=h.ref,h.child=l,l.return=h,l}function vm(l,h){var g=h.ref;if(g===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(l===null||l.ref!==g)&&(h.flags|=4194816)}}function Wg(l,h,g,S,O){return Os(h),g=uc(l,h,g,S,void 0,O),S=vh(),l!==null&&!bi?(vl(l,h,O),wl(l,h,O)):(br&&S&&ru(h),h.flags|=1,Oi(l,h,g,O),h.child)}function Qv(l,h,g,S,O,L){return Os(h),h.updateQueue=null,g=gh(h,S,g,O),cc(l),S=vh(),l!==null&&!bi?(vl(l,h,L),wl(l,h,L)):(br&&S&&ru(h),h.flags|=1,Oi(l,h,g,L),h.child)}function Jv(l,h,g,S,O){if(Os(h),h.stateNode===null){var L=hr,W=g.contextType;typeof W=="object"&&W!==null&&(L=Yn(W)),L=new g(S,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=zf,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=S,L.state=h.memoizedState,L.refs={},Df(h),W=g.contextType,L.context=typeof W=="object"&&W!==null?Yn(W):hr,L.state=h.memoizedState,W=g.getDerivedStateFromProps,typeof W=="function"&&(Of(h,g,W,S),L.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(W=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),W!==L.state&&zf.enqueueReplaceState(L,L.state,null),yl(h,S,L,O),ks(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(l===null){L=h.stateNode;var le=h.memoizedProps,Ie=xl(g,le);L.props=Ie;var Je=L.context,ht=g.contextType;W=hr,typeof ht=="object"&&ht!==null&&(W=Yn(ht));var vt=g.getDerivedStateFromProps;ht=typeof vt=="function"||typeof L.getSnapshotBeforeUpdate=="function",le=h.pendingProps!==le,ht||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(le||Je!==W)&&dm(h,L,S,W),hs=!1;var et=h.memoizedState;L.state=et,yl(h,S,L,O),ks(),Je=h.memoizedState,le||et!==Je||hs?(typeof vt=="function"&&(Of(h,g,vt,S),Je=h.memoizedState),(Ie=hs||_l(h,g,Ie,S,et,Je,W))?(ht||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Je),L.props=S,L.state=Je,L.context=W,S=Ie):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{L=h.stateNode,hh(l,h),W=h.memoizedProps,ht=xl(g,W),L.props=ht,vt=h.pendingProps,et=L.context,Je=g.contextType,Ie=hr,typeof Je=="object"&&Je!==null&&(Ie=Yn(Je)),le=g.getDerivedStateFromProps,(Je=typeof le=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(W!==vt||et!==Ie)&&dm(h,L,S,Ie),hs=!1,et=h.memoizedState,L.state=et,yl(h,S,L,O),ks();var rt=h.memoizedState;W!==vt||et!==rt||hs||l!==null&&l.dependencies!==null&&ic(l.dependencies)?(typeof le=="function"&&(Of(h,g,le,S),rt=h.memoizedState),(ht=hs||_l(h,g,ht,S,et,rt,Ie)||l!==null&&l.dependencies!==null&&ic(l.dependencies))?(Je||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(S,rt,Ie),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(S,rt,Ie)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||W===l.memoizedProps&&et===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&et===l.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=rt),L.props=S,L.state=rt,L.context=Ie,S=ht):(typeof L.componentDidUpdate!="function"||W===l.memoizedProps&&et===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||W===l.memoizedProps&&et===l.memoizedState||(h.flags|=1024),S=!1)}return L=S,vm(l,h),S=(h.flags&128)!==0,L||S?(L=h.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,l!==null&&S?(h.child=cs(h,l.child,null,O),h.child=cs(h,null,g,O)):Oi(l,h,g,O),h.memoizedState=L.state,l=h.child):l=wl(l,h,O),l}function e_(l,h,g,S){return ns(),h.flags|=256,Oi(l,h,g,S),h.child}var _m={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ld(l){return{baseLanes:l,cachePool:fm()}}function xm(l,h,g){return l=l!==null?l.childLanes&~g:0,h&&(l|=ra),l}function Kg(l,h,g){var S=h.pendingProps,O=!1,L=(h.flags&128)!==0,W;if((W=L)||(W=l!==null&&l.memoizedState===null?!1:(In.current&2)!==0),W&&(O=!0,h.flags&=-129),W=(h.flags&32)!==0,h.flags&=-33,l===null){if(br){if(O?io(h):Un(),(l=Kr)?(l=wc(l,Ra),l=l!==null&&l.data!=="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:es!==null?{id:ts,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},g=bf(l),g.return=h,h.child=g,vi=h,Kr=null)):l=null,l===null)throw ha(h);return ni(l)?h.lanes=32:h.lanes=536870912,null}var le=S.children;return S=S.fallback,O?(Un(),O=h.mode,le=bm({mode:"hidden",children:le},O),S=hl(S,O,g,null),le.return=h,S.return=h,le.sibling=S,h.child=le,S=h.child,S.memoizedState=Ld(g),S.childLanes=xm(l,W,g),h.memoizedState=_m,bl(null,S)):(io(h),Qg(h,le))}var Ie=l.memoizedState;if(Ie!==null&&(le=Ie.dehydrated,le!==null)){if(L)h.flags&256?(io(h),h.flags&=-257,h=wm(l,h,g)):h.memoizedState!==null?(Un(),h.child=l.child,h.flags|=128,h=null):(Un(),le=S.fallback,O=h.mode,S=bm({mode:"visible",children:S.children},O),le=hl(le,O,g,null),le.flags|=2,S.return=h,le.return=h,S.sibling=le,h.child=S,cs(h,l.child,null,g),S=h.child,S.memoizedState=Ld(g),S.childLanes=xm(l,W,g),h.memoizedState=_m,h=bl(null,S));else if(io(h),ni(le)){if(W=le.nextSibling&&le.nextSibling.dataset,W)var Je=W.dgst;W=Je,S=Error(s(419)),S.stack="",S.digest=W,Cs({value:S,source:null,stack:null}),h=wm(l,h,g)}else if(bi||La(l,h,g,!1),W=(g&l.childLanes)!==0,bi||W){if(W=_n,W!==null&&(S=Fu(W,g),S!==0&&S!==Ie.retryLane))throw Ie.retryLane=S,eo(l,S),fo(W,l,S),mm;ya(le)||Jd(),h=wm(l,h,g)}else ya(le)?(h.flags|=192,h.child=l.child,h=null):(l=Ie.treeContext,Kr=Ro(le.nextSibling),vi=h,br=!0,Ps=null,Ra=!1,l!==null&&Pd(h,l),h=Qg(h,S.children),h.flags|=4096);return h}return O?(Un(),le=S.fallback,O=h.mode,Ie=l.child,Je=Ie.sibling,S=ka(Ie,{mode:"hidden",children:S.children}),S.subtreeFlags=Ie.subtreeFlags&65011712,Je!==null?le=ka(Je,le):(le=hl(le,O,g,null),le.flags|=2),le.return=h,S.return=h,S.sibling=le,h.child=S,bl(null,S),S=h.child,le=l.child.memoizedState,le===null?le=Ld(g):(O=le.cachePool,O!==null?(Ie=Fn._currentValue,O=O.parent!==Ie?{parent:Ie,pool:Ie}:O):O=fm(),le={baseLanes:le.baseLanes|g,cachePool:O}),S.memoizedState=le,S.childLanes=xm(l,W,g),h.memoizedState=_m,bl(l.child,S)):(io(h),g=l.child,l=g.sibling,g=ka(g,{mode:"visible",children:S.children}),g.return=h,g.sibling=null,l!==null&&(W=h.deletions,W===null?(h.deletions=[l],h.flags|=16):W.push(l)),h.child=g,h.memoizedState=null,g)}function Qg(l,h){return h=bm({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function bm(l,h){return l=za(22,l,null,h),l.lanes=0,l}function wm(l,h,g){return cs(h,l.child,null,g),l=Qg(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function Jg(l,h,g){l.lanes|=h;var S=l.alternate;S!==null&&(S.lanes|=h),wf(l.return,h,g)}function ey(l,h,g,S,O,L){var W=l.memoizedState;W===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:O,treeForkCount:L}:(W.isBackwards=h,W.rendering=null,W.renderingStartTime=0,W.last=S,W.tail=g,W.tailMode=O,W.treeForkCount=L)}function Sm(l,h,g){var S=h.pendingProps,O=S.revealOrder,L=S.tail;S=S.children;var W=In.current,le=(W&2)!==0;if(le?(W=W&1|2,h.flags|=128):W&=1,Dt(In,W),Oi(l,h,S,g),S=br?ml:0,!le&&l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Jg(l,g,h);else if(l.tag===19)Jg(l,g,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(O){case"forwards":for(g=h.child,O=null;g!==null;)l=g.alternate,l!==null&&mh(l)===null&&(O=g),g=g.sibling;g=O,g===null?(O=h.child,h.child=null):(O=g.sibling,g.sibling=null),ey(h,!1,O,g,L,S);break;case"backwards":case"unstable_legacy-backwards":for(g=null,O=h.child,h.child=null;O!==null;){if(l=O.alternate,l!==null&&mh(l)===null){h.child=O;break}l=O.sibling,O.sibling=g,g=O,O=l}ey(h,!0,g,null,L,S);break;case"together":ey(h,!1,null,null,void 0,S);break;default:h.memoizedState=null}return h.child}function wl(l,h,g){if(l!==null&&(h.dependencies=l.dependencies),vu|=h.lanes,(g&h.childLanes)===0)if(l!==null){if(La(l,h,g,!1),(g&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(s(153));if(h.child!==null){for(l=h.child,g=ka(l,l.pendingProps),h.child=g,g.return=h;l.sibling!==null;)l=l.sibling,g=g.sibling=ka(l,l.pendingProps),g.return=h;g.sibling=null}return h.child}function Bd(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&ic(l)))}function jd(l,h,g){switch(h.tag){case 3:zr(h,h.stateNode.containerInfo),Is(h,Fn,l.memoizedState.cache),ns();break;case 27:case 5:tr(h);break;case 4:zr(h,h.stateNode.containerInfo);break;case 10:Is(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,lc(h),null;break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(io(h),h.flags|=128,null):(g&h.child.childLanes)!==0?Kg(l,h,g):(io(h),l=wl(l,h,g),l!==null?l.sibling:null);io(h);break;case 19:var O=(l.flags&128)!==0;if(S=(g&h.childLanes)!==0,S||(La(l,h,g,!1),S=(g&h.childLanes)!==0),O){if(S)return Sm(l,h,g);h.flags|=128}if(O=h.memoizedState,O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Dt(In,In.current),S)break;return null;case 22:return h.lanes=0,Yg(l,h,g,h.pendingProps);case 24:Is(h,Fn,l.memoizedState.cache)}return wl(l,h,g)}function ga(l,h,g){if(l!==null)if(l.memoizedProps!==h.pendingProps)bi=!0;else{if(!Bd(l,g)&&(h.flags&128)===0)return bi=!1,jd(l,h,g);bi=(l.flags&131072)!==0}else bi=!1,br&&(h.flags&1048576)!==0&&Md(h,ml,h.index);switch(h.lanes=0,h.tag){case 16:e:{var S=h.pendingProps;if(l=ro(h.elementType),h.type=l,typeof l=="function")_f(l)?(S=xl(l,S),h.tag=1,h=Jv(null,h,l,S,g)):(h.tag=0,h=Wg(null,h,l,S,g));else{if(l!=null){var O=l.$$typeof;if(O===Ce){h.tag=11,h=Wv(null,h,l,S,g);break e}else if(O===je){h.tag=14,h=gm(null,h,l,S,g);break e}}throw h=Ct(l)||l,Error(s(306,h,""))}}return h;case 0:return Wg(l,h,h.type,h.pendingProps,g);case 1:return S=h.type,O=xl(S,h.pendingProps),Jv(l,h,S,O,g);case 3:e:{if(zr(h,h.stateNode.containerInfo),l===null)throw Error(s(387));S=h.pendingProps;var L=h.memoizedState;O=L.element,hh(l,h),yl(h,S,null,g);var W=h.memoizedState;if(S=W.cache,Is(h,Fn,S),S!==L.cache&&Sf(h,[Fn],g,!0),ks(),S=W.element,L.isDehydrated)if(L={element:S,isDehydrated:!1,cache:W.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=e_(l,h,S,g);break e}else if(S!==O){O=ta(Error(s(424)),h),Cs(O),h=e_(l,h,S,g);break e}else for(l=h.stateNode.containerInfo,l.nodeType===9?l=l.body:l=l.nodeName==="HTML"?l.ownerDocument.body:l,Kr=Ro(l.firstChild),vi=h,br=!0,Ps=null,Ra=!0,g=Id(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(ns(),S===O){h=wl(l,h,g);break e}Oi(l,h,S,g)}h=h.child}return h;case 26:return vm(l,h),l===null?(g=ky(h.type,null,h.pendingProps,null))?h.memoizedState=g:br||(g=h.type,l=h.pendingProps,S=ap(Qt.current).createElement(g),S[nn]=h,S[Et]=l,ki(S,g,l),Pn(S),h.stateNode=S):h.memoizedState=ky(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return tr(h),l===null&&br&&(S=h.stateNode=k_(h.type,h.pendingProps,Qt.current),vi=h,Ra=!0,O=Kr,bc(h.type)?(Ga=O,Kr=Ro(S.firstChild)):Kr=O),Oi(l,h,h.pendingProps.children,g),vm(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&br&&((O=S=Kr)&&(S=Vi(S,h.type,h.pendingProps,Ra),S!==null?(h.stateNode=S,vi=h,Kr=Ro(S.firstChild),Ra=!1,O=!0):O=!1),O||ha(h)),tr(h),O=h.type,L=h.pendingProps,W=l!==null?l.memoizedProps:null,S=L.children,Wm(O,L)?S=null:W!==null&&Wm(O,W)&&(h.flags|=32),h.memoizedState!==null&&(O=uc(l,h,yh,null,null,g),Jf._currentValue=O),vm(l,h),Oi(l,h,S,g),h.child;case 6:return l===null&&br&&((l=g=Kr)&&(g=qs(g,h.pendingProps,Ra),g!==null?(h.stateNode=g,vi=h,Kr=null,l=!0):l=!1),l||ha(h)),null;case 13:return Kg(l,h,g);case 4:return zr(h,h.stateNode.containerInfo),S=h.pendingProps,l===null?h.child=cs(h,null,S,g):Oi(l,h,S,g),h.child;case 11:return Wv(l,h,h.type,h.pendingProps,g);case 7:return Oi(l,h,h.pendingProps,g),h.child;case 8:return Oi(l,h,h.pendingProps.children,g),h.child;case 12:return Oi(l,h,h.pendingProps.children,g),h.child;case 10:return S=h.pendingProps,Is(h,h.type,S.value),Oi(l,h,S.children,g),h.child;case 9:return O=h.type._context,S=h.pendingProps.children,Os(h),O=Yn(O),S=S(O),h.flags|=1,Oi(l,h,S,g),h.child;case 14:return gm(l,h,h.type,h.pendingProps,g);case 15:return Xg(l,h,h.type,h.pendingProps,g);case 19:return Sm(l,h,g);case 31:return ym(l,h,g);case 22:return Yg(l,h,g,h.pendingProps);case 24:return Os(h),S=Yn(Fn),l===null?(O=Tf(),O===null&&(O=_n,L=ss(),O.pooledCache=L,L.refCount++,L!==null&&(O.pooledCacheLanes|=g),O=L),h.memoizedState={parent:S,cache:O},Df(h),Is(h,Fn,O)):((l.lanes&g)!==0&&(hh(l,h),yl(h,null,null,g),ks()),O=l.memoizedState,L=h.memoizedState,O.parent!==S?(O={parent:S,cache:S},h.memoizedState=O,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=O),Is(h,Fn,S)):(S=L.cache,Is(h,Fn,S),S!==O.cache&&Sf(h,[Fn],g,!0))),Oi(l,h,h.pendingProps.children,g),h.child;case 29:throw h.pendingProps}throw Error(s(156,h.tag))}function Sl(l){l.flags|=4}function Nd(l,h,g,S,O){if((h=(l.mode&32)!==0)&&(h=!1),h){if(l.flags|=16777216,(O&335544128)===O)if(l.stateNode.complete)l.flags|=8192;else if(fy())l.flags|=8192;else throw Eo=zt,gl}else l.flags&=-16777217}function t_(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!up(h))if(fy())l.flags|=8192;else throw Eo=zt,gl}function Fd(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?Nr():536870912,l.lanes|=h,Eh|=h)}function Ud(l,h){if(!br)switch(l.tailMode){case"hidden":h=l.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:S.sibling=null}}function kn(l){var h=l.alternate!==null&&l.alternate.child===l.child,g=0,S=0;if(h)for(var O=l.child;O!==null;)g|=O.lanes|O.childLanes,S|=O.subtreeFlags&65011712,S|=O.flags&65011712,O.return=l,O=O.sibling;else for(O=l.child;O!==null;)g|=O.lanes|O.childLanes,S|=O.subtreeFlags,S|=O.flags,O.return=l,O=O.sibling;return l.subtreeFlags|=S,l.childLanes=g,h}function r_(l,h,g){var S=h.pendingProps;switch(nc(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(h),null;case 1:return kn(h),null;case 3:return g=h.stateNode,S=null,l!==null&&(S=l.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),os(Fn),ct(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(rs(h)?Sl(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,is())),kn(h),null;case 26:var O=h.type,L=h.memoizedState;return l===null?(Sl(h),L!==null?(kn(h),t_(h,L)):(kn(h),Nd(h,O,null,S,g))):L?L!==l.memoizedState?(Sl(h),kn(h),t_(h,L)):(kn(h),h.flags&=-16777217):(l=l.memoizedProps,l!==S&&Sl(h),kn(h),Nd(h,O,l,S,g)),null;case 27:if(gr(h),g=Qt.current,O=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Sl(h);else{if(!S){if(h.stateNode===null)throw Error(s(166));return kn(h),null}l=Rt.current,rs(h)?fa(h):(l=k_(O,S,g),h.stateNode=l,Sl(h))}return kn(h),null;case 5:if(gr(h),O=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==S&&Sl(h);else{if(!S){if(h.stateNode===null)throw Error(s(166));return kn(h),null}if(L=Rt.current,rs(h))fa(h);else{var W=ap(Qt.current);switch(L){case 1:L=W.createElementNS("http://www.w3.org/2000/svg",O);break;case 2:L=W.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;default:switch(O){case"svg":L=W.createElementNS("http://www.w3.org/2000/svg",O);break;case"math":L=W.createElementNS("http://www.w3.org/1998/Math/MathML",O);break;case"script":L=W.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof S.is=="string"?W.createElement("select",{is:S.is}):W.createElement("select"),S.multiple?L.multiple=!0:S.size&&(L.size=S.size);break;default:L=typeof S.is=="string"?W.createElement(O,{is:S.is}):W.createElement(O)}}L[nn]=h,L[Et]=S;e:for(W=h.child;W!==null;){if(W.tag===5||W.tag===6)L.appendChild(W.stateNode);else if(W.tag!==4&&W.tag!==27&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===h)break e;for(;W.sibling===null;){if(W.return===null||W.return===h)break e;W=W.return}W.sibling.return=W.return,W=W.sibling}h.stateNode=L;e:switch(ki(L,O,S),O){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}S&&Sl(h)}}return kn(h),Nd(h,h.type,l===null?null:l.memoizedProps,h.pendingProps,g),null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==S&&Sl(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(s(166));if(l=Qt.current,rs(h)){if(l=h.stateNode,g=h.memoizedProps,S=null,O=vi,O!==null)switch(O.tag){case 27:case 5:S=O.memoizedProps}l[nn]=h,l=!!(l.nodeValue===g||S!==null&&S.suppressHydrationWarning===!0||Ay(l.nodeValue,g)),l||ha(h,!0)}else l=ap(l).createTextNode(S),l[nn]=h,h.stateNode=l}return kn(h),null;case 31:if(g=h.memoizedState,l===null||l.memoizedState!==null){if(S=rs(h),g!==null){if(l===null){if(!S)throw Error(s(318));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(557));l[nn]=h}else ns(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kn(h),l=!1}else g=is(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=g),l=!0;if(!l)return h.flags&256?(Sn(h),h):(Sn(h),null);if((h.flags&128)!==0)throw Error(s(558))}return kn(h),null;case 13:if(S=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(O=rs(h),S!==null&&S.dehydrated!==null){if(l===null){if(!O)throw Error(s(318));if(O=h.memoizedState,O=O!==null?O.dehydrated:null,!O)throw Error(s(317));O[nn]=h}else ns(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;kn(h),O=!1}else O=is(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=O),O=!0;if(!O)return h.flags&256?(Sn(h),h):(Sn(h),null)}return Sn(h),(h.flags&128)!==0?(h.lanes=g,h):(g=S!==null,l=l!==null&&l.memoizedState!==null,g&&(S=h.child,O=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(O=S.alternate.memoizedState.cachePool.pool),L=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(L=S.memoizedState.cachePool.pool),L!==O&&(S.flags|=2048)),g!==l&&g&&(h.child.flags|=8192),Fd(h,h.updateQueue),kn(h),null);case 4:return ct(),l===null&&wy(h.stateNode.containerInfo),kn(h),null;case 10:return os(h.type),kn(h),null;case 19:if(ot(In),S=h.memoizedState,S===null)return kn(h),null;if(O=(h.flags&128)!==0,L=S.rendering,L===null)if(O)Ud(S,!1);else{if(Kn!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(L=mh(l),L!==null){for(h.flags|=128,Ud(S,!1),l=L.updateQueue,h.updateQueue=l,Fd(h,l),h.subtreeFlags=0,l=g,g=h.child;g!==null;)cm(g,l),g=g.sibling;return Dt(In,In.current&1|2),br&&Ms(h,S.treeForkCount),h.child}l=l.sibling}S.tail!==null&&gi()>Wd&&(h.flags|=128,O=!0,Ud(S,!1),h.lanes=4194304)}else{if(!O)if(l=mh(L),l!==null){if(h.flags|=128,O=!0,l=l.updateQueue,h.updateQueue=l,Fd(h,l),Ud(S,!0),S.tail===null&&S.tailMode==="hidden"&&!L.alternate&&!br)return kn(h),null}else 2*gi()-S.renderingStartTime>Wd&&g!==536870912&&(h.flags|=128,O=!0,Ud(S,!1),h.lanes=4194304);S.isBackwards?(L.sibling=h.child,h.child=L):(l=S.last,l!==null?l.sibling=L:h.child=L,S.last=L)}return S.tail!==null?(l=S.tail,S.rendering=l,S.tail=l.sibling,S.renderingStartTime=gi(),l.sibling=null,g=In.current,Dt(In,O?g&1|2:g&1),br&&Ms(h,S.treeForkCount),l):(kn(h),null);case 22:case 23:return Sn(h),ou(),S=h.memoizedState!==null,l!==null?l.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(g&536870912)!==0&&(h.flags&128)===0&&(kn(h),h.subtreeFlags&6&&(h.flags|=8192)):kn(h),g=h.updateQueue,g!==null&&Fd(h,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==g&&(h.flags|=2048),l!==null&&ot(Ao),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),h.memoizedState.cache!==g&&(h.flags|=2048),os(Fn),kn(h),null;case 25:return null;case 30:return null}throw Error(s(156,h.tag))}function lb(l,h){switch(nc(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return os(Fn),ct(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return gr(h),null;case 31:if(h.memoizedState!==null){if(Sn(h),h.alternate===null)throw Error(s(340));ns()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 13:if(Sn(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(s(340));ns()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return ot(In),null;case 4:return ct(),null;case 10:return os(h.type),null;case 22:case 23:return Sn(h),ou(),l!==null&&ot(Ao),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return os(Fn),null;case 25:return null;default:return null}}function Am(l,h){switch(nc(h),h.tag){case 3:os(Fn),ct();break;case 26:case 27:case 5:gr(h);break;case 4:ct();break;case 31:h.memoizedState!==null&&Sn(h);break;case 13:Sn(h);break;case 19:ot(In);break;case 10:os(h.type);break;case 22:case 23:Sn(h),ou(),l!==null&&ot(Ao);break;case 24:os(Fn)}}function Lf(l,h){try{var g=h.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var O=S.next;g=O;do{if((g.tag&l)===l){S=void 0;var L=g.create,W=g.inst;S=L(),W.destroy=S}g=g.next}while(g!==O)}}catch(le){tn(h,h.return,le)}}function du(l,h,g){try{var S=h.updateQueue,O=S!==null?S.lastEffect:null;if(O!==null){var L=O.next;S=L;do{if((S.tag&l)===l){var W=S.inst,le=W.destroy;if(le!==void 0){W.destroy=void 0,O=h;var Ie=g,Je=le;try{Je()}catch(ht){tn(O,Ie,ht)}}}S=S.next}while(S!==L)}}catch(ht){tn(h,h.return,ht)}}function n_(l){var h=l.updateQueue;if(h!==null){var g=l.stateNode;try{If(h,g)}catch(S){tn(l,l.return,S)}}}function i_(l,h,g){g.props=xl(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(S){tn(l,h,S)}}function Vd(l,h){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var S=l.stateNode;break;case 30:S=l.stateNode;break;default:S=l.stateNode}typeof g=="function"?l.refCleanup=g(S):g.current=S}}catch(O){tn(l,h,O)}}function zo(l,h){var g=l.ref,S=l.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(O){tn(l,h,O)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(O){tn(l,h,O)}else g.current=null}function Tm(l){var h=l.type,g=l.memoizedProps,S=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":g.autoFocus&&S.focus();break e;case"img":g.src?S.src=g.src:g.srcSet&&(S.srcset=g.srcSet)}}catch(O){tn(l,l.return,O)}}function Em(l,h,g){try{var S=l.stateNode;O_(S,l.type,g,h),S[Et]=h}catch(O){tn(l,l.return,O)}}function dc(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&bc(l.type)||l.tag===4}function wh(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||dc(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&bc(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function ty(l,h,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,h):(h=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,h.appendChild(l),g=g._reactRootContainer,g!=null||h.onclick!==null||(h.onclick=wo));else if(S!==4&&(S===27&&bc(l.type)&&(g=l.stateNode,h=null),l=l.child,l!==null))for(ty(l,h,g),l=l.sibling;l!==null;)ty(l,h,g),l=l.sibling}function Mm(l,h,g){var S=l.tag;if(S===5||S===6)l=l.stateNode,h?g.insertBefore(l,h):g.appendChild(l);else if(S!==4&&(S===27&&bc(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(Mm(l,h,g),l=l.sibling;l!==null;)Mm(l,h,g),l=l.sibling}function a_(l){var h=l.stateNode,g=l.memoizedProps;try{for(var S=l.type,O=h.attributes;O.length;)h.removeAttributeNode(O[0]);ki(h,S,g),h[nn]=l,h[Et]=g}catch(L){tn(l,l.return,L)}}var pu=!1,wi=!1,ry=!1,o_=typeof WeakSet=="function"?WeakSet:Set,Si=null;function ub(l,h){if(l=l.containerInfo,ip=pp,l=df(l),Qc(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var S=g.getSelection&&g.getSelection();if(S&&S.rangeCount!==0){g=S.anchorNode;var O=S.anchorOffset,L=S.focusNode;S=S.focusOffset;try{g.nodeType,L.nodeType}catch{g=null;break e}var W=0,le=-1,Ie=-1,Je=0,ht=0,vt=l,et=null;t:for(;;){for(var rt;vt!==g||O!==0&&vt.nodeType!==3||(le=W+O),vt!==L||S!==0&&vt.nodeType!==3||(Ie=W+S),vt.nodeType===3&&(W+=vt.nodeValue.length),(rt=vt.firstChild)!==null;)et=vt,vt=rt;for(;;){if(vt===l)break t;if(et===g&&++Je===O&&(le=W),et===L&&++ht===S&&(Ie=W),(rt=vt.nextSibling)!==null)break;vt=et,et=vt.parentNode}vt=rt}g=le===-1||Ie===-1?null:{start:le,end:Ie}}else g=null}g=g||{start:0,end:0}}else g=null;for(Ty={focusedElem:l,selectionRange:g},pp=!1,Si=h;Si!==null;)if(h=Si,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,Si=l;else for(;Si!==null;){switch(h=Si,L=h.alternate,l=h.flags,h.tag){case 0:if((l&4)!==0&&(l=h.updateQueue,l=l!==null?l.events:null,l!==null))for(g=0;g<l.length;g++)O=l[g],O.ref.impl=O.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&L!==null){l=void 0,g=h,O=L.memoizedProps,L=L.memoizedState,S=g.stateNode;try{var qt=xl(g.type,O);l=S.getSnapshotBeforeUpdate(qt,L),S.__reactInternalSnapshotBeforeUpdate=l}catch(nr){tn(g,g.return,nr)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,g=l.nodeType,g===9)Gs(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Gs(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(s(163))}if(l=h.sibling,l!==null){l.return=h.return,Si=l;break}Si=h.return}}function ny(l,h,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:uo(l,g),S&4&&Lf(5,g);break;case 1:if(uo(l,g),S&4)if(l=g.stateNode,h===null)try{l.componentDidMount()}catch(W){tn(g,g.return,W)}else{var O=xl(g.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(O,h,l.__reactInternalSnapshotBeforeUpdate)}catch(W){tn(g,g.return,W)}}S&64&&n_(g),S&512&&Vd(g,g.return);break;case 3:if(uo(l,g),S&64&&(l=g.updateQueue,l!==null)){if(h=null,g.child!==null)switch(g.child.tag){case 27:case 5:h=g.child.stateNode;break;case 1:h=g.child.stateNode}try{If(l,h)}catch(W){tn(g,g.return,W)}}break;case 27:h===null&&S&4&&a_(g);case 26:case 5:uo(l,g),h===null&&S&4&&Tm(g),S&512&&Vd(g,g.return);break;case 12:uo(l,g);break;case 31:uo(l,g),S&4&&Gd(l,g);break;case 13:uo(l,g),S&4&&qd(l,g),S&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=py.bind(null,g),Ti(l,g))));break;case 22:if(S=g.memoizedState!==null||pu,!S){h=h!==null&&h.memoizedState!==null||wi,O=pu;var L=wi;pu=S,(wi=h)&&!L?mu(l,g,(g.subtreeFlags&8772)!==0):uo(l,g),pu=O,wi=L}break;case 30:break;default:uo(l,g)}}function Bf(l){var h=l.alternate;h!==null&&(l.alternate=null,Bf(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&Fl(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Vn=null,Ir=!1;function lo(l,h,g){for(g=g.child;g!==null;)iy(l,h,g),g=g.sibling}function iy(l,h,g){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Ne,g)}catch{}switch(g.tag){case 26:wi||zo(g,h),lo(l,h,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:wi||zo(g,h);var S=Vn,O=Ir;bc(g.type)&&(Vn=g.stateNode,Ir=!1),lo(l,h,g),Wf(g.stateNode),Vn=S,Ir=O;break;case 5:wi||zo(g,h);case 6:if(S=Vn,O=Ir,Vn=null,lo(l,h,g),Vn=S,Ir=O,Vn!==null)if(Ir)try{(Vn.nodeType===9?Vn.body:Vn.nodeName==="HTML"?Vn.ownerDocument.body:Vn).removeChild(g.stateNode)}catch(L){tn(g,h,L)}else try{Vn.removeChild(g.stateNode)}catch(L){tn(g,h,L)}break;case 18:Vn!==null&&(Ir?(l=Vn,z_(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),Mc(l)):z_(Vn,g.stateNode));break;case 4:S=Vn,O=Ir,Vn=g.stateNode.containerInfo,Ir=!0,lo(l,h,g),Vn=S,Ir=O;break;case 0:case 11:case 14:case 15:du(2,g,h),wi||du(4,g,h),lo(l,h,g);break;case 1:wi||(zo(g,h),S=g.stateNode,typeof S.componentWillUnmount=="function"&&i_(g,h,S)),lo(l,h,g);break;case 21:lo(l,h,g);break;case 22:wi=(S=wi)||g.memoizedState!==null,lo(l,h,g),wi=S;break;default:lo(l,h,g)}}function Gd(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Mc(l)}catch(g){tn(h,h.return,g)}}}function qd(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Mc(l)}catch(g){tn(h,h.return,g)}}function Hd(l){switch(l.tag){case 31:case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new o_),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new o_),h;default:throw Error(s(435,l.tag))}}function Zd(l,h){var g=Hd(l);h.forEach(function(S){if(!g.has(S)){g.add(S);var O=fb.bind(null,l,S);S.then(O,O)}})}function Fa(l,h){var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var O=g[S],L=l,W=h,le=W;e:for(;le!==null;){switch(le.tag){case 27:if(bc(le.type)){Vn=le.stateNode,Ir=!1;break e}break;case 5:Vn=le.stateNode,Ir=!1;break e;case 3:case 4:Vn=le.stateNode.containerInfo,Ir=!0;break e}le=le.return}if(Vn===null)throw Error(s(160));iy(L,W,O),Vn=null,Ir=!1,L=O.alternate,L!==null&&(L.return=null),O.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)Pm(h,l),h=h.sibling}var Ua=null;function Pm(l,h){var g=l.alternate,S=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Fa(h,l),zi(l),S&4&&(du(3,l,l.return),Lf(3,l),du(5,l,l.return));break;case 1:Fa(h,l),zi(l),S&512&&(wi||g===null||zo(g,g.return)),S&64&&pu&&(l=l.updateQueue,l!==null&&(S=l.callbacks,S!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:var O=Ua;if(Fa(h,l),zi(l),S&512&&(wi||g===null||zo(g,g.return)),S&4){var L=g!==null?g.memoizedState:null;if(S=l.memoizedState,g===null)if(S===null)if(l.stateNode===null){e:{S=l.type,g=l.memoizedProps,O=O.ownerDocument||O;t:switch(S){case"title":L=O.getElementsByTagName("title")[0],(!L||L[lr]||L[nn]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=O.createElement(S),O.head.insertBefore(L,O.querySelector("head > title"))),ki(L,S,g),L[nn]=l,Pn(L),S=L;break e;case"link":var W=jy("link","href",O).get(S+(g.href||""));if(W){for(var le=0;le<W.length;le++)if(L=W[le],L.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&L.getAttribute("rel")===(g.rel==null?null:g.rel)&&L.getAttribute("title")===(g.title==null?null:g.title)&&L.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){W.splice(le,1);break t}}L=O.createElement(S),ki(L,S,g),O.head.appendChild(L);break;case"meta":if(W=jy("meta","content",O).get(S+(g.content||""))){for(le=0;le<W.length;le++)if(L=W[le],L.getAttribute("content")===(g.content==null?null:""+g.content)&&L.getAttribute("name")===(g.name==null?null:g.name)&&L.getAttribute("property")===(g.property==null?null:g.property)&&L.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&L.getAttribute("charset")===(g.charSet==null?null:g.charSet)){W.splice(le,1);break t}}L=O.createElement(S),ki(L,S,g),O.head.appendChild(L);break;default:throw Error(s(468,S))}L[nn]=l,Pn(L),S=L}l.stateNode=S}else lp(O,l.type,l.stateNode);else l.stateNode=By(O,S,l.memoizedProps);else L!==S?(L===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):L.count--,S===null?lp(O,l.type,l.stateNode):By(O,S,l.memoizedProps)):S===null&&l.stateNode!==null&&Em(l,l.memoizedProps,g.memoizedProps)}break;case 27:Fa(h,l),zi(l),S&512&&(wi||g===null||zo(g,g.return)),g!==null&&S&4&&Em(l,l.memoizedProps,g.memoizedProps);break;case 5:if(Fa(h,l),zi(l),S&512&&(wi||g===null||zo(g,g.return)),l.flags&32){O=l.stateNode;try{Ts(O,"")}catch(qt){tn(l,l.return,qt)}}S&4&&l.stateNode!=null&&(O=l.memoizedProps,Em(l,O,g!==null?g.memoizedProps:O)),S&1024&&(ry=!0);break;case 6:if(Fa(h,l),zi(l),S&4){if(l.stateNode===null)throw Error(s(162));S=l.memoizedProps,g=l.stateNode;try{g.nodeValue=S}catch(qt){tn(l,l.return,qt)}}break;case 3:if(rg=null,O=Ua,Ua=Jm(h.containerInfo),Fa(h,l),Ua=O,zi(l),S&4&&g!==null&&g.memoizedState.isDehydrated)try{Mc(h.containerInfo)}catch(qt){tn(l,l.return,qt)}ry&&(ry=!1,$d(l));break;case 4:S=Ua,Ua=Jm(l.stateNode.containerInfo),Fa(h,l),zi(l),Ua=S;break;case 12:Fa(h,l),zi(l);break;case 31:Fa(h,l),zi(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Zd(l,S)));break;case 13:Fa(h,l),zi(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(Im=gi()),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Zd(l,S)));break;case 22:O=l.memoizedState!==null;var Ie=g!==null&&g.memoizedState!==null,Je=pu,ht=wi;if(pu=Je||O,wi=ht||Ie,Fa(h,l),wi=ht,pu=Je,zi(l),S&8192)e:for(h=l.stateNode,h._visibility=O?h._visibility&-2:h._visibility|1,O&&(g===null||Ie||pu||wi||Fs(l)),g=null,h=l;;){if(h.tag===5||h.tag===26){if(g===null){Ie=g=h;try{if(L=Ie.stateNode,O)W=L.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{le=Ie.stateNode;var vt=Ie.memoizedProps.style,et=vt!=null&&vt.hasOwnProperty("display")?vt.display:null;le.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(qt){tn(Ie,Ie.return,qt)}}}else if(h.tag===6){if(g===null){Ie=h;try{Ie.stateNode.nodeValue=O?"":Ie.memoizedProps}catch(qt){tn(Ie,Ie.return,qt)}}}else if(h.tag===18){if(g===null){Ie=h;try{var rt=Ie.stateNode;O?vr(rt,!0):vr(Ie.stateNode,!1)}catch(qt){tn(Ie,Ie.return,qt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;g===h&&(g=null),h=h.return}g===h&&(g=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=l.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Zd(l,g))));break;case 19:Fa(h,l),zi(l),S&4&&(S=l.updateQueue,S!==null&&(l.updateQueue=null,Zd(l,S)));break;case 30:break;case 21:break;default:Fa(h,l),zi(l)}}function zi(l){var h=l.flags;if(h&2){try{for(var g,S=l.return;S!==null;){if(dc(S)){g=S;break}S=S.return}if(g==null)throw Error(s(160));switch(g.tag){case 27:var O=g.stateNode,L=wh(l);Mm(l,L,O);break;case 5:var W=g.stateNode;g.flags&32&&(Ts(W,""),g.flags&=-33);var le=wh(l);Mm(l,le,W);break;case 3:case 4:var Ie=g.stateNode.containerInfo,Je=wh(l);ty(l,Je,Ie);break;default:throw Error(s(161))}}catch(ht){tn(l,l.return,ht)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function $d(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;$d(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function uo(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)ny(l,h.alternate,h),h=h.sibling}function Fs(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:du(4,h,h.return),Fs(h);break;case 1:zo(h,h.return);var g=h.stateNode;typeof g.componentWillUnmount=="function"&&i_(h,h.return,g),Fs(h);break;case 27:Wf(h.stateNode);case 26:case 5:zo(h,h.return),Fs(h);break;case 22:h.memoizedState===null&&Fs(h);break;case 30:Fs(h);break;default:Fs(h)}l=l.sibling}}function mu(l,h,g){for(g=g&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,O=l,L=h,W=L.flags;switch(L.tag){case 0:case 11:case 15:mu(O,L,g),Lf(4,L);break;case 1:if(mu(O,L,g),S=L,O=S.stateNode,typeof O.componentDidMount=="function")try{O.componentDidMount()}catch(Je){tn(S,S.return,Je)}if(S=L,O=S.updateQueue,O!==null){var le=S.stateNode;try{var Ie=O.shared.hiddenCallbacks;if(Ie!==null)for(O.shared.hiddenCallbacks=null,O=0;O<Ie.length;O++)fh(Ie[O],le)}catch(Je){tn(S,S.return,Je)}}g&&W&64&&n_(L),Vd(L,L.return);break;case 27:a_(L);case 26:case 5:mu(O,L,g),g&&S===null&&W&4&&Tm(L),Vd(L,L.return);break;case 12:mu(O,L,g);break;case 31:mu(O,L,g),g&&W&4&&Gd(O,L);break;case 13:mu(O,L,g),g&&W&4&&qd(O,L);break;case 22:L.memoizedState===null&&mu(O,L,g),Vd(L,L.return);break;case 30:break;default:mu(O,L,g)}h=h.sibling}}function Cm(l,h){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&ac(g))}function gu(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&ac(l))}function Us(l,h,g,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)ay(l,h,g,S),h=h.sibling}function ay(l,h,g,S){var O=h.flags;switch(h.tag){case 0:case 11:case 15:Us(l,h,g,S),O&2048&&Lf(9,h);break;case 1:Us(l,h,g,S);break;case 3:Us(l,h,g,S),O&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&ac(l)));break;case 12:if(O&2048){Us(l,h,g,S),l=h.stateNode;try{var L=h.memoizedProps,W=L.id,le=L.onPostCommit;typeof le=="function"&&le(W,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ie){tn(h,h.return,Ie)}}else Us(l,h,g,S);break;case 31:Us(l,h,g,S);break;case 13:Us(l,h,g,S);break;case 23:break;case 22:L=h.stateNode,W=h.alternate,h.memoizedState!==null?L._visibility&2?Us(l,h,g,S):Sh(l,h):L._visibility&2?Us(l,h,g,S):(L._visibility|=2,Al(l,h,g,S,(h.subtreeFlags&10256)!==0||!1)),O&2048&&Cm(W,h);break;case 24:Us(l,h,g,S),O&2048&&gu(h.alternate,h);break;default:Us(l,h,g,S)}}function Al(l,h,g,S,O){for(O=O&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var L=l,W=h,le=g,Ie=S,Je=W.flags;switch(W.tag){case 0:case 11:case 15:Al(L,W,le,Ie,O),Lf(8,W);break;case 23:break;case 22:var ht=W.stateNode;W.memoizedState!==null?ht._visibility&2?Al(L,W,le,Ie,O):Sh(L,W):(ht._visibility|=2,Al(L,W,le,Ie,O)),O&&Je&2048&&Cm(W.alternate,W);break;case 24:Al(L,W,le,Ie,O),O&&Je&2048&&gu(W.alternate,W);break;default:Al(L,W,le,Ie,O)}h=h.sibling}}function Sh(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var g=l,S=h,O=S.flags;switch(S.tag){case 22:Sh(g,S),O&2048&&Cm(S.alternate,S);break;case 24:Sh(g,S),O&2048&&gu(S.alternate,S);break;default:Sh(g,S)}h=h.sibling}}var jf=8192;function Ah(l,h,g){if(l.subtreeFlags&jf)for(l=l.child;l!==null;)s_(l,h,g),l=l.sibling}function s_(l,h,g){switch(l.tag){case 26:Ah(l,h,g),l.flags&jf&&l.memoizedState!==null&&Ny(g,Ua,l.memoizedState,l.memoizedProps);break;case 5:Ah(l,h,g);break;case 3:case 4:var S=Ua;Ua=Jm(l.stateNode.containerInfo),Ah(l,h,g),Ua=S;break;case 22:l.memoizedState===null&&(S=l.alternate,S!==null&&S.memoizedState!==null?(S=jf,jf=16777216,Ah(l,h,g),jf=S):Ah(l,h,g));break;default:Ah(l,h,g)}}function l_(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function Xd(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Si=S,Nf(S,l)}l_(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)u_(l),l=l.sibling}function u_(l){switch(l.tag){case 0:case 11:case 15:Xd(l),l.flags&2048&&du(9,l,l.return);break;case 3:Xd(l);break;case 12:Xd(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,Dm(l)):Xd(l);break;default:Xd(l)}}function Dm(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var g=0;g<h.length;g++){var S=h[g];Si=S,Nf(S,l)}l_(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:du(8,h,h.return),Dm(h);break;case 22:g=h.stateNode,g._visibility&2&&(g._visibility&=-3,Dm(h));break;default:Dm(h)}l=l.sibling}}function Nf(l,h){for(;Si!==null;){var g=Si;switch(g.tag){case 0:case 11:case 15:du(8,g,h);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:ac(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,Si=S;else e:for(g=l;Si!==null;){S=Si;var O=S.sibling,L=S.return;if(Bf(S),S===g){Si=null;break e}if(O!==null){O.return=L,Si=O;break e}Si=L}}}var cb={getCacheForType:function(l){var h=Yn(Fn),g=h.data.get(l);return g===void 0&&(g=l(),h.data.set(l,g)),g},cacheSignal:function(){return Yn(Fn).controller.signal}},c_=typeof WeakMap=="function"?WeakMap:Map,en=0,_n=null,Er=null,Mr=0,sn=0,Va=null,gs=!1,pc=!1,oy=!1,yu=0,Kn=0,vu=0,Th=0,sy=0,ra=0,Eh=0,Yd=null,co=null,ly=!1,Im=0,h_=0,Wd=1/0,Ff=null,_u=null,Ai=0,xu=null,Uf=null,ys=0,uy=0,Om=null,f_=null,Kd=0,cy=null;function ho(){return(en&2)!==0&&Mr!==0?Mr&-Mr:Le.T!==null?_y():Bi()}function d_(){if(ra===0)if((Mr&536870912)===0||br){var l=kr;kr<<=1,(kr&3932160)===0&&(kr=262144),ra=l}else ra=536870912;return l=Bt.current,l!==null&&(l.flags|=32),ra}function fo(l,h,g){(l===_n&&(sn===2||sn===9)||l.cancelPendingCommit!==null)&&(Gf(l,0),mc(l,Mr,ra,!1)),Gr(l,g),((en&2)===0||l!==_n)&&(l===_n&&((en&2)===0&&(Th|=g),Kn===4&&mc(l,Mr,ra,!1)),Vs(l))}function di(l,h,g){if((en&6)!==0)throw Error(s(327));var S=!g&&(h&127)===0&&(h&l.expiredLanes)===0||Zn(l,h),O=S?qf(l,h):Rm(l,h,!0),L=S;do{if(O===0){pc&&!S&&mc(l,h,0,!1);break}else{if(g=l.current.alternate,L&&!hb(g)){O=Rm(l,h,!1),L=!1;continue}if(O===2){if(L=h,l.errorRecoveryDisabledLanes&L)var W=0;else W=l.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){h=W;e:{var le=l;O=Yd;var Ie=le.current.memoizedState.isDehydrated;if(Ie&&(Gf(le,W).flags|=256),W=Rm(le,W,!1),W!==2){if(oy&&!Ie){le.errorRecoveryDisabledLanes|=L,Th|=L,O=4;break e}L=co,co=O,L!==null&&(co===null?co=L:co.push.apply(co,L))}O=W}if(L=!1,O!==2)continue}}if(O===1){Gf(l,0),mc(l,h,0,!0);break}e:{switch(S=l,L=O,L){case 0:case 1:throw Error(s(345));case 4:if((h&4194048)!==h)break;case 6:mc(S,h,ra,!gs);break e;case 2:co=null;break;case 3:case 5:break;default:throw Error(s(329))}if((h&62914560)===h&&(O=Im+300-gi(),10<O)){if(mc(S,h,ra,!gs),jr(S,0,!0)!==0)break e;ys=h,S.timeoutHandle=Qm(Vf.bind(null,S,g,co,Ff,ly,h,ra,Th,Eh,gs,L,"Throttled",-0,0),O);break e}Vf(S,g,co,Ff,ly,h,ra,Th,Eh,gs,L,null,-0,0)}}break}while(!0);Vs(l)}function Vf(l,h,g,S,O,L,W,le,Ie,Je,ht,vt,et,rt){if(l.timeoutHandle=-1,vt=h.subtreeFlags,vt&8192||(vt&16785408)===16785408){vt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:wo},s_(h,L,vt);var qt=(L&62914560)===L?Im-gi():(L&4194048)===L?h_-gi():0;if(qt=Fy(vt,qt),qt!==null){ys=L,l.cancelPendingCommit=qt(v_.bind(null,l,h,L,g,S,O,W,le,Ie,ht,vt,null,et,rt)),mc(l,L,W,!Je);return}}v_(l,h,L,g,S,O,W,le,Ie)}function hb(l){for(var h=l;;){var g=h.tag;if((g===0||g===11||g===15)&&h.flags&16384&&(g=h.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var O=g[S],L=O.getSnapshot;O=O.value;try{if(!ua(L(),O))return!1}catch{return!1}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function mc(l,h,g,S){h&=~sy,h&=~Th,l.suspendedLanes|=h,l.pingedLanes&=~h,S&&(l.warmLanes|=h),S=l.expirationTimes;for(var O=h;0<O;){var L=31-lt(O),W=1<<L;S[L]=-1,O&=~W}g!==0&&Yr(l,g,h)}function Qd(){return(en&6)===0?(ko(0),!1):!0}function zm(){if(Er!==null){if(sn===0)var l=Er.return;else l=Er,as=to=null,Bs(l),ls=null,iu=0,l=Er;for(;l!==null;)Am(l.alternate,l),l=l.return;Er=null}}function Gf(l,h){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,My(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),ys=0,zm(),_n=l,Er=g=ka(l.current,null),Mr=h,sn=0,Va=null,gs=!1,pc=Zn(l,h),oy=!1,Eh=ra=sy=Th=vu=Kn=0,co=Yd=null,ly=!1,(h&8)!==0&&(h|=h&32);var S=l.entangledLanes;if(S!==0)for(l=l.entanglements,S&=h;0<S;){var O=31-lt(S),L=1<<O;h|=l[O],S&=~L}return yu=h,eu(),g}function hy(l,h){mr=null,Le.H=Ur,h===To||h===da?(h=sc(),sn=3):h===gl?(h=sc(),sn=4):sn=h===mm?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Va=h,Er===null&&(Kn=1,Oo(l,ta(h,l.current)))}function fy(){var l=Bt.current;return l===null?!0:(Mr&4194048)===Mr?Ut===null:(Mr&62914560)===Mr||(Mr&536870912)!==0?l===Ut:!1}function Mh(){var l=Le.H;return Le.H=Ur,l===null?Ur:l}function km(){var l=Le.A;return Le.A=cb,l}function Jd(){Kn=4,gs||(Mr&4194048)!==Mr&&Bt.current!==null||(pc=!0),(vu&134217727)===0&&(Th&134217727)===0||_n===null||mc(_n,Mr,ra,!1)}function Rm(l,h,g){var S=en;en|=2;var O=Mh(),L=km();(_n!==l||Mr!==h)&&(Ff=null,Gf(l,h)),h=!1;var W=Kn;e:do try{if(sn!==0&&Er!==null){var le=Er,Ie=Va;switch(sn){case 8:zm(),W=6;break e;case 3:case 2:case 9:case 6:Bt.current===null&&(h=!0);var Je=sn;if(sn=0,Va=null,Hf(l,le,Ie,Je),g&&pc){W=0;break e}break;default:Je=sn,sn=0,Va=null,Hf(l,le,Ie,Je)}}Lm(),W=Kn;break}catch(ht){hy(l,ht)}while(!0);return h&&l.shellSuspendCounter++,as=to=null,en=S,Le.H=O,Le.A=L,Er===null&&(_n=null,Mr=0,eu()),W}function Lm(){for(;Er!==null;)m_(Er)}function qf(l,h){var g=en;en|=2;var S=Mh(),O=km();_n!==l||Mr!==h?(Ff=null,Wd=gi()+500,Gf(l,h)):pc=Zn(l,h);e:do try{if(sn!==0&&Er!==null){h=Er;var L=Va;t:switch(sn){case 1:sn=0,Va=null,Hf(l,h,L,1);break;case 2:case 9:if(lh(L)){sn=0,Va=null,g_(h);break}h=function(){sn!==2&&sn!==9||_n!==l||(sn=7),Vs(l)},L.then(h,h);break e;case 3:sn=7;break e;case 4:sn=5;break e;case 7:lh(L)?(sn=0,Va=null,g_(h)):(sn=0,Va=null,Hf(l,h,L,7));break;case 5:var W=null;switch(Er.tag){case 26:W=Er.memoizedState;case 5:case 27:var le=Er;if(W?up(W):le.stateNode.complete){sn=0,Va=null;var Ie=le.sibling;if(Ie!==null)Er=Ie;else{var Je=le.return;Je!==null?(Er=Je,Bm(Je)):Er=null}break t}}sn=0,Va=null,Hf(l,h,L,5);break;case 6:sn=0,Va=null,Hf(l,h,L,6);break;case 8:zm(),Kn=6;break e;default:throw Error(s(462))}}p_();break}catch(ht){hy(l,ht)}while(!0);return as=to=null,Le.H=S,Le.A=O,en=g,Er!==null?0:(_n=null,Mr=0,eu(),Kn)}function p_(){for(;Er!==null&&!_o();)m_(Er)}function m_(l){var h=ga(l.alternate,l,yu);l.memoizedProps=l.pendingProps,h===null?Bm(l):Er=h}function g_(l){var h=l,g=h.alternate;switch(h.tag){case 15:case 0:h=Qv(g,h,h.pendingProps,h.type,void 0,Mr);break;case 11:h=Qv(g,h,h.pendingProps,h.type.render,h.ref,Mr);break;case 5:Bs(h);default:Am(g,h),h=Er=cm(h,yu),h=ga(g,h,yu)}l.memoizedProps=l.pendingProps,h===null?Bm(l):Er=h}function Hf(l,h,g,S){as=to=null,Bs(h),ls=null,iu=0;var O=h.return;try{if(pm(l,O,h,g,Mr)){Kn=1,Oo(l,ta(g,l.current)),Er=null;return}}catch(L){if(O!==null)throw Er=O,L;Kn=1,Oo(l,ta(g,l.current)),Er=null;return}h.flags&32768?(br||S===1?l=!0:pc||(Mr&536870912)!==0?l=!1:(gs=l=!0,(S===2||S===9||S===3||S===6)&&(S=Bt.current,S!==null&&S.tag===13&&(S.flags|=16384))),y_(h,l)):Bm(h)}function Bm(l){var h=l;do{if((h.flags&32768)!==0){y_(h,gs);return}l=h.return;var g=r_(h.alternate,h,yu);if(g!==null){Er=g;return}if(h=h.sibling,h!==null){Er=h;return}Er=h=l}while(h!==null);Kn===0&&(Kn=5)}function y_(l,h){do{var g=lb(l.alternate,l);if(g!==null){g.flags&=32767,Er=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!h&&(l=l.sibling,l!==null)){Er=l;return}Er=l=g}while(l!==null);Kn=6,Er=null}function v_(l,h,g,S,O,L,W,le,Ie){l.cancelPendingCommit=null;do jm();while(Ai!==0);if((en&6)!==0)throw Error(s(327));if(h!==null){if(h===l.current)throw Error(s(177));if(L=h.lanes|h.childLanes,L|=Jl,Mn(l,g,L,W,le,Ie),l===_n&&(Er=_n=null,Mr=0),Uf=h,xu=l,ys=g,uy=L,Om=O,f_=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,A_(re,function(){return S_(),null})):(l.callbackNode=null,l.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=Le.T,Le.T=null,O=We.p,We.p=2,W=en,en|=4;try{ub(l,h,g)}finally{en=W,We.p=O,Le.T=S}}Ai=1,__(),x_(),b_()}}function __(){if(Ai===1){Ai=0;var l=xu,h=Uf,g=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||g){g=Le.T,Le.T=null;var S=We.p;We.p=2;var O=en;en|=4;try{Pm(h,l);var L=Ty,W=df(l.containerInfo),le=L.focusedElem,Ie=L.selectionRange;if(W!==le&&le&&le.ownerDocument&&ff(le.ownerDocument.documentElement,le)){if(Ie!==null&&Qc(le)){var Je=Ie.start,ht=Ie.end;if(ht===void 0&&(ht=Je),"selectionStart"in le)le.selectionStart=Je,le.selectionEnd=Math.min(ht,le.value.length);else{var vt=le.ownerDocument||document,et=vt&&vt.defaultView||window;if(et.getSelection){var rt=et.getSelection(),qt=le.textContent.length,nr=Math.min(Ie.start,qt),ln=Ie.end===void 0?nr:Math.min(Ie.end,qt);!rt.extend&&nr>ln&&(W=ln,ln=nr,nr=W);var Fe=Kc(le,nr),Be=Kc(le,ln);if(Fe&&Be&&(rt.rangeCount!==1||rt.anchorNode!==Fe.node||rt.anchorOffset!==Fe.offset||rt.focusNode!==Be.node||rt.focusOffset!==Be.offset)){var Ke=vt.createRange();Ke.setStart(Fe.node,Fe.offset),rt.removeAllRanges(),nr>ln?(rt.addRange(Ke),rt.extend(Be.node,Be.offset)):(Ke.setEnd(Be.node,Be.offset),rt.addRange(Ke))}}}}for(vt=[],rt=le;rt=rt.parentNode;)rt.nodeType===1&&vt.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<vt.length;le++){var pt=vt[le];pt.element.scrollLeft=pt.left,pt.element.scrollTop=pt.top}}pp=!!ip,Ty=ip=null}finally{en=O,We.p=S,Le.T=g}}l.current=h,Ai=2}}function x_(){if(Ai===2){Ai=0;var l=xu,h=Uf,g=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||g){g=Le.T,Le.T=null;var S=We.p;We.p=2;var O=en;en|=4;try{ny(l,h.alternate,h)}finally{en=O,We.p=S,Le.T=g}}Ai=3}}function b_(){if(Ai===4||Ai===3){Ai=0,Nu();var l=xu,h=Uf,g=ys,S=f_;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ai=5:(Ai=0,Uf=xu=null,w_(l,l.pendingLanes));var O=l.pendingLanes;if(O===0&&(_u=null),xt(g),h=h.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Ne,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=Le.T,O=We.p,We.p=2,Le.T=null;try{for(var L=l.onRecoverableError,W=0;W<S.length;W++){var le=S[W];L(le.value,{componentStack:le.stack})}}finally{Le.T=h,We.p=O}}(ys&3)!==0&&jm(),Vs(l),O=l.pendingLanes,(g&261930)!==0&&(O&42)!==0?l===cy?Kd++:(Kd=0,cy=l):Kd=0,ko(0)}}function w_(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,ac(h)))}function jm(){return __(),x_(),b_(),S_()}function S_(){if(Ai!==5)return!1;var l=xu,h=uy;uy=0;var g=xt(ys),S=Le.T,O=We.p;try{We.p=32>g?32:g,Le.T=null,g=Om,Om=null;var L=xu,W=ys;if(Ai=0,Uf=xu=null,ys=0,(en&6)!==0)throw Error(s(331));var le=en;if(en|=4,u_(L.current),ay(L,L.current,W,g),en=le,ko(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Ne,L)}catch{}return!0}finally{We.p=O,Le.T=S,w_(l,h)}}function dy(l,h,g){h=ta(g,h),h=_h(l.stateNode,h,2),l=zs(l,h,2),l!==null&&(Gr(l,2),Vs(l))}function tn(l,h,g){if(l.tag===3)dy(l,l,g);else for(;h!==null;){if(h.tag===3){dy(h,l,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(_u===null||!_u.has(S))){l=ta(g,l),g=xh(2),S=zs(h,g,2),S!==null&&(bh(g,S,h,l),Gr(S,2),Vs(S));break}}h=h.return}}function Nm(l,h,g){var S=l.pingCache;if(S===null){S=l.pingCache=new c_;var O=new Set;S.set(h,O)}else O=S.get(h),O===void 0&&(O=new Set,S.set(h,O));O.has(g)||(oy=!0,O.add(g),l=gc.bind(null,l,h,g),h.then(l,l))}function gc(l,h,g){var S=l.pingCache;S!==null&&S.delete(h),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,_n===l&&(Mr&g)===g&&(Kn===4||Kn===3&&(Mr&62914560)===Mr&&300>gi()-Im?(en&2)===0&&Gf(l,0):sy|=g,Eh===Mr&&(Eh=0)),Vs(l)}function ep(l,h){h===0&&(h=Nr()),l=eo(l,h),l!==null&&(Gr(l,h),Vs(l))}function py(l){var h=l.memoizedState,g=0;h!==null&&(g=h.retryLane),ep(l,g)}function fb(l,h){var g=0;switch(l.tag){case 31:case 13:var S=l.stateNode,O=l.memoizedState;O!==null&&(g=O.retryLane);break;case 19:S=l.stateNode;break;case 22:S=l.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(h),ep(l,g)}function A_(l,h){return Qs(l,h)}var Fm=null,Zf=null,my=!1,Um=!1,gy=!1,bu=0;function Vs(l){l!==Zf&&l.next===null&&(Zf===null?Fm=Zf=l:Zf=Zf.next=l),Um=!0,my||(my=!0,vy())}function ko(l,h){if(!gy&&Um){gy=!0;do for(var g=!1,S=Fm;S!==null;){if(l!==0){var O=S.pendingLanes;if(O===0)var L=0;else{var W=S.suspendedLanes,le=S.pingedLanes;L=(1<<31-lt(42|l)+1)-1,L&=O&~(W&~le),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(g=!0,tp(S,L))}else L=Mr,L=jr(S,S===_n?L:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(L&3)===0||Zn(S,L)||(g=!0,tp(S,L));S=S.next}while(g);gy=!1}}function yc(){yy()}function yy(){Um=my=!1;var l=0;bu!==0&&Km()&&(l=bu);for(var h=gi(),g=null,S=Fm;S!==null;){var O=S.next,L=Vm(S,h);L===0?(S.next=null,g===null?Fm=O:g.next=O,O===null&&(Zf=g)):(g=S,(l!==0||(L&3)!==0)&&(Um=!0)),S=O}Ai!==0&&Ai!==5||ko(l),bu!==0&&(bu=0)}function Vm(l,h){for(var g=l.suspendedLanes,S=l.pingedLanes,O=l.expirationTimes,L=l.pendingLanes&-62914561;0<L;){var W=31-lt(L),le=1<<W,Ie=O[W];Ie===-1?((le&g)===0||(le&S)!==0)&&(O[W]=sr(le,h)):Ie<=h&&(l.expiredLanes|=le),L&=~le}if(h=_n,g=Mr,g=jr(l,l===h?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S=l.callbackNode,g===0||l===h&&(sn===2||sn===9)||l.cancelPendingCommit!==null)return S!==null&&S!==null&&qo(S),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Zn(l,g)){if(h=g&-g,h===l.callbackPriority)return h;switch(S!==null&&qo(S),xt(g)){case 2:case 8:g=ne;break;case 32:g=re;break;case 268435456:g=Ee;break;default:g=re}return S=T_.bind(null,l),g=Qs(g,S),l.callbackPriority=h,l.callbackNode=g,h}return S!==null&&S!==null&&qo(S),l.callbackPriority=2,l.callbackNode=null,2}function T_(l,h){if(Ai!==0&&Ai!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(jm()&&l.callbackNode!==g)return null;var S=Mr;return S=jr(l,l===_n?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),S===0?null:(di(l,S,h),Vm(l,gi()),l.callbackNode!=null&&l.callbackNode===g?T_.bind(null,l):null)}function tp(l,h){if(jm())return null;di(l,h,!0)}function vy(){Cy(function(){(en&6)!==0?Qs(Ue,yc):yy()})}function _y(){if(bu===0){var l=nu;l===0&&(l=rr,rr<<=1,(rr&261888)===0&&(rr=256)),bu=l}return bu}function Gm(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:fr(""+l)}function qm(l,h){var g=h.ownerDocument.createElement("input");return g.name=h.name,g.value=h.value,l.id&&g.setAttribute("form",l.id),h.parentNode.insertBefore(g,h),l=new FormData(l),g.parentNode.removeChild(g),l}function $f(l,h,g,S,O){if(h==="submit"&&g&&g.stateNode===O){var L=Gm((O[Et]||null).action),W=S.submitter;W&&(h=(h=W[Et]||null)?Gm(h.formAction):W.getAttribute("formAction"),h!==null&&(L=h,W=null));var le=new Fc("action","action",null,S,O);l.push({event:le,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(bu!==0){var Ie=W?qm(O,W):new FormData(O);On(g,{pending:!0,data:Ie,method:O.method,action:L},null,Ie)}}else typeof L=="function"&&(le.preventDefault(),Ie=W?qm(O,W):new FormData(O),On(g,{pending:!0,data:Ie,method:O.method,action:L},L,Ie))},currentTarget:O}]})}}for(var Hm=0;Hm<yf.length;Hm++){var Zm=yf[Hm],xy=Zm.toLowerCase(),E_=Zm[0].toUpperCase()+Zm.slice(1);Oa(xy,"on"+E_)}Oa(th,"onAnimationEnd"),Oa(rh,"onAnimationIteration"),Oa(gf,"onAnimationStart"),Oa("dblclick","onDoubleClick"),Oa("focusin","onFocus"),Oa("focusout","onBlur"),Oa(Ql,"onTransitionRun"),Oa(nh,"onTransitionStart"),Oa(ec,"onTransitionCancel"),Oa(Ia,"onTransitionEnd"),As("onMouseEnter",["mouseout","mouseover"]),As("onMouseLeave",["mouseout","mouseover"]),As("onPointerEnter",["pointerout","pointerover"]),As("onPointerLeave",["pointerout","pointerover"]),Sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vc));function P_(l,h){h=(h&4)!==0;for(var g=0;g<l.length;g++){var S=l[g],O=S.event;S=S.listeners;e:{var L=void 0;if(h)for(var W=S.length-1;0<=W;W--){var le=S[W],Ie=le.instance,Je=le.currentTarget;if(le=le.listener,Ie!==L&&O.isPropagationStopped())break e;L=le,O.currentTarget=Je;try{L(O)}catch(ht){Jo(ht)}O.currentTarget=null,L=Ie}else for(W=0;W<S.length;W++){if(le=S[W],Ie=le.instance,Je=le.currentTarget,le=le.listener,Ie!==L&&O.isPropagationStopped())break e;L=le,O.currentTarget=Je;try{L(O)}catch(ht){Jo(ht)}O.currentTarget=null,L=Ie}}}}function Pr(l,h){var g=h[dr];g===void 0&&(g=h[dr]=new Set);var S=l+"__bubble";g.has(S)||(Xm(h,l,2,!1),g.add(S))}function by(l,h,g){var S=0;h&&(S|=4),Xm(g,l,S,h)}var $m="_reactListening"+Math.random().toString(36).slice(2);function wy(l){if(!l[$m]){l[$m]=!0,Uu.forEach(function(g){g!=="selectionchange"&&(M_.has(g)||by(g,!1,l),by(g,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[$m]||(h[$m]=!0,by("selectionchange",!1,h))}}function Xm(l,h,g,S){switch(Dh(h)){case 2:var O=mp;break;case 8:O=V_;break;default:O=Vy}g=O.bind(null,h,g,l),O=void 0,!Wi||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(O=!0),S?O!==void 0?l.addEventListener(h,g,{capture:!0,passive:O}):l.addEventListener(h,g,!0):O!==void 0?l.addEventListener(h,g,{passive:O}):l.addEventListener(h,g,!1)}function Tl(l,h,g,S,O){var L=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var W=S.tag;if(W===3||W===4){var le=S.stateNode.containerInfo;if(le===O)break;if(W===4)for(W=S.return;W!==null;){var Ie=W.tag;if((Ie===3||Ie===4)&&W.stateNode.containerInfo===O)return;W=W.return}for(;le!==null;){if(W=Zo(le),W===null)return;if(Ie=W.tag,Ie===5||Ie===6||Ie===26||Ie===27){S=L=W;continue e}le=le.parentNode}}S=S.return}Wr(function(){var Je=L,ht=Nc(g),vt=[];e:{var et=Ad.get(l);if(et!==void 0){var rt=Fc,qt=l;switch(l){case"keypress":if(Da(g)===0)break e;case"keydown":case"keyup":rt=Dn;break;case"focusin":qt="focus",rt=il;break;case"focusout":qt="blur",rt=il;break;case"beforeblur":case"afterblur":rt=il;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=$l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Hg;break;case th:case rh:case gf:rt=Qp;break;case Ia:rt=lf;break;case"scroll":case"scrollend":rt=Zl;break;case"wheel":rt=_d;break;case"copy":case"cut":case"paste":rt=yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=sf;break;case"toggle":case"beforetoggle":rt=Xu}var nr=(h&4)!==0,ln=!nr&&(l==="scroll"||l==="scrollend"),Fe=nr?et!==null?et+"Capture":null:et;nr=[];for(var Be=Je,Ke;Be!==null;){var pt=Be;if(Ke=pt.stateNode,pt=pt.tag,pt!==5&&pt!==26&&pt!==27||Ke===null||Fe===null||(pt=Wa(Be,Fe),pt!=null&&nr.push(Xf(Be,pt,Ke))),ln)break;Be=Be.return}0<nr.length&&(et=new rt(et,qt,null,g,ht),vt.push({event:et,listeners:nr}))}}if((h&7)===0){e:{if(et=l==="mouseover"||l==="pointerover",rt=l==="mouseout"||l==="pointerout",et&&g!==gd&&(qt=g.relatedTarget||g.fromElement)&&(Zo(qt)||qt[ur]))break e;if((rt||et)&&(et=ht.window===ht?ht:(et=ht.ownerDocument)?et.defaultView||et.parentWindow:window,rt?(qt=g.relatedTarget||g.toElement,rt=Je,qt=qt?Zo(qt):null,qt!==null&&(ln=y(qt),nr=qt.tag,qt!==ln||nr!==5&&nr!==27&&nr!==6)&&(qt=null)):(rt=null,qt=Je),rt!==qt)){if(nr=$l,pt="onMouseLeave",Fe="onMouseEnter",Be="mouse",(l==="pointerout"||l==="pointerover")&&(nr=sf,pt="onPointerLeave",Fe="onPointerEnter",Be="pointer"),ln=rt==null?et:$o(rt),Ke=qt==null?et:$o(qt),et=new nr(pt,Be+"leave",rt,g,ht),et.target=ln,et.relatedTarget=Ke,pt=null,Zo(ht)===Je&&(nr=new nr(Fe,Be+"enter",qt,g,ht),nr.target=Ke,nr.relatedTarget=ln,pt=nr),ln=pt,rt&&qt)t:{for(nr=C_,Fe=rt,Be=qt,Ke=0,pt=Fe;pt;pt=nr(pt))Ke++;pt=0;for(var er=Be;er;er=nr(er))pt++;for(;0<Ke-pt;)Fe=nr(Fe),Ke--;for(;0<pt-Ke;)Be=nr(Be),pt--;for(;Ke--;){if(Fe===Be||Be!==null&&Fe===Be.alternate){nr=Fe;break t}Fe=nr(Fe),Be=nr(Be)}nr=null}else nr=null;rt!==null&&Sy(vt,et,rt,nr,!1),qt!==null&&ln!==null&&Sy(vt,ln,qt,nr,!0)}}e:{if(et=Je?$o(Je):window,rt=et.nodeName&&et.nodeName.toLowerCase(),rt==="select"||rt==="input"&&et.type==="file")var $r=sl;else if(cf(et))if(xd)$r=lm;else{$r=sm;var Ht=Zg}else rt=et.nodeName,!rt||rt.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Je&&Gl(Je.elementType)&&($r=sl):$r=Wc;if($r&&($r=$r(l,Je))){hf(vt,$r,g,ht);break e}Ht&&Ht(l,et,Je),l==="focusout"&&Je&&et.type==="number"&&Je.memoizedProps.value!=null&&jc(et,"number",et.value)}switch(Ht=Je?$o(Je):window,l){case"focusin":(cf(Ht)||Ht.contentEditable==="true")&&(Ja=Ht,Jc=Je,eh=null);break;case"focusout":eh=Jc=Ja=null;break;case"mousedown":mf=!0;break;case"contextmenu":case"mouseup":case"dragend":mf=!1,um(vt,g,ht);break;case"selectionchange":if(pf)break;case"keydown":case"keyup":um(vt,g,ht)}var Xt;if(Nn)e:{switch(l){case"compositionstart":var Tr="onCompositionStart";break e;case"compositionend":Tr="onCompositionEnd";break e;case"compositionupdate":Tr="onCompositionUpdate";break e}Tr=void 0}else So?Zc(l,g)&&(Tr="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(Tr="onCompositionStart");Tr&&(Qu&&g.locale!=="ko"&&(So||Tr!=="onCompositionStart"?Tr==="onCompositionEnd"&&So&&(Xt=rl()):(Ca=ht,Wo="value"in Ca?Ca.value:Ca.textContent,So=!0)),Ht=rp(Je,Tr),0<Ht.length&&(Tr=new vd(Tr,l,null,g,ht),vt.push({event:Tr,listeners:Ht}),Xt?Tr.data=Xt:(Xt=rm(g),Xt!==null&&(Tr.data=Xt)))),(Xt=Ku?uf(l,g):nm(l,g))&&(Tr=rp(Je,"onBeforeInput"),0<Tr.length&&(Ht=new vd("onBeforeInput","beforeinput",null,g,ht),vt.push({event:Ht,listeners:Tr}),Ht.data=Xt)),$f(vt,l,Je,g,ht)}P_(vt,h)})}function Xf(l,h,g){return{instance:l,listener:h,currentTarget:g}}function rp(l,h){for(var g=h+"Capture",S=[];l!==null;){var O=l,L=O.stateNode;if(O=O.tag,O!==5&&O!==26&&O!==27||L===null||(O=Wa(l,g),O!=null&&S.unshift(Xf(l,O,L)),O=Wa(l,h),O!=null&&S.push(Xf(l,O,L))),l.tag===3)return S;l=l.return}return[]}function C_(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Sy(l,h,g,S,O){for(var L=h._reactName,W=[];g!==null&&g!==S;){var le=g,Ie=le.alternate,Je=le.stateNode;if(le=le.tag,Ie!==null&&Ie===S)break;le!==5&&le!==26&&le!==27||Je===null||(Ie=Je,O?(Je=Wa(g,L),Je!=null&&W.unshift(Xf(g,Je,Ie))):O||(Je=Wa(g,L),Je!=null&&W.push(Xf(g,Je,Ie)))),g=g.return}W.length!==0&&l.push({event:h,listeners:W})}var D_=/\r\n?/g,I_=/\u0000|\uFFFD/g;function np(l){return(typeof l=="string"?l:""+l).replace(D_,`
`).replace(I_,"")}function Ay(l,h){return h=np(h),np(l)===h}function Zr(l,h,g,S,O,L){switch(g){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||Ts(l,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&Ts(l,""+S);break;case"className":Yo(l,"class",S);break;case"tabIndex":Yo(l,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Yo(l,g,S);break;case"style":of(l,S,L);break;case"data":if(h!=="object"){Yo(l,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||g!=="href")){l.removeAttribute(g);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(g);break}S=fr(""+S),l.setAttribute(g,S);break;case"action":case"formAction":if(typeof S=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(g==="formAction"?(h!=="input"&&Zr(l,h,"name",O.name,O,null),Zr(l,h,"formEncType",O.formEncType,O,null),Zr(l,h,"formMethod",O.formMethod,O,null),Zr(l,h,"formTarget",O.formTarget,O,null)):(Zr(l,h,"encType",O.encType,O,null),Zr(l,h,"method",O.method,O,null),Zr(l,h,"target",O.target,O,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){l.removeAttribute(g);break}S=fr(""+S),l.setAttribute(g,S);break;case"onClick":S!=null&&(l.onclick=wo);break;case"onScroll":S!=null&&Pr("scroll",l);break;case"onScrollEnd":S!=null&&Pr("scrollend",l);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(s(61));if(g=S.__html,g!=null){if(O.children!=null)throw Error(s(60));l.innerHTML=g}}break;case"multiple":l.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":l.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){l.removeAttribute("xlink:href");break}g=fr(""+S),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,""+S):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":S===!0?l.setAttribute(g,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?l.setAttribute(g,S):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?l.setAttribute(g,S):l.removeAttribute(g);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?l.removeAttribute(g):l.setAttribute(g,S);break;case"popover":Pr("beforetoggle",l),Pr("toggle",l),Rc(l,"popover",S);break;case"xlinkActuate":Ya(l,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":Ya(l,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":Ya(l,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":Ya(l,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":Ya(l,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":Ya(l,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":Ya(l,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Rc(l,"is",S);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=tl.get(g)||g,Rc(l,g,S))}}function Ym(l,h,g,S,O,L){switch(g){case"style":of(l,S,L);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(s(61));if(g=S.__html,g!=null){if(O.children!=null)throw Error(s(60));l.innerHTML=g}}break;case"children":typeof S=="string"?Ts(l,S):(typeof S=="number"||typeof S=="bigint")&&Ts(l,""+S);break;case"onScroll":S!=null&&Pr("scroll",l);break;case"onScrollEnd":S!=null&&Pr("scrollend",l);break;case"onClick":S!=null&&(l.onclick=wo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ni.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(O=g.endsWith("Capture"),h=g.slice(2,O?g.length-7:void 0),L=l[Et]||null,L=L!=null?L[g]:null,typeof L=="function"&&l.removeEventListener(h,L,O),typeof S=="function")){typeof L!="function"&&L!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(h,S,O);break e}g in l?l[g]=S:S===!0?l.setAttribute(g,""):Rc(l,g,S)}}}function ki(l,h,g){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pr("error",l),Pr("load",l);var S=!1,O=!1,L;for(L in g)if(g.hasOwnProperty(L)){var W=g[L];if(W!=null)switch(L){case"src":S=!0;break;case"srcSet":O=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,h));default:Zr(l,h,L,W,g,null)}}O&&Zr(l,h,"srcSet",g.srcSet,g,null),S&&Zr(l,h,"src",g.src,g,null);return;case"input":Pr("invalid",l);var le=L=W=O=null,Ie=null,Je=null;for(S in g)if(g.hasOwnProperty(S)){var ht=g[S];if(ht!=null)switch(S){case"name":O=ht;break;case"type":W=ht;break;case"checked":Ie=ht;break;case"defaultChecked":Je=ht;break;case"value":L=ht;break;case"defaultValue":le=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(s(137,h));break;default:Zr(l,h,S,ht,g,null)}}af(l,L,le,Ie,Je,W,O,!1);return;case"select":Pr("invalid",l),S=W=L=null;for(O in g)if(g.hasOwnProperty(O)&&(le=g[O],le!=null))switch(O){case"value":L=le;break;case"defaultValue":W=le;break;case"multiple":S=le;default:Zr(l,h,O,le,g,null)}h=L,g=W,l.multiple=!!S,h!=null?el(l,!!S,h,!1):g!=null&&el(l,!!S,g,!0);return;case"textarea":Pr("invalid",l),L=O=S=null;for(W in g)if(g.hasOwnProperty(W)&&(le=g[W],le!=null))switch(W){case"value":S=le;break;case"defaultValue":O=le;break;case"children":L=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(s(91));break;default:Zr(l,h,W,le,g,null)}qu(l,S,O,L);return;case"option":for(Ie in g)g.hasOwnProperty(Ie)&&(S=g[Ie],S!=null)&&(Ie==="selected"?l.selected=S&&typeof S!="function"&&typeof S!="symbol":Zr(l,h,Ie,S,g,null));return;case"dialog":Pr("beforetoggle",l),Pr("toggle",l),Pr("cancel",l),Pr("close",l);break;case"iframe":case"object":Pr("load",l);break;case"video":case"audio":for(S=0;S<vc.length;S++)Pr(vc[S],l);break;case"image":Pr("error",l),Pr("load",l);break;case"details":Pr("toggle",l);break;case"embed":case"source":case"link":Pr("error",l),Pr("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Je in g)if(g.hasOwnProperty(Je)&&(S=g[Je],S!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,h));default:Zr(l,h,Je,S,g,null)}return;default:if(Gl(h)){for(ht in g)g.hasOwnProperty(ht)&&(S=g[ht],S!==void 0&&Ym(l,h,ht,S,g,void 0));return}}for(le in g)g.hasOwnProperty(le)&&(S=g[le],S!=null&&Zr(l,h,le,S,g,null))}function O_(l,h,g,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var O=null,L=null,W=null,le=null,Ie=null,Je=null,ht=null;for(rt in g){var vt=g[rt];if(g.hasOwnProperty(rt)&&vt!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":Ie=vt;default:S.hasOwnProperty(rt)||Zr(l,h,rt,null,S,vt)}}for(var et in S){var rt=S[et];if(vt=g[et],S.hasOwnProperty(et)&&(rt!=null||vt!=null))switch(et){case"type":L=rt;break;case"name":O=rt;break;case"checked":Je=rt;break;case"defaultChecked":ht=rt;break;case"value":W=rt;break;case"defaultValue":le=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(s(137,h));break;default:rt!==vt&&Zr(l,h,et,rt,S,vt)}}Bc(l,W,le,Ie,Je,ht,L,O);return;case"select":rt=W=le=et=null;for(L in g)if(Ie=g[L],g.hasOwnProperty(L)&&Ie!=null)switch(L){case"value":break;case"multiple":rt=Ie;default:S.hasOwnProperty(L)||Zr(l,h,L,null,S,Ie)}for(O in S)if(L=S[O],Ie=g[O],S.hasOwnProperty(O)&&(L!=null||Ie!=null))switch(O){case"value":et=L;break;case"defaultValue":le=L;break;case"multiple":W=L;default:L!==Ie&&Zr(l,h,O,L,S,Ie)}h=le,g=W,S=rt,et!=null?el(l,!!g,et,!1):!!S!=!!g&&(h!=null?el(l,!!g,h,!0):el(l,!!g,g?[]:"",!1));return;case"textarea":rt=et=null;for(le in g)if(O=g[le],g.hasOwnProperty(le)&&O!=null&&!S.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:Zr(l,h,le,null,S,O)}for(W in S)if(O=S[W],L=g[W],S.hasOwnProperty(W)&&(O!=null||L!=null))switch(W){case"value":et=O;break;case"defaultValue":rt=O;break;case"children":break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(s(91));break;default:O!==L&&Zr(l,h,W,O,S,L)}Wp(l,et,rt);return;case"option":for(var qt in g)et=g[qt],g.hasOwnProperty(qt)&&et!=null&&!S.hasOwnProperty(qt)&&(qt==="selected"?l.selected=!1:Zr(l,h,qt,null,S,et));for(Ie in S)et=S[Ie],rt=g[Ie],S.hasOwnProperty(Ie)&&et!==rt&&(et!=null||rt!=null)&&(Ie==="selected"?l.selected=et&&typeof et!="function"&&typeof et!="symbol":Zr(l,h,Ie,et,S,rt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nr in g)et=g[nr],g.hasOwnProperty(nr)&&et!=null&&!S.hasOwnProperty(nr)&&Zr(l,h,nr,null,S,et);for(Je in S)if(et=S[Je],rt=g[Je],S.hasOwnProperty(Je)&&et!==rt&&(et!=null||rt!=null))switch(Je){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(s(137,h));break;default:Zr(l,h,Je,et,S,rt)}return;default:if(Gl(h)){for(var ln in g)et=g[ln],g.hasOwnProperty(ln)&&et!==void 0&&!S.hasOwnProperty(ln)&&Ym(l,h,ln,void 0,S,et);for(ht in S)et=S[ht],rt=g[ht],!S.hasOwnProperty(ht)||et===rt||et===void 0&&rt===void 0||Ym(l,h,ht,et,S,rt);return}}for(var Fe in g)et=g[Fe],g.hasOwnProperty(Fe)&&et!=null&&!S.hasOwnProperty(Fe)&&Zr(l,h,Fe,null,S,et);for(vt in S)et=S[vt],rt=g[vt],!S.hasOwnProperty(vt)||et===rt||et==null&&rt==null||Zr(l,h,vt,et,S,rt)}function po(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Yf(){if(typeof performance.getEntriesByType=="function"){for(var l=0,h=0,g=performance.getEntriesByType("resource"),S=0;S<g.length;S++){var O=g[S],L=O.transferSize,W=O.initiatorType,le=O.duration;if(L&&le&&po(W)){for(W=0,le=O.responseEnd,S+=1;S<g.length;S++){var Ie=g[S],Je=Ie.startTime;if(Je>le)break;var ht=Ie.transferSize,vt=Ie.initiatorType;ht&&po(vt)&&(Ie=Ie.responseEnd,W+=ht*(Ie<le?1:(le-Je)/(Ie-Je)))}if(--S,h+=8*(L+W)/(O.duration/1e3),l++,10<l)break}}if(0<l)return h/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var ip=null,Ty=null;function ap(l){return l.nodeType===9?l:l.ownerDocument}function _c(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ey(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function Wm(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var xc=null;function Km(){var l=window.event;return l&&l.type==="popstate"?l===xc?!1:(xc=l,!0):(xc=null,!1)}var Qm=typeof setTimeout=="function"?setTimeout:void 0,My=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,Cy=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(l){return Py.resolve(null).then(l).catch(Dy)}:Qm;function Dy(l){setTimeout(function(){throw l})}function bc(l){return l==="head"}function z_(l,h){var g=h,S=0;do{var O=g.nextSibling;if(l.removeChild(g),O&&O.nodeType===8)if(g=O.data,g==="/$"||g==="/&"){if(S===0){l.removeChild(O),Mc(h);return}S--}else if(g==="$"||g==="$?"||g==="$~"||g==="$!"||g==="&")S++;else if(g==="html")Wf(l.ownerDocument.documentElement);else if(g==="head"){g=l.ownerDocument.head,Wf(g);for(var L=g.firstChild;L;){var W=L.nextSibling,le=L.nodeName;L[lr]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&L.rel.toLowerCase()==="stylesheet"||g.removeChild(L),L=W}}else g==="body"&&Wf(l.ownerDocument.body);g=O}while(g);Mc(h)}function vr(l,h){var g=l;l=0;do{var S=g.nextSibling;if(g.nodeType===1?h?(g._stashedDisplay=g.style.display,g.style.display="none"):(g.style.display=g._stashedDisplay||"",g.getAttribute("style")===""&&g.removeAttribute("style")):g.nodeType===3&&(h?(g._stashedText=g.nodeValue,g.nodeValue=""):g.nodeValue=g._stashedText||""),S&&S.nodeType===8)if(g=S.data,g==="/$"){if(l===0)break;l--}else g!=="$"&&g!=="$?"&&g!=="$~"&&g!=="$!"||l++;g=S}while(g)}function Gs(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var g=h;switch(h=h.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":Gs(g),Fl(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function Vi(l,h,g,S){for(;l.nodeType===1;){var O=g;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(S){if(!l[lr])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(L=l.getAttribute("rel"),L==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(L!==O.rel||l.getAttribute("href")!==(O.href==null||O.href===""?null:O.href)||l.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin)||l.getAttribute("title")!==(O.title==null?null:O.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(L=l.getAttribute("src"),(L!==(O.src==null?null:O.src)||l.getAttribute("type")!==(O.type==null?null:O.type)||l.getAttribute("crossorigin")!==(O.crossOrigin==null?null:O.crossOrigin))&&L&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var L=O.name==null?null:""+O.name;if(O.type==="hidden"&&l.getAttribute("name")===L)return l}else return l;if(l=Ro(l.nextSibling),l===null)break}return null}function qs(l,h,g){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Ro(l.nextSibling),l===null))return null;return l}function wc(l,h){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Ro(l.nextSibling),l===null))return null;return l}function ya(l){return l.data==="$?"||l.data==="$~"}function ni(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function Ti(l,h){var g=l.ownerDocument;if(l.data==="$~")l._reactRetry=h;else if(l.data!=="$?"||g.readyState!=="loading")h();else{var S=function(){h(),g.removeEventListener("DOMContentLoaded",S)};g.addEventListener("DOMContentLoaded",S),l._reactRetry=S}}function Ro(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return l}var Ga=null;function Ei(l){l=l.nextSibling;for(var h=0;l;){if(l.nodeType===8){var g=l.data;if(g==="/$"||g==="/&"){if(h===0)return Ro(l.nextSibling);h--}else g!=="$"&&g!=="$!"&&g!=="$?"&&g!=="$~"&&g!=="&"||h++}l=l.nextSibling}return null}function op(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"||g==="$~"||g==="&"){if(h===0)return l;h--}else g!=="/$"&&g!=="/&"||h++}l=l.previousSibling}return null}function k_(l,h,g){switch(h=ap(g),l){case"html":if(l=h.documentElement,!l)throw Error(s(452));return l;case"head":if(l=h.head,!l)throw Error(s(453));return l;case"body":if(l=h.body,!l)throw Error(s(454));return l;default:throw Error(s(451))}}function Wf(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);Fl(l)}var Gi=new Map,Ph=new Set;function Jm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var El=We.d;We.d={f:R_,r:L_,D:Oy,C:va,L:Hs,m:_a,X:eg,S:Ac,M:zy};function R_(){var l=El.f(),h=Qd();return l||h}function L_(l){var h=Ss(l);h!==null&&h.tag===5&&h.type==="form"?xi(h):El.r(l)}var Sc=typeof document>"u"?null:document;function Iy(l,h,g){var S=Sc;if(S&&typeof h=="string"&&h){var O=Yi(h);O='link[rel="'+l+'"][href="'+O+'"]',typeof g=="string"&&(O+='[crossorigin="'+g+'"]'),Ph.has(O)||(Ph.add(O),l={rel:l,crossOrigin:g,href:h},S.querySelector(O)===null&&(h=S.createElement("link"),ki(h,"link",l),Pn(h),S.head.appendChild(h)))}}function Oy(l){El.D(l),Iy("dns-prefetch",l,null)}function va(l,h){El.C(l,h),Iy("preconnect",l,h)}function Hs(l,h,g){El.L(l,h,g);var S=Sc;if(S&&l&&h){var O='link[rel="preload"][as="'+Yi(h)+'"]';h==="image"&&g&&g.imageSrcSet?(O+='[imagesrcset="'+Yi(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(O+='[imagesizes="'+Yi(g.imageSizes)+'"]')):O+='[href="'+Yi(l)+'"]';var L=O;switch(h){case"style":L=Ch(l);break;case"script":L=wu(l)}Gi.has(L)||(l=k({rel:"preload",href:h==="image"&&g&&g.imageSrcSet?void 0:l,as:h},g),Gi.set(L,l),S.querySelector(O)!==null||h==="style"&&S.querySelector(Kf(L))||h==="script"&&S.querySelector(Qf(L))||(h=S.createElement("link"),ki(h,"link",l),Pn(h),S.head.appendChild(h)))}}function _a(l,h){El.m(l,h);var g=Sc;if(g&&l){var S=h&&typeof h.as=="string"?h.as:"script",O='link[rel="modulepreload"][as="'+Yi(S)+'"][href="'+Yi(l)+'"]',L=O;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=wu(l)}if(!Gi.has(L)&&(l=k({rel:"modulepreload",href:l},h),Gi.set(L,l),g.querySelector(O)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Qf(L)))return}S=g.createElement("link"),ki(S,"link",l),Pn(S),g.head.appendChild(S)}}}function Ac(l,h,g){El.S(l,h,g);var S=Sc;if(S&&l){var O=Xo(S).hoistableStyles,L=Ch(l);h=h||"default";var W=O.get(L);if(!W){var le={loading:0,preload:null};if(W=S.querySelector(Kf(L)))le.loading=5;else{l=k({rel:"stylesheet",href:l,"data-precedence":h},g),(g=Gi.get(L))&&sp(l,g);var Ie=W=S.createElement("link");Pn(Ie),ki(Ie,"link",l),Ie._p=new Promise(function(Je,ht){Ie.onload=Je,Ie.onerror=ht}),Ie.addEventListener("load",function(){le.loading|=1}),Ie.addEventListener("error",function(){le.loading|=2}),le.loading|=4,Su(W,h,S)}W={type:"stylesheet",instance:W,count:1,state:le},O.set(L,W)}}}function eg(l,h){El.X(l,h);var g=Sc;if(g&&l){var S=Xo(g).hoistableScripts,O=wu(l),L=S.get(O);L||(L=g.querySelector(Qf(O)),L||(l=k({src:l,async:!0},h),(h=Gi.get(O))&&tg(l,h),L=g.createElement("script"),Pn(L),ki(L,"link",l),g.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(O,L))}}function zy(l,h){El.M(l,h);var g=Sc;if(g&&l){var S=Xo(g).hoistableScripts,O=wu(l),L=S.get(O);L||(L=g.querySelector(Qf(O)),L||(l=k({src:l,async:!0,type:"module"},h),(h=Gi.get(O))&&tg(l,h),L=g.createElement("script"),Pn(L),ki(L,"link",l),g.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},S.set(O,L))}}function ky(l,h,g,S){var O=(O=Qt.current)?Jm(O):null;if(!O)throw Error(s(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(h=Ch(g.href),g=Xo(O).hoistableStyles,S=g.get(h),S||(S={type:"style",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=Ch(g.href);var L=Xo(O).hoistableStyles,W=L.get(l);if(W||(O=O.ownerDocument||O,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(l,W),(L=O.querySelector(Kf(l)))&&!L._p&&(W.instance=L,W.state.loading=5),Gi.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},Gi.set(l,g),L||Ly(O,l,g,W.state))),h&&S===null)throw Error(s(528,""));return W}if(h&&S!==null)throw Error(s(529,""));return null;case"script":return h=g.async,g=g.src,typeof g=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=wu(g),g=Xo(O).hoistableScripts,S=g.get(h),S||(S={type:"script",instance:null,count:0,state:null},g.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,l))}}function Ch(l){return'href="'+Yi(l)+'"'}function Kf(l){return'link[rel="stylesheet"]['+l+"]"}function Ry(l){return k({},l,{"data-precedence":l.precedence,precedence:null})}function Ly(l,h,g,S){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=l.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),ki(h,"link",g),Pn(h),l.head.appendChild(h))}function wu(l){return'[src="'+Yi(l)+'"]'}function Qf(l){return"script[async]"+l}function By(l,h,g){if(h.count++,h.instance===null)switch(h.type){case"style":var S=l.querySelector('style[data-href~="'+Yi(g.href)+'"]');if(S)return h.instance=S,Pn(S),S;var O=k({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return S=(l.ownerDocument||l).createElement("style"),Pn(S),ki(S,"style",O),Su(S,g.precedence,l),h.instance=S;case"stylesheet":O=Ch(g.href);var L=l.querySelector(Kf(O));if(L)return h.state.loading|=4,h.instance=L,Pn(L),L;S=Ry(g),(O=Gi.get(O))&&sp(S,O),L=(l.ownerDocument||l).createElement("link"),Pn(L);var W=L;return W._p=new Promise(function(le,Ie){W.onload=le,W.onerror=Ie}),ki(L,"link",S),h.state.loading|=4,Su(L,g.precedence,l),h.instance=L;case"script":return L=wu(g.src),(O=l.querySelector(Qf(L)))?(h.instance=O,Pn(O),O):(S=g,(O=Gi.get(L))&&(S=k({},g),tg(S,O)),l=l.ownerDocument||l,O=l.createElement("script"),Pn(O),ki(O,"link",S),l.head.appendChild(O),h.instance=O);case"void":return null;default:throw Error(s(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,Su(S,g.precedence,l));return h.instance}function Su(l,h,g){for(var S=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),O=S.length?S[S.length-1]:null,L=O,W=0;W<S.length;W++){var le=S[W];if(le.dataset.precedence===h)L=le;else if(L!==O)break}L?L.parentNode.insertBefore(l,L.nextSibling):(h=g.nodeType===9?g.head:g,h.insertBefore(l,h.firstChild))}function sp(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function tg(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var rg=null;function jy(l,h,g){if(rg===null){var S=new Map,O=rg=new Map;O.set(g,S)}else O=rg,S=O.get(g),S||(S=new Map,O.set(g,S));if(S.has(l))return S;for(S.set(l,null),g=g.getElementsByTagName(l),O=0;O<g.length;O++){var L=g[O];if(!(L[lr]||L[nn]||l==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var W=L.getAttribute(h)||"";W=l+W;var le=S.get(W);le?le.push(L):S.set(W,[L])}}return S}function lp(l,h,g){l=l.ownerDocument||l,l.head.insertBefore(g,h==="title"?l.querySelector("head > title"):null)}function ng(l,h,g){if(g===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;return h.rel==="stylesheet"?(l=h.disabled,typeof h.precedence=="string"&&l==null):!0;case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function up(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function Ny(l,h,g,S){if(g.type==="stylesheet"&&(typeof S.media!="string"||matchMedia(S.media).matches!==!1)&&(g.state.loading&4)===0){if(g.instance===null){var O=Ch(S.href),L=h.querySelector(Kf(O));if(L){h=L._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(l.count++,l=hp.bind(l),h.then(l,l)),g.state.loading|=4,g.instance=L,Pn(L);return}L=h.ownerDocument||h,S=Ry(S),(O=Gi.get(O))&&sp(S,O),L=L.createElement("link"),Pn(L);var W=L;W._p=new Promise(function(le,Ie){W.onload=le,W.onerror=Ie}),ki(L,"link",S),g.instance=L}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(g,h),(h=g.state.preload)&&(g.state.loading&3)===0&&(l.count++,g=hp.bind(l),h.addEventListener("load",g),h.addEventListener("error",g))}}var cp=0;function Fy(l,h){return l.stylesheets&&l.count===0&&dp(l,l.stylesheets),0<l.count||0<l.imgCount?function(g){var S=setTimeout(function(){if(l.stylesheets&&dp(l,l.stylesheets),l.unsuspend){var L=l.unsuspend;l.unsuspend=null,L()}},6e4+h);0<l.imgBytes&&cp===0&&(cp=62500*Yf());var O=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&dp(l,l.stylesheets),l.unsuspend)){var L=l.unsuspend;l.unsuspend=null,L()}},(l.imgBytes>cp?50:800)+h);return l.unsuspend=g,function(){l.unsuspend=null,clearTimeout(S),clearTimeout(O)}}:null}function hp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dp(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var fp=null;function dp(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,fp=new Map,h.forEach(B_,l),fp=null,hp.call(l))}function B_(l,h){if(!(h.state.loading&4)){var g=fp.get(l);if(g)var S=g.get(null);else{g=new Map,fp.set(l,g);for(var O=l.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<O.length;L++){var W=O[L];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(g.set(W.dataset.precedence,W),S=W)}S&&g.set(null,S)}O=h.instance,W=O.getAttribute("data-precedence"),L=g.get(W)||S,L===S&&g.set(null,O),g.set(W,O),this.count++,S=hp.bind(this),O.addEventListener("load",S),O.addEventListener("error",S),L?L.parentNode.insertBefore(O,L.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(O,l.firstChild)),h.state.loading|=4}}var Jf={$$typeof:me,Provider:null,Consumer:null,_currentValue:_t,_currentValue2:_t,_threadCount:0};function db(l,h,g,S,O,L,W,le,Ie){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=li(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=li(0),this.hiddenUpdates=li(null),this.identifierPrefix=S,this.onUncaughtError=O,this.onCaughtError=L,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ie,this.incompleteTransitions=new Map}function Uy(l,h,g,S,O,L,W,le,Ie,Je,ht,vt){return l=new db(l,h,g,W,Ie,Je,ht,vt,le),h=1,L===!0&&(h|=24),L=za(3,null,null,h),l.current=L,L.stateNode=l,h=ss(),h.refCount++,l.pooledCache=h,h.refCount++,L.memoizedState={element:S,isDehydrated:g,cache:h},Df(L),l}function j_(l){return l?(l=hr,l):hr}function N_(l,h,g,S,O,L){O=j_(O),S.context===null?S.context=O:S.pendingContext=O,S=fs(h),S.payload={element:g},L=L===void 0?null:L,L!==null&&(S.callback=L),g=zs(l,S,h),g!==null&&(fo(g,l,h),no(g,l,h))}function ig(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<h?g:h}}function ag(l,h){ig(l,h),(l=l.alternate)&&ig(l,h)}function F_(l){if(l.tag===13||l.tag===31){var h=eo(l,67108864);h!==null&&fo(h,l,67108864),ag(l,67108864)}}function U_(l){if(l.tag===13||l.tag===31){var h=ho();h=Nl(h);var g=eo(l,h);g!==null&&fo(g,l,h),ag(l,h)}}var pp=!0;function mp(l,h,g,S){var O=Le.T;Le.T=null;var L=We.p;try{We.p=2,Vy(l,h,g,S)}finally{We.p=L,Le.T=O}}function V_(l,h,g,S){var O=Le.T;Le.T=null;var L=We.p;try{We.p=8,Vy(l,h,g,S)}finally{We.p=L,Le.T=O}}function Vy(l,h,g,S){if(pp){var O=gp(S);if(O===null)Tl(l,h,S,ed,g),G_(l,S);else if(mb(O,l,h,g,S))S.stopPropagation();else if(G_(l,S),h&4&&-1<pb.indexOf(l)){for(;O!==null;){var L=Ss(O);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var W=Ve(L.pendingLanes);if(W!==0){var le=L;for(le.pendingLanes|=2,le.entangledLanes|=2;W;){var Ie=1<<31-lt(W);le.entanglements[1]|=Ie,W&=~Ie}Vs(L),(en&6)===0&&(Wd=gi()+500,ko(0))}}break;case 31:case 13:le=eo(L,2),le!==null&&fo(le,L,2),Qd(),ag(L,2)}if(L=gp(S),L===null&&Tl(l,h,S,ed,g),L===O)break;O=L}O!==null&&S.stopPropagation()}else Tl(l,h,S,null,g)}}function gp(l){return l=Nc(l),og(l)}var ed=null;function og(l){if(ed=null,l=Zo(l),l!==null){var h=y(l);if(h===null)l=null;else{var g=h.tag;if(g===13){if(l=_(h),l!==null)return l;l=null}else if(g===31){if(l=c(h),l!==null)return l;l=null}else if(g===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return ed=l,null}function Dh(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(la()){case Ue:return 2;case ne:return 8;case re:case ue:return 32;case Ee:return 268435456;default:return 32}default:return 32}}var sg=!1,Tc=null,vs=null,Ec=null,yp=new Map,td=new Map,Au=[],pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G_(l,h){switch(l){case"focusin":case"focusout":Tc=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":Ec=null;break;case"pointerover":case"pointerout":yp.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":td.delete(h.pointerId)}}function vp(l,h,g,S,O,L){return l===null||l.nativeEvent!==L?(l={blockedOn:h,domEventName:g,eventSystemFlags:S,nativeEvent:L,targetContainers:[O]},h!==null&&(h=Ss(h),h!==null&&F_(h)),l):(l.eventSystemFlags|=S,h=l.targetContainers,O!==null&&h.indexOf(O)===-1&&h.push(O),l)}function mb(l,h,g,S,O){switch(h){case"focusin":return Tc=vp(Tc,l,h,g,S,O),!0;case"dragenter":return vs=vp(vs,l,h,g,S,O),!0;case"mouseover":return Ec=vp(Ec,l,h,g,S,O),!0;case"pointerover":var L=O.pointerId;return yp.set(L,vp(yp.get(L)||null,l,h,g,S,O)),!0;case"gotpointercapture":return L=O.pointerId,td.set(L,vp(td.get(L)||null,l,h,g,S,O)),!0}return!1}function q_(l){var h=Zo(l.target);if(h!==null){var g=y(h);if(g!==null){if(h=g.tag,h===13){if(h=_(g),h!==null){l.blockedOn=h,ji(l.priority,function(){U_(g)});return}}else if(h===31){if(h=c(g),h!==null){l.blockedOn=h,ji(l.priority,function(){U_(g)});return}}else if(h===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function _p(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var g=gp(l.nativeEvent);if(g===null){g=l.nativeEvent;var S=new g.constructor(g.type,g);gd=S,g.target.dispatchEvent(S),gd=null}else return h=Ss(g),h!==null&&F_(h),l.blockedOn=g,!1;h.shift()}return!0}function H_(l,h,g){_p(l)&&g.delete(h)}function xp(){sg=!1,Tc!==null&&_p(Tc)&&(Tc=null),vs!==null&&_p(vs)&&(vs=null),Ec!==null&&_p(Ec)&&(Ec=null),yp.forEach(H_),td.forEach(H_)}function lg(l,h){l.blockedOn===h&&(l.blockedOn=null,sg||(sg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xp)))}var ug=null;function Z_(l){ug!==l&&(ug=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ug===l&&(ug=null);for(var h=0;h<l.length;h+=3){var g=l[h],S=l[h+1],O=l[h+2];if(typeof S!="function"){if(og(S||g)===null)continue;break}var L=Ss(g);L!==null&&(l.splice(h,3),h-=3,On(L,{pending:!0,data:O,method:g.method,action:S},S,O))}}))}function Mc(l){function h(Ie){return lg(Ie,l)}Tc!==null&&lg(Tc,l),vs!==null&&lg(vs,l),Ec!==null&&lg(Ec,l),yp.forEach(h),td.forEach(h);for(var g=0;g<Au.length;g++){var S=Au[g];S.blockedOn===l&&(S.blockedOn=null)}for(;0<Au.length&&(g=Au[0],g.blockedOn===null);)q_(g),g.blockedOn===null&&Au.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(S=0;S<g.length;S+=3){var O=g[S],L=g[S+1],W=O[Et]||null;if(typeof L=="function")W||Z_(g);else if(W){var le=null;if(L&&L.hasAttribute("formAction")){if(O=L,W=L[Et]||null)le=W.formAction;else if(og(O)!==null)continue}else le=W.action;typeof le=="function"?g[S+1]=le:(g.splice(S,3),S-=3),Z_(g)}}}function Gy(){function l(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(W){return O=W})},focusReset:"manual",scroll:"manual"})}function h(){O!==null&&(O(),O=null),S||setTimeout(g,20)}function g(){if(!S&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var S=!1,O=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(g,100),function(){S=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),O!==null&&(O(),O=null)}}}function qy(l){this._internalRoot=l}cg.prototype.render=qy.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(s(409));var g=h.current,S=ho();N_(g,S,l,h,null,null)},cg.prototype.unmount=qy.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;N_(l.current,2,null,l,null,null),Qd(),h[ur]=null}};function cg(l){this._internalRoot=l}cg.prototype.unstable_scheduleHydration=function(l){if(l){var h=Bi();l={blockedOn:null,target:l,priority:h};for(var g=0;g<Au.length&&h!==0&&h<Au[g].priority;g++);Au.splice(g,0,l),g===0&&q_(l)}};var Hy=t.version;if(Hy!=="19.2.3")throw Error(s(527,Hy,"19.2.3"));We.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(s(188)):(l=Object.keys(l).join(","),Error(s(268,l)));return l=C(h),l=l!==null?D(l):null,l=l===null?null:l.stateNode,l};var $_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Le,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hg.isDisabled&&hg.supportsFiber)try{Ne=hg.inject($_),ze=hg}catch{}}return Ky.createRoot=function(l,h){if(!m(l))throw Error(s(299));var g=!1,S="",O=kf,L=js,W=Ns;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(O=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(W=h.onRecoverableError)),h=Uy(l,1,!1,null,null,g,S,null,O,L,W,Gy),l[ur]=h.current,wy(l),new qy(h)},Ky.hydrateRoot=function(l,h,g){if(!m(l))throw Error(s(299));var S=!1,O="",L=kf,W=js,le=Ns,Ie=null;return g!=null&&(g.unstable_strictMode===!0&&(S=!0),g.identifierPrefix!==void 0&&(O=g.identifierPrefix),g.onUncaughtError!==void 0&&(L=g.onUncaughtError),g.onCaughtError!==void 0&&(W=g.onCaughtError),g.onRecoverableError!==void 0&&(le=g.onRecoverableError),g.formState!==void 0&&(Ie=g.formState)),h=Uy(l,1,!0,h,g??null,S,O,Ie,L,W,le,Gy),h.context=j_(null),g=h.current,S=ho(),S=Nl(S),O=fs(S),O.callback=null,zs(g,O,S),g=S,h.current.lanes=g,Gr(h,g),Vs(h),l[ur]=h.current,wy(l),new cg(h)},Ky.version="19.2.3",Ky}var yA;function fR(){if(yA)return Mb.exports;yA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Mb.exports=hR(),Mb.exports}var dR=fR();var vA="popstate";function pR(e={}){function t(s,m){let{pathname:y,search:_,hash:c}=s.location;return hw("",{pathname:y,search:_,hash:c},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(s,m){return typeof m=="string"?m:cv(m)}return gR(t,i,null,e)}function pi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function zu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function mR(){return Math.random().toString(36).substring(2,10)}function _A(e,t){return{usr:e.state,key:e.key,idx:t}}function hw(e,t,i=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?zg(t):t,state:i,key:t&&t.key||s||mR()}}function cv({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function zg(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function gR(e,t,i,s={}){let{window:m=document.defaultView,v5Compat:y=!1}=s,_=m.history,c="POP",P=null,C=D();C==null&&(C=0,_.replaceState({..._.state,idx:C},""));function D(){return(_.state||{idx:null}).idx}function k(){c="POP";let G=D(),oe=G==null?null:G-C;C=G,P&&P({action:c,location:Z.location,delta:oe})}function U(G,oe){c="PUSH";let he=hw(Z.location,G,oe);C=D()+1;let me=_A(he,C),Ce=Z.createHref(he);try{_.pushState(me,"",Ce)}catch(be){if(be instanceof DOMException&&be.name==="DataCloneError")throw be;m.location.assign(Ce)}y&&P&&P({action:c,location:Z.location,delta:1})}function V(G,oe){c="REPLACE";let he=hw(Z.location,G,oe);C=D();let me=_A(he,C),Ce=Z.createHref(he);_.replaceState(me,"",Ce),y&&P&&P({action:c,location:Z.location,delta:0})}function Q(G){return yR(G)}let Z={get action(){return c},get location(){return e(m,_)},listen(G){if(P)throw new Error("A history only accepts one active listener");return m.addEventListener(vA,k),P=G,()=>{m.removeEventListener(vA,k),P=null}},createHref(G){return t(m,G)},createURL:Q,encodeLocation(G){let oe=Q(G);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:U,replace:V,go(G){return _.go(G)}};return Z}function yR(e,t=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),pi(i,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:cv(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function lC(e,t,i="/"){return vR(e,t,i,!1)}function vR(e,t,i,s){let m=typeof t=="string"?zg(t):t,y=Uh(m.pathname||"/",i);if(y==null)return null;let _=uC(e);_R(_);let c=null;for(let P=0;c==null&&P<_.length;++P){let C=DR(y);c=PR(_[P],C,s)}return c}function uC(e,t=[],i=[],s="",m=!1){let y=(_,c,P=m,C)=>{let D={relativePath:C===void 0?_.path||"":C,caseSensitive:_.caseSensitive===!0,childrenIndex:c,route:_};if(D.relativePath.startsWith("/")){if(!D.relativePath.startsWith(s)&&P)return;pi(D.relativePath.startsWith(s),`Absolute route path "${D.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),D.relativePath=D.relativePath.slice(s.length)}let k=jh([s,D.relativePath]),U=i.concat(D);_.children&&_.children.length>0&&(pi(_.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),uC(_.children,t,U,k,P)),!(_.path==null&&!_.index)&&t.push({path:k,score:ER(k,_.index),routesMeta:U})};return e.forEach((_,c)=>{if(_.path===""||!_.path?.includes("?"))y(_,c);else for(let P of cC(_.path))y(_,c,!0,P)}),t}function cC(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,m=i.endsWith("?"),y=i.replace(/\?$/,"");if(s.length===0)return m?[y,""]:[y];let _=cC(s.join("/")),c=[];return c.push(..._.map(P=>P===""?y:[y,P].join("/"))),m&&c.push(..._),c.map(P=>e.startsWith("/")&&P===""?"/":P)}function _R(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:MR(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var xR=/^:[\w-]+$/,bR=3,wR=2,SR=1,AR=10,TR=-2,xA=e=>e==="*";function ER(e,t){let i=e.split("/"),s=i.length;return i.some(xA)&&(s+=TR),t&&(s+=wR),i.filter(m=>!xA(m)).reduce((m,y)=>m+(xR.test(y)?bR:y===""?SR:AR),s)}function MR(e,t){return e.length===t.length&&e.slice(0,-1).every((s,m)=>s===t[m])?e[e.length-1]-t[t.length-1]:0}function PR(e,t,i=!1){let{routesMeta:s}=e,m={},y="/",_=[];for(let c=0;c<s.length;++c){let P=s[c],C=c===s.length-1,D=y==="/"?t:t.slice(y.length)||"/",k=w0({path:P.relativePath,caseSensitive:P.caseSensitive,end:C},D),U=P.route;if(!k&&C&&i&&!s[s.length-1].route.index&&(k=w0({path:P.relativePath,caseSensitive:P.caseSensitive,end:!1},D)),!k)return null;Object.assign(m,k.params),_.push({params:m,pathname:jh([y,k.pathname]),pathnameBase:kR(jh([y,k.pathnameBase])),route:U}),k.pathnameBase!=="/"&&(y=jh([y,k.pathnameBase]))}return _}function w0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=CR(e.path,e.caseSensitive,e.end),m=t.match(i);if(!m)return null;let y=m[0],_=y.replace(/(.)\/+$/,"$1"),c=m.slice(1);return{params:s.reduce((C,{paramName:D,isOptional:k},U)=>{if(D==="*"){let Q=c[U]||"";_=y.slice(0,y.length-Q.length).replace(/(.)\/+$/,"$1")}const V=c[U];return k&&!V?C[D]=void 0:C[D]=(V||"").replace(/%2F/g,"/"),C},{}),pathname:y,pathnameBase:_,pattern:e}}function CR(e,t=!1,i=!0){zu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],m="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,c,P)=>(s.push({paramName:c,isOptional:P!=null}),P?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),m+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?m+="\\/*$":e!==""&&e!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,t?void 0:"i"),s]}function DR(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return zu(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Uh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}var hC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,IR=e=>hC.test(e);function OR(e,t="/"){let{pathname:i,search:s="",hash:m=""}=typeof e=="string"?zg(e):e,y;if(i)if(IR(i))y=i;else{if(i.includes("//")){let _=i;i=i.replace(/\/\/+/g,"/"),zu(!1,`Pathnames cannot have embedded double slashes - normalizing ${_} -> ${i}`)}i.startsWith("/")?y=bA(i.substring(1),"/"):y=bA(i,t)}else y=t;return{pathname:y,search:RR(s),hash:LR(m)}}function bA(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(m=>{m===".."?i.length>1&&i.pop():m!=="."&&i.push(m)}),i.length>1?i.join("/"):"/"}function Ib(e,t,i,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zR(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function fC(e){let t=zR(e);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function dC(e,t,i,s=!1){let m;typeof e=="string"?m=zg(e):(m={...e},pi(!m.pathname||!m.pathname.includes("?"),Ib("?","pathname","search",m)),pi(!m.pathname||!m.pathname.includes("#"),Ib("#","pathname","hash",m)),pi(!m.search||!m.search.includes("#"),Ib("#","search","hash",m)));let y=e===""||m.pathname==="",_=y?"/":m.pathname,c;if(_==null)c=i;else{let k=t.length-1;if(!s&&_.startsWith("..")){let U=_.split("/");for(;U[0]==="..";)U.shift(),k-=1;m.pathname=U.join("/")}c=k>=0?t[k]:"/"}let P=OR(m,c),C=_&&_!=="/"&&_.endsWith("/"),D=(y||_===".")&&i.endsWith("/");return!P.pathname.endsWith("/")&&(C||D)&&(P.pathname+="/"),P}var jh=e=>e.join("/").replace(/\/\/+/g,"/"),kR=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RR=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LR=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,BR=class{constructor(e,t,i,s=!1){this.status=e,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function jR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function NR(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mC(e,t){let i=e;if(typeof i!="string"||!hC.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,m=!1;if(pC)try{let y=new URL(window.location.href),_=i.startsWith("//")?new URL(y.protocol+i):new URL(i),c=Uh(_.pathname,t);_.origin===y.origin&&c!=null?i=c+_.search+_.hash:m=!0}catch{zu(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:m,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gC=["POST","PUT","PATCH","DELETE"];new Set(gC);var FR=["GET",...gC];new Set(FR);var kg=H.createContext(null);kg.displayName="DataRouter";var px=H.createContext(null);px.displayName="DataRouterState";var UR=H.createContext(!1),yC=H.createContext({isTransitioning:!1});yC.displayName="ViewTransition";var VR=H.createContext(new Map);VR.displayName="Fetchers";var GR=H.createContext(null);GR.displayName="Await";var Ll=H.createContext(null);Ll.displayName="Navigation";var Pv=H.createContext(null);Pv.displayName="Location";var Yh=H.createContext({outlet:null,matches:[],isDataRoute:!1});Yh.displayName="Route";var m2=H.createContext(null);m2.displayName="RouteError";var vC="REACT_ROUTER_ERROR",qR="REDIRECT",HR="ROUTE_ERROR_RESPONSE";function ZR(e){if(e.startsWith(`${vC}:${qR}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function $R(e){if(e.startsWith(`${vC}:${HR}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new BR(t.status,t.statusText,t.data)}catch{}}function XR(e,{relative:t}={}){pi(Cv(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=H.useContext(Ll),{hash:m,pathname:y,search:_}=Dv(e,{relative:t}),c=y;return i!=="/"&&(c=y==="/"?i:jh([i,y])),s.createHref({pathname:c,search:_,hash:m})}function Cv(){return H.useContext(Pv)!=null}function Gp(){return pi(Cv(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Pv).location}var _C="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xC(e){H.useContext(Ll).static||H.useLayoutEffect(e)}function g2(){let{isDataRoute:e}=H.useContext(Yh);return e?s3():YR()}function YR(){pi(Cv(),"useNavigate() may be used only in the context of a <Router> component.");let e=H.useContext(kg),{basename:t,navigator:i}=H.useContext(Ll),{matches:s}=H.useContext(Yh),{pathname:m}=Gp(),y=JSON.stringify(fC(s)),_=H.useRef(!1);return xC(()=>{_.current=!0}),H.useCallback((P,C={})=>{if(zu(_.current,_C),!_.current)return;if(typeof P=="number"){i.go(P);return}let D=dC(P,JSON.parse(y),m,C.relative==="path");e==null&&t!=="/"&&(D.pathname=D.pathname==="/"?t:jh([t,D.pathname])),(C.replace?i.replace:i.push)(D,C.state,C)},[t,i,y,m,e])}H.createContext(null);function Dv(e,{relative:t}={}){let{matches:i}=H.useContext(Yh),{pathname:s}=Gp(),m=JSON.stringify(fC(i));return H.useMemo(()=>dC(e,JSON.parse(m),s,t==="path"),[e,m,s,t])}function WR(e,t){return bC(e,t)}function bC(e,t,i,s,m){pi(Cv(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:y}=H.useContext(Ll),{matches:_}=H.useContext(Yh),c=_[_.length-1],P=c?c.params:{},C=c?c.pathname:"/",D=c?c.pathnameBase:"/",k=c&&c.route;{let he=k&&k.path||"";SC(C,!k||he.endsWith("*")||he.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${C}" (under <Route path="${he}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${he}"> to <Route path="${he==="/"?"*":`${he}/*`}">.`)}let U=Gp(),V;if(t){let he=typeof t=="string"?zg(t):t;pi(D==="/"||he.pathname?.startsWith(D),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${D}" but pathname "${he.pathname}" was given in the \`location\` prop.`),V=he}else V=U;let Q=V.pathname||"/",Z=Q;if(D!=="/"){let he=D.replace(/^\//,"").split("/");Z="/"+Q.replace(/^\//,"").split("/").slice(he.length).join("/")}let G=lC(e,{pathname:Z});zu(k||G!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),zu(G==null||G[G.length-1].route.element!==void 0||G[G.length-1].route.Component!==void 0||G[G.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let oe=t3(G&&G.map(he=>Object.assign({},he,{params:Object.assign({},P,he.params),pathname:jh([D,y.encodeLocation?y.encodeLocation(he.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathname]),pathnameBase:he.pathnameBase==="/"?D:jh([D,y.encodeLocation?y.encodeLocation(he.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathnameBase])})),_,i,s,m);return t&&oe?H.createElement(Pv.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},oe):oe}function KR(){let e=o3(),t=jR(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:s},y={padding:"2px 4px",backgroundColor:s},_=null;return console.error("Error handled by React Router default ErrorBoundary:",e),_=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:y},"ErrorBoundary")," or"," ",H.createElement("code",{style:y},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},t),i?H.createElement("pre",{style:m},i):null,_)}var QR=H.createElement(KR,null),wC=class extends H.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const i=$R(e.digest);i&&(e=i)}let t=e!==void 0?H.createElement(Yh.Provider,{value:this.props.routeContext},H.createElement(m2.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?H.createElement(JR,{error:e},t):t}};wC.contextType=UR;var Ob=new WeakMap;function JR({children:e,error:t}){let{basename:i}=H.useContext(Ll);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let s=ZR(t.digest);if(s){let m=Ob.get(t);if(m)throw m;let y=mC(s.location,i);if(pC&&!Ob.get(t))if(y.isExternal||s.reloadDocument)window.location.href=y.absoluteURL||y.to;else{const _=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(y.to,{replace:s.replace}));throw Ob.set(t,_),_}return H.createElement("meta",{httpEquiv:"refresh",content:`0;url=${y.absoluteURL||y.to}`})}}return e}function e3({routeContext:e,match:t,children:i}){let s=H.useContext(kg);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),H.createElement(Yh.Provider,{value:e},i)}function t3(e,t=[],i=null,s=null,m=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let y=e,_=i?.errors;if(_!=null){let D=y.findIndex(k=>k.route.id&&_?.[k.route.id]!==void 0);pi(D>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(_).join(",")}`),y=y.slice(0,Math.min(y.length,D+1))}let c=!1,P=-1;if(i)for(let D=0;D<y.length;D++){let k=y[D];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(P=D),k.route.id){let{loaderData:U,errors:V}=i,Q=k.route.loader&&!U.hasOwnProperty(k.route.id)&&(!V||V[k.route.id]===void 0);if(k.route.lazy||Q){c=!0,P>=0?y=y.slice(0,P+1):y=[y[0]];break}}}let C=i&&s?(D,k)=>{s(D,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:NR(i.matches),errorInfo:k})}:void 0;return y.reduceRight((D,k,U)=>{let V,Q=!1,Z=null,G=null;i&&(V=_&&k.route.id?_[k.route.id]:void 0,Z=k.route.errorElement||QR,c&&(P<0&&U===0?(SC("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Q=!0,G=null):P===U&&(Q=!0,G=k.route.hydrateFallbackElement||null)));let oe=t.concat(y.slice(0,U+1)),he=()=>{let me;return V?me=Z:Q?me=G:k.route.Component?me=H.createElement(k.route.Component,null):k.route.element?me=k.route.element:me=D,H.createElement(e3,{match:k,routeContext:{outlet:D,matches:oe,isDataRoute:i!=null},children:me})};return i&&(k.route.ErrorBoundary||k.route.errorElement||U===0)?H.createElement(wC,{location:i.location,revalidation:i.revalidation,component:Z,error:V,children:he(),routeContext:{outlet:null,matches:oe,isDataRoute:!0},onError:C}):he()},null)}function y2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function r3(e){let t=H.useContext(kg);return pi(t,y2(e)),t}function n3(e){let t=H.useContext(px);return pi(t,y2(e)),t}function i3(e){let t=H.useContext(Yh);return pi(t,y2(e)),t}function v2(e){let t=i3(e),i=t.matches[t.matches.length-1];return pi(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function a3(){return v2("useRouteId")}function o3(){let e=H.useContext(m2),t=n3("useRouteError"),i=v2("useRouteError");return e!==void 0?e:t.errors?.[i]}function s3(){let{router:e}=r3("useNavigate"),t=v2("useNavigate"),i=H.useRef(!1);return xC(()=>{i.current=!0}),H.useCallback(async(m,y={})=>{zu(i.current,_C),i.current&&(typeof m=="number"?await e.navigate(m):await e.navigate(m,{fromRouteId:t,...y}))},[e,t])}var wA={};function SC(e,t,i){!t&&!wA[e]&&(wA[e]=!0,zu(!1,i))}H.memo(l3);function l3({routes:e,future:t,state:i,onError:s}){return bC(e,void 0,i,s,t)}function fw(e){pi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u3({basename:e="/",children:t=null,location:i,navigationType:s="POP",navigator:m,static:y=!1,unstable_useTransitions:_}){pi(!Cv(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),P=H.useMemo(()=>({basename:c,navigator:m,static:y,unstable_useTransitions:_,future:{}}),[c,m,y,_]);typeof i=="string"&&(i=zg(i));let{pathname:C="/",search:D="",hash:k="",state:U=null,key:V="default"}=i,Q=H.useMemo(()=>{let Z=Uh(C,c);return Z==null?null:{location:{pathname:Z,search:D,hash:k,state:U,key:V},navigationType:s}},[c,C,D,k,U,V,s]);return zu(Q!=null,`<Router basename="${c}"> is not able to match the URL "${C}${D}${k}" because it does not start with the basename, so the <Router> won't render anything.`),Q==null?null:H.createElement(Ll.Provider,{value:P},H.createElement(Pv.Provider,{children:t,value:Q}))}function c3({children:e,location:t}){return WR(dw(e),t)}function dw(e,t=[]){let i=[];return H.Children.forEach(e,(s,m)=>{if(!H.isValidElement(s))return;let y=[...t,m];if(s.type===H.Fragment){i.push.apply(i,dw(s.props.children,y));return}pi(s.type===fw,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pi(!s.props.index||!s.props.children,"An index route cannot have child routes.");let _={id:s.props.id||y.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(_.children=dw(s.props.children,y)),i.push(_)}),i}var p0="get",m0="application/x-www-form-urlencoded";function mx(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function h3(e){return mx(e)&&e.tagName.toLowerCase()==="button"}function f3(e){return mx(e)&&e.tagName.toLowerCase()==="form"}function d3(e){return mx(e)&&e.tagName.toLowerCase()==="input"}function p3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function m3(e,t){return e.button===0&&(!t||t==="_self")&&!p3(e)}var W_=null;function g3(){if(W_===null)try{new FormData(document.createElement("form"),0),W_=!1}catch{W_=!0}return W_}var y3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zb(e){return e!=null&&!y3.has(e)?(zu(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${m0}"`),null):e}function v3(e,t){let i,s,m,y,_;if(f3(e)){let c=e.getAttribute("action");s=c?Uh(c,t):null,i=e.getAttribute("method")||p0,m=zb(e.getAttribute("enctype"))||m0,y=new FormData(e)}else if(h3(e)||d3(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let P=e.getAttribute("formaction")||c.getAttribute("action");if(s=P?Uh(P,t):null,i=e.getAttribute("formmethod")||c.getAttribute("method")||p0,m=zb(e.getAttribute("formenctype"))||zb(c.getAttribute("enctype"))||m0,y=new FormData(c,e),!g3()){let{name:C,type:D,value:k}=e;if(D==="image"){let U=C?`${C}.`:"";y.append(`${U}x`,"0"),y.append(`${U}y`,"0")}else C&&y.append(C,k)}}else{if(mx(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=p0,s=null,m=m0,_=e}return y&&m==="text/plain"&&(_=y,y=void 0),{action:s,method:i.toLowerCase(),encType:m,formData:y,body:_}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _3(e,t,i,s){let m=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i?m.pathname.endsWith("/")?m.pathname=`${m.pathname}_.${s}`:m.pathname=`${m.pathname}.${s}`:m.pathname==="/"?m.pathname=`_root.${s}`:t&&Uh(m.pathname,t)==="/"?m.pathname=`${t.replace(/\/$/,"")}/_root.${s}`:m.pathname=`${m.pathname.replace(/\/$/,"")}.${s}`,m}async function x3(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function b3(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function w3(e,t,i){let s=await Promise.all(e.map(async m=>{let y=t.routes[m.route.id];if(y){let _=await x3(y,i);return _.links?_.links():[]}return[]}));return E3(s.flat(1).filter(b3).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function SA(e,t,i,s,m,y){let _=(P,C)=>i[C]?P.route.id!==i[C].route.id:!0,c=(P,C)=>i[C].pathname!==P.pathname||i[C].route.path?.endsWith("*")&&i[C].params["*"]!==P.params["*"];return y==="assets"?t.filter((P,C)=>_(P,C)||c(P,C)):y==="data"?t.filter((P,C)=>{let D=s.routes[P.route.id];if(!D||!D.hasLoader)return!1;if(_(P,C)||c(P,C))return!0;if(P.route.shouldRevalidate){let k=P.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:P.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function S3(e,t,{includeHydrateFallback:i}={}){return A3(e.map(s=>{let m=t.routes[s.route.id];if(!m)return[];let y=[m.module];return m.clientActionModule&&(y=y.concat(m.clientActionModule)),m.clientLoaderModule&&(y=y.concat(m.clientLoaderModule)),i&&m.hydrateFallbackModule&&(y=y.concat(m.hydrateFallbackModule)),m.imports&&(y=y.concat(m.imports)),y}).flat(1))}function A3(e){return[...new Set(e)]}function T3(e){let t={},i=Object.keys(e).sort();for(let s of i)t[s]=e[s];return t}function E3(e,t){let i=new Set;return new Set(t),e.reduce((s,m)=>{let y=JSON.stringify(T3(m));return i.has(y)||(i.add(y),s.push({key:y,link:m})),s},[])}function AC(){let e=H.useContext(kg);return _2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function M3(){let e=H.useContext(px);return _2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var x2=H.createContext(void 0);x2.displayName="FrameworkContext";function TC(){let e=H.useContext(x2);return _2(e,"You must render this element inside a <HydratedRouter> element"),e}function P3(e,t){let i=H.useContext(x2),[s,m]=H.useState(!1),[y,_]=H.useState(!1),{onFocus:c,onBlur:P,onMouseEnter:C,onMouseLeave:D,onTouchStart:k}=t,U=H.useRef(null);H.useEffect(()=>{if(e==="render"&&_(!0),e==="viewport"){let Z=oe=>{oe.forEach(he=>{_(he.isIntersecting)})},G=new IntersectionObserver(Z,{threshold:.5});return U.current&&G.observe(U.current),()=>{G.disconnect()}}},[e]),H.useEffect(()=>{if(s){let Z=setTimeout(()=>{_(!0)},100);return()=>{clearTimeout(Z)}}},[s]);let V=()=>{m(!0)},Q=()=>{m(!1),_(!1)};return i?e!=="intent"?[y,U,{}]:[y,U,{onFocus:Qy(c,V),onBlur:Qy(P,Q),onMouseEnter:Qy(C,V),onMouseLeave:Qy(D,Q),onTouchStart:Qy(k,V)}]:[!1,U,{}]}function Qy(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function C3({page:e,...t}){let{router:i}=AC(),s=H.useMemo(()=>lC(i.routes,e,i.basename),[i.routes,e,i.basename]);return s?H.createElement(I3,{page:e,matches:s,...t}):null}function D3(e){let{manifest:t,routeModules:i}=TC(),[s,m]=H.useState([]);return H.useEffect(()=>{let y=!1;return w3(e,t,i).then(_=>{y||m(_)}),()=>{y=!0}},[e,t,i]),s}function I3({page:e,matches:t,...i}){let s=Gp(),{future:m,manifest:y,routeModules:_}=TC(),{basename:c}=AC(),{loaderData:P,matches:C}=M3(),D=H.useMemo(()=>SA(e,t,C,y,s,"data"),[e,t,C,y,s]),k=H.useMemo(()=>SA(e,t,C,y,s,"assets"),[e,t,C,y,s]),U=H.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let Z=new Set,G=!1;if(t.forEach(he=>{let me=y.routes[he.route.id];!me||!me.hasLoader||(!D.some(Ce=>Ce.route.id===he.route.id)&&he.route.id in P&&_[he.route.id]?.shouldRevalidate||me.hasClientLoader?G=!0:Z.add(he.route.id))}),Z.size===0)return[];let oe=_3(e,c,m.unstable_trailingSlashAwareDataRequests,"data");return G&&Z.size>0&&oe.searchParams.set("_routes",t.filter(he=>Z.has(he.route.id)).map(he=>he.route.id).join(",")),[oe.pathname+oe.search]},[c,m.unstable_trailingSlashAwareDataRequests,P,s,y,D,t,e,_]),V=H.useMemo(()=>S3(k,y),[k,y]),Q=D3(k);return H.createElement(H.Fragment,null,U.map(Z=>H.createElement("link",{key:Z,rel:"prefetch",as:"fetch",href:Z,...i})),V.map(Z=>H.createElement("link",{key:Z,rel:"modulepreload",href:Z,...i})),Q.map(({key:Z,link:G})=>H.createElement("link",{key:Z,nonce:i.nonce,...G})))}function O3(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var z3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{z3&&(window.__reactRouterVersion="7.12.0")}catch{}function k3({basename:e,children:t,unstable_useTransitions:i,window:s}){let m=H.useRef();m.current==null&&(m.current=pR({window:s,v5Compat:!0}));let y=m.current,[_,c]=H.useState({action:y.action,location:y.location}),P=H.useCallback(C=>{i===!1?c(C):H.startTransition(()=>c(C))},[i]);return H.useLayoutEffect(()=>y.listen(P),[y,P]),H.createElement(u3,{basename:e,children:t,location:_.location,navigationType:_.action,navigator:y,unstable_useTransitions:i})}var EC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_g=H.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:m,reloadDocument:y,replace:_,state:c,target:P,to:C,preventScrollReset:D,viewTransition:k,unstable_defaultShouldRevalidate:U,...V},Q){let{basename:Z,unstable_useTransitions:G}=H.useContext(Ll),oe=typeof C=="string"&&EC.test(C),he=mC(C,Z);C=he.to;let me=XR(C,{relative:m}),[Ce,be,ke]=P3(s,V),je=j3(C,{replace:_,state:c,target:P,preventScrollReset:D,relative:m,viewTransition:k,unstable_defaultShouldRevalidate:U,unstable_useTransitions:G});function gt(It){t&&t(It),It.defaultPrevented||je(It)}let bt=H.createElement("a",{...V,...ke,href:he.absoluteURL||me,onClick:he.isExternal||y?t:gt,ref:O3(Q,be),target:P,"data-discover":!oe&&i==="render"?"true":void 0});return Ce&&!oe?H.createElement(H.Fragment,null,bt,H.createElement(C3,{page:me})):bt});_g.displayName="Link";var R3=H.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:m=!1,style:y,to:_,viewTransition:c,children:P,...C},D){let k=Dv(_,{relative:C.relative}),U=Gp(),V=H.useContext(px),{navigator:Q,basename:Z}=H.useContext(Ll),G=V!=null&&G3(k)&&c===!0,oe=Q.encodeLocation?Q.encodeLocation(k).pathname:k.pathname,he=U.pathname,me=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;i||(he=he.toLowerCase(),me=me?me.toLowerCase():null,oe=oe.toLowerCase()),me&&Z&&(me=Uh(me,Z)||me);const Ce=oe!=="/"&&oe.endsWith("/")?oe.length-1:oe.length;let be=he===oe||!m&&he.startsWith(oe)&&he.charAt(Ce)==="/",ke=me!=null&&(me===oe||!m&&me.startsWith(oe)&&me.charAt(oe.length)==="/"),je={isActive:be,isPending:ke,isTransitioning:G},gt=be?t:void 0,bt;typeof s=="function"?bt=s(je):bt=[s,be?"active":null,ke?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let It=typeof y=="function"?y(je):y;return H.createElement(_g,{...C,"aria-current":gt,className:bt,ref:D,style:It,to:_,viewTransition:c},typeof P=="function"?P(je):P)});R3.displayName="NavLink";var L3=H.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:m,state:y,method:_=p0,action:c,onSubmit:P,relative:C,preventScrollReset:D,viewTransition:k,unstable_defaultShouldRevalidate:U,...V},Q)=>{let{unstable_useTransitions:Z}=H.useContext(Ll),G=U3(),oe=V3(c,{relative:C}),he=_.toLowerCase()==="get"?"get":"post",me=typeof c=="string"&&EC.test(c),Ce=be=>{if(P&&P(be),be.defaultPrevented)return;be.preventDefault();let ke=be.nativeEvent.submitter,je=ke?.getAttribute("formmethod")||_,gt=()=>G(ke||be.currentTarget,{fetcherKey:t,method:je,navigate:i,replace:m,state:y,relative:C,preventScrollReset:D,viewTransition:k,unstable_defaultShouldRevalidate:U});Z&&i!==!1?H.startTransition(()=>gt()):gt()};return H.createElement("form",{ref:Q,method:he,action:oe,onSubmit:s?P:Ce,...V,"data-discover":!me&&e==="render"?"true":void 0})});L3.displayName="Form";function B3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MC(e){let t=H.useContext(kg);return pi(t,B3(e)),t}function j3(e,{target:t,replace:i,state:s,preventScrollReset:m,relative:y,viewTransition:_,unstable_defaultShouldRevalidate:c,unstable_useTransitions:P}={}){let C=g2(),D=Gp(),k=Dv(e,{relative:y});return H.useCallback(U=>{if(m3(U,t)){U.preventDefault();let V=i!==void 0?i:cv(D)===cv(k),Q=()=>C(e,{replace:V,state:s,preventScrollReset:m,relative:y,viewTransition:_,unstable_defaultShouldRevalidate:c});P?H.startTransition(()=>Q()):Q()}},[D,C,k,i,s,t,e,m,y,_,c,P])}var N3=0,F3=()=>`__${String(++N3)}__`;function U3(){let{router:e}=MC("useSubmit"),{basename:t}=H.useContext(Ll),i=a3(),s=e.fetch,m=e.navigate;return H.useCallback(async(y,_={})=>{let{action:c,method:P,encType:C,formData:D,body:k}=v3(y,t);if(_.navigate===!1){let U=_.fetcherKey||F3();await s(U,i,_.action||c,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:D,body:k,formMethod:_.method||P,formEncType:_.encType||C,flushSync:_.flushSync})}else await m(_.action||c,{unstable_defaultShouldRevalidate:_.unstable_defaultShouldRevalidate,preventScrollReset:_.preventScrollReset,formData:D,body:k,formMethod:_.method||P,formEncType:_.encType||C,replace:_.replace,state:_.state,fromRouteId:i,flushSync:_.flushSync,viewTransition:_.viewTransition})},[s,m,t,i])}function V3(e,{relative:t}={}){let{basename:i}=H.useContext(Ll),s=H.useContext(Yh);pi(s,"useFormAction must be used inside a RouteContext");let[m]=s.matches.slice(-1),y={...Dv(e||".",{relative:t})},_=Gp();if(e==null){y.search=_.search;let c=new URLSearchParams(y.search),P=c.getAll("index");if(P.some(D=>D==="")){c.delete("index"),P.filter(k=>k).forEach(k=>c.append("index",k));let D=c.toString();y.search=D?`?${D}`:""}}return(!e||e===".")&&m.route.index&&(y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(y.pathname=y.pathname==="/"?i:jh([i,y.pathname])),cv(y)}function G3(e,{relative:t}={}){let i=H.useContext(yC);pi(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=MC("useViewTransitionState"),m=Dv(e,{relative:t});if(!i.isTransitioning)return!1;let y=Uh(i.currentLocation.pathname,s)||i.currentLocation.pathname,_=Uh(i.nextLocation.pathname,s)||i.nextLocation.pathname;return w0(m.pathname,_)!=null||w0(m.pathname,y)!=null}var PC=sC();const CC=H.createContext(),q3=({children:e})=>{const[t,i]=H.useState(()=>localStorage.getItem("appTheme")||"dark"),s=()=>{i(m=>m==="dark"?"light":"dark")};return H.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("appTheme",t)},[t]),we.jsx(CC.Provider,{value:{theme:t,toggleTheme:s},children:e})},DC=()=>H.useContext(CC);function H3({theme:e,onToggleTheme:t}){const i=e==="light",s=i?"linear-gradient(180deg,#ffffff,#f7f9fb)":"linear-gradient(180deg, rgba(6,86,147,0.95), rgba(2,54,106,0.95))",m=i?"#0b2b44":"#fff";return we.jsxs(we.Fragment,{children:[we.jsx("style",{children:`
  @keyframes marquee-light {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }

  @keyframes marquee-dark {
    0% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }
`}),we.jsx("nav",{className:"navbar fixed-top",style:{height:"64px",padding:"8px 16px",background:s,color:m,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",borderBottom:"1px solid rgba(0,0,0,0.06)",boxShadow:i?"0 6px 18px rgba(10,20,30,0.06)":"0 6px 24px rgba(2,30,60,0.25)",transition:"all 0.26s cubic-bezier(.2,.9,.2,1)"},children:we.jsxs("div",{className:"container-fluid d-flex align-items-center",children:[we.jsx("div",{className:"d-flex align-items-center",style:{gap:12},children:we.jsx("img",{src:"/logo-left.png",alt:"Left Logo",style:{height:"36px",width:"auto",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})}),we.jsx("div",{className:"mx-auto fw-bold",style:{pointerEvents:"none",fontSize:"16px",letterSpacing:"0.3px",textAlign:"center",maxWidth:960,overflow:"hidden",whiteSpace:"nowrap",position:"relative",color:i?"#0b2b44":"#ffffff"},children:we.jsx("span",{style:{position:"relative",zIndex:1},children:"     "})}),we.jsxs("div",{className:"d-flex align-items-center",style:{gap:12},children:[we.jsx("button",{onClick:t,title:"Toggle theme",style:{width:36,height:36,borderRadius:8,border:"none",background:i?"linear-gradient(180deg,#fff,#eef6fb)":"linear-gradient(180deg,#1f3040,#12202a)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",boxShadow:"0 2px 6px rgba(0,0,0,0.12)"},children:i?we.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[we.jsx("path",{d:"M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.8 1.42-1.42z",fill:"#f6c358"}),we.jsx("path",{d:"M1 13h3v-2H1v2z",fill:"#f6c358"}),we.jsx("path",{d:"M11 1h2v3h-2V1z",fill:"#f6c358"}),we.jsx("path",{d:"M16.24 4.84l1.42 1.42 1.79-1.8-1.41-1.41-1.8 1.79z",fill:"#f6c358"}),we.jsx("path",{d:"M20 11v2h3v-2h-3z",fill:"#f6c358"}),we.jsx("path",{d:"M11 20h2v3h-2v-3z",fill:"#f6c358"}),we.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#f6c358"})]}):we.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:we.jsx("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",fill:"#fff"})})}),we.jsx("img",{src:"/logo-right.png",alt:"Right Logo",style:{height:"36px",width:"90px",borderRadius:6,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"}})]})]})})]})}var g0={exports:{}};var Z3=g0.exports,AA;function $3(){return AA||(AA=1,(function(e,t){(function(i,s){e.exports=s()})(Z3,(function(){var i={},s={};function m(_,c,P){if(s[_]=P,_==="index"){var C="var sharedModule = {}; ("+s.shared+")(sharedModule); ("+s.worker+")(sharedModule);",D={};return s.shared(D),s.index(i,D),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([C],{type:"text/javascript"}))),i}}m("shared",["exports"],(function(_){function c(o,r,a,f){return new(a||(a=Promise))((function(p,x){function b(z){try{M(f.next(z))}catch(B){x(B)}}function T(z){try{M(f.throw(z))}catch(B){x(B)}}function M(z){var B;z.done?p(z.value):(B=z.value,B instanceof a?B:new a((function(N){N(B)}))).then(b,T)}M((f=f.apply(o,r||[])).next())}))}function P(o,r){this.x=o,this.y=r}function C(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var D,k;typeof SuppressedError=="function"&&SuppressedError,P.prototype={clone(){return new P(this.x,this.y)},add(o){return this.clone()._add(o)},sub(o){return this.clone()._sub(o)},multByPoint(o){return this.clone()._multByPoint(o)},divByPoint(o){return this.clone()._divByPoint(o)},mult(o){return this.clone()._mult(o)},div(o){return this.clone()._div(o)},rotate(o){return this.clone()._rotate(o)},rotateAround(o,r){return this.clone()._rotateAround(o,r)},matMult(o){return this.clone()._matMult(o)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(o){return this.x===o.x&&this.y===o.y},dist(o){return Math.sqrt(this.distSqr(o))},distSqr(o){const r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle(){return Math.atan2(this.y,this.x)},angleTo(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith(o){return this.angleWithSep(o.x,o.y)},angleWithSep(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult(o){const r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add(o){return this.x+=o.x,this.y+=o.y,this},_sub(o){return this.x-=o.x,this.y-=o.y,this},_mult(o){return this.x*=o,this.y*=o,this},_div(o){return this.x/=o,this.y/=o,this},_multByPoint(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint(o){return this.x/=o.x,this.y/=o.y,this},_unit(){return this._div(this.mag()),this},_perp(){const o=this.y;return this.y=this.x,this.x=-o,this},_rotate(o){const r=Math.cos(o),a=Math.sin(o),f=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=f,this},_rotateAround(o,r){const a=Math.cos(o),f=Math.sin(o),p=r.y+f*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-f*(this.y-r.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:P},P.convert=function(o){if(o instanceof P)return o;if(Array.isArray(o))return new P(+o[0],+o[1]);if(o.x!==void 0&&o.y!==void 0)return new P(+o.x,+o.y);throw new Error("Expected [x, y] or {x, y} point format")};var U=(function(){if(k)return D;function o(r,a,f,p){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=f,this.p2y=p}return k=1,D=o,o.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,a){if(a===void 0&&(a=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,p=0;p<8;p++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<a)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var T=0,M=1;for(f=r,p=0;p<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<a));p++)r>x?T=f:M=f,f=.5*(M-T)+T;return f},solve:function(r,a){return this.sampleCurveY(this.solveCurveX(r,a))}},D})(),V=C(U);let Q,Z;function G(){return Q==null&&(Q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Q}function oe(){if(Z==null&&(Z=!1,G())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let f=0;f<25;f++){const p=4*f;r.fillStyle=`rgb(${p},${p+1},${p+2})`,r.fillRect(f%5,Math.floor(f/5),1,1)}const a=r.getImageData(0,0,5,5).data;for(let f=0;f<100;f++)if(f%4!=3&&a[f]!==f){Z=!0;break}}}return Z||!1}var he=1e-6,me=typeof Float32Array<"u"?Float32Array:Array;function Ce(){var o=new me(9);return me!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function be(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function ke(){var o=new me(3);return me!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function je(o){var r=o[0],a=o[1],f=o[2];return Math.sqrt(r*r+a*a+f*f)}function gt(o,r,a){var f=new me(3);return f[0]=o,f[1]=r,f[2]=a,f}function bt(o,r,a){return o[0]=r[0]+a[0],o[1]=r[1]+a[1],o[2]=r[2]+a[2],o}function It(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o}function yt(o,r,a){var f=r[0],p=r[1],x=r[2],b=a[0],T=a[1],M=a[2];return o[0]=p*M-x*T,o[1]=x*b-f*M,o[2]=f*T-p*b,o}var De,Tt=je;function Ct(o,r,a){var f=r[0],p=r[1],x=r[2],b=r[3];return o[0]=a[0]*f+a[4]*p+a[8]*x+a[12]*b,o[1]=a[1]*f+a[5]*p+a[9]*x+a[13]*b,o[2]=a[2]*f+a[6]*p+a[10]*x+a[14]*b,o[3]=a[3]*f+a[7]*p+a[11]*x+a[15]*b,o}function Ft(){var o=new me(4);return me!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Le(o,r,a,f){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",x=Math.PI/360;r*=x,f*=x,a*=x;var b=Math.sin(r),T=Math.cos(r),M=Math.sin(a),z=Math.cos(a),B=Math.sin(f),N=Math.cos(f);switch(p){case"xyz":o[0]=b*z*N+T*M*B,o[1]=T*M*N-b*z*B,o[2]=T*z*B+b*M*N,o[3]=T*z*N-b*M*B;break;case"xzy":o[0]=b*z*N-T*M*B,o[1]=T*M*N-b*z*B,o[2]=T*z*B+b*M*N,o[3]=T*z*N+b*M*B;break;case"yxz":o[0]=b*z*N+T*M*B,o[1]=T*M*N-b*z*B,o[2]=T*z*B-b*M*N,o[3]=T*z*N+b*M*B;break;case"yzx":o[0]=b*z*N+T*M*B,o[1]=T*M*N+b*z*B,o[2]=T*z*B-b*M*N,o[3]=T*z*N-b*M*B;break;case"zxy":o[0]=b*z*N-T*M*B,o[1]=T*M*N+b*z*B,o[2]=T*z*B+b*M*N,o[3]=T*z*N-b*M*B;break;case"zyx":o[0]=b*z*N-T*M*B,o[1]=T*M*N+b*z*B,o[2]=T*z*B-b*M*N,o[3]=T*z*N+b*M*B;break;default:throw new Error("Unknown angle order "+p)}return o}function We(){var o=new me(2);return me!=Float32Array&&(o[0]=0,o[1]=0),o}function _t(o,r){var a=new me(2);return a[0]=o,a[1]=r,a}ke(),De=new me(4),me!=Float32Array&&(De[0]=0,De[1]=0,De[2]=0,De[3]=0),ke(),gt(1,0,0),gt(0,1,0),Ft(),Ft(),Ce(),We();const at=8192;function Kt(o,r,a){return r*(at/(o.tileSize*Math.pow(2,a-o.tileID.overscaledZ)))}function Oe(o,r){return(o%r+r)%r}function ot(o,r,a){return o*(1-a)+r*a}function Dt(o){if(o<=0)return 0;if(o>=1)return 1;const r=o*o,a=r*o;return 4*(o<.5?a:3*(o-r)+a-.75)}function Rt(o,r,a,f){const p=new V(o,r,a,f);return x=>p.solve(x)}const Gt=Rt(.25,.1,.25,1);function Qt(o,r,a){return Math.min(a,Math.max(r,o))}function Jt(o,r,a){const f=a-r,p=((o-r)%f+f)%f+r;return p===r?a:p}function zr(o,...r){for(const a of r)for(const f in a)o[f]=a[f];return o}let ct=1;function tr(o,r,a){const f={};for(const p in o)f[p]=r.call(this,o[p],p,o);return f}function gr(o,r,a){const f={};for(const p in o)r.call(this,o[p],p,o)&&(f[p]=o[p]);return f}function wt(o){return Array.isArray(o)?o.map(wt):typeof o=="object"&&o?tr(o,wt):o}const Hn={};function ar(o){Hn[o]||(typeof console<"u"&&console.warn(o),Hn[o]=!0)}function rn(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function cn(o){return typeof WorkerGlobalScope<"u"&&o!==void 0&&o instanceof WorkerGlobalScope}let Br=null;function Xa(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ws="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Qs(o,r,a,f,p){return c(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(o,{timestamp:0});try{const b=x?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const T=b.startsWith("BGR"),M=new Uint8ClampedArray(f*p*4);if(yield x.copyTo(M,(function(z,B,N,q,$){const K=4*Math.max(-B,0),J=(Math.max(0,N)-N)*q*4+K,te=4*q,ae=Math.max(0,B),ve=Math.max(0,N);return{rect:{x:ae,y:ve,width:Math.min(z.width,B+q)-ae,height:Math.min(z.height,N+$)-ve},layout:[{offset:J,stride:te}]}})(o,r,a,f,p)),T)for(let z=0;z<M.length;z+=4){const B=M[z];M[z]=M[z+2],M[z+2]=B}return M}finally{x.close()}}))}let qo,_o;function Nu(o,r,a,f){return o.addEventListener(r,a,f),{unsubscribe:()=>{o.removeEventListener(r,a,f)}}}function gi(o){return o*Math.PI/180}function la(o){return o/Math.PI*180}const Ue={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},ne={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},re="AbortError";class ue extends Error{constructor(r=re){super(r instanceof Error?r.message:r),this.name=re,r instanceof Error&&r.stack&&(this.stack=r.stack)}}function Ee(o){return o.name===re}const Pe={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function He(o){return Pe.REGISTERED_PROTOCOLS[o.substring(0,o.indexOf("://"))]}const Ne="global-dispatcher";class ze extends Error{constructor(r,a,f,p){super(`AJAXError: ${a} (${r}): ${f}`),this.status=r,this.statusText=a,this.url=f,this.body=p}}const Ze=()=>cn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,lt=function(o,r){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){const f=He(o.url);if(f)return f(o,r);if(cn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,targetMapId:Ne},r)}if(!(/^file:/.test(a=o.url)||/^file:/.test(Ze())&&!/^\w+:/.test(a))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(f,p){return c(this,void 0,void 0,(function*(){const x=new Request(f.url,{method:f.method||"GET",body:f.body,credentials:f.credentials,headers:f.headers,cache:f.cache,referrer:Ze(),signal:p.signal});let b,T;f.type!=="json"||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{b=yield fetch(x)}catch(z){throw Ee(z)?z:new ze(0,z.message,f.url,new Blob)}if(!b.ok){const z=yield b.blob();throw new ze(b.status,b.statusText,f.url,z)}T=f.type==="arrayBuffer"||f.type==="image"?b.arrayBuffer():f.type==="json"?b.json():b.text();const M=yield T;return p.signal.throwIfAborted(),{data:M,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(o,r);if(cn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:o,mustQueue:!0,targetMapId:Ne},r)}var a;return(function(f,p){return new Promise(((x,b)=>{var T;const M=new XMLHttpRequest;M.open(f.method||"GET",f.url,!0),f.type!=="arrayBuffer"&&f.type!=="image"||(M.responseType="arraybuffer");for(const z in f.headers)M.setRequestHeader(z,f.headers[z]);f.type==="json"&&(M.responseType="text",!((T=f.headers)===null||T===void 0)&&T.Accept||M.setRequestHeader("Accept","application/json")),M.withCredentials=f.credentials==="include",M.onerror=()=>{b(new Error(M.statusText))},M.onload=()=>{if(!p.signal.aborted)if((M.status>=200&&M.status<300||M.status===0)&&M.response!==null){let z=M.response;if(f.type==="json")try{z=JSON.parse(M.response)}catch(B){return void b(B)}x({data:z,cacheControl:M.getResponseHeader("Cache-Control"),expires:M.getResponseHeader("Expires")})}else{const z=new Blob([M.response],{type:M.getResponseHeader("Content-Type")});b(new ze(M.status,M.statusText,f.url,z))}},p.signal.addEventListener("abort",(()=>{M.abort(),b(new ue(p.signal.reason))})),M.send(f.body)}))})(o,r)};function ut(o){if(!o||o.indexOf("://")<=0||o.indexOf("data:image/")===0||o.indexOf("blob:")===0)return!0;const r=new URL(o),a=window.location;return r.protocol===a.protocol&&r.host===a.host}function Lt(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function Vt(o,r,a){if(a&&a[o]){const f=a[o].indexOf(r);f!==-1&&a[o].splice(f,1)}}class rr{constructor(r,a={}){zr(this,a),this.type=r}}class kr extends rr{constructor(r,a={}){super("error",zr({error:r},a))}}class wr{on(r,a){return this._listeners=this._listeners||{},Lt(r,a,this._listeners),{unsubscribe:()=>{this.off(r,a)}}}off(r,a){return Vt(r,a,this._listeners),Vt(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},Lt(r,a,this._oneTimeListeners),this):new Promise((f=>this.once(r,f)))}fire(r,a){typeof r=="string"&&(r=new rr(r,a||{}));const f=r.type;if(this.listens(f)){r.target=this;const p=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const T of p)T.call(this,r);const x=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const T of x)Vt(f,T,this._oneTimeListeners),T.call(this,r);const b=this._eventedParent;b&&(zr(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(r))}else r instanceof kr&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const jr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Zn(o,r){const a={};for(const f in o)f!=="ref"&&(a[f]=o[f]);return jr.forEach((f=>{f in r&&(a[f]=r[f])})),a}function sr(o,r){if(Array.isArray(o)){if(!Array.isArray(r)||o.length!==r.length)return!1;for(let a=0;a<o.length;a++)if(!sr(o[a],r[a]))return!1;return!0}if(typeof o=="object"&&o!==null&&r!==null){if(typeof r!="object"||Object.keys(o).length!==Object.keys(r).length)return!1;for(const a in o)if(!sr(o[a],r[a]))return!1;return!0}return o===r}function Nr(o,r){o.push(r)}function li(o,r,a){Nr(a,{command:"addSource",args:[o,r[o]]})}function Gr(o,r,a){Nr(r,{command:"removeSource",args:[o]}),a[o]=!0}function Mn(o,r,a,f){Gr(o,a,f),li(o,r,a)}function Yr(o,r,a){let f;for(f in o[a])if(Object.prototype.hasOwnProperty.call(o[a],f)&&f!=="data"&&!sr(o[a][f],r[a][f]))return!1;for(f in r[a])if(Object.prototype.hasOwnProperty.call(r[a],f)&&f!=="data"&&!sr(o[a][f],r[a][f]))return!1;return!0}function $n(o,r,a,f,p,x){o=o||{},r=r||{};for(const b in o)Object.prototype.hasOwnProperty.call(o,b)&&(sr(o[b],r[b])||a.push({command:x,args:[f,b,r[b],p]}));for(const b in r)Object.prototype.hasOwnProperty.call(r,b)&&!Object.prototype.hasOwnProperty.call(o,b)&&(sr(o[b],r[b])||a.push({command:x,args:[f,b,r[b],p]}))}function Fu(o){return o.id}function Nl(o,r){return o[r.id]=r,o}class xt{constructor(r,a,f,p){this.message=(r?`${r}: `:"")+f,p&&(this.identifier=p),a!=null&&a.__line__&&(this.line=a.__line__)}}function Bi(o,...r){for(const a of r)for(const f in a)o[f]=a[f];return o}class ji extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}class xo{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[f,p]of a)this.bindings[f]=p}concat(r){return new xo(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const nn={kind:"null"},Et={kind:"number"},ur={kind:"string"},dr={kind:"boolean"},Pa={kind:"color"},nf={kind:"projectionDefinition"},Ho={kind:"object"},lr={kind:"value"},Fl={kind:"collator"},Zo={kind:"formatted"},Ss={kind:"padding"},$o={kind:"colorArray"},Xo={kind:"numberArray"},Pn={kind:"resolvedImage"},Uu={kind:"variableAnchorOffsetCollection"};function Ni(o,r){return{kind:"array",itemType:o,N:r}}function Sr(o){if(o.kind==="array"){const r=Sr(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const As=[nn,Et,ur,dr,Pa,nf,Zo,Ho,Ni(lr),Ss,Xo,$o,Pn,Uu];function Vu(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Vu(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of As)if(!Vu(a,r))return null}}return`Expected ${Sr(o)} but found ${Sr(r)} instead.`}function Gu(o,r){return r.some((a=>a.kind===o.kind))}function Js(o,r){return r.some((a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o))}function bo(o,r){return o.kind==="array"&&r.kind==="array"?o.itemType.kind===r.itemType.kind&&typeof o.N=="number":o.kind===r.kind}const Rc=.96422,Yo=.82521,Ya=4/29,Cr=6/29,pd=3*Cr*Cr,Xp=Cr*Cr*Cr,Ul=Math.PI/180,md=180/Math.PI;function Lc(o){return(o%=360)<0&&(o+=360),o}function Yp([o,r,a,f]){let p,x;const b=Bc((.2225045*(o=Yi(o))+.7168786*(r=Yi(r))+.0606169*(a=Yi(a)))/1);o===r&&r===a?p=x=b:(p=Bc((.4360747*o+.3850649*r+.1430804*a)/Rc),x=Bc((.0139322*o+.0971045*r+.7141733*a)/Yo));const T=116*b-16;return[T<0?0:T,500*(p-b),200*(b-x),f]}function Yi(o){return o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Bc(o){return o>Xp?Math.pow(o,1/3):o/pd+Ya}function af([o,r,a,f]){let p=(o+16)/116,x=isNaN(r)?p:p+r/500,b=isNaN(a)?p:p-a/200;return p=1*el(p),x=Rc*el(x),b=Yo*el(b),[jc(3.1338561*x-1.6168667*p-.4906146*b),jc(-.9787684*x+1.9161415*p+.033454*b),jc(.0719453*x-.2289914*p+1.4052427*b),f]}function jc(o){return(o=o<=.00304?12.92*o:1.055*Math.pow(o,1/2.4)-.055)<0?0:o>1?1:o}function el(o){return o>Cr?o*o*o:pd*(o-Ya)}const Wp=Object.hasOwn||function(o,r){return Object.prototype.hasOwnProperty.call(o,r)};function qu(o,r){return Wp(o,r)?o[r]:void 0}function Ts(o){return parseInt(o.padEnd(2,o),16)/255}function Kp(o,r){return Vl(r?o/100:o,0,1)}function Vl(o,r,a){return Math.min(Math.max(r,o),a)}function of(o){return!o.some(Number.isNaN)}const Gl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function tl(o,r,a){return o+a*(r-o)}function Hu(o,r,a){return o.map(((f,p)=>tl(f,r[p],a)))}class fr{constructor(r,a,f,p=1,x=!0){this.r=r,this.g=a,this.b=f,this.a=p,x||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[r,a,f,p]))}static parse(r){if(r instanceof fr)return r;if(typeof r!="string")return;const a=(function(f){if((f=f.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=qu(Gl,f);if(p){const[b,T,M]=p;return[b/255,T/255,M/255,1]}if(f.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(f)){const b=f.length<6?1:2;let T=1;return[Ts(f.slice(T,T+=b)),Ts(f.slice(T,T+=b)),Ts(f.slice(T,T+=b)),Ts(f.slice(T,T+b)||"ff")]}if(f.startsWith("rgb")){const b=f.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[T,M,z,B,N,q,$,K,J,te,ae,ve]=b,se=[B||" ",$||" ",te].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){const ce=[z,q,J].join(""),xe=ce==="%%%"?100:ce===""?255:0;if(xe){const Te=[Vl(+M/xe,0,1),Vl(+N/xe,0,1),Vl(+K/xe,0,1),ae?Kp(+ae,ve):1];if(of(Te))return Te}}return}}const x=f.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,T,M,z,B,N,q,$,K]=x,J=[M||" ",B||" ",q].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const te=[+T,Vl(+z,0,100),Vl(+N,0,100),$?Kp(+$,K):1];if(of(te))return(function([ae,ve,se,ce]){function xe(Te){const qe=(Te+ae/30)%12,st=ve*Math.min(se,1-se);return se-st*Math.max(-1,Math.min(qe-3,9-qe,1))}return ae=Lc(ae),ve/=100,se/=100,[xe(0),xe(8),xe(4),ce]})(te)}}})(r);return a?new fr(...a,!1):void 0}get rgb(){const{r,g:a,b:f,a:p}=this,x=p||1/0;return this.overwriteGetter("rgb",[r/x,a/x,f/x,p])}get hcl(){return this.overwriteGetter("hcl",(function(r){const[a,f,p,x]=Yp(r),b=Math.sqrt(f*f+p*p);return[Math.round(1e4*b)?Lc(Math.atan2(p,f)*md):NaN,b,a,x]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Yp(this.rgb))}overwriteGetter(r,a){return Object.defineProperty(this,r,{value:a}),a}toString(){const[r,a,f,p]=this.rgb;return`rgba(${[r,a,f].map((x=>Math.round(255*x))).join(",")},${p})`}static interpolate(r,a,f,p="rgb"){switch(p){case"rgb":{const[x,b,T,M]=Hu(r.rgb,a.rgb,f);return new fr(x,b,T,M,!1)}case"hcl":{const[x,b,T,M]=r.hcl,[z,B,N,q]=a.hcl;let $,K;if(isNaN(x)||isNaN(z))isNaN(x)?isNaN(z)?$=NaN:($=z,T!==1&&T!==0||(K=B)):($=x,N!==1&&N!==0||(K=b));else{let se=z-x;z>x&&se>180?se-=360:z<x&&x-z>180&&(se+=360),$=x+f*se}const[J,te,ae,ve]=(function([se,ce,xe,Te]){return se=isNaN(se)?0:se*Ul,af([xe,Math.cos(se)*ce,Math.sin(se)*ce,Te])})([$,K??tl(b,B,f),tl(T,N,f),tl(M,q,f)]);return new fr(J,te,ae,ve,!1)}case"lab":{const[x,b,T,M]=af(Hu(r.lab,a.lab,f));return new fr(x,b,T,M,!1)}}}}fr.black=new fr(0,0,0,1),fr.white=new fr(1,1,1,1),fr.transparent=new fr(0,0,0,0),fr.red=new fr(1,0,0,1);class wo{constructor(r,a,f){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const gd=["bottom","center","top"];class Nc{constructor(r,a,f,p,x,b){this.text=r,this.image=a,this.scale=f,this.fontStack=p,this.textColor=x,this.verticalAlign=b}}class ui{constructor(r){this.sections=r}static fromString(r){return new ui([new Nc(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((r=>r.text.length!==0||r.image&&r.image.name.length!==0))}static factory(r){return r instanceof ui?r:ui.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map((r=>r.text)).join("")}}class Xn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Xn)return r;if(typeof r=="number")return new Xn([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const a of r)if(typeof a!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new Xn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){return new Xn(Hu(r.values,a.values,f))}}class pn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof pn)return r;if(typeof r=="number")return new pn([r]);if(Array.isArray(r)){for(const a of r)if(typeof a!="number")return;return new pn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){return new pn(Hu(r.values,a.values,f))}}class Wt{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Wt)return r;if(typeof r=="string"){const f=fr.parse(r);return f?new Wt([f]):void 0}if(!Array.isArray(r))return;const a=[];for(const f of r){if(typeof f!="string")return;const p=fr.parse(f);if(!p)return;a.push(p)}return new Wt(a)}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f,p="rgb"){const x=[];if(r.values.length!=a.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${a.values.length}), cannot interpolate.`);for(let b=0;b<r.values.length;b++)x.push(fr.interpolate(r.values[b],a.values[b],f,p));return new Wt(x)}}class Wr extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Wa=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Cn{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Cn)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let a=0;a<r.length;a+=2){const f=r[a],p=r[a+1];if(typeof f!="string"||!Wa.has(f)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Cn(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,a,f){const p=r.values,x=a.values;if(p.length!==x.length)throw new Wr(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${a.toString()}`);const b=[];for(let T=0;T<p.length;T+=2){if(p[T]!==x[T])throw new Wr(`Cannot interpolate values containing mismatched anchors. from[${T}]: ${p[T]}, to[${T}]: ${x[T]}`);b.push(p[T]);const[M,z]=p[T+1],[B,N]=x[T+1];b.push([tl(M,B,f),tl(z,N,f)])}return new Cn(b)}}class Wi{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Wi({name:r,available:!1}):null}}class ci{constructor(r,a,f){this.from=r,this.to=a,this.transition=f}static interpolate(r,a,f){return new ci(r,a,f)}static parse(r){return r instanceof ci?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new ci(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new ci(r.from,r.to,r.transition):typeof r=="string"?new ci(r,r,1):void 0}}function Ca(o,r,a,f){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,r,a,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,r,a,f]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Wo(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof ci||o instanceof fr||o instanceof wo||o instanceof ui||o instanceof Xn||o instanceof pn||o instanceof Wt||o instanceof Cn||o instanceof Wi)return!0;if(Array.isArray(o)){for(const r of o)if(!Wo(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!Wo(o[r]))return!1;return!0}return!1}function mn(o){if(o===null)return nn;if(typeof o=="string")return ur;if(typeof o=="boolean")return dr;if(typeof o=="number")return Et;if(o instanceof fr)return Pa;if(o instanceof ci)return nf;if(o instanceof wo)return Fl;if(o instanceof ui)return Zo;if(o instanceof Xn)return Ss;if(o instanceof pn)return Xo;if(o instanceof Wt)return $o;if(o instanceof Cn)return Uu;if(o instanceof Wi)return Pn;if(Array.isArray(o)){const r=o.length;let a;for(const f of o){const p=mn(f);if(a){if(a===p)continue;a=lr;break}a=p}return Ni(a||lr,r)}return Ho}function rl(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof fr||o instanceof ci||o instanceof ui||o instanceof Xn||o instanceof pn||o instanceof Wt||o instanceof Cn||o instanceof Wi?o.toString():JSON.stringify(o)}class Da{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!Wo(r[1]))return a.error("invalid value");const f=r[1];let p=mn(f);const x=a.expectedType;return p.kind!=="array"||p.N!==0||!x||x.kind!=="array"||typeof x.N=="number"&&x.N!==0||(p=x),new Da(p,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ql={string:ur,number:Et,boolean:dr,object:Ho};class Ki{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let f,p=1;const x=r[0];if(x==="array"){let T,M;if(r.length>2){const z=r[1];if(typeof z!="string"||!(z in ql)||z==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);T=ql[z],p++}else T=lr;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);M=r[2],p++}f=Ni(T,M)}else{if(!ql[x])throw new Error(`Types doesn't contain name = ${x}`);f=ql[x]}const b=[];for(;p<r.length;p++){const T=a.parse(r[p],p,lr);if(!T)return null;b.push(T)}return new Ki(f,b)}evaluate(r){for(let a=0;a<this.args.length;a++){const f=this.args[a].evaluate(r);if(!Vu(this.type,mn(f)))return f;if(a===this.args.length-1)throw new Wr(`Expected value to be of type ${Sr(this.type)}, but found ${Sr(mn(f))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const ti={"to-boolean":dr,"to-color":Pa,"to-number":Et,"to-string":ur};class Qi{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const f=r[0];if(!ti[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&r.length!==2)return a.error("Expected one argument.");const p=ti[f],x=[];for(let b=1;b<r.length;b++){const T=a.parse(r[b],b,lr);if(!T)return null;x.push(T)}return new Qi(p,x)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let a,f;for(const p of this.args){if(a=p.evaluate(r),f=null,a instanceof fr)return a;if(typeof a=="string"){const x=r.parseColor(a);if(x)return x}else if(Array.isArray(a)&&(f=a.length<3||a.length>4?`Invalid rgba value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:Ca(a[0],a[1],a[2],a[3]),!f))return new fr(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Wr(f||`Could not parse color from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"padding":{let a;for(const f of this.args){a=f.evaluate(r);const p=Xn.parse(a);if(p)return p}throw new Wr(`Could not parse padding from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"numberArray":{let a;for(const f of this.args){a=f.evaluate(r);const p=pn.parse(a);if(p)return p}throw new Wr(`Could not parse numberArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"colorArray":{let a;for(const f of this.args){a=f.evaluate(r);const p=Wt.parse(a);if(p)return p}throw new Wr(`Could not parse colorArray from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"variableAnchorOffsetCollection":{let a;for(const f of this.args){a=f.evaluate(r);const p=Cn.parse(a);if(p)return p}throw new Wr(`Could not parse variableAnchorOffsetCollection from value '${typeof a=="string"?a:JSON.stringify(a)}'`)}case"number":{let a=null;for(const f of this.args){if(a=f.evaluate(r),a===null)return 0;const p=Number(a);if(!isNaN(p))return p}throw new Wr(`Could not convert ${JSON.stringify(a)} to number.`)}case"formatted":return ui.fromString(rl(this.args[0].evaluate(r)));case"resolvedImage":return Wi.fromString(rl(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return rl(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}const Fc=["Unknown","Point","LineString","Polygon"];class Hl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Fc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let a=this._parseColorCache.get(r);return a||(a=fr.parse(r),this._parseColorCache.set(r,a)),a}}class Zl{constructor(r,a,f=[],p,x=new xo,b=[]){this.registry=r,this.path=f,this.key=f.map((T=>`[${T}]`)).join(""),this.scope=x,this.errors=b,this.expectedType=p,this._isConstant=a}parse(r,a,f,p,x={}){return a?this.concat(a,f,p)._parse(r,x):this._parse(r,x)}_parse(r,a){function f(p,x,b){return b==="assert"?new Ki(x,[p]):b==="coerce"?new Qi(x,[p]):p}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=r[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[p];if(x){let b=x.parse(r,this);if(!b)return null;if(this.expectedType){const T=this.expectedType,M=b.type;if(T.kind!=="string"&&T.kind!=="number"&&T.kind!=="boolean"&&T.kind!=="object"&&T.kind!=="array"||M.kind!=="value"){if(T.kind==="projectionDefinition"&&["string","array"].includes(M.kind)||["color","formatted","resolvedImage"].includes(T.kind)&&["value","string"].includes(M.kind)||["padding","numberArray"].includes(T.kind)&&["value","number","array"].includes(M.kind)||T.kind==="colorArray"&&["value","string","array"].includes(M.kind)||T.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(M.kind))b=f(b,T,a.typeAnnotation||"coerce");else if(this.checkSubtype(T,M))return null}else b=f(b,T,a.typeAnnotation||"assert")}if(!(b instanceof Da)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const T=new Hl;try{b=new Da(b.type,b.evaluate(T))}catch(M){return this.error(M.message),null}}return b}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,f){const p=typeof r=="number"?this.path.concat(r):this.path,x=f?this.scope.concat(f):this.scope;return new Zl(this.registry,this._isConstant,p,a||null,x,this.errors)}error(r,...a){const f=`${this.key}${a.map((p=>`[${p}]`)).join("")}`;this.errors.push(new ji(f,r))}checkSubtype(r,a){const f=Vu(r,a);return f&&this.error(f),f}}class qr{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const f=[];for(let x=1;x<r.length-1;x+=2){const b=r[x];if(typeof b!="string")return a.error(`Expected string, but found ${typeof b} instead.`,x);if(/[^a-zA-Z0-9_]/.test(b))return a.error("Variable names must contain only alphanumeric characters or '_'.",x);const T=a.parse(r[x+1],x+1);if(!T)return null;f.push([b,T])}const p=a.parse(r[r.length-1],r.length-1,a.expectedType,f);return p?new qr(f,p):null}outputDefined(){return this.result.outputDefined()}}class nl{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const f=r[1];return a.scope.has(f)?new nl(f,a.scope.get(f)):a.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class yr{constructor(r,a,f){this.type=r,this.index=a,this.input=f}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,Et),p=a.parse(r[2],2,Ni(a.expectedType||lr));return f&&p?new yr(p.type.itemType,f,p):null}evaluate(r){const a=this.index.evaluate(r),f=this.input.evaluate(r);if(a<0)throw new Wr(`Array index out of bounds: ${a} < 0.`);if(a>=f.length)throw new Wr(`Array index out of bounds: ${a} > ${f.length-1}.`);if(a!==Math.floor(a))throw new Wr(`Array index must be an integer, but found ${a} instead.`);return f[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class cr{constructor(r,a){this.type=dr,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,lr),p=a.parse(r[2],2,lr);return f&&p?Gu(f.type,[dr,ur,Et,nn,lr])?new cr(f,p):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(f.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!f)return!1;if(!Js(a,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(mn(a))} instead.`);if(!Js(f,["string","array"]))throw new Wr(`Expected second argument to be of type array or string, but found ${Sr(mn(f))} instead.`);return f.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class $l{constructor(r,a,f){this.type=Et,this.needle=r,this.haystack=a,this.fromIndex=f}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,lr),p=a.parse(r[2],2,lr);if(!f||!p)return null;if(!Gu(f.type,[dr,ur,Et,nn,lr]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(f.type)} instead`);if(r.length===4){const x=a.parse(r[3],3,Et);return x?new $l(f,p,x):null}return new $l(f,p)}evaluate(r){const a=this.needle.evaluate(r),f=this.haystack.evaluate(r);if(!Js(a,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Sr(mn(a))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(r)),Js(f,["string"])){const x=f.indexOf(a,p);return x===-1?-1:[...f.slice(0,x)].length}if(Js(f,["array"]))return f.indexOf(a,p);throw new Wr(`Expected second argument to be of type array or string, but found ${Sr(mn(f))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Ar{constructor(r,a,f,p,x,b){this.inputType=r,this.type=a,this.input=f,this.cases=p,this.outputs=x,this.otherwise=b}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let f,p;a.expectedType&&a.expectedType.kind!=="value"&&(p=a.expectedType);const x={},b=[];for(let z=2;z<r.length-1;z+=2){let B=r[z];const N=r[z+1];Array.isArray(B)||(B=[B]);const q=a.concat(z);if(B.length===0)return q.error("Expected at least one branch label.");for(const K of B){if(typeof K!="number"&&typeof K!="string")return q.error("Branch labels must be numbers or strings.");if(typeof K=="number"&&Math.abs(K)>Number.MAX_SAFE_INTEGER)return q.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof K=="number"&&Math.floor(K)!==K)return q.error("Numeric branch labels must be integer values.");if(f){if(q.checkSubtype(f,mn(K)))return null}else f=mn(K);if(x[String(K)]!==void 0)return q.error("Branch labels must be unique.");x[String(K)]=b.length}const $=a.parse(N,z,p);if(!$)return null;p=p||$.type,b.push($)}const T=a.parse(r[1],1,lr);if(!T)return null;const M=a.parse(r[r.length-1],r.length-1,p);return M?T.type.kind!=="value"&&a.concat(1).checkSubtype(f,T.type)?null:new Ar(f,p,T,x,b,M):null}evaluate(r){const a=this.input.evaluate(r);return(mn(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))&&this.otherwise.outputDefined()}}class Uc{constructor(r,a,f){this.type=r,this.branches=a,this.otherwise=f}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const p=[];for(let b=1;b<r.length-1;b+=2){const T=a.parse(r[b],b,dr);if(!T)return null;const M=a.parse(r[b+1],b+1,f);if(!M)return null;p.push([T,M]),f=f||M.type}const x=a.parse(r[r.length-1],r.length-1,f);if(!x)return null;if(!f)throw new Error("Can't infer output type");return new Uc(f,p,x)}evaluate(r){for(const[a,f]of this.branches)if(a.evaluate(r))return f.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,f]of this.branches)r(a),r(f);r(this.otherwise)}outputDefined(){return this.branches.every((([r,a])=>a.outputDefined()))&&this.otherwise.outputDefined()}}class Ka{constructor(r,a,f,p){this.type=r,this.input=a,this.beginIndex=f,this.endIndex=p}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 2 or 3 arguments, but found ${r.length-1} instead.`);const f=a.parse(r[1],1,lr),p=a.parse(r[2],2,Et);if(!f||!p)return null;if(!Gu(f.type,[Ni(lr),ur,lr]))return a.error(`Expected first argument to be of type array or string, but found ${Sr(f.type)} instead`);if(r.length===4){const x=a.parse(r[3],3,Et);return x?new Ka(f.type,f,p,x):null}return new Ka(f.type,f,p)}evaluate(r){const a=this.input.evaluate(r),f=this.beginIndex.evaluate(r);let p;if(this.endIndex&&(p=this.endIndex.evaluate(r)),Js(a,["string"]))return[...a].slice(f,p).join("");if(Js(a,["array"]))return a.slice(f,p);throw new Wr(`Expected first argument to be of type array or string, but found ${Sr(mn(a))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function il(o,r){const a=o.length-1;let f,p,x=0,b=a,T=0;for(;x<=b;)if(T=Math.floor((x+b)/2),f=o[T],p=o[T+1],f<=r){if(T===a||r<p)return T;x=T+1}else{if(!(f>r))throw new Wr("Input is not a number.");b=T-1}return 0}class al{constructor(r,a,f){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[p,x]of f)this.labels.push(p),this.outputs.push(x)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const f=a.parse(r[1],1,Et);if(!f)return null;const p=[];let x=null;a.expectedType&&a.expectedType.kind!=="value"&&(x=a.expectedType);for(let b=1;b<r.length;b+=2){const T=b===1?-1/0:r[b],M=r[b+1],z=b,B=b+1;if(typeof T!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',z);if(p.length&&p[p.length-1][0]>=T)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',z);const N=a.parse(M,B,x);if(!N)return null;x=x||N.type,p.push([T,N])}return new al(x,f,p)}evaluate(r){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return f[0].evaluate(r);const x=a.length;return p>=a[x-1]?f[x-1].evaluate(r):f[il(a,p)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function Qp(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Vc,yd,qg=(function(){if(yd)return Vc;function o(r,a,f,p){this.cx=3*r,this.bx=3*(f-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*a,this.by=3*(p-a)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=a,this.p2x=f,this.p2y=p}return yd=1,Vc=o,o.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,a){if(a===void 0&&(a=1e-6),r<0)return 0;if(r>1)return 1;for(var f=r,p=0;p<8;p++){var x=this.sampleCurveX(f)-r;if(Math.abs(x)<a)return f;var b=this.sampleCurveDerivativeX(f);if(Math.abs(b)<1e-6)break;f-=x/b}var T=0,M=1;for(f=r,p=0;p<20&&(x=this.sampleCurveX(f),!(Math.abs(x-r)<a));p++)r>x?T=f:M=f,f=.5*(M-T)+T;return f},solve:function(r,a){return this.sampleCurveY(this.solveCurveX(r,a))}},Vc})(),vd=Qp(qg);class Ji{constructor(r,a,f,p,x){this.type=r,this.operator=a,this.interpolation=f,this.input=p,this.labels=[],this.outputs=[];for(const[b,T]of x)this.labels.push(b),this.outputs.push(T)}static interpolationFactor(r,a,f,p){let x=0;if(r.name==="exponential")x=Ko(a,r.base,f,p);else if(r.name==="linear")x=Ko(a,1,f,p);else if(r.name==="cubic-bezier"){const b=r.controlPoints;x=new vd(b[0],b[1],b[2],b[3]).solve(Ko(a,1,f,p))}return x}static parse(r,a){let[f,p,x,...b]=r;if(!Array.isArray(p)||p.length===0)return a.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const z=p[1];if(typeof z!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:z}}else{if(p[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const z=p.slice(1);if(z.length!==4||z.some((B=>typeof B!="number"||B<0||B>1)))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:z}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(x=a.parse(x,2,Et),!x)return null;const T=[];let M=null;f!=="interpolate-hcl"&&f!=="interpolate-lab"||a.expectedType==$o?a.expectedType&&a.expectedType.kind!=="value"&&(M=a.expectedType):M=Pa;for(let z=0;z<b.length;z+=2){const B=b[z],N=b[z+1],q=z+3,$=z+4;if(typeof B!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',q);if(T.length&&T[T.length-1][0]>=B)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',q);const K=a.parse(N,$,M);if(!K)return null;M=M||K.type,T.push([B,K])}return bo(M,Et)||bo(M,nf)||bo(M,Pa)||bo(M,Ss)||bo(M,Xo)||bo(M,$o)||bo(M,Uu)||bo(M,Ni(Et))?new Ji(M,f,p,x,T):a.error(`Type ${Sr(M)} is not interpolatable.`)}evaluate(r){const a=this.labels,f=this.outputs;if(a.length===1)return f[0].evaluate(r);const p=this.input.evaluate(r);if(p<=a[0])return f[0].evaluate(r);const x=a.length;if(p>=a[x-1])return f[x-1].evaluate(r);const b=il(a,p),T=Ji.interpolationFactor(this.interpolation,p,a[b],a[b+1]),M=f[b].evaluate(r),z=f[b+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return tl(M,z,T);case"color":return fr.interpolate(M,z,T);case"padding":return Xn.interpolate(M,z,T);case"colorArray":return Wt.interpolate(M,z,T);case"numberArray":return pn.interpolate(M,z,T);case"variableAnchorOffsetCollection":return Cn.interpolate(M,z,T);case"array":return Hu(M,z,T);case"projectionDefinition":return ci.interpolate(M,z,T)}case"interpolate-hcl":switch(this.type.kind){case"color":return fr.interpolate(M,z,T,"hcl");case"colorArray":return Wt.interpolate(M,z,T,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return fr.interpolate(M,z,T,"lab");case"colorArray":return Wt.interpolate(M,z,T,"lab")}}}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every((r=>r.outputDefined()))}}function Ko(o,r,a,f){const p=f-a,x=o-a;return p===0?0:r===1?x/p:(Math.pow(r,x)-1)/(Math.pow(r,p)-1)}const gn={color:fr.interpolate,number:tl,padding:Xn.interpolate,numberArray:pn.interpolate,colorArray:Wt.interpolate,variableAnchorOffsetCollection:Cn.interpolate,array:Hu};class Xl{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let f=null;const p=a.expectedType;p&&p.kind!=="value"&&(f=p);const x=[];for(const T of r.slice(1)){const M=a.parse(T,1+x.length,f,void 0,{typeAnnotation:"omit"});if(!M)return null;f=f||M.type,x.push(M)}if(!f)throw new Error("No output type");const b=p&&x.some((T=>Vu(p,T.type)));return new Xl(b?lr:f,x)}evaluate(r){let a,f=null,p=0;for(const x of this.args)if(p++,f=x.evaluate(r),f&&f instanceof Wi&&!f.available&&(a||(a=f.name),f=null,p===this.args.length&&(f=a)),f!==null)break;return f}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every((r=>r.outputDefined()))}}function Gc(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function qc(o,r,a,f){return f.compare(r,a)===0}function Dn(o,r,a){const f=o!=="=="&&o!=="!=";return class IC{constructor(x,b,T){this.type=dr,this.lhs=x,this.rhs=b,this.collator=T,this.hasUntypedArgument=x.type.kind==="value"||b.type.kind==="value"}static parse(x,b){if(x.length!==3&&x.length!==4)return b.error("Expected two or three arguments.");const T=x[0];let M=b.parse(x[1],1,lr);if(!M)return null;if(!Gc(T,M.type))return b.concat(1).error(`"${T}" comparisons are not supported for type '${Sr(M.type)}'.`);let z=b.parse(x[2],2,lr);if(!z)return null;if(!Gc(T,z.type))return b.concat(2).error(`"${T}" comparisons are not supported for type '${Sr(z.type)}'.`);if(M.type.kind!==z.type.kind&&M.type.kind!=="value"&&z.type.kind!=="value")return b.error(`Cannot compare types '${Sr(M.type)}' and '${Sr(z.type)}'.`);f&&(M.type.kind==="value"&&z.type.kind!=="value"?M=new Ki(z.type,[M]):M.type.kind!=="value"&&z.type.kind==="value"&&(z=new Ki(M.type,[z])));let B=null;if(x.length===4){if(M.type.kind!=="string"&&z.type.kind!=="string"&&M.type.kind!=="value"&&z.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(B=b.parse(x[3],3,Fl),!B)return null}return new IC(M,z,B)}evaluate(x){const b=this.lhs.evaluate(x),T=this.rhs.evaluate(x);if(f&&this.hasUntypedArgument){const M=mn(b),z=mn(T);if(M.kind!==z.kind||M.kind!=="string"&&M.kind!=="number")throw new Wr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${M.kind}, ${z.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const M=mn(b),z=mn(T);if(M.kind!=="string"||z.kind!=="string")return r(x,b,T)}return this.collator?a(x,b,T,this.collator.evaluate(x)):r(x,b,T)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const Jp=Dn("==",(function(o,r,a){return r===a}),qc),sf=Dn("!=",(function(o,r,a){return r!==a}),(function(o,r,a,f){return!qc(0,r,a,f)})),em=Dn("<",(function(o,r,a){return r<a}),(function(o,r,a,f){return f.compare(r,a)<0})),Hg=Dn(">",(function(o,r,a){return r>a}),(function(o,r,a,f){return f.compare(r,a)>0})),Zu=Dn("<=",(function(o,r,a){return r<=a}),(function(o,r,a,f){return f.compare(r,a)<=0})),lf=Dn(">=",(function(o,r,a){return r>=a}),(function(o,r,a,f){return f.compare(r,a)>=0}));class $u{constructor(r,a,f){this.type=Fl,this.locale=f,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const f=r[1];if(typeof f!="object"||Array.isArray(f))return a.error("Collator options argument must be an object.");const p=a.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,dr);if(!p)return null;const x=a.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,dr);if(!x)return null;let b=null;return f.locale&&(b=a.parse(f.locale,1,ur),!b)?null:new $u(p,x,b)}evaluate(r){return new wo(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class _d{constructor(r,a,f,p,x){this.type=ur,this.number=r,this.locale=a,this.currency=f,this.minFractionDigits=p,this.maxFractionDigits=x}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const f=a.parse(r[1],1,Et);if(!f)return null;const p=r[2];if(typeof p!="object"||Array.isArray(p))return a.error("NumberFormat options argument must be an object.");let x=null;if(p.locale&&(x=a.parse(p.locale,1,ur),!x))return null;let b=null;if(p.currency&&(b=a.parse(p.currency,1,ur),!b))return null;let T=null;if(p["min-fraction-digits"]&&(T=a.parse(p["min-fraction-digits"],1,Et),!T))return null;let M=null;return p["max-fraction-digits"]&&(M=a.parse(p["max-fraction-digits"],1,Et),!M)?null:new _d(f,x,b,T,M)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Hc{constructor(r){this.type=Zo,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const f=r[1];if(!Array.isArray(f)&&typeof f=="object")return a.error("First argument must be an image or text section.");const p=[];let x=!1;for(let b=1;b<=r.length-1;++b){const T=r[b];if(x&&typeof T=="object"&&!Array.isArray(T)){x=!1;let M=null;if(T["font-scale"]&&(M=a.parse(T["font-scale"],1,Et),!M))return null;let z=null;if(T["text-font"]&&(z=a.parse(T["text-font"],1,Ni(ur)),!z))return null;let B=null;if(T["text-color"]&&(B=a.parse(T["text-color"],1,Pa),!B))return null;let N=null;if(T["vertical-align"]){if(typeof T["vertical-align"]=="string"&&!gd.includes(T["vertical-align"]))return a.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${T["vertical-align"]}' instead.`);if(N=a.parse(T["vertical-align"],1,ur),!N)return null}const q=p[p.length-1];q.scale=M,q.font=z,q.textColor=B,q.verticalAlign=N}else{const M=a.parse(r[b],1,lr);if(!M)return null;const z=M.type.kind;if(z!=="string"&&z!=="value"&&z!=="null"&&z!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,p.push({content:M,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Hc(p)}evaluate(r){return new ui(this.sections.map((a=>{const f=a.content.evaluate(r);return mn(f)===Pn?new Nc("",f,null,null,null,a.verticalAlign?a.verticalAlign.evaluate(r):null):new Nc(rl(f),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null,a.verticalAlign?a.verticalAlign.evaluate(r):null)})))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor),a.verticalAlign&&r(a.verticalAlign)}outputDefined(){return!1}}class Xu{constructor(r){this.type=Pn,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const f=a.parse(r[1],1,ur);return f?new Xu(f):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),f=Wi.fromString(a);return f&&r.availableImages&&(f.available=r.availableImages.indexOf(a)>-1),f}eachChild(r){r(this.input)}outputDefined(){return!1}}class Yu{constructor(r){this.type=Et,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=a.parse(r[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Sr(f.type)} instead.`):new Yu(f):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string")return[...a].length;if(Array.isArray(a))return a.length;throw new Wr(`Expected value to be of type string or array, but found ${Sr(mn(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const Nn=8192;function Wu(o,r){const a=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,p=Math.pow(2,r.z);return[Math.round(a*p*Nn),Math.round(f*p*Nn)]}function Ku(o,r){const a=Math.pow(2,r.z);return[(p=(o[0]/Nn+r.x)/a,360*p-180),(f=(o[1]/Nn+r.y)/a,360/Math.PI*Math.atan(Math.exp((180-360*f)*Math.PI/180))-90)];var f,p}function Qu(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function ol(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function tm(o,r,a){const f=o[0]-r[0],p=o[1]-r[1],x=o[0]-a[0],b=o[1]-a[1];return f*b-x*p==0&&f*x<=0&&p*b<=0}function Zc(o,r,a,f){return(p=[f[0]-a[0],f[1]-a[1]])[0]*(x=[r[0]-o[0],r[1]-o[1]])[1]-p[1]*x[0]!=0&&!(!cf(o,r,a,f)||!cf(a,f,o,r));var p,x}function rm(o,r,a){for(const f of a)for(let p=0;p<f.length-1;++p)if(Zc(o,r,f[p],f[p+1]))return!0;return!1}function So(o,r,a=!1){let f=!1;for(const T of r)for(let M=0;M<T.length-1;M++){if(tm(o,T[M],T[M+1]))return a;(x=T[M])[1]>(p=o)[1]!=(b=T[M+1])[1]>p[1]&&p[0]<(b[0]-x[0])*(p[1]-x[1])/(b[1]-x[1])+x[0]&&(f=!f)}var p,x,b;return f}function uf(o,r){for(const a of r)if(So(o,a))return!0;return!1}function nm(o,r){for(const a of o)if(!So(a,r))return!1;for(let a=0;a<o.length-1;++a)if(rm(o[a],o[a+1],r))return!1;return!0}function im(o,r){for(const a of r)if(nm(o,a))return!0;return!1}function cf(o,r,a,f){const p=f[0]-a[0],x=f[1]-a[1],b=(o[0]-a[0])*x-p*(o[1]-a[1]),T=(r[0]-a[0])*x-p*(r[1]-a[1]);return b>0&&T<0||b<0&&T>0}function hf(o,r,a){const f=[];for(let p=0;p<o.length;p++){const x=[];for(let b=0;b<o[p].length;b++){const T=Wu(o[p][b],a);Qu(r,T),x.push(T)}f.push(x)}return f}function Yl(o,r,a){const f=[];for(let p=0;p<o.length;p++){const x=hf(o[p],r,a);f.push(x)}return f}function Ju(o,r,a,f){if(o[0]<a[0]||o[0]>a[2]){const p=.5*f;let x=o[0]-a[0]>p?-f:a[0]-o[0]>p?f:0;x===0&&(x=o[0]-a[2]>p?-f:a[2]-o[0]>p?f:0),o[0]+=x}Qu(r,o)}function am(o,r,a,f){const p=Math.pow(2,f.z)*Nn,x=[f.x*Nn,f.y*Nn],b=[];for(const T of o)for(const M of T){const z=[M.x+x[0],M.y+x[1]];Ju(z,r,a,p),b.push(z)}return b}function $c(o,r,a,f){const p=Math.pow(2,f.z)*Nn,x=[f.x*Nn,f.y*Nn],b=[];for(const M of o){const z=[];for(const B of M){const N=[B.x+x[0],B.y+x[1]];Qu(r,N),z.push(N)}b.push(z)}if(r[2]-r[0]<=p/2){(T=r)[0]=T[1]=1/0,T[2]=T[3]=-1/0;for(const M of b)for(const z of M)Ju(z,r,a,p)}var T;return b}class sl{constructor(r,a){this.type=dr,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Wo(r[1])){const f=r[1];if(f.type==="FeatureCollection"){const p=[];for(const x of f.features){const{type:b,coordinates:T}=x.geometry;b==="Polygon"&&p.push(T),b==="MultiPolygon"&&p.push(...T)}if(p.length)return new sl(f,{type:"MultiPolygon",coordinates:p})}else if(f.type==="Feature"){const p=f.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new sl(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new sl(f,f)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(a,f){const p=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=a.canonicalID();if(f.type==="Polygon"){const T=hf(f.coordinates,x,b),M=am(a.geometry(),p,x,b);if(!ol(p,x))return!1;for(const z of M)if(!So(z,T))return!1}if(f.type==="MultiPolygon"){const T=Yl(f.coordinates,x,b),M=am(a.geometry(),p,x,b);if(!ol(p,x))return!1;for(const z of M)if(!uf(z,T))return!1}return!0})(r,this.geometries);if(r.geometryType()==="LineString")return(function(a,f){const p=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],b=a.canonicalID();if(f.type==="Polygon"){const T=hf(f.coordinates,x,b),M=$c(a.geometry(),p,x,b);if(!ol(p,x))return!1;for(const z of M)if(!nm(z,T))return!1}if(f.type==="MultiPolygon"){const T=Yl(f.coordinates,x,b),M=$c(a.geometry(),p,x,b);if(!ol(p,x))return!1;for(const z of M)if(!im(z,T))return!1}return!0})(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let xd=class{constructor(o=[],r=(a,f)=>a<f?-1:a>f?1:0){if(this.data=o,this.length=this.data.length,this.compare=r,this.length>0)for(let a=(this.length>>1)-1;a>=0;a--)this._down(a)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:r,compare:a}=this,f=r[o];for(;o>0;){const p=o-1>>1,x=r[p];if(a(f,x)>=0)break;r[o]=x,o=p}r[o]=f}_down(o){const{data:r,compare:a}=this,f=this.length>>1,p=r[o];for(;o<f;){let x=1+(o<<1);const b=x+1;if(b<this.length&&a(r[b],r[x])<0&&(x=b),a(r[x],p)>=0)break;r[o]=r[x],o=x}r[o]=p}};function Xc(o,r,a=0,f=o.length-1,p=bd){for(;f>a;){if(f-a>600){const M=f-a+1,z=r-a+1,B=Math.log(M),N=.5*Math.exp(2*B/3),q=.5*Math.sqrt(B*N*(M-N)/M)*(z-M/2<0?-1:1);Xc(o,r,Math.max(a,Math.floor(r-z*N/M+q)),Math.min(f,Math.floor(r+(M-z)*N/M+q)),p)}const x=o[r];let b=a,T=f;for(ll(o,a,r),p(o[f],x)>0&&ll(o,a,f);b<T;){for(ll(o,b,T),b++,T--;p(o[b],x)<0;)b++;for(;p(o[T],x)>0;)T--}p(o[a],x)===0?ll(o,a,T):(T++,ll(o,T,f)),T<=r&&(a=T+1),r<=T&&(f=T-1)}}function ll(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}function bd(o,r){return o<r?-1:o>r?1:0}function Yc(o,r){if(o.length<=1)return[o];const a=[];let f,p;for(const x of o){const b=Zg(x);b!==0&&(x.area=Math.abs(b),p===void 0&&(p=b<0),p===b<0?(f&&a.push(f),f=[x]):f.push(x))}if(f&&a.push(f),r>1)for(let x=0;x<a.length;x++)a[x].length<=r||(Xc(a[x],r,1,a[x].length-1,om),a[x]=a[x].slice(0,r));return a}function om(o,r){return r.area-o.area}function Zg(o){let r=0;for(let a,f,p=0,x=o.length,b=x-1;p<x;b=p++)a=o[p],f=o[b],r+=(f.x-a.x)*(a.y+f.y);return r}const sm=1/298.257223563,Wc=sm*(2-sm),lm=Math.PI/180;class wd{constructor(r){const a=6378.137*lm*1e3,f=Math.cos(r*lm),p=1/(1-Wc*(1-f*f)),x=Math.sqrt(p);this.kx=a*x*f,this.ky=a*x*p*(1-Wc)}distance(r,a){const f=this.wrap(r[0]-a[0])*this.kx,p=(r[1]-a[1])*this.ky;return Math.sqrt(f*f+p*p)}pointOnLine(r,a){let f,p,x,b,T=1/0;for(let M=0;M<r.length-1;M++){let z=r[M][0],B=r[M][1],N=this.wrap(r[M+1][0]-z)*this.kx,q=(r[M+1][1]-B)*this.ky,$=0;N===0&&q===0||($=(this.wrap(a[0]-z)*this.kx*N+(a[1]-B)*this.ky*q)/(N*N+q*q),$>1?(z=r[M+1][0],B=r[M+1][1]):$>0&&(z+=N/this.kx*$,B+=q/this.ky*$)),N=this.wrap(a[0]-z)*this.kx,q=(a[1]-B)*this.ky;const K=N*N+q*q;K<T&&(T=K,f=z,p=B,x=M,b=$)}return{point:[f,p],index:x,t:Math.max(0,Math.min(1,b))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function ua(o,r){return r[0]-o[0]}function ul(o){return o[1]-o[0]+1}function Qa(o,r){return o[1]>=o[0]&&o[1]<r}function Kc(o,r){if(o[0]>o[1])return[null,null];const a=ul(o);if(r){if(a===2)return[o,null];const p=Math.floor(a/2);return[[o[0],o[0]+p],[o[0]+p,o[1]]]}if(a===1)return[o,null];const f=Math.floor(a/2)-1;return[[o[0],o[0]+f],[o[0]+f+1,o[1]]]}function ff(o,r){if(!Qa(r,o.length))return[1/0,1/0,-1/0,-1/0];const a=[1/0,1/0,-1/0,-1/0];for(let f=r[0];f<=r[1];++f)Qu(a,o[f]);return a}function df(o){const r=[1/0,1/0,-1/0,-1/0];for(const a of o)for(const f of a)Qu(r,f);return r}function Qc(o){return o[0]!==-1/0&&o[1]!==-1/0&&o[2]!==1/0&&o[3]!==1/0}function pf(o,r,a){if(!Qc(o)||!Qc(r))return NaN;let f=0,p=0;return o[2]<r[0]&&(f=r[0]-o[2]),o[0]>r[2]&&(f=o[0]-r[2]),o[1]>r[3]&&(p=o[1]-r[3]),o[3]<r[1]&&(p=r[1]-o[3]),a.distance([0,0],[f,p])}function Ja(o,r,a){const f=a.pointOnLine(r,o);return a.distance(o,f.point)}function Jc(o,r,a,f,p){const x=Math.min(Ja(o,[a,f],p),Ja(r,[a,f],p)),b=Math.min(Ja(a,[o,r],p),Ja(f,[o,r],p));return Math.min(x,b)}function eh(o,r,a,f,p){if(!Qa(r,o.length)||!Qa(f,a.length))return 1/0;let x=1/0;for(let b=r[0];b<r[1];++b){const T=o[b],M=o[b+1];for(let z=f[0];z<f[1];++z){const B=a[z],N=a[z+1];if(Zc(T,M,B,N))return 0;x=Math.min(x,Jc(T,M,B,N,p))}}return x}function mf(o,r,a,f,p){if(!Qa(r,o.length)||!Qa(f,a.length))return NaN;let x=1/0;for(let b=r[0];b<=r[1];++b)for(let T=f[0];T<=f[1];++T)if(x=Math.min(x,p.distance(o[b],a[T])),x===0)return x;return x}function um(o,r,a){if(So(o,r,!0))return 0;let f=1/0;for(const p of r){const x=p[0],b=p[p.length-1];if(x!==b&&(f=Math.min(f,Ja(o,[b,x],a)),f===0))return f;const T=a.pointOnLine(p,o);if(f=Math.min(f,a.distance(o,T.point)),f===0)return f}return f}function Wl(o,r,a,f){if(!Qa(r,o.length))return NaN;for(let x=r[0];x<=r[1];++x)if(So(o[x],a,!0))return 0;let p=1/0;for(let x=r[0];x<r[1];++x){const b=o[x],T=o[x+1];for(const M of a)for(let z=0,B=M.length,N=B-1;z<B;N=z++){const q=M[N],$=M[z];if(Zc(b,T,q,$))return 0;p=Math.min(p,Jc(b,T,q,$,f))}}return p}function Kl(o,r){for(const a of o)for(const f of a)if(So(f,r,!0))return!0;return!1}function Sd(o,r,a,f=1/0){const p=df(o),x=df(r);if(f!==1/0&&pf(p,x,a)>=f)return f;if(ol(p,x)){if(Kl(o,r))return 0}else if(Kl(r,o))return 0;let b=1/0;for(const T of o)for(let M=0,z=T.length,B=z-1;M<z;B=M++){const N=T[B],q=T[M];for(const $ of r)for(let K=0,J=$.length,te=J-1;K<J;te=K++){const ae=$[te],ve=$[K];if(Zc(N,q,ae,ve))return 0;b=Math.min(b,Jc(N,q,ae,ve,a))}}return b}function Dr(o,r,a,f,p,x){if(!x)return;const b=pf(ff(f,x),p,a);b<r&&o.push([b,x,[0,0]])}function Qo(o,r,a,f,p,x,b){if(!x||!b)return;const T=pf(ff(f,x),ff(p,b),a);T<r&&o.push([T,x,b])}function th(o,r,a,f,p=1/0){let x=Math.min(f.distance(o[0],a[0][0]),p);if(x===0)return x;const b=new xd([[0,[0,o.length-1],[0,0]]],ua),T=df(a);for(;b.length>0;){const M=b.pop();if(M[0]>=x)continue;const z=M[1],B=r?50:100;if(ul(z)<=B){if(!Qa(z,o.length))return NaN;if(r){const N=Wl(o,z,a,f);if(isNaN(N)||N===0)return N;x=Math.min(x,N)}else for(let N=z[0];N<=z[1];++N){const q=um(o[N],a,f);if(x=Math.min(x,q),x===0)return 0}}else{const N=Kc(z,r);Dr(b,x,f,o,T,N[0]),Dr(b,x,f,o,T,N[1])}}return x}function rh(o,r,a,f,p,x=1/0){let b=Math.min(x,p.distance(o[0],a[0]));if(b===0)return b;const T=new xd([[0,[0,o.length-1],[0,a.length-1]]],ua);for(;T.length>0;){const M=T.pop();if(M[0]>=b)continue;const z=M[1],B=M[2],N=r?50:100,q=f?50:100;if(ul(z)<=N&&ul(B)<=q){if(!Qa(z,o.length)&&Qa(B,a.length))return NaN;let $;if(r&&f)$=eh(o,z,a,B,p),b=Math.min(b,$);else if(r&&!f){const K=o.slice(z[0],z[1]+1);for(let J=B[0];J<=B[1];++J)if($=Ja(a[J],K,p),b=Math.min(b,$),b===0)return b}else if(!r&&f){const K=a.slice(B[0],B[1]+1);for(let J=z[0];J<=z[1];++J)if($=Ja(o[J],K,p),b=Math.min(b,$),b===0)return b}else $=mf(o,z,a,B,p),b=Math.min(b,$)}else{const $=Kc(z,r),K=Kc(B,f);Qo(T,b,p,o,a,$[0],K[0]),Qo(T,b,p,o,a,$[0],K[1]),Qo(T,b,p,o,a,$[1],K[0]),Qo(T,b,p,o,a,$[1],K[1])}}return b}function gf(o){return o.type==="MultiPolygon"?o.coordinates.map((r=>({type:"Polygon",coordinates:r}))):o.type==="MultiLineString"?o.coordinates.map((r=>({type:"LineString",coordinates:r}))):o.type==="MultiPoint"?o.coordinates.map((r=>({type:"Point",coordinates:r}))):[o]}class Ql{constructor(r,a){this.type=Et,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(Wo(r[1])){const f=r[1];if(f.type==="FeatureCollection")return new Ql(f,f.features.map((p=>gf(p.geometry))).flat());if(f.type==="Feature")return new Ql(f,gf(f.geometry));if("type"in f&&"coordinates"in f)return new Ql(f,gf(f))}return a.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return(function(a,f){const p=a.geometry(),x=p.flat().map((M=>Ku([M.x,M.y],a.canonical)));if(p.length===0)return NaN;const b=new wd(x[0][1]);let T=1/0;for(const M of f){switch(M.type){case"Point":T=Math.min(T,rh(x,!1,[M.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,rh(x,!1,M.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,th(x,!1,M.coordinates,b,T))}if(T===0)return T}return T})(r,this.geometries);if(r.geometryType()==="LineString")return(function(a,f){const p=a.geometry(),x=p.flat().map((M=>Ku([M.x,M.y],a.canonical)));if(p.length===0)return NaN;const b=new wd(x[0][1]);let T=1/0;for(const M of f){switch(M.type){case"Point":T=Math.min(T,rh(x,!0,[M.coordinates],!1,b,T));break;case"LineString":T=Math.min(T,rh(x,!0,M.coordinates,!0,b,T));break;case"Polygon":T=Math.min(T,th(x,!0,M.coordinates,b,T))}if(T===0)return T}return T})(r,this.geometries);if(r.geometryType()==="Polygon")return(function(a,f){const p=a.geometry();if(p.length===0||p[0].length===0)return NaN;const x=Yc(p,0).map((M=>M.map((z=>z.map((B=>Ku([B.x,B.y],a.canonical))))))),b=new wd(x[0][0][0][1]);let T=1/0;for(const M of f)for(const z of x){switch(M.type){case"Point":T=Math.min(T,th([M.coordinates],!1,z,b,T));break;case"LineString":T=Math.min(T,th(M.coordinates,!0,z,b,T));break;case"Polygon":T=Math.min(T,Sd(z,M.coordinates,b,T))}if(T===0)return T}return T})(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class nh{constructor(r){this.type=lr,this.key=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const f=r[1];return f==null?a.error("Global state property must be defined."):typeof f!="string"?a.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new nh(f)}evaluate(r){var a;const f=(a=r.globals)===null||a===void 0?void 0:a.globalState;return f&&Object.keys(f).length!==0?qu(f,this.key):null}eachChild(){}outputDefined(){return!1}}const ec={"==":Jp,"!=":sf,">":Hg,"<":em,">=":lf,"<=":Zu,array:Ki,at:yr,boolean:Ki,case:Uc,coalesce:Xl,collator:$u,format:Hc,image:Xu,in:cr,"index-of":$l,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:Yu,let:qr,literal:Da,match:Ar,number:Ki,"number-format":_d,object:Ki,slice:Ka,step:al,string:Ki,"to-boolean":Qi,"to-color":Qi,"to-number":Qi,"to-string":Qi,var:nl,within:sl,distance:Ql,"global-state":nh};class Ia{constructor(r,a,f,p){this.name=r,this.type=a,this._evaluate=f,this.args=p}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,a){const f=r[0],p=Ia.definitions[f];if(!p)return a.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(p)?p[0]:p.type,b=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,T=b.filter((([z])=>!Array.isArray(z)||z.length===r.length-1));let M=null;for(const[z,B]of T){M=new Zl(a.registry,ea,a.path,null,a.scope);const N=[];let q=!1;for(let $=1;$<r.length;$++){const K=r[$],J=Array.isArray(z)?z[$-1]:z.type,te=M.parse(K,1+N.length,J);if(!te){q=!0;break}N.push(te)}if(!q)if(Array.isArray(z)&&z.length!==N.length)M.error(`Expected ${z.length} arguments, but found ${N.length} instead.`);else{for(let $=0;$<N.length;$++){const K=Array.isArray(z)?z[$]:z.type,J=N[$];M.concat($+1).checkSubtype(K,J.type)}if(M.errors.length===0)return new Ia(f,x,B,N)}}if(T.length===1)a.errors.push(...M.errors);else{const z=(T.length?T:b).map((([N])=>{return q=N,Array.isArray(q)?`(${q.map(Sr).join(", ")})`:`(${Sr(q.type)}...)`;var q})).join(" | "),B=[];for(let N=1;N<r.length;N++){const q=a.parse(r[N],1+B.length);if(!q)return null;B.push(Sr(q.type))}a.error(`Expected arguments of type ${z}, but found (${B.join(", ")}) instead.`)}return null}static register(r,a){Ia.definitions=a;for(const f in a)r[f]=Ia}}function Ad(o,[r,a,f,p]){r=r.evaluate(o),a=a.evaluate(o),f=f.evaluate(o);const x=p?p.evaluate(o):1,b=Ca(r,a,f,x);if(b)throw new Wr(b);return new fr(r/255,a/255,f/255,x,!1)}function yf(o,r){return o in r}function Oa(o,r){const a=r[o];return a===void 0?null:a}function Jo(o){return{type:o}}function ea(o){if(o instanceof nl)return ea(o.boundExpression);if(o instanceof Ia&&o.name==="error"||o instanceof $u||o instanceof sl||o instanceof Ql||o instanceof nh)return!1;const r=o instanceof Qi||o instanceof Ki;let a=!0;return o.eachChild((f=>{a=r?a&&ea(f):a&&f instanceof Da})),!!a&&Es(o)&&eu(o,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Es(o){if(o instanceof Ia&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof sl||o instanceof Ql)return!1;let r=!0;return o.eachChild((a=>{r&&!Es(a)&&(r=!1)})),r}function Jl(o){if(o instanceof Ia&&o.name==="feature-state")return!1;let r=!0;return o.eachChild((a=>{r&&!Jl(a)&&(r=!1)})),r}function eu(o,r){if(o instanceof Ia&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild((f=>{a&&!eu(f,r)&&(a=!1)})),a}function ih(o){return{result:"success",value:o}}function cl(o){return{result:"error",value:o}}function eo(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function Td(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function tc(o){return!!o.expression&&o.expression.interpolated}function hr(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function vf(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)&&mn(o)===Ho}function za(o){return o}function _f(o,r){const a=o.stops&&typeof o.stops[0][0]=="object",f=a||!(a||o.property!==void 0),p=o.type||(tc(r)?"exponential":"interval"),x=(function(B){switch(B.type){case"color":return fr.parse;case"padding":return Xn.parse;case"numberArray":return pn.parse;case"colorArray":return Wt.parse;default:return null}})(r);if(x&&((o=Bi({},o)).stops&&(o.stops=o.stops.map((B=>[B[0],x(B[1])]))),o.default=x(o.default?o.default:r.default)),o.colorSpace&&(b=o.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${o.colorSpace}"`);var b;const T=(function(B){switch(B){case"exponential":return hl;case"interval":return xf;case"categorical":return cm;case"identity":return Ed;default:throw new Error(`Unknown function type "${B}"`)}})(p);let M,z;if(p==="categorical"){M=Object.create(null);for(const B of o.stops)M[B[0]]=B[1];z=typeof o.stops[0][0]}if(a){const B={},N=[];for(let K=0;K<o.stops.length;K++){const J=o.stops[K],te=J[0].zoom;B[te]===void 0&&(B[te]={zoom:te,type:o.type,property:o.property,default:o.default,stops:[]},N.push(te)),B[te].stops.push([J[0].value,J[1]])}const q=[];for(const K of N)q.push([B[K].zoom,_f(B[K],r)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:Ji.interpolationFactor.bind(void 0,$),zoomStops:q.map((K=>K[0])),evaluate:({zoom:K},J)=>hl({stops:q,base:o.base},r,K).evaluate(K,J)}}if(f){const B=p==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:B,interpolationFactor:Ji.interpolationFactor.bind(void 0,B),zoomStops:o.stops.map((N=>N[0])),evaluate:({zoom:N})=>T(o,r,N,M,z)}}return{kind:"source",evaluate(B,N){const q=N&&N.properties?N.properties[o.property]:void 0;return q===void 0?ka(o.default,r.default):T(o,r,q,M,z)}}}function ka(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function cm(o,r,a,f,p){return ka(typeof a===p?f[a]:void 0,o.default,r.default)}function xf(o,r,a){if(hr(a)!=="number")return ka(o.default,r.default);const f=o.stops.length;if(f===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const p=il(o.stops.map((x=>x[0])),a);return o.stops[p][1]}function hl(o,r,a){const f=o.base!==void 0?o.base:1;if(hr(a)!=="number")return ka(o.default,r.default);const p=o.stops.length;if(p===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[p-1][0])return o.stops[p-1][1];const x=il(o.stops.map((B=>B[0])),a),b=(function(B,N,q,$){const K=$-q,J=B-q;return K===0?0:N===1?J/K:(Math.pow(N,J)-1)/(Math.pow(N,K)-1)})(a,f,o.stops[x][0],o.stops[x+1][0]),T=o.stops[x][1],M=o.stops[x+1][1],z=gn[r.type]||za;return typeof T.evaluate=="function"?{evaluate(...B){const N=T.evaluate.apply(void 0,B),q=M.evaluate.apply(void 0,B);if(N!==void 0&&q!==void 0)return z(N,q,b,o.colorSpace)}}:z(T,M,b,o.colorSpace)}function Ed(o,r,a){switch(r.type){case"color":a=fr.parse(a);break;case"formatted":a=ui.fromString(a.toString());break;case"resolvedImage":a=Wi.fromString(a.toString());break;case"padding":a=Xn.parse(a);break;case"colorArray":a=Wt.parse(a);break;case"numberArray":a=pn.parse(a);break;default:hr(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0)}return ka(a,o.default,r.default)}Ia.register(ec,{error:[{kind:"error"},[ur],(o,[r])=>{throw new Wr(r.evaluate(o))}],typeof:[ur,[lr],(o,[r])=>Sr(mn(r.evaluate(o)))],"to-rgba":[Ni(Et,4),[Pa],(o,[r])=>{const[a,f,p,x]=r.evaluate(o).rgb;return[255*a,255*f,255*p,x]}],rgb:[Pa,[Et,Et,Et],Ad],rgba:[Pa,[Et,Et,Et,Et],Ad],has:{type:dr,overloads:[[[ur],(o,[r])=>yf(r.evaluate(o),o.properties())],[[ur,Ho],(o,[r,a])=>yf(r.evaluate(o),a.evaluate(o))]]},get:{type:lr,overloads:[[[ur],(o,[r])=>Oa(r.evaluate(o),o.properties())],[[ur,Ho],(o,[r,a])=>Oa(r.evaluate(o),a.evaluate(o))]]},"feature-state":[lr,[ur],(o,[r])=>Oa(r.evaluate(o),o.featureState||{})],properties:[Ho,[],o=>o.properties()],"geometry-type":[ur,[],o=>o.geometryType()],id:[lr,[],o=>o.id()],zoom:[Et,[],o=>o.globals.zoom],"heatmap-density":[Et,[],o=>o.globals.heatmapDensity||0],elevation:[Et,[],o=>o.globals.elevation||0],"line-progress":[Et,[],o=>o.globals.lineProgress||0],accumulated:[lr,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Et,Jo(Et),(o,r)=>{let a=0;for(const f of r)a+=f.evaluate(o);return a}],"*":[Et,Jo(Et),(o,r)=>{let a=1;for(const f of r)a*=f.evaluate(o);return a}],"-":{type:Et,overloads:[[[Et,Et],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Et],(o,[r])=>-r.evaluate(o)]]},"/":[Et,[Et,Et],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Et,[Et,Et],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Et,[],()=>Math.LN2],pi:[Et,[],()=>Math.PI],e:[Et,[],()=>Math.E],"^":[Et,[Et,Et],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Et,[Et],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))],log2:[Et,[Et],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Et,[Et],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Et,[Et],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Et,[Et],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Et,[Et],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Et,[Et],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Et,[Et],(o,[r])=>Math.atan(r.evaluate(o))],min:[Et,Jo(Et),(o,r)=>Math.min(...r.map((a=>a.evaluate(o))))],max:[Et,Jo(Et),(o,r)=>Math.max(...r.map((a=>a.evaluate(o))))],abs:[Et,[Et],(o,[r])=>Math.abs(r.evaluate(o))],round:[Et,[Et],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Et,[Et],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Et,[Et],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[dr,[ur,lr],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[dr,[lr],(o,[r])=>o.id()===r.value],"filter-type-==":[dr,[ur],(o,[r])=>o.geometryType()===r.value],"filter-<":[dr,[ur,lr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f<p}],"filter-id-<":[dr,[lr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a<f}],"filter->":[dr,[ur,lr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f>p}],"filter-id->":[dr,[lr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a>f}],"filter-<=":[dr,[ur,lr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f<=p}],"filter-id-<=":[dr,[lr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a<=f}],"filter->=":[dr,[ur,lr],(o,[r,a])=>{const f=o.properties()[r.value],p=a.value;return typeof f==typeof p&&f>=p}],"filter-id->=":[dr,[lr],(o,[r])=>{const a=o.id(),f=r.value;return typeof a==typeof f&&a>=f}],"filter-has":[dr,[lr],(o,[r])=>r.value in o.properties()],"filter-has-id":[dr,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[dr,[Ni(ur)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[dr,[Ni(lr)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[dr,[ur,Ni(lr)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[dr,[ur,Ni(lr)],(o,[r,a])=>(function(f,p,x,b){for(;x<=b;){const T=x+b>>1;if(p[T]===f)return!0;p[T]>f?b=T-1:x=T+1}return!1})(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:dr,overloads:[[[dr,dr],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[Jo(dr),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:dr,overloads:[[[dr,dr],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[Jo(dr),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[dr,[dr],(o,[r])=>!r.evaluate(o)],"is-supported-script":[dr,[ur],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[ur,[ur],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[ur,[ur],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[ur,Jo(lr),(o,r)=>r.map((a=>rl(a.evaluate(o)))).join("")],"resolved-locale":[ur,[Fl],(o,[r])=>r.evaluate(o).resolvedLocale()]});class bf{constructor(r,a,f){this.expression=r,this._warningHistory={},this._evaluator=new Hl,this._defaultValue=a?(function(p){if(p.type==="color"&&vf(p.default))return new fr(0,0,0,0);switch(p.type){case"color":return fr.parse(p.default)||null;case"padding":return Xn.parse(p.default)||null;case"numberArray":return pn.parse(p.default)||null;case"colorArray":return Wt.parse(p.default)||null;case"variableAnchorOffsetCollection":return Cn.parse(p.default)||null;case"projectionDefinition":return ci.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(a):null,this._enumValues=a&&a.type==="enum"?a.values:null,this._globalState=f}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=yi(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=f,this._evaluator.canonical=p,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(r,a,f,p,x,b){this._globalState&&(r=yi(r,this._globalState)),this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=f||null,this._evaluator.canonical=p,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=b||null;try{const T=this.expression.evaluate(this._evaluator);if(T==null||typeof T=="number"&&T!=T)return this._defaultValue;if(this._enumValues&&!(T in this._enumValues))throw new Wr(`Expected value to be one of ${Object.keys(this._enumValues).map((M=>JSON.stringify(M))).join(", ")}, but found ${JSON.stringify(T)} instead.`);return T}catch(T){return this._warningHistory[T.message]||(this._warningHistory[T.message]=!0,typeof console<"u"&&console.warn(T.message)),this._defaultValue}}}function fl(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in ec}function rc(o,r,a){const f=new Zl(ec,ea,[],r?(function(x){const b={color:Pa,string:ur,number:Et,enum:ur,boolean:dr,formatted:Zo,padding:Ss,numberArray:Xo,colorArray:$o,projectionDefinition:nf,resolvedImage:Pn,variableAnchorOffsetCollection:Uu};return x.type==="array"?Ni(b[x.value]||lr,x.length):b[x.type]})(r):void 0),p=f.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?ih(new bf(p,r,a)):cl(f.errors)}class ta{constructor(r,a,f){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!Jl(a.expression),this.globalStateRefs=hi(a.expression),this._globalState=f}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=yi(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,a,f,p,x,b)}evaluate(r,a,f,p,x,b){return this._globalState&&(r=yi(r,this._globalState)),this._styleExpression.evaluate(r,a,f,p,x,b)}}class dl{constructor(r,a,f,p,x){this.kind=r,this.zoomStops=f,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!Jl(a.expression),this.globalStateRefs=hi(a.expression),this.interpolationType=p,this._globalState=x}evaluateWithoutErrorHandling(r,a,f,p,x,b){return this._globalState&&(r=yi(r,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(r,a,f,p,x,b)}evaluate(r,a,f,p,x,b){return this._globalState&&(r=yi(r,this._globalState)),this._styleExpression.evaluate(r,a,f,p,x,b)}interpolationFactor(r,a,f){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,r,a,f):0}}function pl(o,r,a){const f=rc(o,r,a);if(f.result==="error")return f;const p=f.value.expression,x=Es(p);if(!x&&!eo(r))return cl([new ji("","data expressions not supported")]);const b=eu(p,["zoom"]);if(!b&&!Td(r))return cl([new ji("","zoom expressions not supported")]);const T=ml(p);return T||b?T instanceof ji?cl([T]):T instanceof Ji&&!tc(r)?cl([new ji("",'"interpolate" expressions cannot be used with this property')]):ih(T?new dl(x?"camera":"composite",f.value,T.labels,T instanceof Ji?T.interpolation:void 0,a):new ta(x?"constant":"source",f.value,a)):cl([new ji("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class tu{constructor(r,a){this._parameters=r,this._specification=a,Bi(this,_f(this._parameters,this._specification))}static deserialize(r){return new tu(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ml(o){let r=null;if(o instanceof qr)r=ml(o.result);else if(o instanceof Xl){for(const a of o.args)if(r=ml(a),r)break}else(o instanceof al||o instanceof Ji)&&o.input instanceof Ia&&o.input.name==="zoom"&&(r=o);return r instanceof ji||o.eachChild((a=>{const f=ml(a);f instanceof ji?r=f:!r&&f?r=new ji("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&f&&r!==f&&(r=new ji("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),r}function hi(o,r=new Set){return o instanceof nh&&r.add(o.key),o.eachChild((a=>{hi(a,r)})),r}function yi(o,r){const{zoom:a,heatmapDensity:f,elevation:p,lineProgress:x,isSupportedScript:b,accumulated:T}=o??{};return{zoom:a,heatmapDensity:f,elevation:p,lineProgress:x,isSupportedScript:b,accumulated:T,globalState:r}}function es(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!es(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const ts={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ca(o,r){if(o==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};es(o)||(o=ru(o));const a=rc(o,ts,r);if(a.result==="error")throw new Error(a.value.map((f=>`${f.key}: ${f.message}`)).join(", "));return{filter:(f,p,x)=>a.value.evaluate(f,p,{},x),needGeometry:Md(o),getGlobalStateRefs:()=>hi(a.value.expression)}}function Ms(o,r){return o<r?-1:o>r?1:0}function Md(o){if(!Array.isArray(o))return!1;if(o[0]==="within"||o[0]==="distance")return!0;for(let r=1;r<o.length;r++)if(Md(o[r]))return!0;return!1}function ru(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?nc(o[1],o[2],"=="):r==="!="?Kr(nc(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?nc(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(ru))):r==="all"?["all"].concat(o.slice(1).map(ru)):r==="none"?["all"].concat(o.slice(1).map(ru).map(Kr)):r==="in"?Pd(o[1],o.slice(2)):r==="!in"?Kr(Pd(o[1],o.slice(2))):r==="has"?vi(o[1]):r!=="!has"||Kr(vi(o[1]));var a}function nc(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function Pd(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some((a=>typeof a!=typeof r[0]))?["filter-in-large",o,["literal",r.sort(Ms)]]:["filter-in-small",o,["literal",r]]}}function vi(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Kr(o){return["!",o]}function br(o){const r=typeof o;if(r==="number"||r==="boolean"||r==="string"||o==null)return JSON.stringify(o);if(Array.isArray(o)){let p="[";for(const x of o)p+=`${br(x)},`;return`${p}]`}const a=Object.keys(o).sort();let f="{";for(let p=0;p<a.length;p++)f+=`${JSON.stringify(a[p])}:${br(o[a[p]])},`;return`${f}}`}function Ps(o){let r="";for(const a of jr)r+=`/${br(o[a])}`;return r}function Ra(o){const r=o.value;return r?[new xt(o.key,r,"constants have been deprecated as of v8")]:[]}function wn(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function ha(o){if(Array.isArray(o))return o.map(ha);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=ha(o[a]);return r}return wn(o)}function fa(o){const r=o.key,a=o.value,f=o.valueSpec||{},p=o.objectElementValidators||{},x=o.style,b=o.styleSpec,T=o.validateSpec;let M=[];const z=hr(a);if(z!=="object")return[new xt(r,a,`object expected, ${z} found`)];for(const B in a){const N=B.split(".")[0],q=qu(f,N)||f["*"];let $;if(qu(p,N))$=p[N];else if(qu(f,N)){if(a[B]===void 0)continue;$=T}else if(p["*"])$=p["*"];else{if(!f["*"]){M.push(new xt(r,a[B],`unknown property "${B}"`));continue}$=T}M=M.concat($({key:(r&&`${r}.`)+B,value:a[B],valueSpec:q,style:x,styleSpec:b,object:a,objectKey:B,validateSpec:T},a))}for(const B in f)p[B]||f[B].required&&f[B].default===void 0&&a[B]===void 0&&M.push(new xt(r,a,`missing required property "${B}"`));return M}function ah(o){const r=o.value,a=o.valueSpec,f=o.style,p=o.styleSpec,x=o.key,b=o.arrayElementValidator||o.validateSpec;if(hr(r)!=="array")return[new xt(x,r,`array expected, ${hr(r)} found`)];if(a.length&&r.length!==a.length)return[new xt(x,r,`array length ${a.length} expected, length ${r.length} found`)];let T={type:a.value,values:a.values};p.$version<7&&(T.function=a.function),hr(a.value)==="object"&&(T=a.value);let M=[];for(let z=0;z<r.length;z++)M=M.concat(b({array:r,arrayIndex:z,value:r[z],valueSpec:T,validateSpec:o.validateSpec,style:f,styleSpec:p,key:`${x}[${z}]`}));return M}function rs(o){const r=o.key,a=o.value,f=o.valueSpec;let p=hr(a);return p==="number"&&a!=a&&(p="NaN"),p!=="number"?[new xt(r,a,`number expected, ${p} found`)]:"minimum"in f&&a<f.minimum?[new xt(r,a,`${a} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&a>f.maximum?[new xt(r,a,`${a} is greater than the maximum value ${f.maximum}`)]:[]}function ns(o){const r=o.valueSpec,a=wn(o.value.type);let f,p,x,b={};const T=a!=="categorical"&&o.value.property===void 0,M=!T,z=hr(o.value.stops)==="array"&&hr(o.value.stops[0])==="array"&&hr(o.value.stops[0][0])==="object",B=fa({key:o.key,value:o.value,valueSpec:o.styleSpec.function,validateSpec:o.validateSpec,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function($){if(a==="identity")return[new xt($.key,$.value,'identity function may not have a "stops" property')];let K=[];const J=$.value;return K=K.concat(ah({key:$.key,value:J,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:N})),hr(J)==="array"&&J.length===0&&K.push(new xt($.key,J,"array must have at least one stop")),K},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:r,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return a==="identity"&&T&&B.push(new xt(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||B.push(new xt(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!tc(o.valueSpec)&&B.push(new xt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(M&&!eo(o.valueSpec)?B.push(new xt(o.key,o.value,"property functions not supported")):T&&!Td(o.valueSpec)&&B.push(new xt(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!z||o.value.property!==void 0||B.push(new xt(o.key,o.value,'"property" property is required')),B;function N($){let K=[];const J=$.value,te=$.key;if(hr(J)!=="array")return[new xt(te,J,`array expected, ${hr(J)} found`)];if(J.length!==2)return[new xt(te,J,`array length 2 expected, length ${J.length} found`)];if(z){if(hr(J[0])!=="object")return[new xt(te,J,`object expected, ${hr(J[0])} found`)];if(J[0].zoom===void 0)return[new xt(te,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new xt(te,J,"object stop key must have value")];if(x&&x>wn(J[0].zoom))return[new xt(te,J[0].zoom,"stop zoom values must appear in ascending order")];wn(J[0].zoom)!==x&&(x=wn(J[0].zoom),p=void 0,b={}),K=K.concat(fa({key:`${te}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:rs,value:q}}))}else K=K.concat(q({key:`${te}[0]`,value:J[0],validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},J));return fl(ha(J[1]))?K.concat([new xt(`${te}[1]`,J[1],"expressions are not allowed in function stops.")]):K.concat($.validateSpec({key:`${te}[1]`,value:J[1],valueSpec:r,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function q($,K){const J=hr($.value),te=wn($.value),ae=$.value!==null?$.value:K;if(f){if(J!==f)return[new xt($.key,ae,`${J} stop domain type must match previous stop domain type ${f}`)]}else f=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new xt($.key,ae,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&a!=="categorical"){let ve=`number expected, ${J} found`;return eo(r)&&a===void 0&&(ve+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new xt($.key,ae,ve)]}return a!=="categorical"||J!=="number"||isFinite(te)&&Math.floor(te)===te?a!=="categorical"&&J==="number"&&p!==void 0&&te<p?[new xt($.key,ae,"stop domain values must appear in ascending order")]:(p=te,a==="categorical"&&te in b?[new xt($.key,ae,"stop domain values must be unique")]:(b[te]=!0,[])):[new xt($.key,ae,`integer expected, found ${te}`)]}}function is(o){const r=(o.expressionContext==="property"?pl:rc)(ha(o.value),o.valueSpec);if(r.result==="error")return r.value.map((f=>new xt(`${o.key}${f.key}`,o.value,f.message)));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new xt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Jl(a))return[new xt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Jl(a))return[new xt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!eu(a,["zoom","feature-state"]))return[new xt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!Es(a))return[new xt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(o){const r=o.key,a=o.value,f=hr(a);return f!=="string"?[new xt(r,a,`color expected, ${f} found`)]:fr.parse(String(a))?[]:[new xt(r,a,`color expected, "${a}" found`)]}function Ds(o){const r=o.key,a=o.value,f=o.valueSpec,p=[];return Array.isArray(f.values)?f.values.indexOf(wn(a))===-1&&p.push(new xt(r,a,`expected one of [${f.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(f.values).indexOf(wn(a))===-1&&p.push(new xt(r,a,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(a)} found`)),p}function to(o){return es(ha(o.value))?is(Bi({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):as(o)}function as(o){const r=o.value,a=o.key;if(hr(r)!=="array")return[new xt(a,r,`array expected, ${hr(r)} found`)];const f=o.styleSpec;let p,x=[];if(r.length<1)return[new xt(a,r,"filter array must have at least 1 element")];switch(x=x.concat(Ds({key:`${a}[0]`,value:r[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),wn(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&wn(r[1])==="$type"&&x.push(new xt(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&x.push(new xt(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(p=hr(r[1]),p!=="string"&&x.push(new xt(`${a}[1]`,r[1],`string expected, ${p} found`)));for(let b=2;b<r.length;b++)p=hr(r[b]),wn(r[1])==="$type"?x=x.concat(Ds({key:`${a}[${b}]`,value:r[b],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&x.push(new xt(`${a}[${b}]`,r[b],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let b=1;b<r.length;b++)x=x.concat(as({key:`${a}[${b}]`,value:r[b],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":p=hr(r[1]),r.length!==2?x.push(new xt(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):p!=="string"&&x.push(new xt(`${a}[1]`,r[1],`string expected, ${p} found`))}return x}function Is(o,r){const a=o.key,f=o.validateSpec,p=o.style,x=o.styleSpec,b=o.value,T=o.objectKey,M=x[`${r}_${o.layerType}`];if(!M)return[];const z=T.match(/^(.*)-transition$/);if(r==="paint"&&z&&M[z[1]]&&M[z[1]].transition)return f({key:a,value:b,valueSpec:x.transition,style:p,styleSpec:x});const B=o.valueSpec||M[T];if(!B)return[new xt(a,b,`unknown property "${T}"`)];let N;if(hr(b)==="string"&&eo(B)&&!B.tokens&&(N=/^{([^}]+)}$/.exec(b)))return[new xt(a,b,`"${T}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(N[1])} }\`.`)];const q=[];return o.layerType==="symbol"&&T==="text-font"&&vf(ha(b))&&wn(b.type)==="identity"&&q.push(new xt(a,b,'"text-font" does not support identity functions')),q.concat(f({key:o.key,value:b,valueSpec:B,style:p,styleSpec:x,expressionContext:"property",propertyType:r,propertyKey:T}))}function os(o){return Is(o,"paint")}function wf(o){return Is(o,"layout")}function Sf(o){let r=[];const a=o.value,f=o.key,p=o.style,x=o.styleSpec;if(hr(a)!=="object")return[new xt(f,a,`object expected, ${hr(a)} found`)];a.type||a.ref||r.push(new xt(f,a,'either "type" or "ref" is required'));let b=wn(a.type);const T=wn(a.ref);if(a.id){const M=wn(a.id);for(let z=0;z<o.arrayIndex;z++){const B=p.layers[z];wn(B.id)===M&&r.push(new xt(f,a.id,`duplicate layer id "${a.id}", previously used at line ${B.id.__line__}`))}}if("ref"in a){let M;["type","source","source-layer","filter","layout"].forEach((z=>{z in a&&r.push(new xt(f,a[z],`"${z}" is prohibited for ref layers`))})),p.layers.forEach((z=>{wn(z.id)===T&&(M=z)})),M?M.ref?r.push(new xt(f,a.ref,"ref cannot reference another ref layer")):b=wn(M.type):r.push(new xt(f,a.ref,`ref layer "${T}" not found`))}else if(b!=="background")if(a.source){const M=p.sources&&p.sources[a.source],z=M&&wn(M.type);M?z==="vector"&&b==="raster"?r.push(new xt(f,a.source,`layer "${a.id}" requires a raster source`)):z!=="raster-dem"&&b==="hillshade"||z!=="raster-dem"&&b==="color-relief"?r.push(new xt(f,a.source,`layer "${a.id}" requires a raster-dem source`)):z==="raster"&&b!=="raster"?r.push(new xt(f,a.source,`layer "${a.id}" requires a vector source`)):z!=="vector"||a["source-layer"]?z==="raster-dem"&&b!=="hillshade"&&b!=="color-relief"?r.push(new xt(f,a.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):b!=="line"||!a.paint||!a.paint["line-gradient"]||z==="geojson"&&M.lineMetrics||r.push(new xt(f,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new xt(f,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new xt(f,a.source,`source "${a.source}" not found`))}else r.push(new xt(f,a,'missing required property "source"'));return r=r.concat(fa({key:f,value:a,valueSpec:x.layer,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,objectElementValidators:{"*":()=>[],type:()=>o.validateSpec({key:`${f}.type`,value:a.type,valueSpec:x.layer.type,style:o.style,styleSpec:o.styleSpec,validateSpec:o.validateSpec,object:a,objectKey:"type"}),filter:to,layout:M=>fa({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":z=>wf(Bi({layerType:b},z))}}),paint:M=>fa({layer:a,key:M.key,value:M.value,style:M.style,styleSpec:M.styleSpec,validateSpec:M.validateSpec,objectElementValidators:{"*":z=>os(Bi({layerType:b},z))}})}})),r}function La(o){const r=o.value,a=o.key,f=hr(r);return f!=="string"?[new xt(a,r,`string expected, ${f} found`)]:[]}const ic={promoteId:function({key:o,value:r}){if(hr(r)==="string")return La({key:o,value:r});{const a=[];for(const f in r)a.push(...La({key:`${o}.${f}`,value:r[f]}));return a}}};function Os(o){const r=o.value,a=o.key,f=o.styleSpec,p=o.style,x=o.validateSpec;if(!r.type)return[new xt(a,r,'"type" is required')];const b=wn(r.type);let T;switch(b){case"vector":case"raster":return T=fa({key:a,value:r,valueSpec:f[`source_${b.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:ic,validateSpec:x}),T;case"raster-dem":return T=(function(M){var z;const B=(z=M.sourceName)!==null&&z!==void 0?z:"",N=M.value,q=M.styleSpec,$=q.source_raster_dem,K=M.style;let J=[];const te=hr(N);if(N===void 0)return J;if(te!=="object")return J.push(new xt("source_raster_dem",N,`object expected, ${te} found`)),J;const ae=wn(N.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],se=M.value.encoding?`"${M.value.encoding}"`:"Default";for(const ce in N)!ae&&ve.includes(ce)?J.push(new xt(ce,N[ce],`In "${B}": "${ce}" is only valid when "encoding" is set to "custom". ${se} encoding found`)):$[ce]?J=J.concat(M.validateSpec({key:ce,value:N[ce],valueSpec:$[ce],validateSpec:M.validateSpec,style:K,styleSpec:q})):J.push(new xt(ce,N[ce],`unknown property "${ce}"`));return J})({sourceName:a,value:r,style:o.style,styleSpec:f,validateSpec:x}),T;case"geojson":if(T=fa({key:a,value:r,valueSpec:f.source_geojson,style:p,styleSpec:f,validateSpec:x,objectElementValidators:ic}),r.cluster)for(const M in r.clusterProperties){const[z,B]=r.clusterProperties[M],N=typeof z=="string"?[z,["accumulated"],["get",M]]:z;T.push(...is({key:`${a}.${M}.map`,value:B,expressionContext:"cluster-map"})),T.push(...is({key:`${a}.${M}.reduce`,value:N,expressionContext:"cluster-reduce"}))}return T;case"video":return fa({key:a,value:r,valueSpec:f.source_video,style:p,validateSpec:x,styleSpec:f});case"image":return fa({key:a,value:r,valueSpec:f.source_image,style:p,validateSpec:x,styleSpec:f});case"canvas":return[new xt(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ds({key:`${a}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Yn(o){const r=o.value,a=o.styleSpec,f=a.light,p=o.style;let x=[];const b=hr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new xt("light",r,`object expected, ${b} found`)]),x;for(const T in r){const M=T.match(/^(.*)-transition$/);x=x.concat(M&&f[M[1]]&&f[M[1]].transition?o.validateSpec({key:T,value:r[T],valueSpec:a.transition,validateSpec:o.validateSpec,style:p,styleSpec:a}):f[T]?o.validateSpec({key:T,value:r[T],valueSpec:f[T],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new xt(T,r[T],`unknown property "${T}"`)])}return x}function oh(o){const r=o.value,a=o.styleSpec,f=a.sky,p=o.style,x=hr(r);if(r===void 0)return[];if(x!=="object")return[new xt("sky",r,`object expected, ${x} found`)];let b=[];for(const T in r)b=b.concat(f[T]?o.validateSpec({key:T,value:r[T],valueSpec:f[T],style:p,styleSpec:a}):[new xt(T,r[T],`unknown property "${T}"`)]);return b}function Af(o){const r=o.value,a=o.styleSpec,f=a.terrain,p=o.style;let x=[];const b=hr(r);if(r===void 0)return x;if(b!=="object")return x=x.concat([new xt("terrain",r,`object expected, ${b} found`)]),x;for(const T in r)x=x.concat(f[T]?o.validateSpec({key:T,value:r[T],valueSpec:f[T],validateSpec:o.validateSpec,style:p,styleSpec:a}):[new xt(T,r[T],`unknown property "${T}"`)]);return x}function Cd(o){let r=[];const a=o.value,f=o.key;if(Array.isArray(a)){const p=[],x=[];for(const b in a)a[b].id&&p.includes(a[b].id)&&r.push(new xt(f,a,`all the sprites' ids must be unique, but ${a[b].id} is duplicated`)),p.push(a[b].id),a[b].url&&x.includes(a[b].url)&&r.push(new xt(f,a,`all the sprites' URLs must be unique, but ${a[b].url} is duplicated`)),x.push(a[b].url),r=r.concat(fa({key:`${f}[${b}]`,value:a[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:o.validateSpec}));return r}return La({key:f,value:a})}function hm(o){return!!o&&o.constructor===Object}function Dd(o){return hm(o.value)?[]:[new xt(o.key,o.value,`object expected, ${hr(o.value)} found`)]}const Fn={"*":()=>[],array:ah,boolean:function(o){const r=o.value,a=o.key,f=hr(r);return f!=="boolean"?[new xt(a,r,`boolean expected, ${f} found`)]:[]},number:rs,color:Cs,constants:Ra,enum:Ds,filter:to,function:ns,layer:Sf,object:fa,source:Os,light:Yn,sky:oh,terrain:Af,projection:function(o){const r=o.value,a=o.styleSpec,f=a.projection,p=o.style,x=hr(r);if(r===void 0)return[];if(x!=="object")return[new xt("projection",r,`object expected, ${x} found`)];let b=[];for(const T in r)b=b.concat(f[T]?o.validateSpec({key:T,value:r[T],valueSpec:f[T],style:p,styleSpec:a}):[new xt(T,r[T],`unknown property "${T}"`)]);return b},projectionDefinition:function(o){const r=o.key;let a=o.value;a=a instanceof String?a.valueOf():a;const f=hr(a);return f!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(a)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(a)?["array","string"].includes(f)?[]:[new xt(r,a,`projection expected, invalid type "${f}" found`)]:[new xt(r,a,`projection expected, invalid array ${JSON.stringify(a)} found`)]},string:La,formatted:function(o){return La(o).length===0?[]:is(o)},resolvedImage:function(o){return La(o).length===0?[]:is(o)},padding:function(o){const r=o.key,a=o.value;if(hr(a)==="array"){if(a.length<1||a.length>4)return[new xt(r,a,`padding requires 1 to 4 values; ${a.length} values found`)];const f={type:"number"};let p=[];for(let x=0;x<a.length;x++)p=p.concat(o.validateSpec({key:`${r}[${x}]`,value:a[x],validateSpec:o.validateSpec,valueSpec:f}));return p}return rs({key:r,value:a,valueSpec:{}})},numberArray:function(o){const r=o.key,a=o.value;if(hr(a)==="array"){const f={type:"number"};if(a.length<1)return[new xt(r,a,"array length at least 1 expected, length 0 found")];let p=[];for(let x=0;x<a.length;x++)p=p.concat(o.validateSpec({key:`${r}[${x}]`,value:a[x],validateSpec:o.validateSpec,valueSpec:f}));return p}return rs({key:r,value:a,valueSpec:{}})},colorArray:function(o){const r=o.key,a=o.value;if(hr(a)==="array"){if(a.length<1)return[new xt(r,a,"array length at least 1 expected, length 0 found")];let f=[];for(let p=0;p<a.length;p++)f=f.concat(Cs({key:`${r}[${p}]`,value:a[p]}));return f}return Cs({key:r,value:a})},variableAnchorOffsetCollection:function(o){const r=o.key,a=o.value,f=hr(a),p=o.styleSpec;if(f!=="array"||a.length<1||a.length%2!=0)return[new xt(r,a,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let b=0;b<a.length;b+=2)x=x.concat(Ds({key:`${r}[${b}]`,value:a[b],valueSpec:p.layout_symbol["text-anchor"]})),x=x.concat(ah({key:`${r}[${b+1}]`,value:a[b+1],valueSpec:{length:2,value:"number"},validateSpec:o.validateSpec,style:o.style,styleSpec:p}));return x},sprite:Cd,state:Dd,fontFaces:function(o){const r=o.key,a=o.value,f=o.validateSpec,p=o.styleSpec,x=o.style;if(!hm(a))return[new xt(r,a,`object expected, ${hr(a)} found`)];const b=[];for(const T in a){const M=a[T],z=hr(M);if(z==="string")b.push(...La({key:`${r}.${T}`,value:M}));else if(z==="array"){const B={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[N,q]of M.entries())b.push(...fa({key:`${r}.${T}[${N}]`,value:q,valueSpec:B,styleSpec:p,style:x,validateSpec:f}))}else b.push(new xt(`${r}.${T}`,M,`string or array expected, ${z} found`))}return b}};function ss(o){const r=o.value,a=o.valueSpec,f=o.styleSpec;return o.validateSpec=ss,a.expression&&vf(wn(r))?ns(o):a.expression&&fl(ha(r))?is(o):a.type&&Fn[a.type]?Fn[a.type](o):fa(Bi({},o,{valueSpec:a.type?f[a.type]:a}))}function ac(o){const r=o.value,a=o.key,f=La(o);return f.length||(r.indexOf("{fontstack}")===-1&&f.push(new xt(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&f.push(new xt(a,r,'"glyphs" url must include a "{range}" token'))),f}function Fi(o,r=Ve){let a=[];return a=a.concat(ss({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,validateSpec:ss,objectElementValidators:{glyphs:ac,"*":()=>[]}})),o.constants&&(a=a.concat(Ra({key:"constants",value:o.constants}))),nu(a)}function Ba(o){return function(r){return o(Object.assign({},r,{validateSpec:ss}))}}function nu(o){return[].concat(o).sort(((r,a)=>r.line-a.line))}function Ui(o){return function(...r){return nu(o.apply(this,r))}}Fi.source=Ui(Ba(Os)),Fi.sprite=Ui(Ba(Cd)),Fi.glyphs=Ui(Ba(ac)),Fi.light=Ui(Ba(Yn)),Fi.sky=Ui(Ba(oh)),Fi.terrain=Ui(Ba(Af)),Fi.state=Ui(Ba(Dd)),Fi.layer=Ui(Ba(Sf)),Fi.filter=Ui(Ba(to)),Fi.paintProperty=Ui(Ba(os)),Fi.layoutProperty=Ui(Ba(wf));const $g={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class oc{constructor(r,a){this._globalState=a,this.setValue(r)}evaluate(){var r;return(r=this._literalValue)!==null&&r!==void 0?r:this._compiledValue.evaluate({})}setValue(r){if(r==null||r==="visible"||r==="none")return this._literalValue=r==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const a=rc(r,$g,this._globalState);if(a.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(a.value.map((f=>`${f.key}: ${f.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=a.value,this._globalStateRefs=hi(a.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const sh=Ve,fi=Fi,Ao=fi.light,Tf=fi.sky,Ef=fi.paintProperty,fm=fi.layoutProperty;function To(o,r){let a=!1;if(r&&r.length)for(const f of r)o.fire(new kr(new Error(f.message))),a=!0;return a}class gl{constructor(r,a,f){const p=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const b=new Int32Array(this.arrayBuffer);r=b[0],this.d=(a=b[1])+2*(f=b[2]);for(let M=0;M<this.d*this.d;M++){const z=b[3+M],B=b[3+M+1];p.push(z===B?null:b.subarray(z,B))}const T=b[3+p.length+1];this.keys=b.subarray(b[3+p.length],T),this.bboxes=b.subarray(T),this.insert=this._insertReadonly}else{this.d=a+2*f;for(let b=0;b<this.d*this.d;b++)p.push([]);this.keys=[],this.bboxes=[]}this.n=a,this.extent=r,this.padding=f,this.scale=a/r,this.uid=0;const x=f/a*r;this.min=-x,this.max=r+x}insert(r,a,f,p,x){this._forEachCell(a,f,p,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(a),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,a,f,p,x,b){this.cells[x].push(b)}query(r,a,f,p,x){const b=this.min,T=this.max;if(r<=b&&a<=b&&T<=f&&T<=p&&!x)return Array.prototype.slice.call(this.keys);{const M=[];return this._forEachCell(r,a,f,p,this._queryCell,M,{},x),M}}_queryCell(r,a,f,p,x,b,T,M){const z=this.cells[x];if(z!==null){const B=this.keys,N=this.bboxes;for(let q=0;q<z.length;q++){const $=z[q];if(T[$]===void 0){const K=4*$;(M?M(N[K+0],N[K+1],N[K+2],N[K+3]):r<=N[K+2]&&a<=N[K+3]&&f>=N[K+0]&&p>=N[K+1])?(T[$]=!0,b.push(B[$])):T[$]=!1}}}}_forEachCell(r,a,f,p,x,b,T,M){const z=this._convertToCellCoord(r),B=this._convertToCellCoord(a),N=this._convertToCellCoord(f),q=this._convertToCellCoord(p);for(let $=z;$<=N;$++)for(let K=B;K<=q;K++){const J=this.d*K+$;if((!M||M(this._convertFromCellCoord($),this._convertFromCellCoord(K),this._convertFromCellCoord($+1),this._convertFromCellCoord(K+1)))&&x.call(this,r,a,f,p,J,b,T,M))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,a=3+this.cells.length+1+1;let f=0;for(let b=0;b<this.cells.length;b++)f+=this.cells[b].length;const p=new Int32Array(a+f+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let x=a;for(let b=0;b<r.length;b++){const T=r[b];p[3+b]=x,p.set(T,x),x+=T.length}return p[3+r.length]=x,p.set(this.keys,x),x+=this.keys.length,p[3+r.length+1]=x,p.set(this.bboxes,x),x+=this.bboxes.length,p.buffer}static serialize(r,a){const f=r.toArrayBuffer();return a&&a.push(f),{buffer:f}}static deserialize(r){return new gl(r.buffer)}}const da={};function zt(o,r,a={}){if(da[o])throw new Error(`${o} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:o,writeable:!1}),da[o]={klass:r,omit:a.omit||[],shallow:a.shallow||[]}}zt("Object",Object),zt("Set",Set),zt("TransferableGridIndex",gl),zt("Color",fr),zt("Error",Error),zt("AJAXError",ze),zt("ResolvedImage",Wi),zt("StylePropertyFunction",tu),zt("StyleExpression",bf,{omit:["_evaluator"]}),zt("ZoomDependentExpression",dl),zt("ZoomConstantExpression",ta),zt("CompoundExpression",Ia,{omit:["_evaluate"]});for(const o in ec)ec[o]._classRegistryKey||zt(`Expression_${o}`,ec[o]);function lh(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Mf(o){return o.$name||o.constructor._classRegistryKey}function ro(o){return!(function(r){if(r===null||typeof r!="object")return!1;const a=Mf(r);return!(!a||a==="Object")})(o)&&(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||o instanceof Error||lh(o)||Xa(o)||ArrayBuffer.isView(o)||o instanceof ImageData)}function Eo(o,r){if(ro(o))return(lh(o)||Xa(o))&&r&&r.push(o),ArrayBuffer.isView(o)&&r&&r.push(o.buffer),o instanceof ImageData&&r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const x=[];for(const b of o)x.push(Eo(b,r));return x}if(typeof o!="object")throw new Error("can't serialize object of type "+typeof o);const a=Mf(o);if(!a)throw new Error(`can't serialize object of unregistered class ${o.constructor.name}`);if(!da[a])throw new Error(`${a} is not registered.`);const{klass:f}=da[a],p=f.serialize?f.serialize(o,r):{};if(f.serialize){if(r&&p===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in o){if(!o.hasOwnProperty(x)||da[a].omit.indexOf(x)>=0)continue;const b=o[x];p[x]=da[a].shallow.indexOf(x)>=0?b:Eo(b,r)}o instanceof Error&&(p.message=o.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return a!=="Object"&&(p.$name=a),p}function sc(o){if(ro(o))return o;if(Array.isArray(o))return o.map(sc);if(typeof o!="object")throw new Error("can't deserialize object of type "+typeof o);const r=Mf(o)||"Object";if(!da[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:a}=da[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const f=Object.create(a.prototype);for(const p of Object.keys(o)){if(p==="$name")continue;const x=o[p];f[p]=da[r].shallow.indexOf(p)>=0?x:sc(x)}return f}class Pf{constructor(){this.first=!0}update(r,a){const f=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=a):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=a),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=f,!0))}}function ls(o){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function iu(o){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))}function uh(o){return/\s/u.test(String.fromCodePoint(o))}function us(o){for(const r of o)if(iu(r.codePointAt(0)))return!0;return!1}function Cf(o){for(const r of o)if(!Id(r.codePointAt(0)))return!1;return!0}function ch(o){const r=o.map((a=>{try{return new RegExp(`\\p{sc=${a}}`,"u").source}catch{return null}})).filter((a=>a));return new RegExp(r.join("|"),"u")}const cs=ch(["Arab","Dupl","Mong","Ougr","Syrc"]);function Id(o){return!cs.test(String.fromCodePoint(o))}function hs(o){return!(iu(o)||(r=o,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(r))));var r}const Df=ch(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function hh(o){return Df.test(String.fromCodePoint(o))}function fs(o,r){return!(!r&&hh(o)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(o)))}function zs(o){for(const r of o)if(hh(r.codePointAt(0)))return!0;return!1}const no=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(o){this.pluginStatus=o.pluginStatus,this.pluginURL=o.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(o){if(no.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=o.applyArabicShaping,this.processBidirectionalText=o.processBidirectionalText,this.processStyledBidirectionalText=o.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(o,r){return c(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(o.pluginStatus!=="loading")return this.setState(o),o;const a=o.pluginURL,f=new Promise((x=>{this.loadScriptResolve=x}));r(a);const p=new Promise((x=>setTimeout((()=>x()),this.TIMEOUT)));if(yield Promise.race([f,p]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:a};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${a}`)}))}};class Fr{constructor(r,a){this.isSupportedScript=Od,this.zoom=r,a?(this.now=a.now||0,this.fadeDuration=a.fadeDuration||0,this.zoomHistory=a.zoomHistory||new Pf,this.transition=a.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Pf,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,a=r-Math.floor(r),f=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:a+(1-a)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*a}}}function Od(o){return(function(r,a){for(const f of r)if(!fs(f.codePointAt(0),a))return!1;return!0})(o,no.getRTLTextPluginStatus()==="loaded")}const ks="-transition";class yl{constructor(r,a,f){this.property=r,this.value=a,this.expression=(function(p,x,b){if(vf(p))return new tu(p,x);if(fl(p)){const T=pl(p,x,b);if(T.result==="error")throw new Error(T.value.map((M=>`${M.key}: ${M.message}`)).join(", "));return T.value}{let T=p;return x.type==="color"&&typeof p=="string"?T=fr.parse(p):x.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?x.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?x.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?x.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?T=Cn.parse(p):x.type==="projectionDefinition"&&typeof p=="string"&&(T=ci.parse(p)):T=Wt.parse(p):T=pn.parse(p):T=Xn.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>T}}})(a===void 0?r.specification.default:a,r.specification,f)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(r,a,f){return this.property.possiblyEvaluate(this,r,a,f)}}class fh{constructor(r,a){this.property=r,this.value=new yl(r,void 0,a)}transitioned(r,a){return new au(this.property,this.value,a,zr({},r.transition,this.transition),r.now)}untransitioned(){return new au(this.property,this.value,null,{},0)}}class If{constructor(r,a){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues),this._globalState=a}getValue(r){return wt(this._values[r].value.value)}setValue(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new fh(this._values[r].property,this._globalState)),this._values[r].value=new yl(this._values[r].property,a===null?void 0:wt(a),this._globalState)}getTransition(r){return wt(this._values[r].transition)}setTransition(r,a){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new fh(this._values[r].property,this._globalState)),this._values[r].transition=wt(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(r[a]=f);const p=this.getTransition(a);p!==void 0&&(r[`${a}${ks}`]=p)}return r}transitioned(r,a){const f=new dh(this._properties);for(const p of Object.keys(this._values))f._values[p]=this._values[p].transitioned(r,a._values[p]);return f}untransitioned(){const r=new dh(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class au{constructor(r,a,f,p,x){this.property=r,this.value=a,this.begin=x+p.delay||0,this.end=this.begin+p.duration||0,r.specification.transition&&(p.delay||p.duration)&&(this.prior=f)}possiblyEvaluate(r,a,f){const p=r.now||0,x=this.value.possiblyEvaluate(r,a,f),b=this.prior;if(b){if(p>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(p<this.begin)return b.possiblyEvaluate(r,a,f);{const T=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(r,a,f),x,Dt(T))}}return x}}class dh{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,f){const p=new ou(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].possiblyEvaluate(r,a,f);return p}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class zd{constructor(r,a){this._properties=r,this._values=Object.create(r.defaultPropertyValues),this._globalState=a}hasValue(r){return this._values[r].value!==void 0}getValue(r){return wt(this._values[r].value)}setValue(r,a){this._values[r]=new yl(this._values[r].property,a===null?void 0:wt(a),this._globalState)}serialize(){const r={};for(const a of Object.keys(this._values)){const f=this.getValue(a);f!==void 0&&(r[a]=f)}return r}possiblyEvaluate(r,a,f){const p=new ou(this._properties);for(const x of Object.keys(this._values))p._values[x]=this._values[x].possiblyEvaluate(r,a,f);return p}}class ja{constructor(r,a,f){this.property=r,this.value=a,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,f,p){return this.property.evaluate(this.value,this.parameters,r,a,f,p)}}class ou{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Bt{constructor(r){this.specification=r}possiblyEvaluate(r,a){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(a)}interpolate(r,a,f){const p=gn[this.specification.type];return p?p(r,a,f):r}}class Ut{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,f,p){return new ja(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},f,p)}:r.expression,a)}interpolate(r,a,f){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new ja(this,{kind:"constant",value:void 0},r.parameters);const p=gn[this.specification.type];if(p){const x=p(r.value.value,a.value.value,f);return new ja(this,{kind:"constant",value:x},r.parameters)}return r}evaluate(r,a,f,p,x,b){return r.kind==="constant"?r.value:r.evaluate(a,f,p,x,b)}}class io extends Ut{possiblyEvaluate(r,a,f,p){if(r.value===void 0)return new ja(this,{kind:"constant",value:void 0},a);if(r.expression.kind==="constant"){const x=r.expression.evaluate(a,null,{},f,p),b=r.property.specification.type==="resolvedImage"&&typeof x!="string"?x.name:x,T=this._calculate(b,b,b,a);return new ja(this,{kind:"constant",value:T},a)}if(r.expression.kind==="camera"){const x=this._calculate(r.expression.evaluate({zoom:a.zoom-1}),r.expression.evaluate({zoom:a.zoom}),r.expression.evaluate({zoom:a.zoom+1}),a);return new ja(this,{kind:"constant",value:x},a)}return new ja(this,r.expression,a)}evaluate(r,a,f,p,x,b){if(r.kind==="source"){const T=r.evaluate(a,f,p,x,b);return this._calculate(T,T,T,a)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(a.zoom)-1},f,p),r.evaluate({zoom:Math.floor(a.zoom)},f,p),r.evaluate({zoom:Math.floor(a.zoom)+1},f,p),a):r.value}_calculate(r,a,f,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:f,to:a}}interpolate(r){return r}}class lc{constructor(r){this.specification=r}possiblyEvaluate(r,a,f,p){if(r.value!==void 0){if(r.expression.kind==="constant"){const x=r.expression.evaluate(a,null,{},f,p);return this._calculate(x,x,x,a)}return this._calculate(r.expression.evaluate(new Fr(Math.floor(a.zoom-1),a)),r.expression.evaluate(new Fr(Math.floor(a.zoom),a)),r.expression.evaluate(new Fr(Math.floor(a.zoom+1),a)),a)}}_calculate(r,a,f,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:r,to:a}:{from:f,to:a}}interpolate(r){return r}}class ph{constructor(r){this.specification=r}possiblyEvaluate(r,a,f,p){return!!r.expression.evaluate(a,null,{},f,p)}interpolate(){return!1}}class Un{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const a in r){const f=r[a];f.specification.overridable&&this.overridableProperties.push(a);const p=this.defaultPropertyValues[a]=new yl(f,void 0,void 0),x=this.defaultTransitionablePropertyValues[a]=new fh(f,void 0);this.defaultTransitioningPropertyValues[a]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[a]=p.possiblyEvaluate({})}}}zt("DataDrivenProperty",Ut),zt("DataConstantProperty",Bt),zt("CrossFadedDataDrivenProperty",io),zt("CrossFadedProperty",lc),zt("ColorRampProperty",ph);class Sn extends wr{constructor(r,a,f){if(super(),this.id=r.id,this.type=r.type,this._globalState=f,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,this._visibilityExpression=(function(p,x){return new oc(p,x)})(this.visibility,f),r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter,this._featureFilter=ca(r.filter,f)),a.layout&&(this._unevaluatedLayout=new zd(a.layout,f)),a.paint)){this._transitionablePaint=new If(a.paint,f);for(const p in r.paint)this.setPaintProperty(p,r.paint[p],{validate:!1});for(const p in r.layout)this.setLayoutProperty(p,r.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ou(a.paint)}}setFilter(r){this.filter=r,this._featureFilter=ca(r,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}getLayoutAffectingGlobalStateRefs(){const r=new Set;for(const a of this._visibilityExpression.getGlobalStateRefs())r.add(a);if(this._unevaluatedLayout)for(const a in this._unevaluatedLayout._values){const f=this._unevaluatedLayout._values[a];for(const p of f.getGlobalStateRefs())r.add(p)}for(const a of this._featureFilter.getGlobalStateRefs())r.add(a);return r}getPaintAffectingGlobalStateRefs(){var r;const a=new globalThis.Map;if(this._transitionablePaint)for(const f in this._transitionablePaint._values){const p=this._transitionablePaint._values[f].value;for(const x of p.getGlobalStateRefs()){const b=(r=a.get(x))!==null&&r!==void 0?r:[];b.push({name:f,value:p.value}),a.set(x,b)}}return a}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(r,a,f={}){if(a==null||!this._validate(fm,`layers.${this.id}.layout.${r}`,r,a,f))return r==="visibility"?(this.visibility=a,this._visibilityExpression.setValue(a),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(r,a)}getPaintProperty(r){return r.endsWith(ks)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,f={}){if(a!=null&&this._validate(Ef,`layers.${this.id}.paint.${r}`,r,a,f))return!1;if(r.endsWith(ks))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const p=this._transitionablePaint._values[r],x=p.property.specification["property-type"]==="cross-faded-data-driven",b=p.value.isDataDriven(),T=p.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const M=this._transitionablePaint._values[r].value;return M.isDataDriven()||b||x||this._handleOverridablePaintPropertyUpdate(r,T,M)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,a,f){return!1}isHidden(r=this.minzoom,a=!1){return!!(this.minzoom&&r<(a?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&r>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(r,a){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),gr(r,((a,f)=>!(a===void 0||f==="layout"&&!Object.keys(a).length||f==="paint"&&!Object.keys(a).length)))}_validate(r,a,f,p,x={}){return(!x||x.validate!==!1)&&To(this,r.call(fi,{key:a,layerType:this.type,objectKey:f,value:p,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof ja&&eo(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}}let In;var mh={get paint(){return In=In||new Un({"raster-opacity":new Bt(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bt(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bt(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bt(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new Bt(Ve.paint_raster["raster-saturation"]),"raster-contrast":new Bt(Ve.paint_raster["raster-contrast"]),"raster-resampling":new Bt(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new Bt(Ve.paint_raster["raster-fade-duration"])})}};class Rs extends Sn{constructor(r,a){super(r,mh,a)}}const mr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Rr{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class pr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function yn(o,r=1){let a=0,f=0;return{members:o.map((p=>{const x=mr[p.type].BYTES_PER_ELEMENT,b=a=ao(a,Math.max(r,x)),T=p.components||1;return f=Math.max(f,x),a+=x*T,{name:p.name,type:p.type,components:T,offset:b}})),size:ao(a,Math.max(f,r)),alignment:r}}function ao(o,r){return Math.ceil(o/r)*r}class Mo extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.int16[p+0]=a,this.int16[p+1]=f,r}}Mo.prototype.bytesPerElement=4,zt("StructArrayLayout2i4",Mo);class su extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.int16[x+0]=a,this.int16[x+1]=f,this.int16[x+2]=p,r}}su.prototype.bytesPerElement=6,zt("StructArrayLayout3i6",su);class lu extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,f,p)}emplace(r,a,f,p,x){const b=4*r;return this.int16[b+0]=a,this.int16[b+1]=f,this.int16[b+2]=p,this.int16[b+3]=x,r}}lu.prototype.bytesPerElement=8,zt("StructArrayLayout4i8",lu);class Ls extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,T){const M=6*r;return this.int16[M+0]=a,this.int16[M+1]=f,this.int16[M+2]=p,this.int16[M+3]=x,this.int16[M+4]=b,this.int16[M+5]=T,r}}Ls.prototype.bytesPerElement=12,zt("StructArrayLayout2i4i12",Ls);class kd extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,T){const M=4*r,z=8*r;return this.int16[M+0]=a,this.int16[M+1]=f,this.uint8[z+4]=p,this.uint8[z+5]=x,this.uint8[z+6]=b,this.uint8[z+7]=T,r}}kd.prototype.bytesPerElement=8,zt("StructArrayLayout2i4ub8",kd);class hn extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.float32[p+0]=a,this.float32[p+1]=f,r}}hn.prototype.bytesPerElement=8,zt("StructArrayLayout2f8",hn);class Po extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M,z,B){const N=this.length;return this.resize(N+1),this.emplace(N,r,a,f,p,x,b,T,M,z,B)}emplace(r,a,f,p,x,b,T,M,z,B,N){const q=10*r;return this.uint16[q+0]=a,this.uint16[q+1]=f,this.uint16[q+2]=p,this.uint16[q+3]=x,this.uint16[q+4]=b,this.uint16[q+5]=T,this.uint16[q+6]=M,this.uint16[q+7]=z,this.uint16[q+8]=B,this.uint16[q+9]=N,r}}Po.prototype.bytesPerElement=20,zt("StructArrayLayout10ui20",Po);class uc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M){const z=this.length;return this.resize(z+1),this.emplace(z,r,a,f,p,x,b,T,M)}emplace(r,a,f,p,x,b,T,M,z){const B=8*r;return this.uint16[B+0]=a,this.uint16[B+1]=f,this.uint16[B+2]=p,this.uint16[B+3]=x,this.uint16[B+4]=b,this.uint16[B+5]=T,this.uint16[B+6]=M,this.uint16[B+7]=z,r}}uc.prototype.bytesPerElement=16,zt("StructArrayLayout8ui16",uc);class cc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M,z,B,N,q){const $=this.length;return this.resize($+1),this.emplace($,r,a,f,p,x,b,T,M,z,B,N,q)}emplace(r,a,f,p,x,b,T,M,z,B,N,q,$){const K=12*r;return this.int16[K+0]=a,this.int16[K+1]=f,this.int16[K+2]=p,this.int16[K+3]=x,this.uint16[K+4]=b,this.uint16[K+5]=T,this.uint16[K+6]=M,this.uint16[K+7]=z,this.int16[K+8]=B,this.int16[K+9]=N,this.int16[K+10]=q,this.int16[K+11]=$,r}}cc.prototype.bytesPerElement=24,zt("StructArrayLayout4i4ui4i24",cc);class gh extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.float32[x+0]=a,this.float32[x+1]=f,this.float32[x+2]=p,r}}gh.prototype.bytesPerElement=12,zt("StructArrayLayout3f12",gh);class yh extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}yh.prototype.bytesPerElement=4,zt("StructArrayLayout1ul4",yh);class vh extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M,z){const B=this.length;return this.resize(B+1),this.emplace(B,r,a,f,p,x,b,T,M,z)}emplace(r,a,f,p,x,b,T,M,z,B){const N=10*r,q=5*r;return this.int16[N+0]=a,this.int16[N+1]=f,this.int16[N+2]=p,this.int16[N+3]=x,this.int16[N+4]=b,this.int16[N+5]=T,this.uint32[q+3]=M,this.uint16[N+8]=z,this.uint16[N+9]=B,r}}vh.prototype.bytesPerElement=20,zt("StructArrayLayout6i1ul2ui20",vh);class vl extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,T){const M=6*r;return this.int16[M+0]=a,this.int16[M+1]=f,this.int16[M+2]=p,this.int16[M+3]=x,this.int16[M+4]=b,this.int16[M+5]=T,r}}vl.prototype.bytesPerElement=12,zt("StructArrayLayout2i2i2i12",vl);class Bs extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,f,p,x)}emplace(r,a,f,p,x,b){const T=4*r,M=8*r;return this.float32[T+0]=a,this.float32[T+1]=f,this.float32[T+2]=p,this.int16[M+6]=x,this.int16[M+7]=b,r}}Bs.prototype.bytesPerElement=16,zt("StructArrayLayout2f1f2i16",Bs);class Ii extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,f,p,x,b)}emplace(r,a,f,p,x,b,T){const M=16*r,z=4*r,B=8*r;return this.uint8[M+0]=a,this.uint8[M+1]=f,this.float32[z+1]=p,this.float32[z+2]=x,this.int16[B+6]=b,this.int16[B+7]=T,r}}Ii.prototype.bytesPerElement=16,zt("StructArrayLayout2ub2f2i16",Ii);class vn extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.uint16[x+0]=a,this.uint16[x+1]=f,this.uint16[x+2]=p,r}}vn.prototype.bytesPerElement=6,zt("StructArrayLayout3ui6",vn);class ds extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae){const ve=this.length;return this.resize(ve+1),this.emplace(ve,r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae)}emplace(r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae,ve){const se=24*r,ce=12*r,xe=48*r;return this.int16[se+0]=a,this.int16[se+1]=f,this.uint16[se+2]=p,this.uint16[se+3]=x,this.uint32[ce+2]=b,this.uint32[ce+3]=T,this.uint32[ce+4]=M,this.uint16[se+10]=z,this.uint16[se+11]=B,this.uint16[se+12]=N,this.float32[ce+7]=q,this.float32[ce+8]=$,this.uint8[xe+36]=K,this.uint8[xe+37]=J,this.uint8[xe+38]=te,this.uint32[ce+10]=ae,this.int16[se+22]=ve,r}}ds.prototype.bytesPerElement=48,zt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ds);class uu extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae,ve,se,ce,xe,Te,qe,st,tt,dt,Pt,mt){const nt=this.length;return this.resize(nt+1),this.emplace(nt,r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae,ve,se,ce,xe,Te,qe,st,tt,dt,Pt,mt)}emplace(r,a,f,p,x,b,T,M,z,B,N,q,$,K,J,te,ae,ve,se,ce,xe,Te,qe,st,tt,dt,Pt,mt,nt){const Qe=32*r,jt=16*r;return this.int16[Qe+0]=a,this.int16[Qe+1]=f,this.int16[Qe+2]=p,this.int16[Qe+3]=x,this.int16[Qe+4]=b,this.int16[Qe+5]=T,this.int16[Qe+6]=M,this.int16[Qe+7]=z,this.uint16[Qe+8]=B,this.uint16[Qe+9]=N,this.uint16[Qe+10]=q,this.uint16[Qe+11]=$,this.uint16[Qe+12]=K,this.uint16[Qe+13]=J,this.uint16[Qe+14]=te,this.uint16[Qe+15]=ae,this.uint16[Qe+16]=ve,this.uint16[Qe+17]=se,this.uint16[Qe+18]=ce,this.uint16[Qe+19]=xe,this.uint16[Qe+20]=Te,this.uint16[Qe+21]=qe,this.uint16[Qe+22]=st,this.uint32[jt+12]=tt,this.float32[jt+13]=dt,this.float32[jt+14]=Pt,this.uint16[Qe+30]=mt,this.uint16[Qe+31]=nt,r}}uu.prototype.bytesPerElement=64,zt("StructArrayLayout8i15ui1ul2f2ui64",uu);class cu extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}cu.prototype.bytesPerElement=4,zt("StructArrayLayout1f4",cu);class hc extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=3*r;return this.uint16[6*r+0]=a,this.float32[x+1]=f,this.float32[x+2]=p,r}}hc.prototype.bytesPerElement=12,zt("StructArrayLayout1ui2f12",hc);class Co extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,f){const p=this.length;return this.resize(p+1),this.emplace(p,r,a,f)}emplace(r,a,f,p){const x=4*r;return this.uint32[2*r+0]=a,this.uint16[x+2]=f,this.uint16[x+3]=p,r}}Co.prototype.bytesPerElement=8,zt("StructArrayLayout1ul2ui8",Co);class w extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const f=this.length;return this.resize(f+1),this.emplace(f,r,a)}emplace(r,a,f){const p=2*r;return this.uint16[p+0]=a,this.uint16[p+1]=f,r}}w.prototype.bytesPerElement=4,zt("StructArrayLayout2ui4",w);class n extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}n.prototype.bytesPerElement=2,zt("StructArrayLayout1ui2",n);class u extends pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,f,p){const x=this.length;return this.resize(x+1),this.emplace(x,r,a,f,p)}emplace(r,a,f,p,x){const b=4*r;return this.float32[b+0]=a,this.float32[b+1]=f,this.float32[b+2]=p,this.float32[b+3]=x,r}}u.prototype.bytesPerElement=16,zt("StructArrayLayout4f16",u);class d extends Rr{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}d.prototype.size=20;class v extends vh{get(r){return new d(this,r)}}zt("CollisionBoxArray",v);class A extends Rr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}A.prototype.size=48;class E extends ds{get(r){return new A(this,r)}}zt("PlacedSymbolArray",E);class I extends Rr{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}I.prototype.size=64;class R extends uu{get(r){return new I(this,r)}}zt("SymbolInstanceArray",R);class j extends cu{getoffsetX(r){return this.float32[1*r+0]}}zt("GlyphOffsetArray",j);class F extends su{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}zt("SymbolLineVertexArray",F);class Y extends Rr{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Y.prototype.size=12;class X extends hc{get(r){return new Y(this,r)}}zt("TextAnchorOffsetArray",X);class ee extends Rr{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ee.prototype.size=8;class ie extends Co{get(r){return new ee(this,r)}}zt("FeatureIndexArray",ie);class fe extends Mo{}class pe extends Mo{}class de extends Mo{}class ye extends Ls{}class Ae extends kd{}class ge extends hn{}class Se extends Po{}class Me extends uc{}class _e extends cc{}class Re extends gh{}class Ye extends yh{}class Ge extends vl{}class $e extends Ii{}class Xe extends vn{}class St extends w{}const At=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:ft}=At;class Mt{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,a,f,p){const x=this.segments[this.segments.length-1];return r>Mt.MAX_VERTEX_ARRAY_LENGTH&&ar(`Max vertices per segment is ${Mt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Mt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+r>Mt.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==p?this.createNewSegment(a,f,p):x}createNewSegment(r,a,f){const p={vertexOffset:r.length,primitiveOffset:a.length,vertexLength:0,primitiveLength:0,vaos:{}};return f!==void 0&&(p.sortKey=f),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(r,a,f){return this.prepareSegment(0,r,a,f)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,f,p){return new Mt([{vertexOffset:r,primitiveOffset:a,vertexLength:f,primitiveLength:p,vaos:{},sortKey:0}])}}function or(o,r){return 256*(o=Qt(Math.floor(o),0,255))+Qt(Math.floor(r),0,255)}Mt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,zt("SegmentVector",Mt);const Lr=yn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),an=yn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var Qr,fn,Hr,An={exports:{}},dn={exports:{}},_i={exports:{}},On=(function(){if(Hr)return An.exports;Hr=1;var o=(Qr||(Qr=1,dn.exports=function(a,f){var p,x,b,T,M,z,B,N;for(x=a.length-(p=3&a.length),b=f,M=3432918353,z=461845907,N=0;N<x;)B=255&a.charCodeAt(N)|(255&a.charCodeAt(++N))<<8|(255&a.charCodeAt(++N))<<16|(255&a.charCodeAt(++N))<<24,++N,b=27492+(65535&(T=5*(65535&(b=(b^=B=(65535&(B=(B=(65535&B)*M+(((B>>>16)*M&65535)<<16)&4294967295)<<15|B>>>17))*z+(((B>>>16)*z&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(B=0,p){case 3:B^=(255&a.charCodeAt(N+2))<<16;case 2:B^=(255&a.charCodeAt(N+1))<<8;case 1:b^=B=(65535&(B=(B=(65535&(B^=255&a.charCodeAt(N)))*M+(((B>>>16)*M&65535)<<16)&4294967295)<<15|B>>>17))*z+(((B>>>16)*z&65535)<<16)&4294967295}return b^=a.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0}),dn.exports),r=(fn||(fn=1,_i.exports=function(a,f){for(var p,x=a.length,b=f^x,T=0;x>=4;)p=1540483477*(65535&(p=255&a.charCodeAt(T)|(255&a.charCodeAt(++T))<<8|(255&a.charCodeAt(++T))<<16|(255&a.charCodeAt(++T))<<24))+((1540483477*(p>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),x-=4,++T;switch(x){case 3:b^=(255&a.charCodeAt(T+2))<<16;case 2:b^=(255&a.charCodeAt(T+1))<<8;case 1:b=1540483477*(65535&(b^=255&a.charCodeAt(T)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0}),_i.exports);return An.exports=o,An.exports.murmur3=o,An.exports.murmur2=r,An.exports})(),zn=C(On);class xi{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,f,p){this.ids.push(ps(r)),this.positions.push(a,f,p)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const a=ps(r);let f=0,p=this.ids.length-1;for(;f<p;){const b=f+p>>1;this.ids[b]>=a?p=b:f=b+1}const x=[];for(;this.ids[f]===a;)x.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return x}static serialize(r,a){const f=new Float64Array(r.ids),p=new Uint32Array(r.positions);return ms(f,p,0,f.length-1),a&&a.push(f.buffer,p.buffer),{ids:f,positions:p}}static deserialize(r){const a=new xi;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function ps(o){const r=+o;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:zn(String(o))}function ms(o,r,a,f){for(;a<f;){const p=o[a+f>>1];let x=a-1,b=f+1;for(;;){do x++;while(o[x]<p);do b--;while(o[b]>p);if(x>=b)break;Do(o,x,b),Do(r,3*x,3*b),Do(r,3*x+1,3*b+1),Do(r,3*x+2,3*b+2)}b-a<f-b?(ms(o,r,a,b),a=b+1):(ms(o,r,b+1,f),f=b)}}function Do(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}zt("FeaturePositionMap",xi);class pa{constructor(r,a){this.gl=r.gl,this.location=a}}class hu extends pa{constructor(r,a){super(r,a),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class fc extends pa{constructor(r,a){super(r,a),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class Io extends pa{constructor(r,a){super(r,a),this.current=fr.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const ma=new Float32Array(16);function Na(o){return[or(255*o.r,255*o.g),or(255*o.b,255*o.a)]}class oo{constructor(r,a,f){this.value=r,this.uniformNames=a.map((p=>`u_${p}`)),this.type=f}setUniform(r,a,f){r.set(f.constantOr(this.value))}getBinding(r,a,f){return this.type==="color"?new Io(r,a):new hu(r,a)}}class so{constructor(r,a){this.uniformNames=a.map((f=>`u_${f}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,a){this.pixelRatioFrom=a.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=a.tlbr,this.patternTo=r.tlbr}setConstantDashPositions(r,a){this.dashTo=[0,r.y,r.height,r.width],this.dashFrom=[0,a.y,a.height,a.width]}setUniform(r,a,f,p){let x=null;p==="u_pattern_to"?x=this.patternTo:p==="u_pattern_from"?x=this.patternFrom:p==="u_dasharray_to"?x=this.dashTo:p==="u_dasharray_from"?x=this.dashFrom:p==="u_pixel_ratio_to"?x=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(x=this.pixelRatioFrom),x!==null&&r.set(x)}getBinding(r,a,f){return f.substr(0,9)==="u_pattern"||f.substr(0,12)==="u_dasharray_"?new fc(r,a):new hu(r,a)}}class Ur{constructor(r,a,f,p){this.expression=r,this.type=f,this.maxValue=0,this.paintVertexAttributes=a.map((x=>({name:`a_${x}`,type:"Float32",components:f==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(r,a,f){const p=this.paintVertexArray.length,x=this.expression.evaluate(new Fr(0,f),a,{},f.canonical,[],f.formattedSection);this.paintVertexArray.resize(r),this._setPaintValue(p,r,x)}updatePaintArray(r,a,f,p,x){const b=this.expression.evaluate(new Fr(0,x),f,p);this._setPaintValue(r,a,b)}_setPaintValue(r,a,f){if(this.type==="color"){const p=Na(f);for(let x=r;x<a;x++)this.paintVertexArray.emplace(x,p[0],p[1])}else{for(let p=r;p<a;p++)this.paintVertexArray.emplace(p,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Jr{constructor(r,a,f,p,x,b){this.expression=r,this.uniformNames=a.map((T=>`u_${T}_t`)),this.type=f,this.useIntegerZoom=p,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=a.map((T=>({name:`a_${T}`,type:"Float32",components:f==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(r,a,f){const p=this.expression.evaluate(new Fr(this.zoom,f),a,{},f.canonical,[],f.formattedSection),x=this.expression.evaluate(new Fr(this.zoom+1,f),a,{},f.canonical,[],f.formattedSection),b=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(b,r,p,x)}updatePaintArray(r,a,f,p,x){const b=this.expression.evaluate(new Fr(this.zoom,x),f,p),T=this.expression.evaluate(new Fr(this.zoom+1,x),f,p);this._setPaintValue(r,a,b,T)}_setPaintValue(r,a,f,p){if(this.type==="color"){const x=Na(f),b=Na(p);for(let T=r;T<a;T++)this.paintVertexArray.emplace(T,x[0],x[1],b[0],b[1])}else{for(let x=r;x<a;x++)this.paintVertexArray.emplace(x,f,p);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(p))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a){const f=this.useIntegerZoom?Math.floor(a.zoom):a.zoom,p=Qt(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);r.set(p)}getBinding(r,a,f){return new hu(r,a)}}class Wn{constructor(r,a,f,p,x,b){this.expression=r,this.type=a,this.useIntegerZoom=f,this.zoom=p,this.layerId=b,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(r,a,f){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(p,r,this.getPositionIds(a),f)}updatePaintArray(r,a,f,p,x){this._setPaintValues(r,a,this.getPositionIds(f),x)}_setPaintValues(r,a,f,p){const x=this.getPositions(p);if(!x||!f)return;const b=x[f.min],T=x[f.mid],M=x[f.max];if(b&&T&&M)for(let z=r;z<a;z++)this.emplace(this.zoomInPaintVertexArray,z,T,b),this.emplace(this.zoomOutPaintVertexArray,z,T,M)}upload(r){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const a=this.getVertexAttributes();this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,a,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,a,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ri extends Wn{getPositions(r){return r.imagePositions}getPositionIds(r){return r.patterns&&r.patterns[this.layerId]}getVertexAttributes(){return Lr.members}emplace(r,a,f,p){r.emplace(a,f.tlbr[0],f.tlbr[1],f.tlbr[2],f.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],f.pixelRatio,p.pixelRatio)}}class Of extends Wn{getPositions(r){return r.dashPositions}getPositionIds(r){return r.dashes&&r.dashes[this.layerId]}getVertexAttributes(){return an.members}emplace(r,a,f,p){r.emplace(a,0,f.y,f.height,f.width,0,p.y,p.height,p.width)}}class zf{constructor(r,a,f){this.binders={},this._buffers=[];const p=[];for(const x in r.paint._values){if(!f(x))continue;const b=r.paint.get(x);if(!(b instanceof ja&&eo(b.property.specification)))continue;const T=dm(x,r.type),M=b.value,z=b.property.specification.type,B=b.property.useIntegerZoom,N=b.property.specification["property-type"],q=N==="cross-faded"||N==="cross-faded-data-driven";if(M.kind==="constant")this.binders[x]=q?new so(M.value,T):new oo(M.value,T,z),p.push(`/u_${x}`);else if(M.kind==="source"||q){const $=xl(x,z,"source");this.binders[x]=q?x==="line-dasharray"?new Of(M,z,B,a,$,r.id):new ri(M,z,B,a,$,r.id):new Ur(M,T,z,$),p.push(`/a_${x}`)}else{const $=xl(x,z,"composite");this.binders[x]=new Jr(M,T,z,B,a,$),p.push(`/z_${x}`)}}this.cacheKey=p.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof Ur||a instanceof Jr?a.maxValue:0}populatePaintArrays(r,a,f){for(const p in this.binders){const x=this.binders[p];(x instanceof Ur||x instanceof Jr||x instanceof Wn)&&x.populatePaintArray(r,a,f)}}setConstantPatternPositions(r,a){for(const f in this.binders){const p=this.binders[f];p instanceof so&&p.setConstantPatternPositions(r,a)}}setConstantDashPositions(r,a){for(const f in this.binders){const p=this.binders[f];p instanceof so&&p.setConstantDashPositions(r,a)}}updatePaintArrays(r,a,f,p,x){let b=!1;for(const T in r){const M=a.getPositions(T);for(const z of M){const B=f.feature(z.index);for(const N in this.binders){const q=this.binders[N];if((q instanceof Ur||q instanceof Jr||q instanceof Wn)&&q.expression.isStateDependent===!0){const $=p.paint.get(N);q.expression=$.value,q.updatePaintArray(z.start,z.end,B,r[T],x),b=!0}}}}return b}defines(){const r=[];for(const a in this.binders){const f=this.binders[a];(f instanceof oo||f instanceof so)&&r.push(...f.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof Ur||f instanceof Jr)for(let p=0;p<f.paintVertexAttributes.length;p++)r.push(f.paintVertexAttributes[p].name);else if(f instanceof Wn){const p=f.getVertexAttributes();for(const x of p)r.push(x.name)}}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const f=this.binders[a];if(f instanceof oo||f instanceof so||f instanceof Jr)for(const p of f.uniformNames)r.push(p)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,a){const f=[];for(const p in this.binders){const x=this.binders[p];if(x instanceof oo||x instanceof so||x instanceof Jr){for(const b of x.uniformNames)if(a[b]){const T=x.getBinding(r,a[b],b);f.push({name:b,property:p,binding:T})}}}return f}setUniforms(r,a,f,p){for(const{name:x,property:b,binding:T}of a)this.binders[b].setUniform(T,p,f.get(b),x)}updatePaintBuffers(r){this._buffers=[];for(const a in this.binders){const f=this.binders[a];if(r&&f instanceof Wn){const p=r.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(f instanceof Ur||f instanceof Jr)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(r){for(const a in this.binders){const f=this.binders[a];(f instanceof Ur||f instanceof Jr||f instanceof Wn)&&f.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof Ur||a instanceof Jr||a instanceof Wn)&&a.destroy()}}}class _l{constructor(r,a,f=()=>!0){this.programConfigurations={};for(const p of r)this.programConfigurations[p.id]=new zf(p,a,f);this.needsUpload=!1,this._featureMap=new xi,this._bufferOffset=0}populatePaintArrays(r,a,f,p){for(const x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(r,a,p);a.id!==void 0&&this._featureMap.add(a.id,f,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,f,p){for(const x of f)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(r,this._featureMap,a,x,p)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function dm(o,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}function xl(o,r,a){const f={color:{source:hn,composite:u},number:{source:cu,composite:hn}},p=(function(x){return{"line-pattern":{source:Se,composite:Se},"fill-pattern":{source:Se,composite:Se},"fill-extrusion-pattern":{source:Se,composite:Se},"line-dasharray":{source:Me,composite:Me}}[x]})(o);return p&&p[a]||f[r][a]}zt("ConstantBinder",oo),zt("CrossFadedConstantBinder",so),zt("SourceExpressionBinder",Ur),zt("CrossFadedPatternBinder",ri),zt("CrossFadedDasharrayBinder",Of),zt("CompositeExpressionBinder",Jr),zt("ProgramConfiguration",zf,{omit:["_buffers"]}),zt("ProgramConfigurationSet",_l);const kf=Math.pow(2,14)-1,js=-kf-1;function Ns(o){const r=at/o.extent,a=o.loadGeometry();for(let f=0;f<a.length;f++){const p=a[f];for(let x=0;x<p.length;x++){const b=p[x],T=Math.round(b.x*r),M=Math.round(b.y*r);b.x=Qt(T,js,kf),b.y=Qt(M,js,kf),(T<b.x||T>b.x+1||M<b.y||M>b.y+1)&&ar("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return a}function Oo(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?Ns(o):[]}}const Rf=-32768;function _h(o,r,a,f,p){o.emplaceBack(Rf+8*r+f,Rf+8*a+p)}class xh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new pe,this.indexArray=new Xe,this.segments=new Mt,this.programConfigurations=new _l(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){const p=this.layers[0],x=[];let b=null,T=!1,M=p.type==="heatmap";if(p.type==="circle"){const B=p;b=B.layout.get("circle-sort-key"),T=!b.isConstant(),M=M||B.paint.get("circle-pitch-alignment")==="map"}const z=M?a.subdivisionGranularity.circle:1;for(const{feature:B,id:N,index:q,sourceLayerIndex:$}of r){const K=this.layers[0]._featureFilter.needGeometry,J=Oo(B,K);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),J,f))continue;const te=T?b.evaluate(J,{},f):void 0,ae={id:N,properties:B.properties,type:B.type,sourceLayerIndex:$,index:q,geometry:K?J.geometry:Ns(B),patterns:{},sortKey:te};x.push(ae)}T&&x.sort(((B,N)=>B.sortKey-N.sortKey));for(const B of x){const{geometry:N,index:q,sourceLayerIndex:$}=B,K=r[q].feature;this.addFeature(B,N,q,f,z),a.featureIndex.insert(K,N,q,$,this.index)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ft),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,f,p,x=1){let b;switch(x){case 1:b=[0,7];break;case 3:b=[0,2,5,7];break;case 5:b=[0,1,3,4,6,7];break;case 7:b=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const T=b.length;for(const M of a)for(const z of M){const B=z.x,N=z.y;if(B<0||B>=at||N<0||N>=at)continue;const q=this.segments.prepareSegment(T*T,this.layoutVertexArray,this.indexArray,r.sortKey),$=q.vertexLength;for(let K=0;K<T;K++)for(let J=0;J<T;J++)_h(this.layoutVertexArray,B,N,b[J],b[K]);for(let K=0;K<T-1;K++)for(let J=0;J<T-1;J++){const te=$+K*T+J,ae=$+(K+1)*T+J;this.indexArray.emplaceBack(te,ae+1,te+1),this.indexArray.emplaceBack(te,ae,ae+1)}q.vertexLength+=T*T,q.primitiveLength+=(T-1)*(T-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:{},canonical:p})}}function bh(o,r){for(let a=0;a<o.length;a++)if(bl(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(bl(o,r[a]))return!0;return!!Oi(o,r)}function pm(o,r,a){return!!bl(o,r)||!!gm(r,o,a)}function mm(o,r){if(o.length===1)return Yg(r,o[0]);for(let a=0;a<r.length;a++){const f=r[a];for(let p=0;p<f.length;p++)if(bl(o,f[p]))return!0}for(let a=0;a<o.length;a++)if(Yg(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(Oi(o,r[a]))return!0;return!1}function bi(o,r,a){if(o.length>1){if(Oi(o,r))return!0;for(let f=0;f<r.length;f++)if(gm(r[f],o,a))return!0}for(let f=0;f<o.length;f++)if(gm(o[f],r,a))return!0;return!1}function Oi(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const f=o[a],p=o[a+1];for(let x=0;x<r.length-1;x++)if(Wv(f,p,r[x],r[x+1]))return!0}return!1}function Wv(o,r,a,f){return rn(o,a,f)!==rn(r,a,f)&&rn(o,r,a)!==rn(o,r,f)}function gm(o,r,a){const f=a*a;if(r.length===1)return o.distSqr(r[0])<f;for(let p=1;p<r.length;p++)if(Xg(o,r[p-1],r[p])<f)return!0;return!1}function Xg(o,r,a){const f=r.distSqr(a);if(f===0)return o.distSqr(r);const p=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/f;return o.distSqr(p<0?r:p>1?a:a.sub(r)._mult(p)._add(r))}function Yg(o,r){let a,f,p,x=!1;for(let b=0;b<o.length;b++){a=o[b];for(let T=0,M=a.length-1;T<a.length;M=T++)f=a[T],p=a[M],f.y>r.y!=p.y>r.y&&r.x<(p.x-f.x)*(r.y-f.y)/(p.y-f.y)+f.x&&(x=!x)}return x}function bl(o,r){let a=!1;for(let f=0,p=o.length-1;f<o.length;p=f++){const x=o[f],b=o[p];x.y>r.y!=b.y>r.y&&r.x<(b.x-x.x)*(r.y-x.y)/(b.y-x.y)+x.x&&(a=!a)}return a}function Kv(o,r,a){const f=a[0],p=a[2];if(o.x<f.x&&r.x<f.x||o.x>p.x&&r.x>p.x||o.y<f.y&&r.y<f.y||o.y>p.y&&r.y>p.y)return!1;const x=rn(o,r,a[0]);return x!==rn(o,r,a[1])||x!==rn(o,r,a[2])||x!==rn(o,r,a[3])}function fu(o,r,a){const f=r.paint.get(o).value;return f.kind==="constant"?f.value:a.programConfigurations.get(r.id).getMaxValue(o)}function Rd(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function ym(o,r,a,f,p){if(!r[0]&&!r[1])return o;const x=P.convert(r)._mult(p);a==="viewport"&&x._rotate(-f);const b=[];for(let T=0;T<o.length;T++)b.push(o[T].sub(x));return b}function vm(o){const r=[];for(let a=0;a<o.length;a++){const f=o[a],p=r.at(-1);(a===0||p&&!f.equals(p))&&r.push(f)}return r}function Wg({queryGeometry:o,size:r},a){return pm(o,a,r)}function Qv({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){return pm(o,x,r*(a.projectTileCoordinates(x.x,x.y,f,p).signedDistanceFromCamera/a.cameraToCenterDistance))}function Jv({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){const b=a.projectTileCoordinates(x.x,x.y,f,p).signedDistanceFromCamera,T=r*(a.cameraToCenterDistance/b);return pm(o,Ld(x,a,f,p),T)}function e_({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p},x){return pm(o,Ld(x,a,f,p),r)}function _m({queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p,pitchAlignment:x="map",pitchScale:b="map"},T){const M=x==="map"?b==="map"?Wg:Qv:b==="map"?Jv:e_,z={queryGeometry:o,size:r,transform:a,unwrappedTileID:f,getElevation:p};for(const B of T)for(const N of B)if(M(z,N))return!0;return!1}function Ld(o,r,a,f){const p=r.projectTileCoordinates(o.x,o.y,a,f).point;return new P((.5*p.x+.5)*r.width,(.5*-p.y+.5)*r.height)}let xm,Kg;zt("CircleBucket",xh,{omit:["layers"]});var Qg={get paint(){return Kg=Kg||new Un({"circle-radius":new Ut(Ve.paint_circle["circle-radius"]),"circle-color":new Ut(Ve.paint_circle["circle-color"]),"circle-blur":new Ut(Ve.paint_circle["circle-blur"]),"circle-opacity":new Ut(Ve.paint_circle["circle-opacity"]),"circle-translate":new Bt(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new Bt(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bt(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bt(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ut(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ut(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ut(Ve.paint_circle["circle-stroke-opacity"])})},get layout(){return xm=xm||new Un({"circle-sort-key":new Ut(Ve.layout_circle["circle-sort-key"])})}};class bm extends Sn{constructor(r,a){super(r,Qg,a)}createBucket(r){return new xh(r)}queryRadius(r){const a=r;return fu("circle-radius",this,a)+fu("circle-stroke-width",this,a)+Rd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,unwrappedTileID:T,getElevation:M}){const z=ym(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,b),B=this.paint.get("circle-radius").evaluate(a,f)+this.paint.get("circle-stroke-width").evaluate(a,f),N=this.paint.get("circle-pitch-scale"),q=this.paint.get("circle-pitch-alignment");let $,K;return q==="map"?($=z,K=B*b):($=(function(J,te,ae,ve){return J.map((se=>Ld(se,te,ae,ve)))})(z,x,T,M),K=B),_m({queryGeometry:$,size:K,transform:x,unwrappedTileID:T,getElevation:M,pitchAlignment:q,pitchScale:N},p)}}class wm extends xh{}let Jg;zt("HeatmapBucket",wm,{omit:["layers"]});var ey={get paint(){return Jg=Jg||new Un({"heatmap-radius":new Ut(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ut(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bt(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ph(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bt(Ve.paint_heatmap["heatmap-opacity"])})}};function Sm(o,{width:r,height:a},f,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==r*a*f)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${r*a*f}`)}else p=new Uint8Array(r*a*f);return o.width=r,o.height=a,o.data=p,o}function wl(o,{width:r,height:a},f){if(r===o.width&&a===o.height)return;const p=Sm({},{width:r,height:a},f);Bd(o,p,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,r),height:Math.min(o.height,a)},f),o.width=r,o.height=a,o.data=p.data}function Bd(o,r,a,f,p,x){if(p.width===0||p.height===0)return r;if(p.width>o.width||p.height>o.height||a.x>o.width-p.width||a.y>o.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>r.width||p.height>r.height||f.x>r.width-p.width||f.y>r.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const b=o.data,T=r.data;if(b===T)throw new Error("srcData equals dstData, so image is already copied");for(let M=0;M<p.height;M++){const z=((a.y+M)*o.width+a.x)*x,B=((f.y+M)*r.width+f.x)*x;for(let N=0;N<p.width*x;N++)T[B+N]=b[z+N]}return r}class jd{constructor(r,a){Sm(this,r,1,a)}resize(r){wl(this,r,1)}clone(){return new jd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,f,p,x){Bd(r,a,f,p,x,1)}}class ga{constructor(r,a){Sm(this,r,4,a)}resize(r){wl(this,r,4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,f,p,x){Bd(r,a,f,p,x,4)}setPixel(r,a,f){const p=4*(r*this.width+a);this.data[p+0]=Math.round(255*f.r/f.a),this.data[p+1]=Math.round(255*f.g/f.a),this.data[p+2]=Math.round(255*f.b/f.a),this.data[p+3]=Math.round(255*f.a)}}function Sl(o){const r={},a=o.resolution||256,f=o.clips?o.clips.length:1,p=o.image||new ga({width:a,height:f});if(Math.log(a)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${a}`);const x=(b,T,M)=>{r[o.evaluationKey]=M;const z=o.expression.evaluate(r);p.setPixel(b/4/a,T/4,z)};if(o.clips)for(let b=0,T=0;b<f;++b,T+=4*a)for(let M=0,z=0;M<a;M++,z+=4){const B=M/(a-1),{start:N,end:q}=o.clips[b];x(T,z,N*(1-B)+q*B)}else for(let b=0,T=0;b<a;b++,T+=4)x(0,T,b/(a-1));return p}zt("AlphaImage",jd),zt("RGBAImage",ga);const Nd="big-fb";class t_ extends Sn{createBucket(r){return new wm(r)}constructor(r,a){super(r,ey,a),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Sl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Nd)&&this.heatmapFbos.delete(Nd)}queryRadius(r){return fu("heatmap-radius",this,r)}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,unwrappedTileID:T,getElevation:M}){return _m({queryGeometry:r,size:this.paint.get("heatmap-radius").evaluate(a,f)*b,transform:x,unwrappedTileID:T,getElevation:M},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Fd;var Ud={get paint(){return Fd=Fd||new Un({"hillshade-illumination-direction":new Bt(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Bt(Ve.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Bt(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bt(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bt(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bt(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bt(Ve.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Bt(Ve.paint_hillshade["hillshade-method"])})}};class kn extends Sn{constructor(r,a){super(r,Ud,a),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,a=this.paint.get("hillshade-illumination-altitude").values,f=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const x=Math.max(r.length,a.length,f.length,p.length);r=r.concat(Array(x-r.length).fill(r.at(-1))),a=a.concat(Array(x-a.length).fill(a.at(-1))),f=f.concat(Array(x-f.length).fill(f.at(-1))),p=p.concat(Array(x-p.length).fill(p.at(-1)));const b=a.map(gi);return{directionRadians:r.map(gi),altitudeRadians:b,shadowColor:p,highlightColor:f}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let r_;var lb={get paint(){return r_=r_||new Un({"color-relief-opacity":new Bt(Ve["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ph(Ve["paint_color-relief"]["color-relief-color"])})}};class Am{constructor(r,a,f,p){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(a,p)}update(r,a,f){const{width:p,height:x}=r,b=!(this.size&&this.size[0]===p&&this.size[1]===x||f),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(a&&a.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!a||a.premultiply!==!1)),b)this.size=[p,x],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Xa(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,p,x,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:z,y:B}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||Xa(r)?M.texSubImage2D(M.TEXTURE_2D,0,z,B,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,z,B,p,x,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D),T.pixelStoreUnpackFlipY.setDefault(),T.pixelStoreUnpack.setDefault(),T.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,a,f){const{context:p}=this,{gl:x}=p;x.bindTexture(x.TEXTURE_2D,this.texture),f!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=x.LINEAR),r!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,r),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,f||r),this.filter=r),a!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,a),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class Lf{constructor(r,a,f,p=1,x=1,b=1,T=0){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(f&&!["mapbox","terrarium","custom"].includes(f))return void ar(`"${f}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=a.height;const M=this.dim=a.height-2;switch(this.data=new Uint32Array(a.data.buffer),f){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=x,this.blueFactor=b,this.baseShift=T;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let z=0;z<M;z++)this.data[this._idx(-1,z)]=this.data[this._idx(0,z)],this.data[this._idx(M,z)]=this.data[this._idx(M-1,z)],this.data[this._idx(z,-1)]=this.data[this._idx(z,0)],this.data[this._idx(z,M)]=this.data[this._idx(z,M-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(M,-1)]=this.data[this._idx(M-1,0)],this.data[this._idx(-1,M)]=this.data[this._idx(0,M-1)],this.data[this._idx(M,M)]=this.data[this._idx(M-1,M-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let z=0;z<M;z++)for(let B=0;B<M;B++){const N=this.get(z,B);N>this.max&&(this.max=N),N<this.min&&(this.min=N)}}get(r,a){const f=new Uint8Array(this.data.buffer),p=4*this._idx(r,a);return this.unpack(f[p],f[p+1],f[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${r}, y: ${a}, dim: ${this.dim}`);return(a+1)*this.stride+(r+1)}unpack(r,a,f){return r*this.redFactor+a*this.greenFactor+f*this.blueFactor-this.baseShift}pack(r){return du(r,this.getUnpackVector())}getPixels(){return new ga({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,a,f){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let p=a*this.dim,x=a*this.dim+this.dim,b=f*this.dim,T=f*this.dim+this.dim;switch(a){case-1:p=x-1;break;case 1:x=p+1}switch(f){case-1:b=T-1;break;case 1:T=b+1}const M=-a*this.dim,z=-f*this.dim;for(let B=b;B<T;B++)for(let N=p;N<x;N++)this.data[this._idx(N,B)]=r.data[this._idx(N+M,B+z)]}}function du(o,r){const a=r[0],f=r[1],p=r[2],x=r[3],b=Math.min(a,f,p),T=Math.round((o+x)/b);return{r:Math.floor(T*b/a)%256,g:Math.floor(T*b/f)%256,b:Math.floor(T*b/p)%256}}zt("DEMData",Lf);class n_ extends Sn{constructor(r,a){super(r,lb,a)}_createColorRamp(r){const a={elevationStops:[],colorStops:[]},f=this._transitionablePaint._values["color-relief-color"].value.expression;if(f instanceof ta&&f._styleExpression.expression instanceof Ji){this.colorRampExpression=f;const b=f._styleExpression.expression;a.elevationStops=b.labels,a.colorStops=[];for(const T of a.elevationStops)a.colorStops.push(b.evaluate({globals:{elevation:T}}))}if(a.elevationStops.length<1&&(a.elevationStops=[0],a.colorStops=[fr.transparent]),a.elevationStops.length<2&&(a.elevationStops.push(a.elevationStops[0]+1),a.colorStops.push(a.colorStops[0])),a.elevationStops.length<=r)return a;const p={elevationStops:[],colorStops:[]},x=(a.elevationStops.length-1)/(r-1);for(let b=0;b<a.elevationStops.length-.5;b+=x)p.elevationStops.push(a.elevationStops[Math.round(b)]),p.colorStops.push(a.colorStops[Math.round(b)]);return ar(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${r}, provided: ${a.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(r,a,f){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(a),x=new ga({width:p.colorStops.length,height:1}),b=new ga({width:p.colorStops.length,height:1});for(let T=0;T<p.elevationStops.length;T++){const M=du(p.elevationStops[T],f);b.setPixel(0,T,new fr(M.r/255,M.g/255,M.b/255,1)),x.setPixel(0,T,p.colorStops[T])}return this.colorRampTextures={elevationTexture:new Am(r,b,r.gl.RGBA),colorTexture:new Am(r,x,r.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const i_=yn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vd}=i_;function zo(o,r,a){const f=a.patternDependencies;let p=!1;for(const x of r){const b=x.paint.get(`${o}-pattern`);b.isConstant()||(p=!0);const T=b.constantOr(null);T&&(p=!0,f[T.to]=!0,f[T.from]=!0)}return p}function Tm(o,r,a,f,p){const{zoom:x}=f,b=p.patternDependencies;for(const T of r){const M=T.paint.get(`${o}-pattern`).value;if(M.kind!=="constant"){let z=M.evaluate({zoom:x-1},a,{},p.availableImages),B=M.evaluate({zoom:x},a,{},p.availableImages),N=M.evaluate({zoom:x+1},a,{},p.availableImages);z=z&&z.name?z.name:z,B=B&&B.name?B.name:B,N=N&&N.name?N.name:N,b[z]=!0,b[B]=!0,b[N]=!0,a.patterns[T.id]={min:z,mid:B,max:N}}}return a}function Em(o,r,a,f,p){let x;if(p===(function(b,T,M,z){let B=0;for(let N=T,q=M-z;N<M;N+=z)B+=(b[q]-b[N])*(b[N+1]+b[q+1]),q=N;return B})(o,r,a,f)>0)for(let b=r;b<a;b+=f)x=Fa(b/f|0,o[b],o[b+1],x);else for(let b=a-f;b>=r;b-=f)x=Fa(b/f|0,o[b],o[b+1],x);return x&&lo(x,x.next)&&(Ua(x),x=x.next),x}function dc(o,r){if(!o)return o;r||(r=o);let a,f=o;do if(a=!1,f.steiner||!lo(f,f.next)&&Ir(f.prev,f,f.next)!==0)f=f.next;else{if(Ua(f),f=r=f.prev,f===f.next)break;a=!0}while(a||f!==r);return r}function wh(o,r,a,f,p,x,b){if(!o)return;!b&&x&&(function(M,z,B,N){let q=M;do q.z===0&&(q.z=Si(q.x,q.y,z,B,N)),q.prevZ=q.prev,q.nextZ=q.next,q=q.next;while(q!==M);q.prevZ.nextZ=null,q.prevZ=null,(function($){let K,J=1;do{let te,ae=$;$=null;let ve=null;for(K=0;ae;){K++;let se=ae,ce=0;for(let Te=0;Te<J&&(ce++,se=se.nextZ,se);Te++);let xe=J;for(;ce>0||xe>0&&se;)ce!==0&&(xe===0||!se||ae.z<=se.z)?(te=ae,ae=ae.nextZ,ce--):(te=se,se=se.nextZ,xe--),ve?ve.nextZ=te:$=te,te.prevZ=ve,ve=te;ae=se}ve.nextZ=null,J*=2}while(K>1)})(q)})(o,f,p,x);let T=o;for(;o.prev!==o.next;){const M=o.prev,z=o.next;if(x?Mm(o,f,p,x):ty(o))r.push(M.i,o.i,z.i),Ua(o),o=z.next,T=z.next;else if((o=z)===T){b?b===1?wh(o=a_(dc(o),r),r,a,f,p,x,2):b===2&&pu(o,r,a,f,p,x):wh(dc(o),r,a,f,p,x,1);break}}}function ty(o){const r=o.prev,a=o,f=o.next;if(Ir(r,a,f)>=0)return!1;const p=r.x,x=a.x,b=f.x,T=r.y,M=a.y,z=f.y,B=Math.min(p,x,b),N=Math.min(T,M,z),q=Math.max(p,x,b),$=Math.max(T,M,z);let K=f.next;for(;K!==r;){if(K.x>=B&&K.x<=q&&K.y>=N&&K.y<=$&&Bf(p,T,x,M,b,z,K.x,K.y)&&Ir(K.prev,K,K.next)>=0)return!1;K=K.next}return!0}function Mm(o,r,a,f){const p=o.prev,x=o,b=o.next;if(Ir(p,x,b)>=0)return!1;const T=p.x,M=x.x,z=b.x,B=p.y,N=x.y,q=b.y,$=Math.min(T,M,z),K=Math.min(B,N,q),J=Math.max(T,M,z),te=Math.max(B,N,q),ae=Si($,K,r,a,f),ve=Si(J,te,r,a,f);let se=o.prevZ,ce=o.nextZ;for(;se&&se.z>=ae&&ce&&ce.z<=ve;){if(se.x>=$&&se.x<=J&&se.y>=K&&se.y<=te&&se!==p&&se!==b&&Bf(T,B,M,N,z,q,se.x,se.y)&&Ir(se.prev,se,se.next)>=0||(se=se.prevZ,ce.x>=$&&ce.x<=J&&ce.y>=K&&ce.y<=te&&ce!==p&&ce!==b&&Bf(T,B,M,N,z,q,ce.x,ce.y)&&Ir(ce.prev,ce,ce.next)>=0))return!1;ce=ce.nextZ}for(;se&&se.z>=ae;){if(se.x>=$&&se.x<=J&&se.y>=K&&se.y<=te&&se!==p&&se!==b&&Bf(T,B,M,N,z,q,se.x,se.y)&&Ir(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;ce&&ce.z<=ve;){if(ce.x>=$&&ce.x<=J&&ce.y>=K&&ce.y<=te&&ce!==p&&ce!==b&&Bf(T,B,M,N,z,q,ce.x,ce.y)&&Ir(ce.prev,ce,ce.next)>=0)return!1;ce=ce.nextZ}return!0}function a_(o,r){let a=o;do{const f=a.prev,p=a.next.next;!lo(f,p)&&iy(f,a,a.next,p)&&Hd(f,p)&&Hd(p,f)&&(r.push(f.i,a.i,p.i),Ua(a),Ua(a.next),a=o=p),a=a.next}while(a!==o);return dc(a)}function pu(o,r,a,f,p,x){let b=o;do{let T=b.next.next;for(;T!==b.prev;){if(b.i!==T.i&&Vn(b,T)){let M=Zd(b,T);return b=dc(b,b.next),M=dc(M,M.next),wh(b,r,a,f,p,x,0),void wh(M,r,a,f,p,x,0)}T=T.next}b=b.next}while(b!==o)}function wi(o,r){let a=o.x-r.x;return a===0&&(a=o.y-r.y,a===0)&&(a=(o.next.y-o.y)/(o.next.x-o.x)-(r.next.y-r.y)/(r.next.x-r.x)),a}function ry(o,r){const a=(function(p,x){let b=x;const T=p.x,M=p.y;let z,B=-1/0;if(lo(p,b))return b;do{if(lo(p,b.next))return b.next;if(M<=b.y&&M>=b.next.y&&b.next.y!==b.y){const J=b.x+(M-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(J<=T&&J>B&&(B=J,z=b.x<b.next.x?b:b.next,J===T))return z}b=b.next}while(b!==x);if(!z)return null;const N=z,q=z.x,$=z.y;let K=1/0;b=z;do{if(T>=b.x&&b.x>=q&&T!==b.x&&ny(M<$?T:B,M,q,$,M<$?B:T,M,b.x,b.y)){const J=Math.abs(M-b.y)/(T-b.x);Hd(b,p)&&(J<K||J===K&&(b.x>z.x||b.x===z.x&&o_(z,b)))&&(z=b,K=J)}b=b.next}while(b!==N);return z})(o,r);if(!a)return r;const f=Zd(a,o);return dc(f,f.next),dc(a,a.next)}function o_(o,r){return Ir(o.prev,o,r.prev)<0&&Ir(r.next,o,o.next)<0}function Si(o,r,a,f,p){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*p|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-f)*p|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function ub(o){let r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function ny(o,r,a,f,p,x,b,T){return(p-b)*(r-T)>=(o-b)*(x-T)&&(o-b)*(f-T)>=(a-b)*(r-T)&&(a-b)*(x-T)>=(p-b)*(f-T)}function Bf(o,r,a,f,p,x,b,T){return!(o===b&&r===T)&&ny(o,r,a,f,p,x,b,T)}function Vn(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!(function(a,f){let p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==f.i&&p.next.i!==f.i&&iy(p,p.next,a,f))return!0;p=p.next}while(p!==a);return!1})(o,r)&&(Hd(o,r)&&Hd(r,o)&&(function(a,f){let p=a,x=!1;const b=(a.x+f.x)/2,T=(a.y+f.y)/2;do p.y>T!=p.next.y>T&&p.next.y!==p.y&&b<(p.next.x-p.x)*(T-p.y)/(p.next.y-p.y)+p.x&&(x=!x),p=p.next;while(p!==a);return x})(o,r)&&(Ir(o.prev,o,r.prev)||Ir(o,r.prev,r))||lo(o,r)&&Ir(o.prev,o,o.next)>0&&Ir(r.prev,r,r.next)>0)}function Ir(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function lo(o,r){return o.x===r.x&&o.y===r.y}function iy(o,r,a,f){const p=qd(Ir(o,r,a)),x=qd(Ir(o,r,f)),b=qd(Ir(a,f,o)),T=qd(Ir(a,f,r));return p!==x&&b!==T||!(p!==0||!Gd(o,a,r))||!(x!==0||!Gd(o,f,r))||!(b!==0||!Gd(a,o,f))||!(T!==0||!Gd(a,r,f))}function Gd(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function qd(o){return o>0?1:o<0?-1:0}function Hd(o,r){return Ir(o.prev,o,o.next)<0?Ir(o,r,o.next)>=0&&Ir(o,o.prev,r)>=0:Ir(o,r,o.prev)<0||Ir(o,o.next,r)<0}function Zd(o,r){const a=Pm(o.i,o.x,o.y),f=Pm(r.i,r.x,r.y),p=o.next,x=r.prev;return o.next=r,r.prev=o,a.next=p,p.prev=a,f.next=a,a.prev=f,x.next=f,f.prev=x,f}function Fa(o,r,a,f){const p=Pm(o,r,a);return f?(p.next=f.next,p.prev=f,f.next.prev=p,f.next=p):(p.prev=p,p.next=p),p}function Ua(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function Pm(o,r,a){return{i:o,x:r,y:a,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class zi{constructor(r,a){if(a>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=a}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class $d{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}$d.noSubdivision=new $d({fill:new zi(0,0),line:new zi(0,0),tile:new zi(0,0),stencil:new zi(0,0),circle:1}),zt("SubdivisionGranularityExpression",zi),zt("SubdivisionGranularitySetting",$d);const uo=-32768,Fs=32767;class mu{constructor(r,a){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=at/r,this._canonical=a}_getKey(r,a){return(r+=32768)<<16|a+32768}_vertexToIndex(r,a){if(r<-32768||a<-32768||r>32767||a>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const f=0|Math.round(r),p=0|Math.round(a),x=this._getKey(f,p);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const b=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,b),this._vertexBuffer.push(f,p),b}_subdivideTrianglesScanline(r){if(this._granularity<2)return(function(p,x){const b=[];for(let T=0;T<x.length;T+=3){const M=x[T],z=x[T+1],B=x[T+2],N=p[2*M],q=p[2*M+1];(p[2*z]-N)*(p[2*B+1]-q)-(p[2*z+1]-q)*(p[2*B]-N)>0?(b.push(M),b.push(B),b.push(z)):(b.push(M),b.push(z),b.push(B))}return b})(this._vertexBuffer,r);const a=[],f=r.length;for(let p=0;p<f;p+=3){const x=[r[p+0],r[p+1],r[p+2]],b=[this._vertexBuffer[2*r[p+0]+0],this._vertexBuffer[2*r[p+0]+1],this._vertexBuffer[2*r[p+1]+0],this._vertexBuffer[2*r[p+1]+1],this._vertexBuffer[2*r[p+2]+0],this._vertexBuffer[2*r[p+2]+1]];let T=1/0,M=1/0,z=-1/0,B=-1/0;for(let J=0;J<3;J++){const te=b[2*J],ae=b[2*J+1];T=Math.min(T,te),z=Math.max(z,te),M=Math.min(M,ae),B=Math.max(B,ae)}if(T===z||M===B)continue;const N=Math.floor(T/this._granularityCellSize),q=Math.ceil(z/this._granularityCellSize),$=Math.floor(M/this._granularityCellSize),K=Math.ceil(B/this._granularityCellSize);if(N!==q||$!==K)for(let J=$;J<K;J++){const te=this._scanlineGenerateVertexRingForCellRow(J,b,x);Us(this._vertexBuffer,te,a)}else a.push(...x)}return a}_scanlineGenerateVertexRingForCellRow(r,a,f){const p=r*this._granularityCellSize,x=p+this._granularityCellSize,b=[];for(let T=0;T<3;T++){const M=a[2*T],z=a[2*T+1],B=a[2*(T+1)%6],N=a[(2*(T+1)+1)%6],q=a[2*(T+2)%6],$=a[(2*(T+2)+1)%6],K=B-M,J=N-z,te=K===0,ae=J===0,ve=(p-z)/J,se=(x-z)/J,ce=Math.min(ve,se),xe=Math.max(ve,se);if(!ae&&(ce>=1||xe<=0)||ae&&(z<p||z>x)){N>=p&&N<=x&&b.push(f[(T+1)%3]);continue}!ae&&ce>0&&b.push(this._vertexToIndex(M+K*ce,z+J*ce));const Te=M+K*Math.max(ce,0),qe=M+K*Math.min(xe,1);te||this._generateIntraEdgeVertices(b,M,z,B,N,Te,qe),!ae&&xe<1&&b.push(this._vertexToIndex(M+K*xe,z+J*xe)),(ae||N>=p&&N<=x)&&b.push(f[(T+1)%3]),!ae&&(N<=p||N>=x)&&this._generateInterEdgeVertices(b,M,z,B,N,q,$,qe,p,x)}return b}_generateIntraEdgeVertices(r,a,f,p,x,b,T){const M=p-a,z=x-f,B=z===0,N=B?Math.min(a,p):Math.min(b,T),q=B?Math.max(a,p):Math.max(b,T),$=Math.floor(N/this._granularityCellSize)+1,K=Math.ceil(q/this._granularityCellSize)-1;if(B?a<p:b<T)for(let J=$;J<=K;J++){const te=J*this._granularityCellSize;r.push(this._vertexToIndex(te,f+z*(te-a)/M))}else for(let J=K;J>=$;J--){const te=J*this._granularityCellSize;r.push(this._vertexToIndex(te,f+z*(te-a)/M))}}_generateInterEdgeVertices(r,a,f,p,x,b,T,M,z,B){const N=x-f,q=b-p,$=T-x,K=(z-x)/$,J=(B-x)/$,te=Math.min(K,J),ae=Math.max(K,J),ve=p+q*te;let se=Math.floor(Math.min(ve,M)/this._granularityCellSize)+1,ce=Math.ceil(Math.max(ve,M)/this._granularityCellSize)-1,xe=M<ve;const Te=$===0;if(Te&&(T===z||T===B))return;if(Te||te>=1||ae<=0){const st=f-T,tt=b+(a-b)*Math.min((z-T)/st,(B-T)/st);se=Math.floor(Math.min(tt,M)/this._granularityCellSize)+1,ce=Math.ceil(Math.max(tt,M)/this._granularityCellSize)-1,xe=M<tt}const qe=N>0?B:z;if(xe)for(let st=se;st<=ce;st++)r.push(this._vertexToIndex(st*this._granularityCellSize,qe));else for(let st=ce;st>=se;st--)r.push(this._vertexToIndex(st*this._granularityCellSize,qe))}_generateOutline(r){const a=[];for(const f of r){const p=gu(f,this._granularity,!0),x=this._pointArrayToIndices(p),b=[];for(let T=1;T<x.length;T++)b.push(x[T-1]),b.push(x[T]);a.push(b)}return a}_handlePoles(r){let a=!1,f=!1;this._canonical&&(this._canonical.y===0&&(a=!0),this._canonical.y===(1<<this._canonical.z)-1&&(f=!0)),(a||f)&&this._fillPoles(r,a,f)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let a=0;a<r.length;a+=2){const f=r[a+1];f===uo&&(r[a+1]=-32767),f===Fs&&(r[a+1]=32766)}}_generatePoleQuad(r,a,f,p,x,b){p>x!=(b===uo)?(r.push(a),r.push(f),r.push(this._vertexToIndex(p,b)),r.push(f),r.push(this._vertexToIndex(x,b)),r.push(this._vertexToIndex(p,b))):(r.push(f),r.push(a),r.push(this._vertexToIndex(p,b)),r.push(this._vertexToIndex(x,b)),r.push(f),r.push(this._vertexToIndex(p,b)))}_fillPoles(r,a,f){const p=this._vertexBuffer,x=at,b=r.length;for(let T=2;T<b;T+=3){const M=r[T-2],z=r[T-1],B=r[T],N=p[2*M],q=p[2*M+1],$=p[2*z],K=p[2*z+1],J=p[2*B],te=p[2*B+1];a&&(q===0&&K===0&&this._generatePoleQuad(r,M,z,N,$,uo),K===0&&te===0&&this._generatePoleQuad(r,z,B,$,J,uo),te===0&&q===0&&this._generatePoleQuad(r,B,M,J,N,uo)),f&&(q===x&&K===x&&this._generatePoleQuad(r,M,z,N,$,Fs),K===x&&te===x&&this._generatePoleQuad(r,z,B,$,J,Fs),te===x&&q===x&&this._generatePoleQuad(r,B,M,J,N,Fs))}}_initializeVertices(r){for(let a=0;a<r.length;a+=2)this._vertexToIndex(r[a],r[a+1])}subdividePolygonInternal(r,a){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:f,holeIndices:p}=(function(T){const M=[],z=[];for(const B of T)if(B.length!==0){B!==T[0]&&M.push(z.length/2);for(let N=0;N<B.length;N++)z.push(B[N].x),z.push(B[N].y)}return{flattened:z,holeIndices:M}})(r);let x;this._initializeVertices(f);try{const T=(function(z,B,N=2){const q=B&&B.length,$=q?B[0]*N:z.length;let K=Em(z,0,$,N,!0);const J=[];if(!K||K.next===K.prev)return J;let te,ae,ve;if(q&&(K=(function(se,ce,xe,Te){const qe=[];for(let st=0,tt=ce.length;st<tt;st++){const dt=Em(se,ce[st]*Te,st<tt-1?ce[st+1]*Te:se.length,Te,!1);dt===dt.next&&(dt.steiner=!0),qe.push(ub(dt))}qe.sort(wi);for(let st=0;st<qe.length;st++)xe=ry(qe[st],xe);return xe})(z,B,K,N)),z.length>80*N){te=z[0],ae=z[1];let se=te,ce=ae;for(let xe=N;xe<$;xe+=N){const Te=z[xe],qe=z[xe+1];Te<te&&(te=Te),qe<ae&&(ae=qe),Te>se&&(se=Te),qe>ce&&(ce=qe)}ve=Math.max(se-te,ce-ae),ve=ve!==0?32767/ve:0}return wh(K,J,N,te,ae,ve,0),J})(f,p),M=this._convertIndices(f,T);x=this._subdivideTrianglesScanline(M)}catch(T){console.error(T)}let b=[];return a&&(b=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:b}}_convertIndices(r,a){const f=[];for(let p=0;p<a.length;p++)f.push(this._vertexToIndex(r[2*a[p]],r[2*a[p]+1]));return f}_pointArrayToIndices(r){const a=[];for(let f=0;f<r.length;f++){const p=r[f];a.push(this._vertexToIndex(p.x,p.y))}return a}}function Cm(o,r,a,f=!0){return new mu(a,r).subdividePolygonInternal(o,f)}function gu(o,r,a=!1){if(!o||o.length<1)return[];if(o.length<2)return[];const f=o[0],p=o[o.length-1],x=a&&(f.x!==p.x||f.y!==p.y);if(r<2)return x?[...o,o[0]]:[...o];const b=Math.floor(at/r),T=[];T.push(new P(o[0].x,o[0].y));const M=o.length,z=x?M:M-1;for(let B=0;B<z;B++){const N=o[B],q=B<M-1?o[B+1]:o[0],$=N.x,K=N.y,J=q.x,te=q.y,ae=$!==J,ve=K!==te;if(!ae&&!ve)continue;const se=J-$,ce=te-K,xe=Math.abs(se),Te=Math.abs(ce);let qe=$,st=K;for(;;){const dt=se>0?(Math.floor(qe/b)+1)*b:(Math.ceil(qe/b)-1)*b,Pt=ce>0?(Math.floor(st/b)+1)*b:(Math.ceil(st/b)-1)*b,mt=Math.abs(qe-dt),nt=Math.abs(st-Pt),Qe=Math.abs(qe-J),jt=Math.abs(st-te),kt=ae?mt/xe:Number.POSITIVE_INFINITY,Nt=ve?nt/Te:Number.POSITIVE_INFINITY;if((Qe<=mt||!ae)&&(jt<=nt||!ve))break;if(kt<Nt&&ae||!ve){qe=dt,st+=ce*kt;const Ot=new P(qe,Math.round(st));T[T.length-1].x===Ot.x&&T[T.length-1].y===Ot.y||T.push(Ot)}else{qe+=se*Nt,st=Pt;const Ot=new P(Math.round(qe),st);T[T.length-1].x===Ot.x&&T[T.length-1].y===Ot.y||T.push(Ot)}}const tt=new P(J,te);T[T.length-1].x===tt.x&&T[T.length-1].y===tt.y||T.push(tt)}return T}function Us(o,r,a){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let f=0,p=o[2*r[0]];for(let M=1;M<r.length;M++){const z=o[2*r[M]];z<p&&(p=z,f=M)}const x=r.length;let b=f,T=(b+1)%x;for(;;){const M=b-1>=0?b-1:x-1,z=(T+1)%x,B=o[2*r[M]],N=o[2*r[z]],q=o[2*r[b]],$=o[2*r[b]+1],K=o[2*r[T]+1];let J=!1;if(B<N)J=!0;else if(B>N)J=!1;else{const te=K-$,ae=-(o[2*r[T]]-q),ve=$<K?1:-1;((B-q)*te+(o[2*r[M]+1]-$)*ae)*ve>((N-q)*te+(o[2*r[z]+1]-$)*ae)*ve&&(J=!0)}if(J){const te=r[M],ae=r[b],ve=r[T];te!==ae&&te!==ve&&ae!==ve&&a.push(ve,ae,te),b--,b<0&&(b=x-1)}else{const te=r[z],ae=r[b],ve=r[T];te!==ae&&te!==ve&&ae!==ve&&a.push(ve,ae,te),T++,T>=x&&(T=0)}if(M===z)break}}function ay(o,r,a,f,p,x,b,T,M){const z=p.length/2,B=b&&T&&M;if(z<Mt.MAX_VERTEX_ARRAY_LENGTH){const N=r.prepareSegment(z,a,f),q=N.vertexLength;for(let J=0;J<x.length;J+=3)f.emplaceBack(q+x[J],q+x[J+1],q+x[J+2]);let $,K;N.vertexLength+=z,N.primitiveLength+=x.length/3,B&&(K=b.prepareSegment(z,a,T),$=K.vertexLength,K.vertexLength+=z);for(let J=0;J<p.length;J+=2)o(p[J],p[J+1]);if(B)for(let J=0;J<M.length;J++){const te=M[J];for(let ae=1;ae<te.length;ae+=2)T.emplaceBack($+te[ae-1],$+te[ae]);K.primitiveLength+=te.length/2}}else(function(N,q,$,K,J,te){const ae=[];for(let Te=0;Te<K.length/2;Te++)ae.push(-1);const ve={count:0};let se=0,ce=N.getOrCreateLatestSegment(q,$),xe=ce.vertexLength;for(let Te=2;Te<J.length;Te+=3){const qe=J[Te-2],st=J[Te-1],tt=J[Te];let dt=ae[qe]<se,Pt=ae[st]<se,mt=ae[tt]<se;ce.vertexLength+((dt?1:0)+(Pt?1:0)+(mt?1:0))>Mt.MAX_VERTEX_ARRAY_LENGTH&&(ce=N.createNewSegment(q,$),se=ve.count,dt=!0,Pt=!0,mt=!0,xe=0);const nt=Al(ae,K,te,ve,qe,dt,ce),Qe=Al(ae,K,te,ve,st,Pt,ce),jt=Al(ae,K,te,ve,tt,mt,ce);$.emplaceBack(xe+nt-se,xe+Qe-se,xe+jt-se),ce.primitiveLength++}})(r,a,f,p,x,o),B&&(function(N,q,$,K,J,te){const ae=[];for(let Te=0;Te<K.length/2;Te++)ae.push(-1);const ve={count:0};let se=0,ce=N.getOrCreateLatestSegment(q,$),xe=ce.vertexLength;for(let Te=0;Te<J.length;Te++){const qe=J[Te];for(let st=1;st<J[Te].length;st+=2){const tt=qe[st-1],dt=qe[st];let Pt=ae[tt]<se,mt=ae[dt]<se;ce.vertexLength+((Pt?1:0)+(mt?1:0))>Mt.MAX_VERTEX_ARRAY_LENGTH&&(ce=N.createNewSegment(q,$),se=ve.count,Pt=!0,mt=!0,xe=0);const nt=Al(ae,K,te,ve,tt,Pt,ce),Qe=Al(ae,K,te,ve,dt,mt,ce);$.emplaceBack(xe+nt-se,xe+Qe-se),ce.primitiveLength++}}})(b,a,T,p,M,o),r.forceNewSegmentOnNextPrepare(),b?.forceNewSegmentOnNextPrepare()}function Al(o,r,a,f,p,x,b){if(x){const T=f.count;return a(r[2*p],r[2*p+1]),o[p]=f.count,f.count++,b.vertexLength++,T}return o[p]}class Sh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new de,this.indexArray=new Xe,this.indexArray2=new St,this.programConfigurations=new _l(r.layers,r.zoom),this.segments=new Mt,this.segments2=new Mt,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.hasDependencies=zo("fill",this.layers,a);const p=this.layers[0].layout.get("fill-sort-key"),x=!p.isConstant(),b=[];for(const{feature:T,id:M,index:z,sourceLayerIndex:B}of r){const N=this.layers[0]._featureFilter.needGeometry,q=Oo(T,N);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),q,f))continue;const $=x?p.evaluate(q,{},f,a.availableImages):void 0,K={id:M,properties:T.properties,type:T.type,sourceLayerIndex:B,index:z,geometry:N?q.geometry:Ns(T),patterns:{},sortKey:$};b.push(K)}x&&b.sort(((T,M)=>T.sortKey-M.sortKey));for(const T of b){const{geometry:M,index:z,sourceLayerIndex:B}=T;if(this.hasDependencies){const N=Tm("fill",this.layers,T,{zoom:this.zoom},a);this.patternFeatures.push(N)}else this.addFeature(T,M,z,f,{},a.subdivisionGranularity);a.featureIndex.insert(r[z].feature,M,z,B,this.index)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}addFeatures(r,a,f){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,a,f,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Vd),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,f,p,x,b){for(const T of Yc(a,500)){const M=Cm(T,p,b.fill.getGranularityForZoomLevel(p.z)),z=this.layoutVertexArray;ay(((B,N)=>{z.emplaceBack(B,N)}),this.segments,this.layoutVertexArray,this.indexArray,M.verticesFlattened,M.indicesTriangles,this.segments2,this.indexArray2,M.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:p})}}let jf,Ah;zt("FillBucket",Sh,{omit:["layers","patternFeatures"]});var s_={get paint(){return Ah=Ah||new Un({"fill-antialias":new Bt(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Ut(Ve.paint_fill["fill-opacity"]),"fill-color":new Ut(Ve.paint_fill["fill-color"]),"fill-outline-color":new Ut(Ve.paint_fill["fill-outline-color"]),"fill-translate":new Bt(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new Bt(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new io(Ve.paint_fill["fill-pattern"])})},get layout(){return jf=jf||new Un({"fill-sort-key":new Ut(Ve.layout_fill["fill-sort-key"])})}};class l_ extends Sn{constructor(r,a){super(r,s_,a)}recalculate(r,a){super.recalculate(r,a);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Sh(r)}queryRadius(){return Rd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:a,transform:f,pixelsToTileUnits:p}){return mm(ym(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-f.bearingInRadians,p),a)}isTileClipped(){return!0}}const Xd=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),u_=yn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Dm}=Xd;class Nf{constructor(r,a,f,p,x){this.properties={},this.extent=f,this.type=0,this.id=void 0,this._pbf=r,this._geometry=-1,this._keys=p,this._values=x,r.readFields(cb,this,a)}loadGeometry(){const r=this._pbf;r.pos=this._geometry;const a=r.readVarint()+r.pos,f=[];let p,x=1,b=0,T=0,M=0;for(;r.pos<a;){if(b<=0){const z=r.readVarint();x=7&z,b=z>>3}if(b--,x===1||x===2)T+=r.readSVarint(),M+=r.readSVarint(),x===1&&(p&&f.push(p),p=[]),p&&p.push(new P(T,M));else{if(x!==7)throw new Error(`unknown command ${x}`);p&&p.push(p[0].clone())}}return p&&f.push(p),f}bbox(){const r=this._pbf;r.pos=this._geometry;const a=r.readVarint()+r.pos;let f=1,p=0,x=0,b=0,T=1/0,M=-1/0,z=1/0,B=-1/0;for(;r.pos<a;){if(p<=0){const N=r.readVarint();f=7&N,p=N>>3}if(p--,f===1||f===2)x+=r.readSVarint(),b+=r.readSVarint(),x<T&&(T=x),x>M&&(M=x),b<z&&(z=b),b>B&&(B=b);else if(f!==7)throw new Error(`unknown command ${f}`)}return[T,z,M,B]}toGeoJSON(r,a,f){const p=this.extent*Math.pow(2,f),x=this.extent*r,b=this.extent*a,T=this.loadGeometry();function M(q){return[360*(q.x+x)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(q.y+b)/p)*Math.PI))-90]}function z(q){return q.map(M)}let B;if(this.type===1){const q=[];for(const K of T)q.push(K[0]);const $=z(q);B=q.length===1?{type:"Point",coordinates:$[0]}:{type:"MultiPoint",coordinates:$}}else if(this.type===2){const q=T.map(z);B=q.length===1?{type:"LineString",coordinates:q[0]}:{type:"MultiLineString",coordinates:q}}else{if(this.type!==3)throw new Error("unknown feature type");{const q=c_(T),$=[];for(const K of q)$.push(K.map(z));B=$.length===1?{type:"Polygon",coordinates:$[0]}:{type:"MultiPolygon",coordinates:$}}}const N={type:"Feature",geometry:B,properties:this.properties};return this.id!=null&&(N.id=this.id),N}}function cb(o,r,a){o===1?r.id=a.readVarint():o===2?(function(f,p){const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=p._keys[f.readVarint()],T=p._values[f.readVarint()];p.properties[b]=T}})(a,r):o===3?r.type=a.readVarint():o===4&&(r._geometry=a.pos)}function c_(o){const r=o.length;if(r<=1)return[o];const a=[];let f,p;for(let x=0;x<r;x++){const b=en(o[x]);b!==0&&(p===void 0&&(p=b<0),p===b<0?(f&&a.push(f),f=[o[x]]):f&&f.push(o[x]))}return f&&a.push(f),a}function en(o){let r=0;for(let a,f,p=0,x=o.length,b=x-1;p<x;b=p++)a=o[p],f=o[b],r+=(f.x-a.x)*(a.y+f.y);return r}Nf.types=["Unknown","Point","LineString","Polygon"];class _n{constructor(r,a){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(Er,this,a),this.length=this._features.length}feature(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];const a=this._pbf.readVarint()+this._pbf.pos;return new Nf(this._pbf,a,this.extent,this._keys,this._values)}}function Er(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push((function(f){let p=null;const x=f.readVarint()+f.pos;for(;f.pos<x;){const b=f.readVarint()>>3;p=b===1?f.readString():b===2?f.readFloat():b===3?f.readDouble():b===4?f.readVarint64():b===5?f.readVarint():b===6?f.readSVarint():b===7?f.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(a))}class Mr{constructor(r,a){this.layers=r.readFields(sn,{},a)}}function sn(o,r,a){if(o===3){const f=new _n(a,a.readVarint()+a.pos);f.length&&(r[f.name]=f)}}const Va=Math.pow(2,13);function gs(o,r,a,f,p,x,b,T){o.emplaceBack(r,a,2*Math.floor(f*Va)+b,p*Va*2,x*Va*2,Math.round(T))}class pc{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.layoutVertexArray=new ye,this.centroidVertexArray=new fe,this.indexArray=new Xe,this.programConfigurations=new _l(r.layers,r.zoom),this.segments=new Mt,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.features=[],this.hasDependencies=zo("fill-extrusion",this.layers,a);for(const{feature:p,id:x,index:b,sourceLayerIndex:T}of r){const M=this.layers[0]._featureFilter.needGeometry,z=Oo(p,M);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),z,f))continue;const B={id:x,sourceLayerIndex:T,index:b,geometry:M?z.geometry:Ns(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(Tm("fill-extrusion",this.layers,B,{zoom:this.zoom},a)):this.addFeature(B,B.geometry,b,f,{},a.subdivisionGranularity),a.featureIndex.insert(p,B.geometry,b,T,this.index,!0)}}addFeatures(r,a,f){for(const p of this.features){const{geometry:x}=p;this.addFeature(p,x,p.index,a,f,r.subdivisionGranularity)}}update(r,a,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Dm),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,u_.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,a,f,p,x,b){for(const T of Yc(a,500)){const M={x:0,y:0,sampleCount:0},z=this.layoutVertexArray.length;this.processPolygon(M,p,r,T,b);const B=this.layoutVertexArray.length-z,N=Math.floor(M.x/M.sampleCount),q=Math.floor(M.y/M.sampleCount);for(let $=0;$<B;$++)this.centroidVertexArray.emplaceBack(N,q)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,canonical:p})}processPolygon(r,a,f,p,x){if(p.length<1||Kn(p[0]))return;for(const N of p)N.length!==0&&oy(r,N);const b={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},T=x.fill.getGranularityForZoomLevel(a.z),M=Nf.types[f.type]==="Polygon";for(const N of p){if(N.length===0||Kn(N))continue;const q=gu(N,T,M);this._generateSideFaces(q,b)}if(!M)return;const z=Cm(p,a,T,!1),B=this.layoutVertexArray;ay(((N,q)=>{gs(B,N,q,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,z.verticesFlattened,z.indicesTriangles)}_generateSideFaces(r,a){let f=0;for(let p=1;p<r.length;p++){const x=r[p],b=r[p-1];if(yu(x,b))continue;a.segment.vertexLength+4>Mt.MAX_VERTEX_ARRAY_LENGTH&&(a.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const T=x.sub(b)._perp()._unit(),M=b.dist(x);f+M>32768&&(f=0),gs(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,0,f),gs(this.layoutVertexArray,x.x,x.y,T.x,T.y,0,1,f),f+=M,gs(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,0,f),gs(this.layoutVertexArray,b.x,b.y,T.x,T.y,0,1,f);const z=a.segment.vertexLength;this.indexArray.emplaceBack(z,z+2,z+1),this.indexArray.emplaceBack(z+1,z+2,z+3),a.segment.vertexLength+=4,a.segment.primitiveLength+=2}}}function oy(o,r){for(let a=0;a<r.length;a++){const f=r[a];a===r.length-1&&r[0].x===f.x&&r[0].y===f.y||(o.x+=f.x,o.y+=f.y,o.sampleCount++)}}function yu(o,r){return o.x===r.x&&(o.x<0||o.x>at)||o.y===r.y&&(o.y<0||o.y>at)}function Kn(o){return o.every((r=>r.x<0))||o.every((r=>r.x>at))||o.every((r=>r.y<0))||o.every((r=>r.y>at))}let vu;zt("FillExtrusionBucket",pc,{omit:["layers","features"]});var Th={get paint(){return vu=vu||new Un({"fill-extrusion-opacity":new Bt(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bt(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bt(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new io(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ut(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bt(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class sy extends Sn{constructor(r,a){super(r,Th,a)}createBucket(r){return new pc(r)}queryRadius(){return Rd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b,pixelPosMatrix:T}){const M=ym(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,b),z=this.paint.get("fill-extrusion-height").evaluate(a,f),B=this.paint.get("fill-extrusion-base").evaluate(a,f),N=(function($,K){const J=[];for(const te of $){const ae=[te.x,te.y,0,1];Ct(ae,ae,K),J.push(new P(ae[0]/ae[3],ae[1]/ae[3]))}return J})(M,T),q=(function($,K,J,te){const ae=[],ve=[],se=te[8]*K,ce=te[9]*K,xe=te[10]*K,Te=te[11]*K,qe=te[8]*J,st=te[9]*J,tt=te[10]*J,dt=te[11]*J;for(const Pt of $){const mt=[],nt=[];for(const Qe of Pt){const jt=Qe.x,kt=Qe.y,Nt=te[0]*jt+te[4]*kt+te[12],Ot=te[1]*jt+te[5]*kt+te[13],Zt=te[2]*jt+te[6]*kt+te[14],Or=te[3]*jt+te[7]*kt+te[15],xr=Zt+xe,Rn=Or+Te,xa=Nt+qe,Mi=Ot+st,Ln=Zt+tt,Tn=Or+dt,Xr=new P((Nt+se)/Rn,(Ot+ce)/Rn);Xr.z=xr/Rn,mt.push(Xr);const Qn=new P(xa/Tn,Mi/Tn);Qn.z=Ln/Tn,nt.push(Qn)}ae.push(mt),ve.push(nt)}return[ae,ve]})(p,B,z,T);return(function($,K,J){let te=1/0;mm(J,K)&&(te=Eh(J,K[0]));for(let ae=0;ae<K.length;ae++){const ve=K[ae],se=$[ae];for(let ce=0;ce<ve.length-1;ce++){const xe=ve[ce],Te=[xe,ve[ce+1],se[ce+1],se[ce],xe];bh(J,Te)&&(te=Math.min(te,Eh(J,Te)))}}return te!==1/0&&te})(q[0],q[1],N)}}function ra(o,r){return o.x*r.x+o.y*r.y}function Eh(o,r){if(o.length===1){let a=0;const f=r[a++];let p;for(;!p||f.equals(p);)if(p=r[a++],!p)return 1/0;for(;a<r.length;a++){const x=r[a],b=o[0],T=p.sub(f),M=x.sub(f),z=b.sub(f),B=ra(T,T),N=ra(T,M),q=ra(M,M),$=ra(z,T),K=ra(z,M),J=B*q-N*N,te=(q*$-N*K)/J,ae=(B*K-N*$)/J,ve=f.z*(1-te-ae)+p.z*te+x.z*ae;if(isFinite(ve))return ve}return 1/0}{let a=1/0;for(const f of r)a=Math.min(a,f.z);return a}}const Yd=yn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:co}=Yd,ly=yn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Im}=ly,h_=Math.cos(Math.PI/180*37.5),Wd=Math.pow(2,14)/.5;class Ff{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((a=>a.id)),this.index=r.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((a=>{this.gradients[a.id]={}})),this.layoutVertexArray=new Ae,this.layoutVertexArray2=new ge,this.indexArray=new Xe,this.programConfigurations=new _l(r.layers,r.zoom),this.segments=new Mt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((a=>a.isStateDependent())).map((a=>a.id))}populate(r,a,f){this.hasDependencies=zo("line",this.layers,a)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),x=!p.isConstant(),b=[];for(const{feature:T,id:M,index:z,sourceLayerIndex:B}of r){const N=this.layers[0]._featureFilter.needGeometry,q=Oo(T,N);if(!this.layers[0]._featureFilter.filter(new Fr(this.zoom),q,f))continue;const $=x?p.evaluate(q,{},f):void 0,K={id:M,properties:T.properties,type:T.type,sourceLayerIndex:B,index:z,geometry:N?q.geometry:Ns(T),patterns:{},dashes:{},sortKey:$};b.push(K)}x&&b.sort(((T,M)=>T.sortKey-M.sortKey));for(const T of b){const{geometry:M,index:z,sourceLayerIndex:B}=T;this.hasDependencies?(zo("line",this.layers,a)?Tm("line",this.layers,T,{zoom:this.zoom},a):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,T,this.zoom,a),this.patternFeatures.push(T)):this.addFeature(T,M,z,f,{},{},a.subdivisionGranularity),a.featureIndex.insert(r[z].feature,M,z,B,this.index)}}update(r,a,f,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,{imagePositions:f,dashPositions:p})}addFeatures(r,a,f,p){for(const x of this.patternFeatures)this.addFeature(x,x.geometry,x.index,a,f,p,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,Im)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,co),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,f,p,x,b,T){const M=this.layers[0].layout,z=M.get("line-join").evaluate(r,{}),B=M.get("line-cap"),N=M.get("line-miter-limit"),q=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const $ of a)this.addLine($,r,z,B,N,q,p,T);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,f,{imagePositions:x,dashPositions:b,canonical:p})}addLine(r,a,f,p,x,b,T,M){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=gu(r,T?M.line.getGranularityForZoomLevel(T.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let se=0;se<r.length-1;se++)this.totalDistance+=r[se].dist(r[se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const z=Nf.types[a.type]==="Polygon";let B=r.length;for(;B>=2&&r[B-1].equals(r[B-2]);)B--;let N=0;for(;N<B-1&&r[N].equals(r[N+1]);)N++;if(B<(z?3:2))return;f==="bevel"&&(x=1.05);const q=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*B,this.layoutVertexArray,this.indexArray);let K,J,te,ae,ve;this.e1=this.e2=-1,z&&(K=r[B-2],ve=r[N].sub(K)._unit()._perp());for(let se=N;se<B;se++){if(te=se===B-1?z?r[N+1]:void 0:r[se+1],te&&r[se].equals(te))continue;ve&&(ae=ve),K&&(J=K),K=r[se],ve=te?te.sub(K)._unit()._perp():ae,ae=ae||ve;let ce=ae.add(ve);ce.x===0&&ce.y===0||ce._unit();const xe=ae.x*ve.x+ae.y*ve.y,Te=ce.x*ve.x+ce.y*ve.y,qe=Te!==0?1/Te:1/0,st=2*Math.sqrt(2-2*Te),tt=Te<h_&&J&&te,dt=ae.x*ve.y-ae.y*ve.x>0;if(tt&&se>N){const nt=K.dist(J);if(nt>2*q){const Qe=K.sub(K.sub(J)._mult(q/nt)._round());this.updateDistance(J,Qe),this.addCurrentVertex(Qe,ae,0,0,$),J=Qe}}const Pt=J&&te;let mt=Pt?f:z?"butt":p;if(Pt&&mt==="round"&&(qe<b?mt="miter":qe<=2&&(mt="fakeround")),mt==="miter"&&qe>x&&(mt="bevel"),mt==="bevel"&&(qe>2&&(mt="flipbevel"),qe<x&&(mt="miter")),J&&this.updateDistance(J,K),mt==="miter")ce._mult(qe),this.addCurrentVertex(K,ce,0,0,$);else if(mt==="flipbevel"){if(qe>100)ce=ve.mult(-1);else{const nt=qe*ae.add(ve).mag()/ae.sub(ve).mag();ce._perp()._mult(nt*(dt?-1:1))}this.addCurrentVertex(K,ce,0,0,$),this.addCurrentVertex(K,ce.mult(-1),0,0,$)}else if(mt==="bevel"||mt==="fakeround"){const nt=-Math.sqrt(qe*qe-1),Qe=dt?nt:0,jt=dt?0:nt;if(J&&this.addCurrentVertex(K,ae,Qe,jt,$),mt==="fakeround"){const kt=Math.round(180*st/Math.PI/20);for(let Nt=1;Nt<kt;Nt++){let Ot=Nt/kt;if(Ot!==.5){const Or=Ot-.5;Ot+=Ot*Or*(Ot-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Or*Or+(.848013+xe*(.215638*xe-1.06021)))}const Zt=ve.sub(ae)._mult(Ot)._add(ae)._unit()._mult(dt?-1:1);this.addHalfVertex(K,Zt.x,Zt.y,!1,dt,0,$)}}te&&this.addCurrentVertex(K,ve,-Qe,-jt,$)}else if(mt==="butt")this.addCurrentVertex(K,ce,0,0,$);else if(mt==="square"){const nt=J?1:-1;this.addCurrentVertex(K,ce,nt,nt,$)}else mt==="round"&&(J&&(this.addCurrentVertex(K,ae,0,0,$),this.addCurrentVertex(K,ae,1,1,$,!0)),te&&(this.addCurrentVertex(K,ve,-1,-1,$,!0),this.addCurrentVertex(K,ve,0,0,$)));if(tt&&se<B-1){const nt=K.dist(te);if(nt>2*q){const Qe=K.add(te.sub(K)._mult(q/nt)._round());this.updateDistance(K,Qe),this.addCurrentVertex(Qe,ve,0,0,$),K=Qe}}}}addCurrentVertex(r,a,f,p,x,b=!1){const T=a.y*p-a.x,M=-a.y-a.x*p;this.addHalfVertex(r,a.x+a.y*f,a.y-a.x*f,b,!1,f,x),this.addHalfVertex(r,T,M,b,!0,-p,x),this.distance>Wd/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,a,f,p,x,b))}addHalfVertex({x:r,y:a},f,p,x,b,T,M){const z=.5*(this.lineClips?this.scaledDistance*(Wd-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(x?1:0),(a<<1)+(b?1:0),Math.round(63*f)+128,Math.round(63*p)+128,1+(T===0?0:T<0?-1:1)|(63&z)<<2,z>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const B=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,B,this.e2),M.primitiveLength++),b?this.e2=B:this.e1=B}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}hasLineDasharray(r){for(const a of r){const f=a.paint.get("line-dasharray");if(f&&!f.isConstant())return!0}return!1}addLineDashDependencies(r,a,f,p){for(const x of r){const b=x.paint.get("line-dasharray");if(!b||b.value.kind==="constant")continue;const T=x.layout.get("line-cap")==="round",M={dasharray:b.value.evaluate({zoom:f-1},a,{}),round:T},z={dasharray:b.value.evaluate({zoom:f},a,{}),round:T},B={dasharray:b.value.evaluate({zoom:f+1},a,{}),round:T},N=`${M.dasharray.join(",")},${M.round}`,q=`${z.dasharray.join(",")},${z.round}`,$=`${B.dasharray.join(",")},${B.round}`;p.dashDependencies[N]=M,p.dashDependencies[q]=z,p.dashDependencies[$]=B,a.dashes[x.id]={min:N,mid:q,max:$}}}}let _u,Ai;zt("LineBucket",Ff,{omit:["layers","patternFeatures"]});var xu={get paint(){return Ai=Ai||new Un({"line-opacity":new Ut(Ve.paint_line["line-opacity"]),"line-color":new Ut(Ve.paint_line["line-color"]),"line-translate":new Bt(Ve.paint_line["line-translate"]),"line-translate-anchor":new Bt(Ve.paint_line["line-translate-anchor"]),"line-width":new Ut(Ve.paint_line["line-width"]),"line-gap-width":new Ut(Ve.paint_line["line-gap-width"]),"line-offset":new Ut(Ve.paint_line["line-offset"]),"line-blur":new Ut(Ve.paint_line["line-blur"]),"line-dasharray":new io(Ve.paint_line["line-dasharray"]),"line-pattern":new io(Ve.paint_line["line-pattern"]),"line-gradient":new ph(Ve.paint_line["line-gradient"])})},get layout(){return _u=_u||new Un({"line-cap":new Bt(Ve.layout_line["line-cap"]),"line-join":new Ut(Ve.layout_line["line-join"]),"line-miter-limit":new Bt(Ve.layout_line["line-miter-limit"]),"line-round-limit":new Bt(Ve.layout_line["line-round-limit"]),"line-sort-key":new Ut(Ve.layout_line["line-sort-key"])})}};class Uf extends Ut{possiblyEvaluate(r,a){return a=new Fr(Math.floor(a.zoom),{now:a.now,fadeDuration:a.fadeDuration,zoomHistory:a.zoomHistory,transition:a.transition}),super.possiblyEvaluate(r,a)}evaluate(r,a,f,p){return a=zr({},a,{zoom:Math.floor(a.zoom)}),super.evaluate(r,a,f,p)}}let ys;class uy extends Sn{constructor(r,a){super(r,xu,a),this.gradientVersion=0,ys||(ys=new Uf(xu.paint.properties["line-width"].specification),ys.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const a=this.gradientExpression();this.stepInterpolant=!!(function(f){return f._styleExpression!==void 0})(a)&&a._styleExpression.expression instanceof al,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,a){super.recalculate(r,a),this.paint._values["line-floorwidth"]=ys.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Ff(r)}queryRadius(r){const a=r,f=Om(fu("line-width",this,a),fu("line-gap-width",this,a)),p=fu("line-offset",this,a);return f/2+Math.abs(p)+Rd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:a,featureState:f,geometry:p,transform:x,pixelsToTileUnits:b}){const T=ym(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,b),M=b/2*Om(this.paint.get("line-width").evaluate(a,f),this.paint.get("line-gap-width").evaluate(a,f)),z=this.paint.get("line-offset").evaluate(a,f);return z&&(p=(function(B,N){const q=[];for(let $=0;$<B.length;$++){const K=vm(B[$]),J=[];for(let te=0;te<K.length;te++){const ae=K[te],ve=K[te-1],se=K[te+1],ce=te===0?new P(0,0):ae.sub(ve)._unit()._perp(),xe=te===K.length-1?new P(0,0):se.sub(ae)._unit()._perp(),Te=ce._add(xe)._unit(),qe=Te.x*xe.x+Te.y*xe.y;qe!==0&&Te._mult(1/qe),J.push(Te._mult(N)._add(ae))}q.push(J)}return q})(p,z*b)),(function(B,N,q){for(let $=0;$<N.length;$++){const K=N[$];if(B.length>=3){for(let J=0;J<K.length;J++)if(bl(B,K[J]))return!0}if(bi(B,K,q))return!0}return!1})(T,p,M)}isTileClipped(){return!0}}function Om(o,r){return r>0?r+2*o:o}const f_=yn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Kd=yn([{name:"a_projected_pos",components:3,type:"Float32"}],4);yn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cy=yn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);yn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ho=yn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),d_=yn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function fo(o,r,a){return o.sections.forEach((f=>{f.text=(function(p,x,b){const T=x.layout.get("text-transform").evaluate(b,{});return T==="uppercase"?p=p.toLocaleUpperCase():T==="lowercase"&&(p=p.toLocaleLowerCase()),no.applyArabicShaping&&(p=no.applyArabicShaping(p)),p})(f.text,r,a)})),o}yn([{name:"triangle",components:3,type:"Uint16"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),yn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),yn([{type:"Float32",name:"offsetX"}]),yn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),yn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var di=24;const Vf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},hb={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},mc={40:!0};function Qd(o,r,a,f,p,x){if("fontStack"in r){const b=a[r.fontStack],T=b&&b[o];return T?T.metrics.advance*r.scale+p:0}{const b=f[r.imageName];return b?b.displaySize[0]*r.scale*di/x+p:0}}function zm(o,r,a,f){const p=Math.pow(o-r,2);return f?o<r?p/2:2*p:p+Math.abs(a)*a}function Gf(o,r,a){let f=0;return o===10&&(f-=1e4),a&&(f+=150),o!==40&&o!==65288||(f+=50),r!==41&&r!==65289||(f+=50),f}function hy(o,r,a,f,p,x){let b=null,T=zm(r,a,p,x);for(const M of f){const z=zm(r-M.x,a,p,x)+M.badness;z<=T&&(b=M,T=z)}return{index:o,x:r,priorBreak:b,badness:T}}function fy(o){return o?fy(o.priorBreak).concat(o.index):[]}class Mh{constructor(r="",a=[],f=[]){this.text=r,this.sections=a,this.sectionIndex=f,this.imageSectionID=null}static fromFeature(r,a){const f=new Mh;for(let p=0;p<r.sections.length;p++){const x=r.sections[p];x.image?f.addImageSection(x):f.addTextSection(x,a)}return f}length(){return[...this.text].length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}verticalizePunctuation(){this.text=(function(r){let a="",f={premature:!0,value:void 0};const p=r[Symbol.iterator]();let x=p.next();const b=r[Symbol.iterator]();b.next();let T=b.next();for(;!x.done;)a+=!T.done&&hs(T.value.codePointAt(0))&&!Vf[T.value]||!f.premature&&hs(f.value.codePointAt(0))&&!Vf[f.value]||!Vf[x.value]?x.value:Vf[x.value],f={value:x.value,premature:!1},x=p.next(),T=b.next();return a})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const r=this.text.match(/^\s*/),a=r?r[0].length:0,f=this.text.match(/\S\s*$/),p=f?f[0].length-1:0;this.text=this.text.substring(a,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(a,this.sectionIndex.length-p)}substring(r,a){const f=[...this.text].slice(r,a).join(""),p=this.sectionIndex.slice(r,a);return new Mh(f,this.sections,p)}toCodeUnitIndex(r){return[...this.text].slice(0,r).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((r,a)=>Math.max(r,this.sections[a].scale)),0)}getMaxImageSize(r){let a=0,f=0;for(let p=0;p<this.length();p++){const x=this.getSection(p);if("imageName"in x){const b=r[x.imageName];if(!b)continue;const T=b.displaySize;a=Math.max(a,T[0]),f=Math.max(f,T[1])}}return{maxImageWidth:a,maxImageHeight:f}}addTextSection(r,a){this.text+=r.text,this.sections.push({scale:r.scale||1,verticalAlign:r.verticalAlign||"bottom",fontStack:r.fontStack||a});const f=this.sections.length-1;this.sectionIndex.push(...[...r.text].map((()=>f)))}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void ar("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push({scale:1,verticalAlign:r.verticalAlign||"bottom",imageName:a}),this.sectionIndex.push(this.sections.length-1)):ar("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(r,a,f,p,x){const b=[],T=this.determineAverageLineWidth(r,a,f,p,x),M=this.hasZeroWidthSpaces();let z=0,B=0;const N=this.text[Symbol.iterator]();let q=N.next();const $=this.text[Symbol.iterator]();$.next();let K=$.next();const J=this.text[Symbol.iterator]();J.next(),J.next();let te=J.next();for(;!q.done;){const ae=this.getSection(B),ve=q.value.codePointAt(0);if(uh(ve)||(z+=Qd(ve,ae,f,p,r,x)),!K.done){const se=ls(ve),ce=K.value.codePointAt(0);(hb[ve]||se||"imageName"in ae||!te.done&&mc[ce])&&b.push(hy(B+1,z,T,b,Gf(ve,ce,se&&M),!1))}B++,q=N.next(),K=$.next(),te=J.next()}return fy(hy(this.length(),z,T,b,0,!0))}determineAverageLineWidth(r,a,f,p,x){let b=0,T=0;for(const M of this.text){const z=this.getSection(T);b+=Qd(M.codePointAt(0),z,f,p,r,x),T++}return b/Math.max(1,Math.ceil(b/a))}}const km=4294967296,Jd=1/km,Rm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Lm{constructor(r=new Uint8Array(16)){this.buf=ArrayBuffer.isView(r)?r:new Uint8Array(r),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(r,a,f=this.length){for(;this.pos<f;){const p=this.readVarint(),x=p>>3,b=this.pos;this.type=7&p,r(x,a,this),this.pos===b&&this.skip(p)}return a}readMessage(r,a){return this.readFields(r,a,this.readVarint()+this.pos)}readFixed32(){const r=this.dataView.getUint32(this.pos,!0);return this.pos+=4,r}readSFixed32(){const r=this.dataView.getInt32(this.pos,!0);return this.pos+=4,r}readFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*km;return this.pos+=8,r}readSFixed64(){const r=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*km;return this.pos+=8,r}readFloat(){const r=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,r}readDouble(){const r=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,r}readVarint(r){const a=this.buf;let f,p;return p=a[this.pos++],f=127&p,p<128?f:(p=a[this.pos++],f|=(127&p)<<7,p<128?f:(p=a[this.pos++],f|=(127&p)<<14,p<128?f:(p=a[this.pos++],f|=(127&p)<<21,p<128?f:(p=a[this.pos],f|=(15&p)<<28,(function(x,b,T){const M=T.buf;let z,B;if(B=M[T.pos++],z=(112&B)>>4,B<128||(B=M[T.pos++],z|=(127&B)<<3,B<128)||(B=M[T.pos++],z|=(127&B)<<10,B<128)||(B=M[T.pos++],z|=(127&B)<<17,B<128)||(B=M[T.pos++],z|=(127&B)<<24,B<128)||(B=M[T.pos++],z|=(1&B)<<31,B<128))return qf(x,z,b);throw new Error("Expected varint not more than 10 bytes")})(f,r,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const r=this.readVarint();return r%2==1?(r+1)/-2:r/2}readBoolean(){return!!this.readVarint()}readString(){const r=this.readVarint()+this.pos,a=this.pos;return this.pos=r,r-a>=12&&Rm?Rm.decode(this.buf.subarray(a,r)):(function(f,p,x){let b="",T=p;for(;T<x;){const M=f[T];let z,B,N,q=null,$=M>239?4:M>223?3:M>191?2:1;if(T+$>x)break;$===1?M<128&&(q=M):$===2?(z=f[T+1],(192&z)==128&&(q=(31&M)<<6|63&z,q<=127&&(q=null))):$===3?(z=f[T+1],B=f[T+2],(192&z)==128&&(192&B)==128&&(q=(15&M)<<12|(63&z)<<6|63&B,(q<=2047||q>=55296&&q<=57343)&&(q=null))):$===4&&(z=f[T+1],B=f[T+2],N=f[T+3],(192&z)==128&&(192&B)==128&&(192&N)==128&&(q=(15&M)<<18|(63&z)<<12|(63&B)<<6|63&N,(q<=65535||q>=1114112)&&(q=null))),q===null?(q=65533,$=1):q>65535&&(q-=65536,b+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),b+=String.fromCharCode(q),T+=$}return b})(this.buf,a,r)}readBytes(){const r=this.readVarint()+this.pos,a=this.buf.subarray(this.pos,r);return this.pos=r,a}readPackedVarint(r=[],a){const f=this.readPackedEnd();for(;this.pos<f;)r.push(this.readVarint(a));return r}readPackedSVarint(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSVarint());return r}readPackedBoolean(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readBoolean());return r}readPackedFloat(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFloat());return r}readPackedDouble(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readDouble());return r}readPackedFixed32(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFixed32());return r}readPackedSFixed32(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSFixed32());return r}readPackedFixed64(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readFixed64());return r}readPackedSFixed64(r=[]){const a=this.readPackedEnd();for(;this.pos<a;)r.push(this.readSFixed64());return r}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(r){const a=7&r;if(a===0)for(;this.buf[this.pos++]>127;);else if(a===2)this.pos=this.readVarint()+this.pos;else if(a===5)this.pos+=4;else{if(a!==1)throw new Error(`Unimplemented type: ${a}`);this.pos+=8}}writeTag(r,a){this.writeVarint(r<<3|a)}realloc(r){let a=this.length||16;for(;a<this.pos+r;)a*=2;if(a!==this.length){const f=new Uint8Array(a);f.set(this.buf),this.buf=f,this.dataView=new DataView(f.buffer),this.length=a}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeSFixed32(r){this.realloc(4),this.dataView.setInt32(this.pos,r,!0),this.pos+=4}writeFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*Jd),!0),this.pos+=8}writeSFixed64(r){this.realloc(8),this.dataView.setInt32(this.pos,-1&r,!0),this.dataView.setInt32(this.pos+4,Math.floor(r*Jd),!0),this.pos+=8}writeVarint(r){(r=+r||0)>268435455||r<0?(function(a,f){let p,x;if(a>=0?(p=a%4294967296|0,x=a/4294967296|0):(p=~(-a%4294967296),x=~(-a/4294967296),4294967295^p?p=p+1|0:(p=0,x=x+1|0)),a>=18446744073709552e3||a<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(b,T,M){M.buf[M.pos++]=127&b|128,b>>>=7,M.buf[M.pos++]=127&b|128,b>>>=7,M.buf[M.pos++]=127&b|128,b>>>=7,M.buf[M.pos++]=127&b|128,M.buf[M.pos]=127&(b>>>=7)})(p,0,f),(function(b,T){const M=(7&b)<<4;T.buf[T.pos++]|=M|((b>>>=3)?128:0),b&&(T.buf[T.pos++]=127&b|((b>>>=7)?128:0),b&&(T.buf[T.pos++]=127&b|((b>>>=7)?128:0),b&&(T.buf[T.pos++]=127&b|((b>>>=7)?128:0),b&&(T.buf[T.pos++]=127&b|((b>>>=7)?128:0),b&&(T.buf[T.pos++]=127&b)))))})(x,f)})(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))}writeSVarint(r){this.writeVarint(r<0?2*-r-1:2*r)}writeBoolean(r){this.writeVarint(+r)}writeString(r){r=String(r),this.realloc(4*r.length),this.pos++;const a=this.pos;this.pos=(function(p,x,b){for(let T,M,z=0;z<x.length;z++){if(T=x.charCodeAt(z),T>55295&&T<57344){if(!M){T>56319||z+1===x.length?(p[b++]=239,p[b++]=191,p[b++]=189):M=T;continue}if(T<56320){p[b++]=239,p[b++]=191,p[b++]=189,M=T;continue}T=M-55296<<10|T-56320|65536,M=null}else M&&(p[b++]=239,p[b++]=191,p[b++]=189,M=null);T<128?p[b++]=T:(T<2048?p[b++]=T>>6|192:(T<65536?p[b++]=T>>12|224:(p[b++]=T>>18|240,p[b++]=T>>12&63|128),p[b++]=T>>6&63|128),p[b++]=63&T|128)}return b})(this.buf,r,this.pos);const f=this.pos-a;f>=128&&p_(a,f,this),this.pos=a-1,this.writeVarint(f),this.pos+=f}writeFloat(r){this.realloc(4),this.dataView.setFloat32(this.pos,r,!0),this.pos+=4}writeDouble(r){this.realloc(8),this.dataView.setFloat64(this.pos,r,!0),this.pos+=8}writeBytes(r){const a=r.length;this.writeVarint(a),this.realloc(a);for(let f=0;f<a;f++)this.buf[this.pos++]=r[f]}writeRawMessage(r,a){this.pos++;const f=this.pos;r(a,this);const p=this.pos-f;p>=128&&p_(f,p,this),this.pos=f-1,this.writeVarint(p),this.pos+=p}writeMessage(r,a,f){this.writeTag(r,2),this.writeRawMessage(a,f)}writePackedVarint(r,a){a.length&&this.writeMessage(r,m_,a)}writePackedSVarint(r,a){a.length&&this.writeMessage(r,g_,a)}writePackedBoolean(r,a){a.length&&this.writeMessage(r,y_,a)}writePackedFloat(r,a){a.length&&this.writeMessage(r,Hf,a)}writePackedDouble(r,a){a.length&&this.writeMessage(r,Bm,a)}writePackedFixed32(r,a){a.length&&this.writeMessage(r,v_,a)}writePackedSFixed32(r,a){a.length&&this.writeMessage(r,__,a)}writePackedFixed64(r,a){a.length&&this.writeMessage(r,x_,a)}writePackedSFixed64(r,a){a.length&&this.writeMessage(r,b_,a)}writeBytesField(r,a){this.writeTag(r,2),this.writeBytes(a)}writeFixed32Field(r,a){this.writeTag(r,5),this.writeFixed32(a)}writeSFixed32Field(r,a){this.writeTag(r,5),this.writeSFixed32(a)}writeFixed64Field(r,a){this.writeTag(r,1),this.writeFixed64(a)}writeSFixed64Field(r,a){this.writeTag(r,1),this.writeSFixed64(a)}writeVarintField(r,a){this.writeTag(r,0),this.writeVarint(a)}writeSVarintField(r,a){this.writeTag(r,0),this.writeSVarint(a)}writeStringField(r,a){this.writeTag(r,2),this.writeString(a)}writeFloatField(r,a){this.writeTag(r,5),this.writeFloat(a)}writeDoubleField(r,a){this.writeTag(r,1),this.writeDouble(a)}writeBooleanField(r,a){this.writeVarintField(r,+a)}}function qf(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function p_(o,r,a){const f=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(f);for(let p=a.pos-1;p>=o;p--)a.buf[p+f]=a.buf[p]}function m_(o,r){for(let a=0;a<o.length;a++)r.writeVarint(o[a])}function g_(o,r){for(let a=0;a<o.length;a++)r.writeSVarint(o[a])}function Hf(o,r){for(let a=0;a<o.length;a++)r.writeFloat(o[a])}function Bm(o,r){for(let a=0;a<o.length;a++)r.writeDouble(o[a])}function y_(o,r){for(let a=0;a<o.length;a++)r.writeBoolean(o[a])}function v_(o,r){for(let a=0;a<o.length;a++)r.writeFixed32(o[a])}function __(o,r){for(let a=0;a<o.length;a++)r.writeSFixed32(o[a])}function x_(o,r){for(let a=0;a<o.length;a++)r.writeFixed64(o[a])}function b_(o,r){for(let a=0;a<o.length;a++)r.writeSFixed64(o[a])}function w_(o,r,a){o===1&&a.readMessage(jm,r)}function jm(o,r,a){if(o===3){const{id:f,bitmap:p,width:x,height:b,left:T,top:M,advance:z}=a.readMessage(S_,{});r.push({id:f,bitmap:new jd({width:x+6,height:b+6},p),metrics:{width:x,height:b,left:T,top:M,advance:z}})}}function S_(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}function dy(o){let r=0,a=0;for(const b of o)r+=b.w*b.h,a=Math.max(a,b.w);o.sort(((b,T)=>T.h-b.h));const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let p=0,x=0;for(const b of o)for(let T=f.length-1;T>=0;T--){const M=f[T];if(!(b.w>M.w||b.h>M.h)){if(b.x=M.x,b.y=M.y,x=Math.max(x,b.y+b.h),p=Math.max(p,b.x+b.w),b.w===M.w&&b.h===M.h){const z=f.pop();z&&T<f.length&&(f[T]=z)}else b.h===M.h?(M.x+=b.w,M.w-=b.w):b.w===M.w?(M.y+=b.h,M.h-=b.h):(f.push({x:M.x+b.w,y:M.y,w:M.w-b.w,h:b.h}),M.y+=b.h,M.h-=b.h);break}}return{w:p,h:x,fill:r/(p*x)||0}}class tn{constructor(r,{pixelRatio:a,version:f,stretchX:p,stretchY:x,content:b,textFitWidth:T,textFitHeight:M}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=p,this.stretchY=x,this.content=b,this.version=f,this.textFitWidth=T,this.textFitHeight=M}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Nm{constructor(r,a){const f={},p={};this.haveRenderCallbacks=[];const x=[];this.addImages(r,f,x),this.addImages(a,p,x);const{w:b,h:T}=dy(x),M=new ga({width:b||1,height:T||1});for(const z in r){const B=r[z],N=f[z].paddedRect;ga.copy(B.data,M,{x:0,y:0},{x:N.x+1,y:N.y+1},B.data)}for(const z in a){const B=a[z],N=p[z].paddedRect,q=N.x+1,$=N.y+1,K=B.data.width,J=B.data.height;ga.copy(B.data,M,{x:0,y:0},{x:q,y:$},B.data),ga.copy(B.data,M,{x:0,y:J-1},{x:q,y:$-1},{width:K,height:1}),ga.copy(B.data,M,{x:0,y:0},{x:q,y:$+J},{width:K,height:1}),ga.copy(B.data,M,{x:K-1,y:0},{x:q-1,y:$},{width:1,height:J}),ga.copy(B.data,M,{x:0,y:0},{x:q+K,y:$},{width:1,height:J})}this.image=M,this.iconPositions=f,this.patternPositions=p}addImages(r,a,f){for(const p in r){const x=r[p],b={x:0,y:0,w:x.data.width+2,h:x.data.height+2};f.push(b),a[p]=new tn(b,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(r,a){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in r.updatedImages)this.patchUpdatedImage(this.iconPositions[f],r.getImage(f),a),this.patchUpdatedImage(this.patternPositions[f],r.getImage(f),a)}patchUpdatedImage(r,a,f){if(!r||!a||r.version===a.version)return;r.version=a.version;const[p,x]=r.tl;f.update(a.data,void 0,{x:p,y:x})}}var gc;function ep(o,r,a,f,p,x,b,T,M,z,B,N,q,$,K){const J=Mh.fromFeature(o,p);let te;N===_.az.vertical&&J.verticalizePunctuation();let ae=J.determineLineBreaks(z,x,r,f,$);const{processBidirectionalText:ve,processStyledBidirectionalText:se}=no;if(ve&&J.sections.length===1){te=[],ae=ae.map((qe=>J.toCodeUnitIndex(qe)));const Te=ve(J.toString(),ae);for(const qe of Te){const st=[...qe].map((()=>0));te.push(new Mh(qe,J.sections,st))}}else if(se){te=[],ae=ae.map((tt=>J.toCodeUnitIndex(tt)));let Te=0;const qe=[];for(const tt of J.text)qe.push(...Array(tt.length).fill(J.sectionIndex[Te])),Te++;const st=se(J.text,qe,ae);for(const tt of st){const dt=[];let Pt="";for(const mt of tt[0])dt.push(tt[1][Pt.length]),Pt+=mt;te.push(new Mh(tt[0],J.sections,dt))}}else te=(function(Te,qe){const st=[];let tt=0;for(const dt of qe)st.push(Te.substring(tt,dt)),tt=dt;return tt<Te.length()&&st.push(Te.substring(tt,Te.length())),st})(J,ae);const ce=[],xe={positionedLines:ce,text:J.toString(),top:B[1],bottom:B[1],left:B[0],right:B[0],writingMode:N,iconsInText:!1,verticalizable:!1};return(function(Te,qe,st,tt,dt,Pt,mt,nt,Qe,jt,kt,Nt){let Ot=0,Zt=0,Or=0,xr=0;const Rn=nt==="right"?1:nt==="left"?0:.5,xa=di/Nt;let Mi=0;for(const Xr of dt){Xr.trim();const Qn=Xr.getMaxScale(),ii={positionedGlyphs:[],lineOffset:0};Te.positionedLines[Mi]=ii;const xn=ii.positionedGlyphs;let Lo=0;if(!Xr.length()){Zt+=Pt,++Mi;continue}const ba=fb(tt,Xr,xa);let Bo=0;for(const qi of Xr.text){const Gn=Xr.getSection(Bo),Pi=qi.codePointAt(0),Jn=Fm(Qe,kt,Pi),Hi={glyph:Pi,imageName:null,x:Ot,y:Zt+-17,vertical:Jn,scale:1,fontStack:"",sectionIndex:Xr.getSectionIndex(Bo),metrics:null,rect:null};let Ih;if("fontStack"in Gn){if(Ih=Zf(Gn,Pi,Jn,ba,qe,st),!Ih)continue;Hi.fontStack=Gn.fontStack}else{if(Te.iconsInText=!0,Gn.scale*=xa,Ih=my(Gn,Jn,Qn,ba,tt),!Ih)continue;Lo=Math.max(Lo,Ih.imageOffset),Hi.imageName=Gn.imageName}const{rect:Eu,metrics:Yy,baselineOffset:rd}=Ih;Hi.y+=rd,Hi.scale=Gn.scale,Hi.metrics=Yy,Hi.rect=Eu,xn.push(Hi),Jn?(Te.verticalizable=!0,Ot+=("imageName"in Gn?Yy.advance:di)*Gn.scale+jt):Ot+=Yy.advance*Gn.scale+jt,Bo++}xn.length!==0&&(Or=Math.max(Ot-jt,Or),Um(xn,0,xn.length-1,Rn)),Ot=0,ii.lineOffset=Math.max(Lo,(Qn-1)*di);const Ml=Pt*Qn+Lo;Zt+=Ml,xr=Math.max(Ml,xr),++Mi}const{horizontalAlign:Ln,verticalAlign:Tn}=py(mt);(function(Xr,Qn,ii,xn,Lo,ba,Bo,Ml,qi){const Gn=(Qn-ii)*Lo;let Pi=0;Pi=ba!==Bo?-Ml*xn- -17:-xn*qi*Bo+.5*Bo;for(const Jn of Xr)for(const Hi of Jn.positionedGlyphs)Hi.x+=Gn,Hi.y+=Pi})(Te.positionedLines,Rn,Ln,Tn,Or,xr,Pt,Zt,dt.length),Te.top+=-Tn*Zt,Te.bottom=Te.top+Zt,Te.left+=-Ln*Or,Te.right=Te.left+Or})(xe,r,a,f,te,b,T,M,N,z,q,K),!(function(Te){for(const qe of Te)if(qe.positionedGlyphs.length!==0)return!1;return!0})(ce)&&xe}function py(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function fb(o,r,a){const f=r.getMaxScale()*di,{maxImageWidth:p,maxImageHeight:x}=r.getMaxImageSize(o),b=Math.max(f,x*a);return{verticalLineContentWidth:Math.max(f,p*a),horizontalLineContentHeight:b}}function A_(o){switch(o){case"top":return 0;case"center":return .5;default:return 1}}function Fm(o,r,a){return!(o===_.az.horizontal||!r&&!iu(a)||r&&(uh(a)||(f=a,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(f)))));var f}function Zf(o,r,a,f,p,x){const b=x[o.fontStack],T=(function(z,B,N,q){if(z&&z.rect)return z;const $=B[N.fontStack],K=$&&$[q];return K?{rect:null,metrics:K.metrics}:null})(b&&b[r],p,o,r);if(T===null)return null;let M;if(a)M=f.verticalLineContentWidth-o.scale*di;else{const z=A_(o.verticalAlign);M=(f.horizontalLineContentHeight-o.scale*di)*z}return{rect:T.rect,metrics:T.metrics,baselineOffset:M}}function my(o,r,a,f,p){const x=p[o.imageName];if(!x)return null;const b=x.paddedRect,T=x.displaySize,M={width:T[0],height:T[1],left:1,top:-3,advance:r?T[1]:T[0]};let z;if(r)z=f.verticalLineContentWidth-T[1]*o.scale;else{const B=A_(o.verticalAlign);z=(f.horizontalLineContentHeight-T[1]*o.scale)*B}return{rect:b,metrics:M,baselineOffset:z,imageOffset:(r?T[0]:T[1])*o.scale-di*a}}function Um(o,r,a,f){if(f===0)return;const p=o[a],x=(o[a].x+p.metrics.advance*p.scale)*f;for(let b=r;b<=a;b++)o[b].x-=x}function gy(o,r,a){const{horizontalAlign:f,verticalAlign:p}=py(a),x=r[0]-o.displaySize[0]*f,b=r[1]-o.displaySize[1]*p;return{image:o,top:b,bottom:b+o.displaySize[1],left:x,right:x+o.displaySize[0]}}function bu(o){var r,a;let f=o.left,p=o.top,x=o.right-f,b=o.bottom-p;const T=(r=o.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",M=(a=o.image.textFitHeight)!==null&&a!==void 0?a:"stretchOrShrink",z=(o.image.content[2]-o.image.content[0])/(o.image.content[3]-o.image.content[1]);if(M==="proportional"){if(T==="stretchOnly"&&x/b<z||T==="proportional"){const B=Math.ceil(b*z);f*=B/x,x=B}}else if(T==="proportional"&&M==="stretchOnly"&&z!==0&&x/b>z){const B=Math.ceil(x/z);p*=B/b,b=B}return{x1:f,y1:p,x2:f+x,y2:p+b}}function Vs(o,r,a,f,p,x){const b=o.image;let T;if(b.content){const te=b.content,ae=b.pixelRatio||1;T=[te[0]/ae,te[1]/ae,b.displaySize[0]-te[2]/ae,b.displaySize[1]-te[3]/ae]}const M=r.left*x,z=r.right*x;let B,N,q,$;a==="width"||a==="both"?($=p[0]+M-f[3],N=p[0]+z+f[1]):($=p[0]+(M+z-b.displaySize[0])/2,N=$+b.displaySize[0]);const K=r.top*x,J=r.bottom*x;return a==="height"||a==="both"?(B=p[1]+K-f[0],q=p[1]+J+f[2]):(B=p[1]+(K+J-b.displaySize[1])/2,q=B+b.displaySize[1]),{image:b,top:B,right:N,bottom:q,left:$,collisionPadding:T}}zt("ImagePosition",tn),zt("ImageAtlas",Nm),_.az=void 0,(gc=_.az||(_.az={}))[gc.none=0]="none",gc[gc.horizontal=1]="horizontal",gc[gc.vertical=2]="vertical",gc[gc.horizontalOnly=3]="horizontalOnly";const ko=128,yc=32640;function yy(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new Fr(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:p}=a;let x=0;for(;x<f.length&&f[x]<=o;)x++;x=Math.max(0,x-1);let b=x;for(;b<f.length&&f[b]<o+1;)b++;b=Math.min(f.length-1,b);const T=f[x],M=f[b];return a.kind==="composite"?{kind:"composite",minZoom:T,maxZoom:M,interpolationType:p}:{kind:"camera",minZoom:T,maxZoom:M,minSize:a.evaluate(new Fr(T)),maxSize:a.evaluate(new Fr(M)),interpolationType:p}}}function Vm(o,r,a){let f="never";const p=o.get(r);return p?f=p:o.get(a)&&(f="always"),f}const T_=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function tp(o,r,a,f,p,x,b,T,M,z,B,N,q){const $=T?Math.min(yc,Math.round(T[0])):0,K=T?Math.min(yc,Math.round(T[1])):0;o.emplaceBack(r,a,Math.round(32*f),Math.round(32*p),x,b,($<<1)+(M?1:0),K,16*z,16*B,256*N,256*q)}function vy(o,r,a){o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a),o.emplaceBack(r.x,r.y,a)}function _y(o){for(const r of o.sections)if(zs(r.text))return!0;return!1}class Gm{constructor(r){this.layoutVertexArray=new _e,this.indexArray=new Xe,this.programConfigurations=r,this.segments=new Mt,this.dynamicLayoutVertexArray=new Re,this.opacityVertexArray=new Ye,this.hasVisibleVertices=!1,this.placedSymbolArray=new E}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,f,p){this.isEmpty()||(f&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,f_.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Kd.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,T_,!0),this.opacityVertexBuffer.itemSize=1),(f||p)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}zt("SymbolBuffers",Gm);class qm{constructor(r,a,f){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new f,this.segments=new Mt,this.collisionVertexArray=new $e}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,cy.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}zt("CollisionBuffers",qm);class $f{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yy(this.zoom,a["text-size"]),this.iconSizeData=yy(this.zoom,a["icon-size"]);const f=this.layers[0].layout,p=f.get("symbol-sort-key"),x=f.get("symbol-z-order");this.canOverlap=Vm(f,"text-overlap","text-allow-overlap")!=="never"||Vm(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=x!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(x==="viewport-y"||x==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((b=>_.az[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=r.sourceID}createArrays(){this.text=new Gm(new _l(this.layers,this.zoom,(r=>/^text/.test(r)))),this.icon=new Gm(new _l(this.layers,this.zoom,(r=>/^icon/.test(r)))),this.glyphOffsetArray=new j,this.lineVertexArray=new F,this.symbolInstances=new R,this.textAnchorOffsets=new X}calculateGlyphDependencies(r,a,f,p,x){for(const b of r)if(a[b.codePointAt(0)]=!0,(f||p)&&x){const T=Vf[b];T&&(a[T.codePointAt(0)]=!0)}}populate(r,a,f){const p=this.layers[0],x=p.layout,b=x.get("text-font"),T=x.get("text-field"),M=x.get("icon-image"),z=(T.value.kind!=="constant"||T.value.value instanceof ui&&!T.value.value.isEmpty()||T.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),B=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,N=x.get("symbol-sort-key");if(this.features=[],!z&&!B)return;const q=a.iconDependencies,$=a.glyphDependencies,K=a.availableImages,J=new Fr(this.zoom);for(const{feature:te,id:ae,index:ve,sourceLayerIndex:se}of r){const ce=p._featureFilter.needGeometry,xe=Oo(te,ce);if(!p._featureFilter.filter(J,xe,f))continue;let Te,qe;if(ce||(xe.geometry=Ns(te)),z){const tt=p.getValueAndResolveTokens("text-field",xe,f,K),dt=ui.factory(tt),Pt=this.hasRTLText=this.hasRTLText||_y(dt);(!Pt||no.getRTLTextPluginStatus()==="unavailable"||Pt&&no.isParsed())&&(Te=fo(dt,p,xe))}if(B){const tt=p.getValueAndResolveTokens("icon-image",xe,f,K);qe=tt instanceof Wi?tt:Wi.fromString(tt)}if(!Te&&!qe)continue;const st=this.sortFeaturesByKey?N.evaluate(xe,{},f):void 0;if(this.features.push({id:ae,text:Te,icon:qe,index:ve,sourceLayerIndex:se,geometry:xe.geometry,properties:te.properties,type:Nf.types[te.type],sortKey:st}),qe&&(q[qe.name]=!0),Te){const tt=b.evaluate(xe,{},f).join(","),dt=x.get("text-rotation-alignment")!=="viewport"&&x.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.az.vertical)>=0;for(const Pt of Te.sections)if(Pt.image)q[Pt.image.name]=!0;else{const mt=us(Te.toString()),nt=Pt.fontStack||tt,Qe=$[nt]=$[nt]||{};this.calculateGlyphDependencies(Pt.text,Qe,dt,this.allowVerticalPlacement,mt)}}}x.get("symbol-placement")==="line"&&(this.features=(function(te){const ae={},ve={},se=[];let ce=0;function xe(tt){se.push(te[tt]),ce++}function Te(tt,dt,Pt){const mt=ve[tt];return delete ve[tt],ve[dt]=mt,se[mt].geometry[0].pop(),se[mt].geometry[0]=se[mt].geometry[0].concat(Pt[0]),mt}function qe(tt,dt,Pt){const mt=ae[dt];return delete ae[dt],ae[tt]=mt,se[mt].geometry[0].shift(),se[mt].geometry[0]=Pt[0].concat(se[mt].geometry[0]),mt}function st(tt,dt,Pt){const mt=Pt?dt[0][dt[0].length-1]:dt[0][0];return`${tt}:${mt.x}:${mt.y}`}for(let tt=0;tt<te.length;tt++){const dt=te[tt],Pt=dt.geometry,mt=dt.text?dt.text.toString():null;if(!mt){xe(tt);continue}const nt=st(mt,Pt),Qe=st(mt,Pt,!0);if(nt in ve&&Qe in ae&&ve[nt]!==ae[Qe]){const jt=qe(nt,Qe,Pt),kt=Te(nt,Qe,se[jt].geometry);delete ae[nt],delete ve[Qe],ve[st(mt,se[kt].geometry,!0)]=kt,se[jt].geometry=null}else nt in ve?Te(nt,Qe,Pt):Qe in ae?qe(nt,Qe,Pt):(xe(tt),ae[nt]=ce-1,ve[Qe]=ce-1)}return se.filter((tt=>tt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((te,ae)=>te.sortKey-ae.sortKey))}update(r,a,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,{imagePositions:f}),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,{imagePositions:f}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const f=this.lineVertexArray.length;if(r.segment!==void 0){let p=r.dist(a[r.segment+1]),x=r.dist(a[r.segment]);const b={};for(let T=r.segment+1;T<a.length;T++)b[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:p},T<a.length-1&&(p+=a[T+1].dist(a[T]));for(let T=r.segment||0;T>=0;T--)b[T]={x:a[T].x,y:a[T].y,tileUnitDistanceFromAnchor:x},T>0&&(x+=a[T-1].dist(a[T]));for(let T=0;T<a.length;T++){const M=b[T];this.lineVertexArray.emplaceBack(M.x,M.y,M.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(r,a,f,p,x,b,T,M,z,B,N,q){const $=r.indexArray,K=r.layoutVertexArray,J=r.segments.prepareSegment(4*a.length,K,$,this.canOverlap?b.sortKey:void 0),te=this.glyphOffsetArray.length,ae=J.vertexLength,ve=this.allowVerticalPlacement&&T===_.az.vertical?Math.PI/2:0,se=b.text&&b.text.sections;for(let ce=0;ce<a.length;ce++){const{tl:xe,tr:Te,bl:qe,br:st,tex:tt,pixelOffsetTL:dt,pixelOffsetBR:Pt,minFontScaleX:mt,minFontScaleY:nt,glyphOffset:Qe,isSDF:jt,sectionIndex:kt}=a[ce],Nt=J.vertexLength,Ot=Qe[1];tp(K,M.x,M.y,xe.x,Ot+xe.y,tt.x,tt.y,f,jt,dt.x,dt.y,mt,nt),tp(K,M.x,M.y,Te.x,Ot+Te.y,tt.x+tt.w,tt.y,f,jt,Pt.x,dt.y,mt,nt),tp(K,M.x,M.y,qe.x,Ot+qe.y,tt.x,tt.y+tt.h,f,jt,dt.x,Pt.y,mt,nt),tp(K,M.x,M.y,st.x,Ot+st.y,tt.x+tt.w,tt.y+tt.h,f,jt,Pt.x,Pt.y,mt,nt),vy(r.dynamicLayoutVertexArray,M,ve),$.emplaceBack(Nt,Nt+2,Nt+1),$.emplaceBack(Nt+1,Nt+2,Nt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Qe[0]),ce!==a.length-1&&kt===a[ce+1].sectionIndex||r.programConfigurations.populatePaintArrays(K.length,b,b.index,{imagePositions:{},canonical:q,formattedSection:se&&se[kt]})}r.placedSymbolArray.emplaceBack(M.x,M.y,te,this.glyphOffsetArray.length-te,ae,z,B,M.segment,f?f[0]:0,f?f[1]:0,p[0],p[1],T,0,!1,0,N)}_addCollisionDebugVertex(r,a,f,p,x,b){return a.emplaceBack(0,0),r.emplaceBack(f.x,f.y,p,x,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(r,a,f,p,x,b,T){const M=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),z=M.vertexLength,B=x.layoutVertexArray,N=x.collisionVertexArray,q=T.anchorX,$=T.anchorY;this._addCollisionDebugVertex(B,N,b,q,$,new P(r,a)),this._addCollisionDebugVertex(B,N,b,q,$,new P(f,a)),this._addCollisionDebugVertex(B,N,b,q,$,new P(f,p)),this._addCollisionDebugVertex(B,N,b,q,$,new P(r,p)),M.vertexLength+=4;const K=x.indexArray;K.emplaceBack(z,z+1),K.emplaceBack(z+1,z+2),K.emplaceBack(z+2,z+3),K.emplaceBack(z+3,z),M.primitiveLength+=4}addDebugCollisionBoxes(r,a,f,p){for(let x=r;x<a;x++){const b=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,p?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new qm(Ge,ho.members,St),this.iconCollisionBox=new qm(Ge,ho.members,St);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this.addDebugCollisionBoxes(a.textBoxStartIndex,a.textBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a,!0),this.addDebugCollisionBoxes(a.iconBoxStartIndex,a.iconBoxEndIndex,a,!1),this.addDebugCollisionBoxes(a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a,!1)}}_deserializeCollisionBoxesForSymbol(r,a,f,p,x,b,T,M,z){const B={};for(let N=a;N<f;N++){const q=r.get(N);B.textBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.textFeatureIndex=q.featureIndex;break}for(let N=p;N<x;N++){const q=r.get(N);B.verticalTextBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.verticalTextFeatureIndex=q.featureIndex;break}for(let N=b;N<T;N++){const q=r.get(N);B.iconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.iconFeatureIndex=q.featureIndex;break}for(let N=M;N<z;N++){const q=r.get(N);B.verticalIconBox={x1:q.x1,y1:q.y1,x2:q.x2,y2:q.y2,anchorPointX:q.anchorPointX,anchorPointY:q.anchorPointY},B.verticalIconFeatureIndex=q.featureIndex;break}return B}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const f=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const f=r.placedSymbolArray.get(a),p=f.vertexStartIndex+4*f.numGlyphs;for(let x=f.vertexStartIndex;x<p;x+=4)r.indexArray.emplaceBack(x,x+2,x+1),r.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),f=Math.cos(r),p=[],x=[],b=[];for(let T=0;T<this.symbolInstances.length;++T){b.push(T);const M=this.symbolInstances.get(T);p.push(0|Math.round(a*M.anchorX+f*M.anchorY)),x.push(M.featureIndex)}return b.sort(((T,M)=>p[T]-p[M]||x[M]-x[T])),b}addToSortKeyRanges(r,a){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===a?f.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const f=this.symbolInstances.get(a);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach(((p,x,b)=>{p>=0&&b.indexOf(p)===x&&this.addIndicesForPlacedSymbol(this.text,p)})),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Hm,Zm;zt("SymbolBucket",$f,{omit:["layers","collisionBoxArray","features","compareText"]}),$f.MAX_GLYPHS=65535,$f.addDynamicAttributes=vy;var xy={get paint(){return Zm=Zm||new Un({"icon-opacity":new Ut(Ve.paint_symbol["icon-opacity"]),"icon-color":new Ut(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Ut(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ut(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ut(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new Bt(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bt(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ut(Ve.paint_symbol["text-opacity"]),"text-color":new Ut(Ve.paint_symbol["text-color"],{runtimeType:Pa,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new Ut(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Ut(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Ut(Ve.paint_symbol["text-halo-blur"]),"text-translate":new Bt(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new Bt(Ve.paint_symbol["text-translate-anchor"])})},get layout(){return Hm=Hm||new Un({"symbol-placement":new Bt(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new Bt(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bt(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ut(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bt(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bt(Ve.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Bt(Ve.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Bt(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bt(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bt(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ut(Ve.layout_symbol["icon-size"]),"icon-text-fit":new Bt(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bt(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ut(Ve.layout_symbol["icon-image"]),"icon-rotate":new Ut(Ve.layout_symbol["icon-rotate"]),"icon-padding":new Ut(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new Bt(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Ut(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Ut(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bt(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bt(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bt(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Ut(Ve.layout_symbol["text-field"]),"text-font":new Ut(Ve.layout_symbol["text-font"]),"text-size":new Ut(Ve.layout_symbol["text-size"]),"text-max-width":new Ut(Ve.layout_symbol["text-max-width"]),"text-line-height":new Bt(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Ut(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Ut(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Ut(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bt(Ve.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ut(Ve.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ut(Ve.layout_symbol["text-anchor"]),"text-max-angle":new Bt(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new Bt(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Ut(Ve.layout_symbol["text-rotate"]),"text-padding":new Bt(Ve.layout_symbol["text-padding"]),"text-keep-upright":new Bt(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Ut(Ve.layout_symbol["text-transform"]),"text-offset":new Ut(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new Bt(Ve.layout_symbol["text-allow-overlap"]),"text-overlap":new Bt(Ve.layout_symbol["text-overlap"]),"text-ignore-placement":new Bt(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new Bt(Ve.layout_symbol["text-optional"])})}};class E_{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:nn,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}zt("FormatSectionOverride",E_,{omit:["defaultValue"]});class vc extends Sn{constructor(r,a){super(r,xy,a)}recalculate(r,a){if(super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const p=[];for(const x of f)p.indexOf(x)<0&&p.push(x);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,a,f,p){const x=this.layout.get(r).evaluate(a,{},f,p),b=this._unevaluatedLayout._values[r];return b.isDataDriven()||fl(b.value)||!x?x:(function(T,M){return M.replace(/{([^{}]+)}/g,((z,B)=>T&&B in T?String(T[B]):""))})(a.properties,x)}createBucket(r){return new $f(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of xy.paint.overridableProperties){if(!vc.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),f=new E_(a),p=new bf(f,a.property.specification);let x=null;x=a.value.kind==="constant"||a.value.kind==="source"?new ta("source",p):new dl("composite",p,a.value.zoomStops),this.paint._values[r]=new ja(a.property,x,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,f){return!(!this.layout||a.isDataDriven()||f.isDataDriven())&&vc.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const f=r.get("text-field"),p=xy.paint.properties[a];let x=!1;const b=T=>{for(const M of T)if(p.overrides&&p.overrides.hasOverride(M))return void(x=!0)};if(f.value.kind==="constant"&&f.value.value instanceof ui)b(f.value.value.sections);else if(f.value.kind==="source"||f.value.kind==="composite"){const T=z=>{x||(z instanceof Da&&mn(z.value)===Zo?b(z.value.sections):z instanceof Hc?b(z.sections):z.eachChild(T))},M=f.value;M._styleExpression&&T(M._styleExpression.expression)}return x}}let M_;var P_={get paint(){return M_=M_||new Un({"background-color":new Bt(Ve.paint_background["background-color"]),"background-pattern":new lc(Ve.paint_background["background-pattern"]),"background-opacity":new Bt(Ve.paint_background["background-opacity"])})}};class Pr extends Sn{constructor(r,a){super(r,P_,a)}}class by extends Sn{constructor(r,a){super(r,{},a),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class $m{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const wy={once:!0},Xm=63710088e-1;class Tl{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tl(Jt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,f=this.lat*a,p=r.lat*a,x=Math.sin(f)*Math.sin(p)+Math.cos(f)*Math.cos(p)*Math.cos((r.lng-this.lng)*a);return Xm*Math.acos(Math.min(x,1))}static convert(r){if(r instanceof Tl)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new Tl(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new Tl(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Xf=2*Math.PI*Xm;function rp(o){return Xf*Math.cos(o*Math.PI/180)}function C_(o){return(180+o)/360}function Sy(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function D_(o,r){return o/rp(r)}function I_(o){return 360*o-180}function np(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function Ay(o,r){return o*rp(np(r))}class Zr{constructor(r,a,f=0){this.x=+r,this.y=+a,this.z=+f}static fromLngLat(r,a=0){const f=Tl.convert(r);return new Zr(C_(f.lng),Sy(f.lat),D_(a,f.lat))}toLngLat(){return new Tl(I_(this.x),np(this.y))}toAltitude(){return Ay(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Xf*(r=np(this.y),1/Math.cos(r*Math.PI/180));var r}}function Ym(o,r,a){var f=2*Math.PI*6378137/256/Math.pow(2,a);return[o*f-2*Math.PI*6378137/2,r*f-2*Math.PI*6378137/2]}class ki{constructor(r,a,f){if(!(function(p,x,b){return!(p<0||p>25||b<0||b>=Math.pow(2,p)||x<0||x>=Math.pow(2,p))})(r,a,f))throw new Error(`x=${a}, y=${f}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=a,this.y=f,this.key=Yf(0,r,r,a,f)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a,f){const p=(function(b,T,M){var z=Ym(256*b,256*(T=Math.pow(2,M)-T-1),M),B=Ym(256*(b+1),256*(T+1),M);return z[0]+","+z[1]+","+B[0]+","+B[1]})(this.x,this.y,this.z),x=(function(b,T,M){let z,B="";for(let N=b;N>0;N--)z=1<<N-1,B+=(T&z?1:0)+(M&z?2:0);return B})(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,a>1?"@2x":"").replace(/{quadkey}/g,x).replace(/{bbox-epsg-3857}/g,p)}isChildOf(r){const a=this.z-r.z;return a>0&&r.x===this.x>>a&&r.y===this.y>>a}getTilePoint(r){const a=Math.pow(2,this.z);return new P((r.x*a-this.x)*at,(r.y*a-this.y)*at)}toString(){return`${this.z}/${this.x}/${this.y}`}}class O_{constructor(r,a){this.wrap=r,this.canonical=a,this.key=Yf(r,a.z,a.z,a.x,a.y)}}class po{constructor(r,a,f,p,x){if(this.terrainRttPosMatrix32f=null,r<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${f}`);this.overscaledZ=r,this.wrap=a,this.canonical=new ki(f,+p,+x),this.key=Yf(a,r,f,p,x)}clone(){return new po(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const a=this.canonical.z-r;return r>this.canonical.z?new po(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new po(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(r,a){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-r;return r>this.canonical.z?Yf(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y):Yf(this.wrap*+a,r,r,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(r){if(r.wrap!==this.wrap||this.overscaledZ-r.overscaledZ<=0)return!1;if(r.overscaledZ===0)return this.overscaledZ>0;const a=this.canonical.z-r.canonical.z;return!(a<0)&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new po(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,f=2*this.canonical.x,p=2*this.canonical.y;return[new po(a,this.wrap,a,f,p),new po(a,this.wrap,a,f+1,p),new po(a,this.wrap,a,f,p+1),new po(a,this.wrap,a,f+1,p+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new po(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new po(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new O_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Zr(r.x-this.wrap,r.y))}}function Yf(o,r,a,f,p){(o*=2)<0&&(o=-1*o-1);const x=1<<a;return(x*x*o+x*p+f).toString(36)+a.toString(36)+r.toString(36)}function ip(o,r){return r?o.properties[r]:o.id}function Ty(o,r){const a={id:o.id};if(r.removeAllProperties&&(delete o.removeProperties,delete o.addOrUpdateProperties,delete r.removeProperties),r.removeProperties)for(const f of r.removeProperties){const p=o.addOrUpdateProperties.findIndex((x=>x.key===f));p>-1&&o.addOrUpdateProperties.splice(p,1)}return(o.removeAllProperties||r.removeAllProperties)&&(a.removeAllProperties=!0),(o.removeProperties||r.removeProperties)&&(a.removeProperties=[...o.removeProperties||[],...r.removeProperties||[]]),(o.addOrUpdateProperties||r.addOrUpdateProperties)&&(a.addOrUpdateProperties=[...o.addOrUpdateProperties||[],...r.addOrUpdateProperties||[]]),(o.newGeometry||r.newGeometry)&&(a.newGeometry=r.newGeometry||o.newGeometry),a}function ap(o){var r,a;if(!o)return{};const f={};return f.removeAll=o.removeAll,f.remove=new Set(o.remove||[]),f.add=new Map((r=o.add)===null||r===void 0?void 0:r.map((p=>[p.id,p]))),f.update=new Map((a=o.update)===null||a===void 0?void 0:a.map((p=>[p.id,p]))),f}zt("CanonicalTileID",ki),zt("OverscaledTileID",po,{omit:["terrainRttPosMatrix32f"]});class _c{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(r){return this.minX=Math.min(this.minX,r.x),this.minY=Math.min(this.minY,r.y),this.maxX=Math.max(this.maxX,r.x),this.maxY=Math.max(this.maxY,r.y),this}expandBy(r){return this.minX-=r,this.minY-=r,this.maxX+=r,this.maxY+=r,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(r){return this.expandBy(-r)}map(r){const a=new _c;return a.extend(r(new P(this.minX,this.minY))),a.extend(r(new P(this.maxX,this.minY))),a.extend(r(new P(this.minX,this.maxY))),a.extend(r(new P(this.maxX,this.maxY))),a}static fromPoints(r){const a=new _c;for(const f of r)a.extend(f);return a}contains(r){return r.x>=this.minX&&r.x<=this.maxX&&r.y>=this.minY&&r.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(r){return!this.empty()&&!r.empty()&&r.minX>=this.minX&&r.maxX<=this.maxX&&r.minY>=this.minY&&r.maxY<=this.maxY}intersects(r){return!this.empty()&&!r.empty()&&r.minX<=this.maxX&&r.maxX>=this.minX&&r.minY<=this.maxY&&r.maxY>=this.minY}}class Ey{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const f=r[a];this._stringToNumber[f]=a,this._numberToString[a]=f}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class Wm{constructor(r,a,f,p,x){this.type="Feature",this._vectorTileFeature=r,this._x=f,this._y=p,this._z=a,this.properties=r.properties,this.id=x}projectPoint(r,a,f,p){return[360*(r.x+a)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(r.y+f)/p)*Math.PI))-90]}projectLine(r,a,f,p){return r.map((x=>this.projectPoint(x,a,f,p)))}get geometry(){if(this._geometry)return this._geometry;const r=this._vectorTileFeature,a=r.extent*Math.pow(2,this._z),f=r.extent*this._x,p=r.extent*this._y,x=r.loadGeometry();switch(r.type){case 1:{const b=[];for(const M of x)b.push(M[0]);const T=this.projectLine(b,f,p,a);this._geometry=b.length===1?{type:"Point",coordinates:T[0]}:{type:"MultiPoint",coordinates:T};break}case 2:{const b=x.map((T=>this.projectLine(T,f,p,a)));this._geometry=b.length===1?{type:"LineString",coordinates:b[0]}:{type:"MultiLineString",coordinates:b};break}case 3:{const b=c_(x),T=[];for(const M of b)T.push(M.map((z=>this.projectLine(z,f,p,a))));this._geometry=T.length===1?{type:"Polygon",coordinates:T[0]}:{type:"MultiPolygon",coordinates:T};break}default:throw new Error(`unknown feature type: ${r.type}`)}return this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const a in this)a!=="_geometry"&&a!=="_vectorTileFeature"&&a!=="_x"&&a!=="_y"&&a!=="_z"&&(r[a]=this[a]);return r}}class xc{_name;dataBuffer;nullabilityBuffer;_size;constructor(r,a,f){this._name=r,this.dataBuffer=a,typeof f=="number"?this._size=f:(this.nullabilityBuffer=f,this._size=f.size())}getValue(r){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(r)?null:this.getValueFromBuffer(r)}has(r){return this.nullabilityBuffer&&this.nullabilityBuffer.get(r)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Km extends xc{}class Qm extends Km{getValueFromBuffer(r){return this.dataBuffer[r]}}class My extends Km{getValueFromBuffer(r){return this.dataBuffer[r]}}class Py extends xc{delta;constructor(r,a,f,p){super(r,a,p),this.delta=f}}class Cy extends Py{constructor(r,a,f,p){super(r,Int32Array.of(a),f,p)}getValueFromBuffer(r){return this.dataBuffer[0]+r*this.delta}}class Dy extends xc{constructor(r,a,f){super(r,Int32Array.of(a),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}class bc{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(r,a,f,p,x=4096){this._name=r,this._geometryVector=a,this._idVector=f,this._propertyVectors=p,this._extent=x}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(r){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((a=>[a.name,a])))),this.propertyVectorsMap.get(r)}*[Symbol.iterator](){const r=this.geometryVector[Symbol.iterator]();let a=0;for(;a<this.numFeatures;){let f;this.idVector&&(f=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(a)):this.idVector.getValue(a));const p=r?.next().value,x={};for(const b of this.propertyVectors){if(!b)continue;const T=b.name,M=b.getValue(a);M!==null&&(x[T]=M)}a++,yield{id:f,geometry:p,properties:x}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const r=[],a=this.geometryVector.getGeometries();for(let f=0;f<this.numFeatures;f++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(f)):this.idVector.getValue(f));const x={coordinates:a[f],type:this.geometryVector.geometryType(f)},b={};for(const T of this.propertyVectors){if(!T)continue;const M=T.name,z=T.getValue(f);z!==null&&(b[M]=z)}r.push({id:p,geometry:x,properties:b})}return r}containsMaxSaveIntegerValues(r){return r instanceof Qm||r instanceof Dy&&r instanceof Cy||r instanceof My}}class z_{value;constructor(r){this.value=r}get(){return this.value}set(r){this.value=r}increment(){return this.value++}add(r){this.value+=r}}var vr,Gs,Vi,qs,wc,ya,ni,Ti,Ro,Ga;function Ei(o,r,a){const f=new Int32Array(a);let p=0,x=r.get();for(let b=0;b<f.length;b++){let T=o[x++],M=127&T;T<128||(T=o[x++],M|=(127&T)<<7,T<128||(T=o[x++],M|=(127&T)<<14,T<128||(T=o[x++],M|=(127&T)<<21,T<128||(T=o[x++],M|=(15&T)<<28)))),f[p++]=M}return r.set(x),f}function op(o,r,a){const f=new BigInt64Array(a);for(let p=0;p<f.length;p++)f[p]=Jm(o,r);return f}function k_(o,r){let a,f;return f=o[r.get()],r.increment(),a=127&f,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<7,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<14,f<128?a:(f=o[r.get()],r.increment(),a|=(127&f)<<21,f<128?a:(f=o[r.get()],a|=(15&f)<<28,(function(p,x,b){let T,M;if(M=x[b.get()],b.increment(),T=(112&M)>>4,M<128||(M=x[b.get()],b.increment(),T|=(127&M)<<3,M<128)||(M=x[b.get()],b.increment(),T|=(127&M)<<10,M<128)||(M=x[b.get()],b.increment(),T|=(127&M)<<17,M<128)||(M=x[b.get()],b.increment(),T|=(127&M)<<24,M<128)||(M=x[b.get()],b.increment(),T|=(1&M)<<31,M<128))return 4294967296*T+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(a,o,r)))))}function Wf(o,r,a,f){throw new Error("FastPFor is not implemented yet.")}function Gi(o){return o>>>1^-(1&o)}function Ph(o){return o>>1n^-(1n&o)}function Jm(o,r){let a=0n,f=0,p=r.get();for(;p<o.length;){const x=o[p++];if(a|=BigInt(127&x)<<BigInt(f),!(128&x))break;if(f+=7,f>=64)throw new Error("Varint too long")}return r.set(p),a}function El(o,r,a){const f=new Int32Array(a);let p=0;for(let x=0;x<r;x++){const b=o[x];f.fill(o[x+r],p,p+b),p+=b}return f}function R_(o,r,a){const f=new BigInt64Array(a);let p=0;for(let x=0;x<r;x++){const b=Number(o[x]);f.fill(o[x+r],p,p+b),p+=b}return f}function L_(o,r,a){const f=new Float64Array(a);let p=0;for(let x=0;x<r;x++){const b=o[x];f.fill(o[x+r],p,p+b),p+=b}return f}function Sc(o){const r=o.length/4*4;let a=1;if(r>=4)for(let f=o[0];a<r-4;a+=4)f=o[a]+=f,f=o[a+1]+=f,f=o[a+2]+=f,f=o[a+3]+=f;for(;a!=o.length;)o[a]+=o[a-1],++a}function Iy(o){o[0]=o[0]>>>1^-(1&o[0]),o[1]=o[1]>>>1^-(1&o[1]);const r=o.length/4*4;let a=2;if(r>=4)for(;a<r-4;a+=4){const f=o[a],p=o[a+1],x=o[a+2],b=o[a+3];o[a]=(f>>>1^-(1&f))+o[a-2],o[a+1]=(p>>>1^-(1&p))+o[a-1],o[a+2]=(x>>>1^-(1&x))+o[a],o[a+3]=(b>>>1^-(1&b))+o[a+1]}for(;a!=o.length;a+=2)o[a]=(o[a]>>>1^-(1&o[a]))+o[a-2],o[a+1]=(o[a+1]>>>1^-(1&o[a+1]))+o[a-1]}(function(o){o.NONE="NONE",o.DELTA="DELTA",o.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",o.RLE="RLE",o.MORTON="MORTON",o.PDE="PDE"})(vr||(vr={})),(function(o){o.NONE="NONE",o.FAST_PFOR="FAST_PFOR",o.VARINT="VARINT",o.ALP="ALP"})(Gs||(Gs={})),(function(o){o.PRESENT="PRESENT",o.DATA="DATA",o.OFFSET="OFFSET",o.LENGTH="LENGTH"})(Vi||(Vi={}));class Oy{_dictionaryType;_offsetType;_lengthType;constructor(r,a,f){this._dictionaryType=r,this._offsetType=a,this._lengthType=f}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function va(o,r){const a=(function(f,p){const x=f[p.get()],b=Object.values(Vi)[x>>4];let T=null;switch(b){case Vi.DATA:T=new Oy(Object.values(qs)[15&x]);break;case Vi.OFFSET:T=new Oy(null,Object.values(wc)[15&x]);break;case Vi.LENGTH:T=new Oy(null,null,Object.values(ya)[15&x])}p.increment();const M=f[p.get()],z=Object.values(vr)[M>>5],B=Object.values(vr)[M>>2&7],N=Object.values(Gs)[3&M];p.increment();const q=Ei(f,p,2),$=q[0];return{physicalStreamType:b,logicalStreamType:T,logicalLevelTechnique1:z,logicalLevelTechnique2:B,physicalLevelTechnique:N,numValues:$,byteLength:q[1],decompressedCount:$}})(o,r);return a.logicalLevelTechnique1===vr.MORTON?(function(f,p,x){const b=Ei(p,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:f.decompressedCount,numBits:b[0],coordinateShift:b[1]}})(a,o,r):vr.RLE!==a.logicalLevelTechnique1&&vr.RLE!==a.logicalLevelTechnique2||Gs.NONE===a.physicalLevelTechnique?a:(function(f,p,x){const b=Ei(p,x,2);return{physicalStreamType:f.physicalStreamType,logicalStreamType:f.logicalStreamType,logicalLevelTechnique1:f.logicalLevelTechnique1,logicalLevelTechnique2:f.logicalLevelTechnique2,physicalLevelTechnique:f.physicalLevelTechnique,numValues:f.numValues,byteLength:f.byteLength,decompressedCount:b[1],runs:b[0],numRleValues:b[1]}})(a,o,r)}(function(o){o.NONE="NONE",o.SINGLE="SINGLE",o.SHARED="SHARED",o.VERTEX="VERTEX",o.MORTON="MORTON",o.FSST="FSST"})(qs||(qs={})),(function(o){o.VERTEX="VERTEX",o.INDEX="INDEX",o.STRING="STRING",o.KEY="KEY"})(wc||(wc={})),(function(o){o.VAR_BINARY="VAR_BINARY",o.GEOMETRIES="GEOMETRIES",o.PARTS="PARTS",o.RINGS="RINGS",o.TRIANGLES="TRIANGLES",o.SYMBOL="SYMBOL",o.DICTIONARY="DICTIONARY"})(ya||(ya={})),(function(o){o[o.FLAT=0]="FLAT",o[o.CONST=1]="CONST",o[o.SEQUENCE=2]="SEQUENCE",o[o.DICTIONARY=3]="DICTIONARY",o[o.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(ni||(ni={}));class Hs{values;_size;constructor(r,a){this.values=r,this._size=a}get(r){const a=Math.floor(r/8);return(this.values[a]>>r%8&1)==1}set(r,a){const f=Math.floor(r/8);this.values[f]=this.values[f]|(a?1:0)<<r%8}getInt(r){const a=Math.floor(r/8);return this.values[a]>>r%8&1}size(){return this._size}getBuffer(){return this.values}}function _a(o,r,a,f,p){return(function(x,b,T){switch(b.logicalLevelTechnique1){case vr.DELTA:return b.logicalLevelTechnique2===vr.RLE?(function(M,z,B){const N=new Int32Array(B);let q=0,$=0;for(let K=0;K<z;K++){const J=M[K],te=Gi(M[K+z]);for(let ae=0;ae<J;ae++)$+=te,N[q++]=$}return N})(x,b.runs,b.numRleValues):((function(M){M[0]=M[0]>>>1^-(1&M[0]);const z=M.length/4*4;let B=1;if(z>=4)for(;B<z-4;B+=4){const N=M[B],q=M[B+1],$=M[B+2],K=M[B+3];M[B]=(N>>>1^-(1&N))+M[B-1],M[B+1]=(q>>>1^-(1&q))+M[B],M[B+2]=($>>>1^-(1&$))+M[B+1],M[B+3]=(K>>>1^-(1&K))+M[B+2]}for(;B!=M.length;++B)M[B]=(M[B]>>>1^-(1&M[B]))+M[B-1]})(x),x);case vr.RLE:return(function(M,z,B){return B?(function(N,q,$){const K=new Int32Array($);let J=0;for(let te=0;te<q;te++){const ae=N[te];let ve=N[te+q];ve=ve>>>1^-(1&ve),K.fill(ve,J,J+ae),J+=ae}return K})(M,z.runs,z.numRleValues):El(M,z.runs,z.numRleValues)})(x,b,T);case vr.MORTON:return Sc(x),x;case vr.COMPONENTWISE_DELTA:return Iy(x),x;case vr.NONE:return T&&(function(M){for(let z=0;z<M.length;z++){const B=M[z];M[z]=B>>>1^-(1&B)}})(x),x;default:throw new Error(`The specified Logical level technique is not supported: ${b.logicalLevelTechnique1}`)}})(eg(o,r,a),a,f)}function Ac(o,r,a){return(function(f,p){if(p.logicalLevelTechnique1===vr.DELTA&&p.logicalLevelTechnique2===vr.NONE)return(function(b){const T=new Int32Array(b.length+1);T[0]=0,T[1]=Gi(b[0]);let M=T[1],z=2;for(;z!=T.length;++z){const B=b[z-1];M+=B>>>1^-(1&B),T[z]=T[z-1]+M}return T})(f);if(p.logicalLevelTechnique1===vr.RLE&&p.logicalLevelTechnique2===vr.NONE)return(function(b,T,M){const z=new Int32Array(M+1);z[0]=0;let B=1,N=z[0];for(let q=0;q<T;q++){const $=b[q],K=b[q+T];for(let J=B;J<B+$;J++)z[J]=K+N,N=z[J];B+=$}return z})(f,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===vr.NONE&&p.logicalLevelTechnique2===vr.NONE){(function(b){let T=0;for(let M=0;M<b.length;M++)b[M]+=T,T=b[M]})(f);const x=new Int32Array(p.numValues+1);return x[0]=0,x.set(f,1),x}if(p.logicalLevelTechnique1===vr.DELTA&&p.logicalLevelTechnique2===vr.RLE){const x=(function(b,T,M){const z=new Int32Array(M+1);z[0]=0;let B=1,N=z[0];for(let q=0;q<T;q++){const $=b[q];let K=b[q+T];K=K>>>1^-(1&K);for(let J=B;J<B+$;J++)z[J]=K+N,N=z[J];B+=$}return z})(f,p.runs,p.numRleValues);return Sc(x),x}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(eg(o,r,a),a)}function eg(o,r,a){const f=a.physicalLevelTechnique;if(f===Gs.FAST_PFOR)return Wf();if(f===Gs.VARINT)return Ei(o,r,a.numValues);if(f===Gs.NONE){const p=r.get();r.add(a.byteLength);const x=o.subarray(p,r.get());return new Int32Array(x)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function zy(o,r,a,f){const p=eg(o,r,a);if(p.length===1){const x=p[0];return f?Gi(x):x}return f?(function(x){return Gi(x[1])})(p):(function(x){return x[1]})(p)}function ky(o,r,a){return(function(f){if(f.length==2){const p=Gi(f[1]);return[p,p]}return[Gi(f[2]),Gi(f[3])]})(eg(o,r,a))}function Ch(o,r,a){return(function(f){if(f.length==2){const p=Ph(f[1]);return[p,p]}return[Ph(f[2]),Ph(f[3])]})(op(o,r,a.numValues))}function Kf(o,r,a,f){return(function(p,x,b){switch(x.logicalLevelTechnique1){case vr.DELTA:return x.logicalLevelTechnique2===vr.RLE?(function(T,M,z){const B=new BigInt64Array(z);let N=0,q=0n;for(let $=0;$<M;$++){const K=Number(T[$]),J=Ph(T[$+M]);for(let te=0;te<K;te++)q+=J,B[N++]=q}return B})(p,x.runs,x.numRleValues):((function(T){T[0]=T[0]>>1n^-(1n&T[0]);const M=T.length/4*4;let z=1;if(M>=4)for(;z<M-4;z+=4){const B=T[z],N=T[z+1],q=T[z+2],$=T[z+3];T[z]=(B>>1n^-(1n&B))+T[z-1],T[z+1]=(N>>1n^-(1n&N))+T[z],T[z+2]=(q>>1n^-(1n&q))+T[z+1],T[z+3]=($>>1n^-(1n&$))+T[z+2]}for(;z!=T.length;++z)T[z]=(T[z]>>1n^-(1n&T[z]))+T[z-1]})(p),p);case vr.RLE:return(function(T,M,z){return z?(function(B,N,q){const $=new BigInt64Array(q);let K=0;for(let J=0;J<N;J++){const te=Number(B[J]);let ae=B[J+N];ae=ae>>1n^-(1n&ae),$.fill(ae,K,K+te),K+=te}return $})(T,M.runs,M.numRleValues):R_(T,M.runs,M.numRleValues)})(p,x,b);case vr.NONE:return b&&(function(T){for(let M=0;M<T.length;M++){const z=T[M];T[M]=z>>1n^-(1n&z)}})(p),p;default:throw new Error(`The specified Logical level technique is not supported: ${x.logicalLevelTechnique1}`)}})(op(o,r,a.numValues),a,f)}function Ry(o,r,a,f){const p=op(o,r,a.numValues);if(p.length===1){const x=p[0];return f?Ph(x):x}return f?(function(x){return Ph(x[1])})(p):(function(x){return x[1]})(p)}function Ly(o,r,a,f,p){return(function(x,b,T,M){switch(b.logicalLevelTechnique1){case vr.DELTA:return b.logicalLevelTechnique2===vr.RLE&&(x=El(x,b.runs,b.numRleValues)),(function(z,B){const N=new Int32Array(z.size());let q=0;z.get(0)?(N[0]=z.get(0)?B[0]>>>1^-(1&B[0]):0,q=1):N[0]=0;let $=1;for(;$!=N.length;++$)N[$]=z.get($)?N[$-1]+(B[q]>>>1^-(1&B[q++])):N[$-1];return N})(M,x);case vr.RLE:return(function(z,B,N,q){const $=B;return N?(function(K,J,te){const ae=new Int32Array(K.size());let ve=0;for(let se=0;se<te;se++){const ce=J[se];let xe=J[se+te];xe=xe>>>1^-(1&xe);for(let Te=ve;Te<ve+ce;Te++)K.get(Te)?ae[Te]=xe:(ae[Te]=0,ve++);ve+=ce}return ae})(q,z,$.runs):(function(K,J,te){const ae=new Int32Array(K.size());let ve=0;for(let se=0;se<te;se++){const ce=J[se],xe=J[se+te];for(let Te=ve;Te<ve+ce;Te++)K.get(Te)?ae[Te]=xe:(ae[Te]=0,ve++);ve+=ce}return ae})(q,z,$.runs)})(x,b,T,M);case vr.MORTON:return Sc(x),x;case vr.COMPONENTWISE_DELTA:return Iy(x),x;case vr.NONE:return x=T?(function(z,B){const N=new Int32Array(z.size());let q=0,$=0;for(;$!=N.length;++$)if(z.get($)){const K=B[q++];N[$]=K>>>1^-(1&K)}else N[$]=0;return N})(M,x):(function(z,B){const N=new Int32Array(z.size());let q=0,$=0;for(;$!=N.length;++$)N[$]=z.get($)?B[q++]:0;return N})(M,x),x;default:throw new Error("The specified Logical level technique is not supported")}})(a.physicalLevelTechnique===Gs.FAST_PFOR?Wf():Ei(o,r,a.numValues),a,f,p)}function wu(o,r,a,f){const p=o.logicalLevelTechnique1;if(p===vr.RLE)return o.runs===1?ni.CONST:ni.FLAT;const x=r instanceof Hs?r.size():r;if(p===vr.DELTA&&o.logicalLevelTechnique2===vr.RLE){const b=o.runs,T=2;if(o.numRleValues!==x)return ni.FLAT;if(b===1)return ni.SEQUENCE;if(b===2){const M=f.get();let z;if(o.physicalLevelTechnique===Gs.VARINT)z=Ei(a,f,4);else{const B=f.get();z=new Int32Array(a.buffer,a.byteOffset+B,4)}if(f.set(M),z[2]===T&&z[3]===T)return ni.SEQUENCE}}return o.numValues===1?ni.CONST:ni.FLAT}class Qf extends Km{getValueFromBuffer(r){return this.dataBuffer[r]}}class By extends Py{constructor(r,a,f,p){super(r,BigInt64Array.of(a),f,p)}getValueFromBuffer(r){return this.dataBuffer[0]+BigInt(r)*this.delta}}class Su{_geometryOffsets;_partOffsets;_ringOffsets;constructor(r,a,f){this._geometryOffsets=r,this._partOffsets=a,this._ringOffsets=f}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function sp(o,r,a){return{x:tg(o,r)-a,y:tg(o>>1,r)-a}}function tg(o,r){let a=0;for(let f=0;f<r;f++)a|=(o&1<<2*f)>>f;return a}(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON",o[o.MULTIPOINT=3]="MULTIPOINT",o[o.MULTILINESTRING=4]="MULTILINESTRING",o[o.MULTIPOLYGON=5]="MULTIPOLYGON"})(Ti||(Ti={})),(function(o){o[o.POINT=0]="POINT",o[o.LINESTRING=1]="LINESTRING",o[o.POLYGON=2]="POLYGON"})(Ro||(Ro={})),(function(o){o[o.MORTON=0]="MORTON",o[o.VEC_2=1]="VEC_2",o[o.VEC_3=2]="VEC_3"})(Ga||(Ga={}));class rg{createPoint(r){return[[r]]}createMultiPoint(r){return r.map((a=>[a]))}createLineString(r){return[r]}createMultiLineString(r){return r}createPolygon(r,a){return[r].concat(a)}createMultiPolygon(r){return r.flat()}}function jy(o){const r=new Array(o.numGeometries);let a=1,f=1,p=1,x=0;const b=new rg;let T=0,M=0;const z=o.mortonSettings,B=o.topologyVector,N=B.geometryOffsets,q=B.partOffsets,$=B.ringOffsets,K=o.vertexOffsets,J=o.containsPolygonGeometry(),te=o.vertexBuffer;for(let ae=0;ae<o.numGeometries;ae++){const ve=o.geometryType(ae);if(ve===Ti.POINT){if(K&&K.length!==0)if(o.vertexBufferType===Ga.VEC_2){const se=2*K[M++],ce=new P(te[se],te[se+1]);r[x++]=b.createPoint(ce)}else{const se=sp(te[K[M++]],z.numBits,z.coordinateShift),ce=new P(se.x,se.y);r[x++]=b.createPoint(ce)}else{const se=new P(te[T++],te[T++]);r[x++]=b.createPoint(se)}N&&p++,q&&a++,$&&f++}else if(ve===Ti.MULTIPOINT){const se=N[p]-N[p-1];p++;const ce=new Array(se);if(K&&K.length!==0){for(let xe=0;xe<se;xe++){const Te=2*K[M++];ce[xe]=new P(te[Te],te[Te+1])}r[x++]=b.createMultiPoint(ce)}else{for(let xe=0;xe<se;xe++){const Te=te[T++],qe=te[T++];ce[xe]=new P(Te,qe)}r[x++]=b.createMultiPoint(ce)}}else if(ve===Ti.LINESTRING){let se,ce=0;J?(ce=$[f]-$[f-1],f++):ce=q[a]-q[a-1],a++,K&&K.length!==0?(se=o.vertexBufferType===Ga.VEC_2?cp(te,K,M,ce,!1):Fy(te,K,M,ce,!1,z),M+=ce):(se=Ny(te,T,ce,!1),T+=2*ce),r[x++]=b.createLineString(se),N&&p++}else if(ve===Ti.POLYGON){const se=q[a]-q[a-1];a++;const ce=new Array(se-1);let xe=$[f]-$[f-1];if(f++,K&&K.length!==0){const Te=o.vertexBufferType===Ga.VEC_2?ng(te,K,M,xe):up(te,K,M,xe,0,z);M+=xe;for(let qe=0;qe<ce.length;qe++)xe=$[f]-$[f-1],f++,ce[qe]=o.vertexBufferType===Ga.VEC_2?ng(te,K,M,xe):up(te,K,M,xe,0,z),M+=xe;r[x++]=b.createPolygon(Te,ce)}else{const Te=lp(te,T,xe);T+=2*xe;for(let qe=0;qe<ce.length;qe++)xe=$[f]-$[f-1],f++,ce[qe]=lp(te,T,xe),T+=2*xe;r[x++]=b.createPolygon(Te,ce)}N&&p++}else if(ve===Ti.MULTILINESTRING){const se=N[p]-N[p-1];p++;const ce=new Array(se);if(K&&K.length!==0){for(let xe=0;xe<se;xe++){let Te=0;J?(Te=$[f]-$[f-1],f++):Te=q[a]-q[a-1],a++;const qe=o.vertexBufferType===Ga.VEC_2?cp(te,K,M,Te,!1):Fy(te,K,M,Te,!1,z);ce[xe]=qe,M+=Te}r[x++]=b.createMultiLineString(ce)}else{for(let xe=0;xe<se;xe++){let Te=0;J?(Te=$[f]-$[f-1],f++):Te=q[a]-q[a-1],a++,ce[xe]=Ny(te,T,Te,!1),T+=2*Te}r[x++]=b.createMultiLineString(ce)}}else{if(ve!==Ti.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const se=N[p]-N[p-1];p++;const ce=new Array(se);let xe=0;if(K&&K.length!==0){for(let Te=0;Te<se;Te++){const qe=q[a]-q[a-1];a++;const st=new Array(qe-1);xe=$[f]-$[f-1],f++;const tt=o.vertexBufferType===Ga.VEC_2?ng(te,K,M,xe):up(te,K,M,xe,0,z);M+=xe;for(let dt=0;dt<st.length;dt++)xe=$[f]-$[f-1],f++,st[dt]=o.vertexBufferType===Ga.VEC_2?ng(te,K,M,xe):up(te,K,M,xe,0,z),M+=xe;ce[Te]=b.createPolygon(tt,st)}r[x++]=b.createMultiPolygon(ce)}else{for(let Te=0;Te<se;Te++){const qe=q[a]-q[a-1];a++;const st=new Array(qe-1);xe=$[f]-$[f-1],f++;const tt=lp(te,T,xe);T+=2*xe;for(let dt=0;dt<st.length;dt++){const Pt=$[f]-$[f-1];f++,st[dt]=lp(te,T,Pt),T+=2*Pt}ce[Te]=b.createPolygon(tt,st)}r[x++]=b.createMultiPolygon(ce)}}}}return r}function lp(o,r,a){return Ny(o,r,a,!0)}function ng(o,r,a,f){return cp(o,r,a,f,!0)}function up(o,r,a,f,p,x){return Fy(o,r,a,f,!0,x)}function Ny(o,r,a,f){const p=new Array(f?a+1:a);for(let x=0;x<2*a;x+=2)p[x/2]=new P(o[r+x],o[r+x+1]);return f&&(p[p.length-1]=p[0]),p}function cp(o,r,a,f,p){const x=new Array(p?f+1:f);for(let b=0;b<2*f;b+=2){const T=2*r[a+b/2];x[b/2]=new P(o[T],o[T+1])}return p&&(x[x.length-1]=x[0]),x}function Fy(o,r,a,f,p,x){const b=new Array(p?f+1:f);for(let T=0;T<f;T++){const M=sp(o[r[a+T]],x.numBits,x.coordinateShift);b[T]=new P(M.x,M.y)}return p&&(b[b.length-1]=b[0]),b}class hp{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(r,a,f,p,x){this._vertexBufferType=r,this._topologyVector=a,this._vertexOffsets=f,this._vertexBuffer=p,this._mortonSettings=x}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const r=jy(this);let a=0;for(;a<this.numGeometries;)yield{coordinates:r[a],type:this.geometryType(a)},a++}getSimpleEncodedVertex(r){const a=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getVertex(r){if(this.vertexOffsets&&this.mortonSettings){const f=sp(this.vertexBuffer[this.vertexOffsets[r]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[f.x,f.y]}const a=this.vertexOffsets?2*this.vertexOffsets[r]:2*r;return[this.vertexBuffer[a],this.vertexBuffer[a+1]]}getGeometries(){return jy(this)}get mortonSettings(){return this._mortonSettings}}class fp extends hp{_numGeometries;_geometryType;constructor(r,a,f,p,x,b,T){super(f,p,x,b,T),this._numGeometries=r,this._geometryType=a}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Ti.POLYGON||this._geometryType===Ti.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class dp extends hp{_geometryTypes;constructor(r,a,f,p,x,b){super(r,f,p,x,b),this._geometryTypes=a}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let r=0;r<this.numGeometries;r++)if(this.geometryType(r)===Ti.POLYGON||this.geometryType(r)===Ti.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class B_{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(r,a,f,p){this._triangleOffsets=r,this._indexBuffer=a,this._vertexBuffer=f,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const r=new Array(this.numGeometries),a=this._topologyVector,f=a.partOffsets,p=a.ringOffsets,x=a.geometryOffsets;let b=0,T=1,M=1,z=1;for(let B=0;B<this.numGeometries;B++)switch(this.geometryType(B)){case Ti.POLYGON:{const N=f[T]-f[T-1];T++;const q=[];for(let $=0;$<N;$++){const K=p[M]-p[M-1];M++;const J=[];for(let te=0;te<K;te++){const ae=this._vertexBuffer[b++],ve=this._vertexBuffer[b++];J.push(new P(ae,ve))}J.length>0&&J.push(J[0]),q.push(J)}r[B]=q,x&&z++}break;case Ti.MULTIPOLYGON:{const N=x[z]-x[z-1];z++;const q=[];for(let $=0;$<N;$++){const K=f[T]-f[T-1];T++;for(let J=0;J<K;J++){const te=p[M]-p[M-1];M++;const ae=[];for(let ve=0;ve<te;ve++){const se=this._vertexBuffer[b++],ce=this._vertexBuffer[b++];ae.push(new P(se,ce))}ae.length>0&&ae.push(ae[0]),q.push(ae)}}r[B]=q}}return r}[Symbol.iterator](){return null}}function Jf(o,r,a,f,p,x){return new db(o,r,a,f,p,x)}class db extends B_{_numGeometries;_geometryType;constructor(r,a,f,p,x,b){super(f,p,x,b),this._numGeometries=r,this._geometryType=a}geometryType(r){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function Uy(o,r,a,f,p){return new j_(o,r,a,f,p)}class j_ extends B_{_geometryTypes;constructor(r,a,f,p,x){super(a,f,p,x),this._geometryTypes=r}geometryType(r){return this._geometryTypes[r]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function N_(o,r,a,f,p){const x=va(o,a);let b=null,T=null,M=null,z=null,B=null,N=null,q=null,$=null;if(wu(x,f,o,a)===ni.CONST){const J=zy(o,a,x,!1);for(let te=0;te<r-1;te++){const ae=va(o,a);switch(ae.physicalStreamType){case Vi.LENGTH:switch(ae.logicalStreamType.lengthType){case ya.GEOMETRIES:b=Ac(o,a,ae);break;case ya.PARTS:T=Ac(o,a,ae);break;case ya.RINGS:M=Ac(o,a,ae);break;case ya.TRIANGLES:q=Ac(o,a,ae)}break;case Vi.OFFSET:switch(ae.logicalStreamType.offsetType){case wc.VERTEX:z=_a(o,a,ae,!1);break;case wc.INDEX:$=_a(o,a,ae,!1)}break;case Vi.DATA:qs.VERTEX===ae.logicalStreamType.dictionaryType?B=_a(o,a,ae,!0):(N={numBits:ae.numBits,coordinateShift:ae.coordinateShift},B=_a(o,a,ae,!1))}}return $!==null?b!=null||T!=null?Jf(f,J,q,$,B,new Su(b,T,M)):Jf(f,J,q,$,B):N===null?(function(te,ae,ve,se,ce){return new fp(te,ae,Ga.VEC_2,ve,se,ce)})(f,J,new Su(b,T,M),z,B):(function(te,ae,ve,se,ce,xe){return new fp(te,ae,Ga.MORTON,ve,se,ce,xe)})(f,J,new Su(b,T,M),z,B,N)}const K=_a(o,a,x,!1);for(let J=0;J<r-1;J++){const te=va(o,a);switch(te.physicalStreamType){case Vi.LENGTH:switch(te.logicalStreamType.lengthType){case ya.GEOMETRIES:b=_a(o,a,te,!1);break;case ya.PARTS:T=_a(o,a,te,!1);break;case ya.RINGS:M=_a(o,a,te,!1);break;case ya.TRIANGLES:q=Ac(o,a,te)}break;case Vi.OFFSET:switch(te.logicalStreamType.offsetType){case wc.VERTEX:z=_a(o,a,te,!1);break;case wc.INDEX:$=_a(o,a,te,!1)}break;case Vi.DATA:qs.VERTEX===te.logicalStreamType.dictionaryType?B=_a(o,a,te,!0):(N={numBits:te.numBits,coordinateShift:te.coordinateShift},B=_a(o,a,te,!1))}}return $!==null&&T===null?Uy(K,q,$,B):(b!==null?(b=ig(K,b,2),T!==null&&M!==null?(T=ag(K,b,T,!1),M=(function(J,te,ae,ve){const se=new Int32Array(ae[ae.length-1]+1);let ce=0;se[0]=ce;let xe=1,Te=1,qe=0;for(let st=0;st<J.length;st++){const tt=J[st],dt=te[st+1]-te[st];if(tt!==0&&tt!==3)for(let Pt=0;Pt<dt;Pt++){const mt=ae[xe]-ae[xe-1];xe++;for(let nt=0;nt<mt;nt++)ce=se[Te++]=ce+ve[qe++]}else for(let Pt=0;Pt<dt;Pt++)se[Te++]=++ce,xe++}return se})(K,b,T,M)):T!==null&&(T=(function(J,te,ae){const ve=new Int32Array(te[te.length-1]+1);let se=0;ve[0]=se;let ce=1,xe=0;for(let Te=0;Te<J.length;Te++){const qe=J[Te],st=te[Te+1]-te[Te];if(qe===4||qe===1)for(let tt=0;tt<st;tt++)se=ve[ce++]=se+ae[xe++];else for(let tt=0;tt<st;tt++)ve[ce++]=++se}return ve})(K,b,T))):T!==null&&M!==null?(T=ig(K,T,1),M=ag(K,T,M,!0)):T!==null&&(T=ig(K,T,0)),$!==null?Uy(K,q,$,B,new Su(b,T,M)):N===null?(function(J,te,ae,ve){return new dp(Ga.VEC_2,J,te,ae,ve)})(K,new Su(b,T,M),z,B):(function(J,te,ae,ve,se){return new dp(Ga.MORTON,J,te,ae,ve,se)})(K,new Su(b,T,M),z,B,N))}function ig(o,r,a){const f=new Int32Array(o.length+1);let p=0;f[0]=p;let x=0;for(let b=0;b<o.length;b++)p=f[b+1]=p+(o[b]>a?r[x++]:1);return f}function ag(o,r,a,f){const p=new Int32Array(r[r.length-1]+1);let x=0;p[0]=x;let b=1,T=0;for(let M=0;M<o.length;M++){const z=o[M],B=r[M+1]-r[M];if(z===5||z===2||f&&(z===4||z===1))for(let N=0;N<B;N++)x=p[b++]=x+a[T++];else for(let N=0;N<B;N++)p[b++]=++x}return p}class F_ extends xc{dataVector;constructor(r,a,f){super(r,a.getBuffer(),f),this.dataVector=a}getValueFromBuffer(r){return this.dataVector.get(r)}}class U_ extends Km{getValueFromBuffer(r){return this.dataBuffer[r]}}class pp extends xc{constructor(r,a,f){super(r,BigInt64Array.of(a),f)}getValueFromBuffer(r){return this.dataBuffer[0]}}function mp(o,r,a){return V_(o,Math.ceil(r/8),a)}function V_(o,r,a){const f=new Uint8Array(r);let p=0;for(;p<r;){const x=o[a.increment()];if(x<=127){const b=x+3,T=o[a.increment()],M=p+b;f.fill(T,p,M),p=M}else{const b=256-x;for(let T=0;T<b;T++)f[p++]=o[a.increment()]}}return f}const Vy=new TextDecoder;function gp(o,r,a){return a-r>=12?Vy.decode(o.subarray(r,a)):(function(f,p,x){let b="",T=p;for(;T<x;){const M=f[T];let z,B,N,q=null,$=M>239?4:M>223?3:M>191?2:1;if(T+$>x)break;$===1?M<128&&(q=M):$===2?(z=f[T+1],(192&z)==128&&(q=(31&M)<<6|63&z,q<=127&&(q=null))):$===3?(z=f[T+1],B=f[T+2],(192&z)==128&&(192&B)==128&&(q=(15&M)<<12|(63&z)<<6|63&B,(q<=2047||q>=55296&&q<=57343)&&(q=null))):$===4&&(z=f[T+1],B=f[T+2],N=f[T+3],(192&z)==128&&(192&B)==128&&(192&N)==128&&(q=(15&M)<<18|(63&z)<<12|(63&B)<<6|63&N,(q<=65535||q>=1114112)&&(q=null))),q===null?(q=65533,$=1):q>65535&&(q-=65536,b+=String.fromCharCode(q>>>10&1023|55296),q=56320|1023&q),b+=String.fromCharCode(q),T+=$}return b})(o,r,a)}class ed extends xc{offsetBuffer;constructor(r,a,f,p){super(r,f,p),this.offsetBuffer=a}}class og extends ed{textEncoder;constructor(r,a,f,p){super(r,a,f,p??a.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(r){return gp(this.dataBuffer,this.offsetBuffer[r],this.offsetBuffer[r+1])}}class Dh extends ed{indexBuffer;textEncoder;constructor(r,a,f,p,x){super(r,f,p,x??a.length),this.indexBuffer=a,this.indexBuffer=a,this.textEncoder=new TextEncoder}getValueFromBuffer(r){const a=this.indexBuffer[r];return gp(this.dataBuffer,this.offsetBuffer[a],this.offsetBuffer[a+1])}}class sg extends ed{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(r,a,f,p,x,b,T){super(r,f,p,T),this.indexBuffer=a,this.symbolOffsetBuffer=x,this.symbolTableBuffer=b,this.textEncoder=new TextEncoder}getValueFromBuffer(r){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(f,p,x){const b=[],T=new Array(p.length).fill(0);for(let M=1;M<p.length;M++)T[M]=T[M-1]+p[M-1];for(let M=0;M<x.length;M++)if(x[M]===255)b.push(x[++M]);else{const z=p[x[M]],B=T[x[M]];for(let N=0;N<z;N++)b.push(f[B+N])}return new Uint8Array(b)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const a=this.indexBuffer[r];return gp(this.decodedDictionary,this.offsetBuffer[a],this.offsetBuffer[a+1])}offsetToLengthBuffer(r){const a=new Uint32Array(r.length-1);let f=r[0];for(let p=1;p<r.length;p++){const x=r[p];a[p-1]=x-f,f=x}return a}}function Tc(o,r,a,f,p,x){return a.type==="scalarType"?(function(b,T,M,z,B,N){let q=null,$=0;if(b===0)return null;if(N.nullable){const J=va(T,M);$=J.numValues;const te=M.get(),ae=mp(T,$,M);M.set(te+J.byteLength),q=new Hs(ae,J.numValues)}const K=q??z;switch(B.physicalType){case 4:case 3:return(function(J,te,ae,ve,se){const ce=va(J,te),xe=wu(ce,se,J,te),Te=ve.physicalType===3;if(xe===ni.FLAT){const qe=vs(se)?Ly(J,te,ce,Te,se):_a(J,te,ce,Te);return new Qm(ae.name,qe,se)}if(xe===ni.SEQUENCE){const qe=ky(J,te,ce);return new Cy(ae.name,qe[0],qe[1],ce.numRleValues)}{const qe=zy(J,te,ce,Te);return new Dy(ae.name,qe,se)}})(T,M,N,B,K);case 9:return(function(J,te,ae,ve,se){let ce=null,xe=null,Te=null,qe=null,st=null,tt=null,dt=null,Pt=null;for(let mt=0;mt<ve;mt++){const nt=va(te,ae);if(nt.byteLength!==0)switch(nt.physicalStreamType){case Vi.PRESENT:{const Qe=mp(te,nt.numValues,ae);tt=new Hs(Qe,nt.numValues);break}case Vi.OFFSET:xe=se!=null||tt!=null?Ly(te,ae,nt,!1,se??tt):_a(te,ae,nt,!1);break;case Vi.LENGTH:{const Qe=Ac(te,ae,nt);ya.DICTIONARY===nt.logicalStreamType.lengthType?ce=Qe:ya.SYMBOL===nt.logicalStreamType.lengthType?qe=Qe:dt=Qe;break}case Vi.DATA:{const Qe=te.subarray(ae.get(),ae.get()+nt.byteLength);ae.add(nt.byteLength);const jt=nt.logicalStreamType.dictionaryType;qs.FSST===jt?st=Qe:qs.SINGLE===jt||qs.SHARED===jt?Te=Qe:qs.NONE===jt&&(Pt=Qe);break}}}return(function(mt,nt,Qe,jt,kt,Nt,Ot){return nt?new sg(mt,Qe,jt,kt,Nt,nt,Ot):null})(J,st,xe,ce,Te,qe,se??tt)??(function(mt,nt,Qe,jt,kt){return nt?kt?new Dh(mt,Qe,jt,nt,kt):new Dh(mt,Qe,jt,nt):null})(J,Te,xe,ce,se??tt)??(function(mt,nt,Qe,jt,kt){if(!nt||!Qe)return null;if(jt)return kt?new Dh(mt,jt,nt,Qe,kt):new Dh(mt,jt,nt,Qe);if(kt&&kt.size()!==nt.length-1){const Nt=new Int32Array(kt.size());let Ot=0;for(let Zt=0;Zt<kt.size();Zt++)Nt[Zt]=kt.get(Zt)?Ot++:0;return new Dh(mt,Nt,nt,Qe,kt)}return kt?new og(mt,nt,Qe,kt):new og(mt,nt,Qe)})(J,dt,Pt,xe,se??tt)})(N.name,T,M,N.nullable?b-1:b,q);case 0:return(function(J,te,ae,ve,se){const ce=va(J,te),xe=ce.numValues,Te=te.get(),qe=vs(se)?(function(tt,dt,Pt,mt){const nt=V_(tt,Math.ceil(dt/8),Pt),Qe=new Hs(nt,dt),jt=mt.size(),kt=new Hs(new Uint8Array(jt),jt);let Nt=0;for(let Ot=0;Ot<mt.size();Ot++){const Zt=!!mt.get(Ot)&&Qe.get(Nt++);kt.set(Ot,Zt)}return kt.getBuffer()})(J,xe,te,se):mp(J,xe,te);te.set(Te+ce.byteLength);const st=new Hs(qe,xe);return new F_(ae.name,st,se)})(T,M,N,0,K);case 6:case 5:return(function(J,te,ae,ve,se){const ce=va(J,te),xe=wu(ce,ve,J,te),Te=se.physicalType===5;if(xe===ni.FLAT){const qe=vs(ve)?(function(st,tt,dt,Pt,mt){return(function(nt,Qe,jt,kt){switch(Qe.logicalLevelTechnique1){case vr.DELTA:return Qe.logicalLevelTechnique2===vr.RLE&&(nt=R_(nt,Qe.runs,Qe.numRleValues)),(function(Nt,Ot){const Zt=new BigInt64Array(Nt.size());let Or=0;Nt.get(0)?(Zt[0]=Nt.get(0)?Ot[0]>>1n^-(1n&Ot[0]):0n,Or=1):Zt[0]=0n;let xr=1;for(;xr!=Zt.length;++xr)Zt[xr]=Nt.get(xr)?Zt[xr-1]+(Ot[Or]>>1n^-(1n&Ot[Or++])):Zt[xr-1];return Zt})(kt,nt);case vr.RLE:return(function(Nt,Ot,Zt,Or){const xr=Ot;return Zt?(function(Rn,xa,Mi){const Ln=new BigInt64Array(Rn.size());let Tn=0;for(let Xr=0;Xr<Mi;Xr++){const Qn=Number(xa[Xr]);let ii=xa[Xr+Mi];ii=ii>>1n^-(1n&ii);for(let xn=Tn;xn<Tn+Qn;xn++)Rn.get(xn)?Ln[xn]=ii:(Ln[xn]=0n,Tn++);Tn+=Qn}return Ln})(Or,Nt,xr.runs):(function(Rn,xa,Mi){const Ln=new BigInt64Array(Rn.size());let Tn=0;for(let Xr=0;Xr<Mi;Xr++){const Qn=Number(xa[Xr]),ii=xa[Xr+Mi];for(let xn=Tn;xn<Tn+Qn;xn++)Rn.get(xn)?Ln[xn]=ii:(Ln[xn]=0n,Tn++);Tn+=Qn}return Ln})(Or,Nt,xr.runs)})(nt,Qe,jt,kt);case vr.NONE:return nt=jt?(function(Nt,Ot){const Zt=new BigInt64Array(Nt.size());let Or=0,xr=0;for(;xr!=Zt.length;++xr)if(Nt.get(xr)){const Rn=Ot[Or++];Zt[xr]=Rn>>1n^-(1n&Rn)}else Zt[xr]=0n;return Zt})(kt,nt):(function(Nt,Ot){const Zt=new BigInt64Array(Nt.size());let Or=0,xr=0;for(;xr!=Zt.length;++xr)Zt[xr]=Nt.get(xr)?Ot[Or++]:0n;return Zt})(kt,nt),nt;default:throw new Error("The specified Logical level technique is not supported")}})(op(st,tt,dt.numValues),dt,Pt,mt)})(J,te,ce,Te,ve):Kf(J,te,ce,Te);return new Qf(ae.name,qe,ve)}if(xe===ni.SEQUENCE){const qe=Ch(J,te,ce);return new By(ae.name,qe[0],qe[1],ce.numRleValues)}{const qe=Ry(J,te,ce,Te);return new pp(ae.name,qe,ve)}})(T,M,N,K,B);case 7:return(function(J,te,ae,ve){const se=va(J,te),ce=vs(ve)?(function(xe,Te,qe,st){const tt=Te.get(),dt=tt+st*Float32Array.BYTES_PER_ELEMENT,Pt=new Uint8Array(xe.subarray(tt,dt)).buffer,mt=new Float32Array(Pt);Te.set(dt);const nt=qe.size(),Qe=new Float32Array(nt);let jt=0;for(let kt=0;kt<nt;kt++)Qe[kt]=qe.get(kt)?mt[jt++]:0;return Qe})(J,te,ve,se.numValues):(function(xe,Te,qe){const st=Te.get(),tt=st+qe*Float32Array.BYTES_PER_ELEMENT,dt=new Uint8Array(xe.subarray(st,tt)).buffer,Pt=new Float32Array(dt);return Te.set(tt),Pt})(J,te,se.numValues);return new U_(ae.name,ce,ve)})(T,M,N,K);case 8:return(function(J,te,ae,ve){const se=va(J,te),ce=vs(ve)?(function(xe,Te,qe,st){const tt=Te.get(),dt=tt+st*Float64Array.BYTES_PER_ELEMENT,Pt=new Uint8Array(xe.subarray(tt,dt)).buffer,mt=new Float64Array(Pt);Te.set(dt);const nt=qe.size(),Qe=new Float64Array(nt);let jt=0;for(let kt=0;kt<nt;kt++)Qe[kt]=qe.get(kt)?mt[jt++]:0;return Qe})(J,te,ve,se.numValues):(function(xe,Te,qe){const st=Te.get(),tt=st+qe*Float64Array.BYTES_PER_ELEMENT,dt=new Uint8Array(xe.subarray(st,tt)).buffer,Pt=new Float64Array(dt);return Te.set(tt),Pt})(J,te,se.numValues);return new My(ae.name,ce,ve)})(T,M,N,K);default:throw new Error(`The specified data type for the field is currently not supported: ${B}`)}})(f,o,r,p,a.scalarType,a):f!=1?null:(function(b,T,M,z){let B=null,N=null,q=null,$=null,K=!1;for(;!K;){const ve=va(b,T);switch(ve.physicalStreamType){case Vi.LENGTH:ya.DICTIONARY===ve.logicalStreamType.lengthType?B=Ac(b,T,ve):q=Ac(b,T,ve);break;case Vi.DATA:qs.SINGLE===ve.logicalStreamType.dictionaryType||qs.SHARED===ve.logicalStreamType.dictionaryType?(N=b.subarray(T.get(),T.get()+ve.byteLength),K=!0):$=b.subarray(T.get(),T.get()+ve.byteLength),T.add(ve.byteLength)}}const J=M.complexType.children,te=[];let ae=0;for(const ve of J){const se=Ei(b,T,1)[0];if(se==0)continue;const ce=`${M.name}${ve.name==="default"?"":":"+ve.name}`;if(se!==2||ve.type!=="scalarField"||ve.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const xe=va(b,T),Te=mp(b,xe.numValues,T),qe=va(b,T),st=qe.decompressedCount!==z?Ly(b,T,qe,!1,new Hs(Te,xe.numValues)):_a(b,T,qe,!1);te[ae++]=$?new sg(ce,st,B,N,q,$,new Hs(Te,xe.numValues)):new Dh(ce,st,B,N,new Hs(Te,xe.numValues))}return te})(o,r,a,p)}function vs(o){return o instanceof Hs}function Ec(o){if(o.name==="id")return!1;if(o.type==="scalarType"){const r=o.scalarType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(r.type==="logicalType")return!1}else if(o.type==="complexType"){const r=o.complexType;if(r.type==="physicalType")switch(r.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",o),!1}const yp=new TextDecoder;function td(o,r){const a=Ei(o,r,1)[0];if(a===0)return"";const f=r.get(),p=o.subarray(f,f+a);return r.add(a),yp.decode(p)}function Au(o,r){const a=Ei(o,r,1)[0]>>>0,f=!!(4&a),p=!!(2&a),x=Ei(o,r,1)[0]>>>0,b={};if(1&a&&(b.nullable=!0),p){const T={};if(f?(T.type="logicalType",T.logicalType=x):(T.type="physicalType",T.physicalType=x),8&a){const M=Ei(o,r,1)[0]>>>0;T.children=new Array(M);for(let z=0;z<M;z++)T.children[z]=Au(o,r)}b.type="complexField",b.complexField=T}else{const T={};f?(T.type="logicalType",T.logicalType=x):(T.type="physicalType",T.physicalType=x),b.type="scalarField",b.scalarField=T}return b}function pb(o,r){const a=Ei(o,r,1)[0]>>>0,f=(function(p){switch(p){case 0:case 1:case 2:case 3:{const x={};x.nullable=!!(1&p),x.columnScope=0;const b={};return b.physicalType=p>1?6:4,b.type="physicalType",x.scalarType=b,x.type="scalarType",x}case 4:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:0};return x.type="complexType",x.complexType=b,x}case 30:{const x={nullable:!1,columnScope:0},b={type:"physicalType",physicalType:1};return x.type="complexType",x.complexType=b,x}default:return(function(x){let b=null;switch(x){case 10:case 11:b=0;break;case 12:case 13:b=1;break;case 14:case 15:b=2;break;case 16:case 17:b=3;break;case 18:case 19:b=4;break;case 20:case 21:b=5;break;case 22:case 23:b=6;break;case 24:case 25:b=7;break;case 26:case 27:b=8;break;case 28:case 29:b=9;break;default:return null}const T={};T.nullable=!!(1&x),T.columnScope=0;const M={type:"physicalType"};return M.physicalType=b,T.type="scalarType",T.scalarType=M,T})(p)}})(a);if(!f)throw new Error(`Unsupported column type code: ${a}`);if((function(p){return p>=10})(a)?f.name=td(o,r):a>=0&&a<=3?f.name="id":a===4&&(f.name="geometry"),(function(p){return p===30})(a)){const p=Ei(o,r,1)[0]>>>0,x=f.complexType;x.children=new Array(p);for(let b=0;b<p;b++)x.children[b]=Au(o,r)}return f}function G_(o,r){const a={featureTables:[]},f={};f.name=td(o,r);const p=Ei(o,r,1)[0]>>>0,x=Ei(o,r,1)[0]>>>0;f.columns=new Array(x);for(let b=0;b<x;b++)f.columns[b]=pb(o,r);return a.featureTables.push(f),[a,p]}function vp(o,r,a,f,p,x,b=!1){const T=r.scalarType.physicalType,M=wu(p,x,o,a);if(T===4)switch(M){case ni.FLAT:{const z=_a(o,a,p,!1);return new Qm(f,z,x)}case ni.SEQUENCE:{const z=ky(o,a,p);return new Cy(f,z[0],z[1],p.numRleValues)}case ni.CONST:{const z=zy(o,a,p,!1);return new Dy(f,z,x)}}else switch(M){case ni.FLAT:{if(b){const B=(function(N,q,$,K){const J=(function(te,ae,ve){const se=new Float64Array(ae);for(let ce=0;ce<ae;ce++)se[ce]=k_(te,ve);return se})(N,$.numValues,q);return(function(te,ae,ve){switch(ae.logicalLevelTechnique1){case vr.DELTA:return ae.logicalLevelTechnique2===vr.RLE&&(te=L_(te,ae.runs,ae.numRleValues)),(function(se){se[0]=se[0]%2==1?(se[0]+1)/-2:se[0]/2;const ce=se.length/4*4;let xe=1;if(ce>=4)for(;xe<ce-4;xe+=4){const Te=se[xe],qe=se[xe+1],st=se[xe+2],tt=se[xe+3];se[xe]=(Te%2==1?(Te+1)/-2:Te/2)+se[xe-1],se[xe+1]=(qe%2==1?(qe+1)/-2:qe/2)+se[xe],se[xe+2]=(st%2==1?(st+1)/-2:st/2)+se[xe+1],se[xe+3]=(tt%2==1?(tt+1)/-2:tt/2)+se[xe+2]}for(;xe!=se.length;++xe)se[xe]=(se[xe]%2==1?(se[xe]+1)/-2:se[xe]/2)+se[xe-1]})(te),te;case vr.RLE:return(function(se,ce,xe){return L_(se,ce.runs,ce.numRleValues)})(te,ae);case vr.NONE:return te;default:throw new Error(`The specified Logical level technique is not supported: ${ae.logicalLevelTechnique1}`)}})(J,$)})(o,a,p);return new My(f,B,x)}const z=Kf(o,a,p,!1);return new Qf(f,z,x)}case ni.SEQUENCE:{const z=Ch(o,a,p);return new By(f,z[0],z[1],p.numRleValues)}case ni.CONST:{const z=Ry(o,a,p,!1);return new pp(f,z,x)}}throw new Error("Vector type not supported for id column.")}class mb{constructor(r,a){var f;switch(this._featureData=r,this.properties=this._featureData.properties||{},(f=this._featureData.geometry)===null||f===void 0?void 0:f.type){case Ti.POINT:case Ti.MULTIPOINT:this.type=1;break;case Ti.LINESTRING:case Ti.MULTILINESTRING:this.type=2;break;case Ti.POLYGON:case Ti.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=a,this.id=Number(this._featureData.id)}loadGeometry(){const r=[];for(const a of this._featureData.geometry.coordinates){const f=[];for(const p of a)f.push(new P(p.x,p.y));r.push(f)}return r}}class q_{constructor(r){this.features=[],this.featureTable=r,this.name=r.name,this.extent=r.extent,this.version=2,this.features=r.getFeatures(),this.length=this.features.length}feature(r){return new mb(this.features[r],this.extent)}}class _p{constructor(r){this.layers={};const a=(function(f,p,x=!0){const b=new z_(0),T=[];for(;b.get()<f.length;){const M=Ei(f,b,1)[0]>>>0,z=b.get()+M;if(z>f.length)throw new Error(`Block overruns tile: ${z} > ${f.length}`);if(Ei(f,b,1)[0]>>>0!=1){b.set(z);continue}const B=G_(f,b),N=B[1],q=B[0].featureTables[0];let $=null,K=null;const J=[];let te=0;for(const ve of q.columns){const se=ve.name;if(se==="id"){let ce=null;if(ve.nullable){const Te=va(f,b),qe=b.get(),st=mp(f,Te.numValues,b);b.set(qe+Te.byteLength),ce=new Hs(st,Te.numValues)}const xe=va(f,b);te=xe.decompressedCount,$=vp(f,ve,b,se,xe,ce??te,x)}else if(se==="geometry"){const ce=Ei(f,b,1)[0];if(te===0){const xe=b.get();te=va(f,b).decompressedCount,b.set(xe)}K=N_(f,ce,b,te)}else{const ce=Ec(ve)?Ei(f,b,1)[0]:1;if(ce===0&&ve.type==="scalarType")continue;const xe=Tc(f,b,ve,ce,te);if(xe)if(Array.isArray(xe))for(const Te of xe)J.push(Te);else J.push(xe)}}const ae=new bc(q.name,K,$,J,N);T.push(ae),b.set(z)}return T})(new Uint8Array(r));this.layers=a.reduce(((f,p)=>Object.assign(Object.assign({},f),{[p.name]:new q_(p)})),{})}}class H_{constructor(r,a){this.feature=r,this.type=r.type,this.properties=r.tags?r.tags:{},this.extent=a,"id"in r&&(typeof r.id=="string"?this.id=parseInt(r.id,10):typeof r.id!="number"||isNaN(r.id)||(this.id=r.id))}loadGeometry(){const r=[],a=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const f of a){const p=[];for(const x of f)p.push(new P(x[0],x[1]));r.push(p)}return r}}const xp="_geojsonTileLayer";function lg(o,r){r.writeVarintField(15,o.version||1),r.writeStringField(1,o.name||""),r.writeVarintField(5,o.extent||4096);const a={keys:[],values:[],keycache:{},valuecache:{}};for(let x=0;x<o.length;x++)a.feature=o.feature(x),r.writeMessage(2,ug,a);const f=a.keys;for(const x of f)r.writeStringField(3,x);const p=a.values;for(const x of p)r.writeMessage(4,cg,x)}function ug(o,r){if(!o.feature)return;const a=o.feature;a.id!==void 0&&r.writeVarintField(1,a.id),r.writeMessage(2,Z_,o),r.writeVarintField(3,a.type),r.writeMessage(4,qy,a)}function Z_(o,r){for(const a in o.feature?.properties){let f=o.feature.properties[a],p=o.keycache[a];if(f==null)continue;p===void 0&&(o.keys.push(a),p=o.keys.length-1,o.keycache[a]=p),r.writeVarint(p),typeof f!="string"&&typeof f!="boolean"&&typeof f!="number"&&(f=JSON.stringify(f));const x=typeof f+":"+f;let b=o.valuecache[x];b===void 0&&(o.values.push(f),b=o.values.length-1,o.valuecache[x]=b),r.writeVarint(b)}}function Mc(o,r){return(r<<3)+(7&o)}function Gy(o){return o<<1^o>>31}function qy(o,r){const a=o.loadGeometry(),f=o.type;let p=0,x=0;for(const b of a){let T=1;f===1&&(T=b.length),r.writeVarint(Mc(1,T));const M=f===3?b.length-1:b.length;for(let z=0;z<M;z++){z===1&&f!==1&&r.writeVarint(Mc(2,M-1));const B=b[z].x-p,N=b[z].y-x;r.writeVarint(Gy(B)),r.writeVarint(Gy(N)),p+=B,x+=N}o.type===3&&r.writeVarint(Mc(7,1))}}function cg(o,r){const a=typeof o;a==="string"?r.writeStringField(1,o):a==="boolean"?r.writeBooleanField(7,o):a==="number"&&(o%1!=0?r.writeDoubleField(3,o):o<0?r.writeSVarintField(6,o):r.writeVarintField(5,o))}class Hy{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new gl(at,16,0),this.grid3D=new gl(at,16,0),this.featureIndexArray=new ie,this.promoteId=a}insert(r,a,f,p,x,b){const T=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,p,x);const M=b?this.grid3D:this.grid;for(let z=0;z<a.length;z++){const B=a[z],N=[1/0,1/0,-1/0,-1/0];for(let q=0;q<B.length;q++){const $=B[q];N[0]=Math.min(N[0],$.x),N[1]=Math.min(N[1],$.y),N[2]=Math.max(N[2],$.x),N[3]=Math.max(N[3],$.y)}N[0]<at&&N[1]<at&&N[2]>=0&&N[3]>=0&&M.insert(T,N[0],N[1],N[2],N[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new Mr(new Lm(this.rawTileData)).layers:new _p(this.rawTileData).layers,this.sourceLayerCoder=new Ey(this.vtLayers?Object.keys(this.vtLayers).sort():[xp])),this.vtLayers}query(r,a,f,p){this.loadVTLayers();const x=r.params,b=at/r.tileSize/r.scale,T=ca(x.filter,x.globalState),M=r.queryGeometry,z=r.queryPadding*b,B=_c.fromPoints(M),N=this.grid.query(B.minX-z,B.minY-z,B.maxX+z,B.maxY+z),q=_c.fromPoints(r.cameraQueryGeometry).expandBy(z),$=this.grid3D.query(q.minX,q.minY,q.maxX,q.maxY,((te,ae,ve,se)=>(function(ce,xe,Te,qe,st){for(const dt of ce)if(xe<=dt.x&&Te<=dt.y&&qe>=dt.x&&st>=dt.y)return!0;const tt=[new P(xe,Te),new P(xe,st),new P(qe,st),new P(qe,Te)];if(ce.length>2){for(const dt of tt)if(bl(ce,dt))return!0}for(let dt=0;dt<ce.length-1;dt++)if(Kv(ce[dt],ce[dt+1],tt))return!0;return!1})(r.cameraQueryGeometry,te-z,ae-z,ve+z,se+z)));for(const te of $)N.push(te);N.sort(hg);const K={};let J;for(let te=0;te<N.length;te++){const ae=N[te];if(ae===J)continue;J=ae;const ve=this.featureIndexArray.get(ae);let se=null;this.loadMatchingFeature(K,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,T,x.layers,x.availableImages,a,f,p,((ce,xe,Te)=>(se||(se=Ns(ce)),xe.queryIntersectsFeature({queryGeometry:M,feature:ce,featureState:Te,geometry:se,zoom:this.z,transform:r.transform,pixelsToTileUnits:b,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation}))))}return K}loadMatchingFeature(r,a,f,p,x,b,T,M,z,B,N){const q=this.bucketLayerIDs[a];if(b&&!q.some((te=>b.has(te))))return;const $=this.sourceLayerCoder.decode(f),K=this.vtLayers[$].feature(p);if(x.needGeometry){const te=Oo(K,!0);if(!x.filter(new Fr(this.tileID.overscaledZ),te,this.tileID.canonical))return}else if(!x.filter(new Fr(this.tileID.overscaledZ),K))return;const J=this.getId(K,$);for(let te=0;te<q.length;te++){const ae=q[te];if(b&&!b.has(ae))continue;const ve=M[ae];if(!ve)continue;let se={};J&&B&&(se=B.getState(ve.sourceLayer||xp,J));const ce=zr({},z[ae]);ce.paint=$_(ce.paint,ve.paint,K,se,T),ce.layout=$_(ce.layout,ve.layout,K,se,T);const xe=!N||N(K,ve,se);if(!xe)continue;const Te=new Wm(K,this.z,this.x,this.y,J);Te.layer=ce;let qe=r[ae];qe===void 0&&(qe=r[ae]=[]),qe.push({featureIndex:p,feature:Te,intersectionZ:xe})}}lookupSymbolFeatures(r,a,f,p,x,b,T,M){const z={};this.loadVTLayers();const B=ca(x.filterSpec,x.globalState);for(const N of r)this.loadMatchingFeature(z,f,p,N,B,b,T,M,a);return z}hasLayer(r){for(const a of this.bucketLayerIDs)for(const f of a)if(r===f)return!0;return!1}getId(r,a){var f;let p=r.id;return this.promoteId&&(p=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[a]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((f=r.properties)===null||f===void 0)&&f.cluster)&&this.promoteId&&(p=Number(r.properties.cluster_id))),p}}function $_(o,r,a,f,p){return tr(o,((x,b)=>{const T=r instanceof ou?r.get(b):null;return T&&T.evaluate?T.evaluate(a,f,p):T}))}function hg(o,r){return r-o}function l(o,r,a,f,p){const x=[];for(let b=0;b<o.length;b++){const T=o[b];let M;for(let z=0;z<T.length-1;z++){let B=T[z],N=T[z+1];B.x<r&&N.x<r||(B.x<r?B=new P(r,B.y+(r-B.x)/(N.x-B.x)*(N.y-B.y))._round():N.x<r&&(N=new P(r,B.y+(r-B.x)/(N.x-B.x)*(N.y-B.y))._round()),B.y<a&&N.y<a||(B.y<a?B=new P(B.x+(a-B.y)/(N.y-B.y)*(N.x-B.x),a)._round():N.y<a&&(N=new P(B.x+(a-B.y)/(N.y-B.y)*(N.x-B.x),a)._round()),B.x>=f&&N.x>=f||(B.x>=f?B=new P(f,B.y+(f-B.x)/(N.x-B.x)*(N.y-B.y))._round():N.x>=f&&(N=new P(f,B.y+(f-B.x)/(N.x-B.x)*(N.y-B.y))._round()),B.y>=p&&N.y>=p||(B.y>=p?B=new P(B.x+(p-B.y)/(N.y-B.y)*(N.x-B.x),p)._round():N.y>=p&&(N=new P(B.x+(p-B.y)/(N.y-B.y)*(N.x-B.x),p)._round()),M&&B.equals(M[M.length-1])||(M=[B],x.push(M)),M.push(N)))))}}return x}function h(o,r,a,f,p){switch(r){case 1:return(function(x,b,T,M){const z=[];for(const B of x)for(const N of B){const q=M===0?N.x:N.y;q>=b&&q<=T&&z.push([N])}return z})(o,a,f,p);case 2:return S(o,a,f,p,!1);case 3:return S(o,a,f,p,!0)}return[]}function g(o,r,a,f,p){const x=f===0?O:L;let b=[];const T=[];for(let B=0;B<o.length-1;B++){const N=o[B],q=o[B+1],$=f===0?N.x:N.y,K=f===0?q.x:q.y;let J=!1;$<r?K>r&&b.push(x(N,q,r)):$>a?K<a&&b.push(x(N,q,a)):b.push(N),K<r&&$>=r&&(b.push(x(N,q,r)),J=!0),K>a&&$<=a&&(b.push(x(N,q,a)),J=!0),!p&&J&&(T.push(b),b=[])}const M=o.length-1,z=f===0?o[M].x:o[M].y;return z>=r&&z<=a&&b.push(o[M]),p&&b.length>0&&!b[0].equals(b[b.length-1])&&b.push(new P(b[0].x,b[0].y)),b.length>0&&T.push(b),T}function S(o,r,a,f,p){const x=[];for(const b of o){const T=g(b,r,a,f,p);T.length>0&&x.push(...T)}return x}function O(o,r,a){return new P(a,o.y+(a-o.x)/(r.x-o.x)*(r.y-o.y))}function L(o,r,a){return new P(o.x+(a-o.y)/(r.y-o.y)*(r.x-o.x),a)}zt("FeatureIndex",Hy,{omit:["rawTileData","sourceLayerCoder"]});class W extends P{constructor(r,a,f,p){super(r,a),this.angle=f,p!==void 0&&(this.segment=p)}clone(){return new W(this.x,this.y,this.angle,this.segment)}}function le(o,r,a,f,p){if(r.segment===void 0||a===0)return!0;let x=r,b=r.segment+1,T=0;for(;T>-a/2;){if(b--,b<0)return!1;T-=o[b].dist(x),x=o[b]}T+=o[b].dist(o[b+1]),b++;const M=[];let z=0;for(;T<a/2;){const B=o[b],N=o[b+1];if(!N)return!1;let q=o[b-1].angleTo(B)-B.angleTo(N);for(q=Math.abs((q+3*Math.PI)%(2*Math.PI)-Math.PI),M.push({distance:T,angleDelta:q}),z+=q;T-M[0].distance>f;)z-=M.shift().angleDelta;if(z>p)return!1;b++,T+=B.dist(N)}return!0}function Ie(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function Je(o,r,a){return o?.6*r*a:0}function ht(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function vt(o,r,a,f,p,x){const b=Je(a,p,x),T=ht(a,f)*x;let M=0;const z=Ie(o)/2;for(let B=0;B<o.length-1;B++){const N=o[B],q=o[B+1],$=N.dist(q);if(M+$>z){const K=(z-M)/$,J=gn.number(N.x,q.x,K),te=gn.number(N.y,q.y,K),ae=new W(J,te,q.angleTo(N),B);return ae._round(),!b||le(o,ae,T,b,r)?ae:void 0}M+=$}}function et(o,r,a,f,p,x,b,T,M){const z=Je(f,x,b),B=ht(f,p),N=B*b,q=o[0].x===0||o[0].x===M||o[0].y===0||o[0].y===M;return r-N<r/4&&(r=N+r/4),rt(o,q?r/2*T%r:(B/2+2*x)*b*T%r,r,z,a,N,q,!1,M)}function rt(o,r,a,f,p,x,b,T,M){const z=x/2,B=Ie(o);let N=0,q=r-a,$=[];for(let K=0;K<o.length-1;K++){const J=o[K],te=o[K+1],ae=J.dist(te),ve=te.angleTo(J);for(;q+a<N+ae;){q+=a;const se=(q-N)/ae,ce=gn.number(J.x,te.x,se),xe=gn.number(J.y,te.y,se);if(ce>=0&&ce<M&&xe>=0&&xe<M&&q-z>=0&&q+z<=B){const Te=new W(ce,xe,ve,K);Te._round(),f&&!le(o,Te,x,f,p)||$.push(Te)}}N+=ae}return T||$.length||b||($=rt(o,N/2,a,f,p,x,b,!0,M)),$}function qt(o,r,a,f){const p=[],x=o.image,b=x.pixelRatio,T=x.paddedRect.w-2,M=x.paddedRect.h-2;let z={x1:o.left,y1:o.top,x2:o.right,y2:o.bottom};const B=x.stretchX||[[0,T]],N=x.stretchY||[[0,M]],q=(Qe,jt)=>Qe+jt[1]-jt[0],$=B.reduce(q,0),K=N.reduce(q,0),J=T-$,te=M-K;let ae=0,ve=$,se=0,ce=K,xe=0,Te=J,qe=0,st=te;if(x.content&&f){const Qe=x.content,jt=Qe[2]-Qe[0],kt=Qe[3]-Qe[1];(x.textFitWidth||x.textFitHeight)&&(z=bu(o)),ae=nr(B,0,Qe[0]),se=nr(N,0,Qe[1]),ve=nr(B,Qe[0],Qe[2]),ce=nr(N,Qe[1],Qe[3]),xe=Qe[0]-ae,qe=Qe[1]-se,Te=jt-ve,st=kt-ce}const tt=z.x1,dt=z.y1,Pt=z.x2-tt,mt=z.y2-dt,nt=(Qe,jt,kt,Nt)=>{const Ot=Fe(Qe.stretch-ae,ve,Pt,tt),Zt=Be(Qe.fixed-xe,Te,Qe.stretch,$),Or=Fe(jt.stretch-se,ce,mt,dt),xr=Be(jt.fixed-qe,st,jt.stretch,K),Rn=Fe(kt.stretch-ae,ve,Pt,tt),xa=Be(kt.fixed-xe,Te,kt.stretch,$),Mi=Fe(Nt.stretch-se,ce,mt,dt),Ln=Be(Nt.fixed-qe,st,Nt.stretch,K),Tn=new P(Ot,Or),Xr=new P(Rn,Or),Qn=new P(Rn,Mi),ii=new P(Ot,Mi),xn=new P(Zt/b,xr/b),Lo=new P(xa/b,Ln/b),ba=r*Math.PI/180;if(ba){const qi=Math.sin(ba),Gn=Math.cos(ba),Pi=[Gn,-qi,qi,Gn];Tn._matMult(Pi),Xr._matMult(Pi),ii._matMult(Pi),Qn._matMult(Pi)}const Bo=Qe.stretch+Qe.fixed,Ml=jt.stretch+jt.fixed;return{tl:Tn,tr:Xr,bl:ii,br:Qn,tex:{x:x.paddedRect.x+1+Bo,y:x.paddedRect.y+1+Ml,w:kt.stretch+kt.fixed-Bo,h:Nt.stretch+Nt.fixed-Ml},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xn,pixelOffsetBR:Lo,minFontScaleX:Te/b/Pt,minFontScaleY:st/b/mt,isSDF:a}};if(f&&(x.stretchX||x.stretchY)){const Qe=ln(B,J,$),jt=ln(N,te,K);for(let kt=0;kt<Qe.length-1;kt++){const Nt=Qe[kt],Ot=Qe[kt+1];for(let Zt=0;Zt<jt.length-1;Zt++)p.push(nt(Nt,jt[Zt],Ot,jt[Zt+1]))}}else p.push(nt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:T+1},{fixed:0,stretch:M+1}));return p}function nr(o,r,a){let f=0;for(const p of o)f+=Math.max(r,Math.min(a,p[1]))-Math.max(r,Math.min(a,p[0]));return f}function ln(o,r,a){const f=[{fixed:-1,stretch:0}];for(const[p,x]of o){const b=f[f.length-1];f.push({fixed:p-b.stretch,stretch:b.stretch}),f.push({fixed:p-b.stretch,stretch:b.stretch+(x-p)})}return f.push({fixed:r+1,stretch:a}),f}function Fe(o,r,a,f){return o/r*a+f}function Be(o,r,a,f){return o-r*a/f}zt("Anchor",W);class Ke{constructor(r,a,f,p,x,b,T,M,z,B){var N;if(this.boxStartIndex=r.length,z){let q=b.top,$=b.bottom;const K=b.collisionPadding;K&&(q-=K[1],$+=K[3]);let J=$-q;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const q=!((N=b.image)===null||N===void 0)&&N.content&&(b.image.textFitWidth||b.image.textFitHeight)?bu(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};q.y1=q.y1*T-M[0],q.y2=q.y2*T+M[2],q.x1=q.x1*T-M[3],q.x2=q.x2*T+M[1];const $=b.collisionPadding;if($&&(q.x1-=$[0]*T,q.y1-=$[1]*T,q.x2+=$[2]*T,q.y2+=$[3]*T),B){const K=new P(q.x1,q.y1),J=new P(q.x2,q.y1),te=new P(q.x1,q.y2),ae=new P(q.x2,q.y2),ve=B*Math.PI/180;K._rotate(ve),J._rotate(ve),te._rotate(ve),ae._rotate(ve),q.x1=Math.min(K.x,J.x,te.x,ae.x),q.x2=Math.max(K.x,J.x,te.x,ae.x),q.y1=Math.min(K.y,J.y,te.y,ae.y),q.y2=Math.max(K.y,J.y,te.y,ae.y)}r.emplaceBack(a.x,a.y,q.x1,q.y1,q.x2,q.y2,f,p,x)}this.boxEndIndex=r.length}}class pt{constructor(r=[],a=(f,p)=>f<p?-1:f>p?1:0){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return--this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:f}=this,p=a[r];for(;r>0;){const x=r-1>>1,b=a[x];if(f(p,b)>=0)break;a[r]=b,r=x}a[r]=p}_down(r){const{data:a,compare:f}=this,p=this.length>>1,x=a[r];for(;r<p;){let b=1+(r<<1);const T=b+1;if(T<this.length&&f(a[T],a[b])<0&&(b=T),f(a[b],x)>=0)break;a[r]=a[b],r=b}a[r]=x}}function er(o,r=1,a=!1){const f=_c.fromPoints(o[0]),p=Math.min(f.width(),f.height());let x=p/2;const b=new pt([],$r),{minX:T,minY:M,maxX:z,maxY:B}=f;if(p===0)return new P(T,M);for(let $=T;$<z;$+=p)for(let K=M;K<B;K+=p)b.push(new Ht($+x,K+x,x,o));let N=(function($){let K=0,J=0,te=0;const ae=$[0];for(let ve=0,se=ae.length,ce=se-1;ve<se;ce=ve++){const xe=ae[ve],Te=ae[ce],qe=xe.x*Te.y-Te.x*xe.y;J+=(xe.x+Te.x)*qe,te+=(xe.y+Te.y)*qe,K+=3*qe}return new Ht(J/K,te/K,0,$)})(o),q=b.length;for(;b.length;){const $=b.pop();($.d>N.d||!N.d)&&(N=$,a&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,q)),$.max-N.d<=r||(x=$.h/2,b.push(new Ht($.p.x-x,$.p.y-x,x,o)),b.push(new Ht($.p.x+x,$.p.y-x,x,o)),b.push(new Ht($.p.x-x,$.p.y+x,x,o)),b.push(new Ht($.p.x+x,$.p.y+x,x,o)),q+=4)}return a&&(console.log(`num probes: ${q}`),console.log(`best distance: ${N.d}`)),N.p}function $r(o,r){return r.max-o.max}function Ht(o,r,a,f){this.p=new P(o,r),this.h=a,this.d=(function(p,x){let b=!1,T=1/0;for(let M=0;M<x.length;M++){const z=x[M];for(let B=0,N=z.length,q=N-1;B<N;q=B++){const $=z[B],K=z[q];$.y>p.y!=K.y>p.y&&p.x<(K.x-$.x)*(p.y-$.y)/(K.y-$.y)+$.x&&(b=!b),T=Math.min(T,Xg(p,$,K))}}return(b?1:-1)*Math.sqrt(T)})(this.p,f),this.max=this.d+this.h*Math.SQRT2}var Xt;_.aP=void 0,(Xt=_.aP||(_.aP={}))[Xt.center=1]="center",Xt[Xt.left=2]="left",Xt[Xt.right=3]="right",Xt[Xt.top=4]="top",Xt[Xt.bottom=5]="bottom",Xt[Xt["top-left"]=6]="top-left",Xt[Xt["top-right"]=7]="top-right",Xt[Xt["bottom-left"]=8]="bottom-left",Xt[Xt["bottom-right"]=9]="bottom-right";const Tr=Number.POSITIVE_INFINITY;function Vr(o,r){return r[1]!==Tr?(function(a,f,p){let x=0,b=0;switch(f=Math.abs(f),p=Math.abs(p),a){case"top-right":case"top-left":case"top":b=p-7;break;case"bottom-right":case"bottom-left":case"bottom":b=7-p}switch(a){case"top-right":case"bottom-right":case"right":x=-f;break;case"top-left":case"bottom-left":case"left":x=f}return[x,b]})(o,r[0],r[1]):(function(a,f){let p=0,x=0;f<0&&(f=0);const b=f/Math.SQRT2;switch(a){case"top-right":case"top-left":x=b-7;break;case"bottom-right":case"bottom-left":x=7-b;break;case"bottom":x=7-f;break;case"top":x=f-7}switch(a){case"top-right":case"bottom-right":p=-b;break;case"top-left":case"bottom-left":p=b;break;case"left":p=f;break;case"right":p=-f}return[p,x]})(o,r[0])}function Tu(o,r,a){var f;const p=o.layout,x=(f=p.get("text-variable-anchor-offset"))===null||f===void 0?void 0:f.evaluate(r,{},a);if(x){const T=x.values,M=[];for(let z=0;z<T.length;z+=2){const B=M[z]=T[z],N=T[z+1].map((q=>q*di));B.startsWith("top")?N[1]-=7:B.startsWith("bottom")&&(N[1]+=7),M[z+1]=N}return new Cn(M)}const b=p.get("text-variable-anchor");if(b){let T;T=o._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(r,{},a)*di,Tr]:p.get("text-offset").evaluate(r,{},a).map((z=>z*di));const M=[];for(const z of b)M.push(z,Vr(z,T));return new Cn(M)}return null}function Zy(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Vk(o,r,a,f,p,x,b,T,M,z,B,N){let q=x.textMaxSize.evaluate(r,{});q===void 0&&(q=b);const $=o.layers[0].layout,K=$.get("icon-offset").evaluate(r,{},B),J=KS(a.horizontal),te=b/24,ae=o.tilePixelRatio*te,ve=o.tilePixelRatio*q/24,se=o.tilePixelRatio*T,ce=o.tilePixelRatio*$.get("symbol-spacing"),xe=$.get("text-padding")*o.tilePixelRatio,Te=(function(kt,Nt,Ot,Zt=1){const Or=kt.get("icon-padding").evaluate(Nt,{},Ot),xr=Or&&Or.values;return[xr[0]*Zt,xr[1]*Zt,xr[2]*Zt,xr[3]*Zt]})($,r,B,o.tilePixelRatio),qe=$.get("text-max-angle")/180*Math.PI,st=$.get("text-rotation-alignment")!=="viewport"&&$.get("symbol-placement")!=="point",tt=$.get("icon-rotation-alignment")==="map"&&$.get("symbol-placement")!=="point",dt=$.get("symbol-placement"),Pt=ce/2,mt=$.get("icon-text-fit");let nt;f&&mt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(nt=Vs(f,a.vertical,mt,$.get("icon-text-fit-padding"),K,te)),J&&(f=Vs(f,J,mt,$.get("icon-text-fit-padding"),K,te)));const Qe=B?N.line.getGranularityForZoomLevel(B.z):1,jt=(kt,Nt)=>{Nt.x<0||Nt.x>=at||Nt.y<0||Nt.y>=at||(function(Ot,Zt,Or,xr,Rn,xa,Mi,Ln,Tn,Xr,Qn,ii,xn,Lo,ba,Bo,Ml,qi,Gn,Pi,Jn,Hi,Ih,Eu,Yy){const rd=Ot.addToLineVertexArray(Zt,Or);let bp,fg,dg,pg,tA=0,rA=0,nA=0,iA=0,Sb=-1,Ab=-1;const Oh={};let aA=zn("");if(Ot.allowVerticalPlacement&&xr.vertical){const qa=Ln.layout.get("text-rotate").evaluate(Jn,{},Eu)+90;dg=new Ke(Tn,Zt,Xr,Qn,ii,xr.vertical,xn,Lo,ba,qa),Mi&&(pg=new Ke(Tn,Zt,Xr,Qn,ii,Mi,Ml,qi,ba,qa))}if(Rn){const qa=Ln.layout.get("icon-rotate").evaluate(Jn,{}),Zs=Ln.layout.get("icon-text-fit")!=="none",wp=qt(Rn,qa,Ih,Zs),Pu=Mi?qt(Mi,qa,Ih,Zs):void 0;fg=new Ke(Tn,Zt,Xr,Qn,ii,Rn,Ml,qi,!1,qa),tA=4*wp.length;const Sp=Ot.iconSizeData;let Pc=null;Sp.kind==="source"?(Pc=[ko*Ln.layout.get("icon-size").evaluate(Jn,{})],Pc[0]>yc&&ar(`${Ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Sp.kind==="composite"&&(Pc=[ko*Hi.compositeIconSizes[0].evaluate(Jn,{},Eu),ko*Hi.compositeIconSizes[1].evaluate(Jn,{},Eu)],(Pc[0]>yc||Pc[1]>yc)&&ar(`${Ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ot.addSymbols(Ot.icon,wp,Pc,Pi,Gn,Jn,_.az.none,Zt,rd.lineStartIndex,rd.lineLength,-1,Eu),Sb=Ot.icon.placedSymbolArray.length-1,Pu&&(rA=4*Pu.length,Ot.addSymbols(Ot.icon,Pu,Pc,Pi,Gn,Jn,_.az.vertical,Zt,rd.lineStartIndex,rd.lineLength,-1,Eu),Ab=Ot.icon.placedSymbolArray.length-1)}const oA=Object.keys(xr.horizontal);for(const qa of oA){const Zs=xr.horizontal[qa];if(!bp){aA=zn(Zs.text);const Pu=Ln.layout.get("text-rotate").evaluate(Jn,{},Eu);bp=new Ke(Tn,Zt,Xr,Qn,ii,Zs,xn,Lo,ba,Pu)}const wp=Zs.positionedLines.length===1;if(nA+=WS(Ot,Zt,Zs,xa,Ln,ba,Jn,Bo,rd,xr.vertical?_.az.horizontal:_.az.horizontalOnly,wp?oA:[qa],Oh,Sb,Hi,Eu),wp)break}xr.vertical&&(iA+=WS(Ot,Zt,xr.vertical,xa,Ln,ba,Jn,Bo,rd,_.az.vertical,["vertical"],Oh,Ab,Hi,Eu));const Hk=bp?bp.boxStartIndex:Ot.collisionBoxArray.length,Zk=bp?bp.boxEndIndex:Ot.collisionBoxArray.length,$k=dg?dg.boxStartIndex:Ot.collisionBoxArray.length,Xk=dg?dg.boxEndIndex:Ot.collisionBoxArray.length,Yk=fg?fg.boxStartIndex:Ot.collisionBoxArray.length,Wk=fg?fg.boxEndIndex:Ot.collisionBoxArray.length,Kk=pg?pg.boxStartIndex:Ot.collisionBoxArray.length,Qk=pg?pg.boxEndIndex:Ot.collisionBoxArray.length;let Mu=-1;const Y_=(qa,Zs)=>qa&&qa.circleDiameter?Math.max(qa.circleDiameter,Zs):Zs;Mu=Y_(bp,Mu),Mu=Y_(dg,Mu),Mu=Y_(fg,Mu),Mu=Y_(pg,Mu);const sA=Mu>-1?1:0;sA&&(Mu*=Yy/di),Ot.glyphOffsetArray.length>=$f.MAX_GLYPHS&&ar("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Jn.sortKey!==void 0&&Ot.addToSortKeyRanges(Ot.symbolInstances.length,Jn.sortKey);const Jk=Tu(Ln,Jn,Eu),[eR,tR]=(function(qa,Zs){const wp=qa.length,Pu=Zs?.values;if(Pu?.length>0)for(let Sp=0;Sp<Pu.length;Sp+=2){const Pc=Pu[Sp+1];qa.emplaceBack(_.aP[Pu[Sp]],Pc[0],Pc[1])}return[wp,qa.length]})(Ot.textAnchorOffsets,Jk);Ot.symbolInstances.emplaceBack(Zt.x,Zt.y,Oh.right>=0?Oh.right:-1,Oh.center>=0?Oh.center:-1,Oh.left>=0?Oh.left:-1,Oh.vertical||-1,Sb,Ab,aA,Hk,Zk,$k,Xk,Yk,Wk,Kk,Qk,Xr,nA,iA,tA,rA,sA,0,xn,Mu,eR,tR)})(o,Nt,kt,a,f,p,nt,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,ae,[xe,xe,xe,xe],st,M,se,Te,tt,K,r,x,z,B,b)};if(dt==="line")for(const kt of l(r.geometry,0,0,at,at)){const Nt=gu(kt,Qe),Ot=et(Nt,ce,qe,a.vertical||J,f,24,ve,o.overscaling,at);for(const Zt of Ot)J&&Gk(o,J.text,Pt,Zt)||jt(Nt,Zt)}else if(dt==="line-center"){for(const kt of r.geometry)if(kt.length>1){const Nt=gu(kt,Qe),Ot=vt(Nt,qe,a.vertical||J,f,24,ve);Ot&&jt(Nt,Ot)}}else if(r.type==="Polygon")for(const kt of Yc(r.geometry,0)){const Nt=er(kt,16);jt(gu(kt[0],Qe,!0),new W(Nt.x,Nt.y,0))}else if(r.type==="LineString")for(const kt of r.geometry){const Nt=gu(kt,Qe);jt(Nt,new W(Nt[0].x,Nt[0].y,0))}else if(r.type==="Point")for(const kt of r.geometry)for(const Nt of kt)jt([Nt],new W(Nt.x,Nt.y,0))}function WS(o,r,a,f,p,x,b,T,M,z,B,N,q,$,K){const J=(function(ve,se,ce,xe,Te,qe,st,tt){const dt=xe.layout.get("text-rotate").evaluate(qe,{})*Math.PI/180,Pt=[];for(const mt of se.positionedLines)for(const nt of mt.positionedGlyphs){if(!nt.rect)continue;const Qe=nt.rect||{};let jt=4,kt=!0,Nt=1,Ot=0;const Zt=(Te||tt)&&nt.vertical,Or=nt.metrics.advance*nt.scale/2;if(tt&&se.verticalizable&&(Ot=mt.lineOffset/2-(nt.imageName?-(di-nt.metrics.width*nt.scale)/2:(nt.scale-1)*di)),nt.imageName){const qi=st[nt.imageName];kt=qi.sdf,Nt=qi.pixelRatio,jt=1/Nt}const xr=Te?[nt.x+Or,nt.y]:[0,0];let Rn=Te?[0,0]:[nt.x+Or+ce[0],nt.y+ce[1]-Ot],xa=[0,0];Zt&&(xa=Rn,Rn=[0,0]);const Mi=nt.metrics.isDoubleResolution?2:1,Ln=(nt.metrics.left-jt)*nt.scale-Or+Rn[0],Tn=(-nt.metrics.top-jt)*nt.scale+Rn[1],Xr=Ln+Qe.w/Mi*nt.scale/Nt,Qn=Tn+Qe.h/Mi*nt.scale/Nt,ii=new P(Ln,Tn),xn=new P(Xr,Tn),Lo=new P(Ln,Qn),ba=new P(Xr,Qn);if(Zt){const qi=new P(-Or,Or- -17),Gn=-Math.PI/2,Pi=12-Or,Jn=new P(22-Pi,-(nt.imageName?Pi:0)),Hi=new P(...xa);ii._rotateAround(Gn,qi)._add(Jn)._add(Hi),xn._rotateAround(Gn,qi)._add(Jn)._add(Hi),Lo._rotateAround(Gn,qi)._add(Jn)._add(Hi),ba._rotateAround(Gn,qi)._add(Jn)._add(Hi)}if(dt){const qi=Math.sin(dt),Gn=Math.cos(dt),Pi=[Gn,-qi,qi,Gn];ii._matMult(Pi),xn._matMult(Pi),Lo._matMult(Pi),ba._matMult(Pi)}const Bo=new P(0,0),Ml=new P(0,0);Pt.push({tl:ii,tr:xn,bl:Lo,br:ba,tex:Qe,writingMode:se.writingMode,glyphOffset:xr,sectionIndex:nt.sectionIndex,isSDF:kt,pixelOffsetTL:Bo,pixelOffsetBR:Ml,minFontScaleX:0,minFontScaleY:0})}return Pt})(0,a,T,p,x,b,f,o.allowVerticalPlacement),te=o.textSizeData;let ae=null;te.kind==="source"?(ae=[ko*p.layout.get("text-size").evaluate(b,{})],ae[0]>yc&&ar(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):te.kind==="composite"&&(ae=[ko*$.compositeTextSizes[0].evaluate(b,{},K),ko*$.compositeTextSizes[1].evaluate(b,{},K)],(ae[0]>yc||ae[1]>yc)&&ar(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,J,ae,T,x,b,z,r,M.lineStartIndex,M.lineLength,q,K);for(const ve of B)N[ve]=o.text.placedSymbolArray.length-1;return 4*J.length}function KS(o){for(const r in o)return o[r];return null}function Gk(o,r,a,f){const p=o.compareText;if(r in p){const x=p[r];for(let b=x.length-1;b>=0;b--)if(f.dist(x[b])<a)return!0}else p[r]=[];return p[r].push(f),!1}const QS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class gb{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,f]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=f>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const x=QS[15&f];if(!x)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(r,2,1),[T]=new Uint32Array(r,4,1);return new gb(T,b,x,r)}constructor(r,a=64,f=Float64Array,p){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=f,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const x=QS.indexOf(this.ArrayType),b=2*r*this.ArrayType.BYTES_PER_ELEMENT,T=r*this.IndexArrayType.BYTES_PER_ELEMENT,M=(8-T%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${f}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+T+M,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+b+T+M),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+T+M,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const f=this._pos>>1;return this.ids[f]=f,this.coords[this._pos++]=r,this.coords[this._pos++]=a,f}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return yb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,f,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:b,nodeSize:T}=this,M=[0,x.length-1,0],z=[];for(;M.length;){const B=M.pop()||0,N=M.pop()||0,q=M.pop()||0;if(N-q<=T){for(let te=q;te<=N;te++){const ae=b[2*te],ve=b[2*te+1];ae>=r&&ae<=f&&ve>=a&&ve<=p&&z.push(x[te])}continue}const $=q+N>>1,K=b[2*$],J=b[2*$+1];K>=r&&K<=f&&J>=a&&J<=p&&z.push(x[$]),(B===0?r<=K:a<=J)&&(M.push(q),M.push($-1),M.push(1-B)),(B===0?f>=K:p>=J)&&(M.push($+1),M.push(N),M.push(1-B))}return z}within(r,a,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:x,nodeSize:b}=this,T=[0,p.length-1,0],M=[],z=f*f;for(;T.length;){const B=T.pop()||0,N=T.pop()||0,q=T.pop()||0;if(N-q<=b){for(let te=q;te<=N;te++)eA(x[2*te],x[2*te+1],r,a)<=z&&M.push(p[te]);continue}const $=q+N>>1,K=x[2*$],J=x[2*$+1];eA(K,J,r,a)<=z&&M.push(p[$]),(B===0?r-f<=K:a-f<=J)&&(T.push(q),T.push($-1),T.push(1-B)),(B===0?r+f>=K:a+f>=J)&&(T.push($+1),T.push(N),T.push(1-B))}return M}}function yb(o,r,a,f,p,x){if(p-f<=a)return;const b=f+p>>1;JS(o,r,b,f,p,x),yb(o,r,a,f,b-1,1-x),yb(o,r,a,b+1,p,1-x)}function JS(o,r,a,f,p,x){for(;p>f;){if(p-f>600){const z=p-f+1,B=a-f+1,N=Math.log(z),q=.5*Math.exp(2*N/3),$=.5*Math.sqrt(N*q*(z-q)/z)*(B-z/2<0?-1:1);JS(o,r,a,Math.max(f,Math.floor(a-B*q/z+$)),Math.min(p,Math.floor(a+(z-B)*q/z+$)),x)}const b=r[2*a+x];let T=f,M=p;for($y(o,r,f,a),r[2*p+x]>b&&$y(o,r,f,p);T<M;){for($y(o,r,T,M),T++,M--;r[2*T+x]<b;)T++;for(;r[2*M+x]>b;)M--}r[2*f+x]===b?$y(o,r,f,M):(M++,$y(o,r,M,p)),M<=a&&(f=M+1),a<=M&&(p=M-1)}}function $y(o,r,a,f){vb(o,a,f),vb(r,2*a,2*f),vb(r,2*a+1,2*f+1)}function vb(o,r,a){const f=o[r];o[r]=o[a],o[a]=f}function eA(o,r,a,f){const p=o-a,x=r-f;return p*p+x*x}var _b;_.cH=void 0,(_b=_.cH||(_.cH={})).create="create",_b.load="load",_b.fullLoad="fullLoad";let X_=null,Xy=[];const xb=1e3/60,bb="loadTime",wb="fullLoadTime",qk={mark(o){performance.mark(o)},frame(o){const r=o;X_!=null&&Xy.push(r-X_),X_=r},clearMetrics(){X_=null,Xy=[],performance.clearMeasures(bb),performance.clearMeasures(wb);for(const o in _.cH)performance.clearMarks(_.cH[o])},getPerformanceMetrics(){performance.measure(bb,_.cH.create,_.cH.load),performance.measure(wb,_.cH.create,_.cH.fullLoad);const o=performance.getEntriesByName(bb)[0].duration,r=performance.getEntriesByName(wb)[0].duration,a=Xy.length,f=1/(Xy.reduce(((x,b)=>x+b),0)/a/1e3),p=Xy.filter((x=>x>xb)).reduce(((x,b)=>x+(b-xb)/xb),0);return{loadTime:o,fullLoadTime:r,fps:f,percentDroppedFrames:p/(a+p)*100,totalFrames:a}}};_.$=G,_.A=me,_.B=To,_.C=fi,_.D=Bt,_.E=wr,_.F=function([o,r,a]){return r+=90,r*=Math.PI/180,a*=Math.PI/180,{x:o*Math.cos(r)*Math.sin(a),y:o*Math.sin(r)*Math.sin(a),z:o*Math.cos(a)}},_.G=gn,_.H=Fr,_.I=tn,_.J=Tf,_.K=function(o){if(Br==null){const r=o.navigator?o.navigator.userAgent:null;Br=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return Br},_.L=class{constructor(o,r){this.target=o,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new $m((()=>this.process())),this.subscription=Nu(this.target,"message",(a=>this.receive(a)),!1),this.globalScope=cn(self)?o:window}registerMessageHandler(o,r){this.messageHandlers[o]=r}unregisterMessageHandler(o){delete this.messageHandlers[o]}sendAsync(o,r){return new Promise(((a,f)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=r?Nu(r.signal,"abort",(()=>{x?.unsubscribe(),delete this.resolveRejects[p];const M={id:p,type:"<cancel>",origin:location.origin,targetMapId:o.targetMapId,sourceMapId:this.mapId};this.target.postMessage(M)}),wy):null;this.resolveRejects[p]={resolve:M=>{x?.unsubscribe(),a(M)},reject:M=>{x?.unsubscribe(),f(M)}};const b=[],T=Object.assign(Object.assign({},o),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Eo(o.data,b)});this.target.postMessage(T,{transfer:b})}))}receive(o){const r=o.data,a=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[a];const f=this.abortControllers[a];return delete this.abortControllers[a],void(f&&f.abort())}if(cn(self)||r.mustQueue)return this.tasks[a]=r,this.taskQueue.push(a),void this.invoker.trigger();this.processTask(a,r)}}process(){if(this.taskQueue.length===0)return;const o=this.taskQueue.shift(),r=this.tasks[o];delete this.tasks[o],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(o,r)}processTask(o,r){return c(this,void 0,void 0,(function*(){if(r.type==="<response>"){const p=this.resolveRejects[o];return delete this.resolveRejects[o],p?void(r.error?p.reject(sc(r.error)):p.resolve(sc(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(o,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const a=sc(r.data),f=new AbortController;this.abortControllers[o]=f;try{const p=yield this.messageHandlers[r.type](r.sourceMapId,a,f);this.completeTask(o,null,p)}catch(p){this.completeTask(o,p)}}))}completeTask(o,r,a){const f=[];delete this.abortControllers[o];const p={id:o,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?Eo(r):null,data:Eo(a,f)};this.target.postMessage(p,{transfer:f})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},_.M=Ne,_.N=function(){var o=new me(16);return me!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},_.O=function(o,r,a){var f,p,x,b,T,M,z,B,N,q,$,K,J=a[0],te=a[1],ae=a[2];return r===o?(o[12]=r[0]*J+r[4]*te+r[8]*ae+r[12],o[13]=r[1]*J+r[5]*te+r[9]*ae+r[13],o[14]=r[2]*J+r[6]*te+r[10]*ae+r[14],o[15]=r[3]*J+r[7]*te+r[11]*ae+r[15]):(p=r[1],x=r[2],b=r[3],T=r[4],M=r[5],z=r[6],B=r[7],N=r[8],q=r[9],$=r[10],K=r[11],o[0]=f=r[0],o[1]=p,o[2]=x,o[3]=b,o[4]=T,o[5]=M,o[6]=z,o[7]=B,o[8]=N,o[9]=q,o[10]=$,o[11]=K,o[12]=f*J+T*te+N*ae+r[12],o[13]=p*J+M*te+q*ae+r[13],o[14]=x*J+z*te+$*ae+r[14],o[15]=b*J+B*te+K*ae+r[15]),o},_.P=P,_.Q=function(o,r,a){var f=a[0],p=a[1],x=a[2];return o[0]=r[0]*f,o[1]=r[1]*f,o[2]=r[2]*f,o[3]=r[3]*f,o[4]=r[4]*p,o[5]=r[5]*p,o[6]=r[6]*p,o[7]=r[7]*p,o[8]=r[8]*x,o[9]=r[9]*x,o[10]=r[10]*x,o[11]=r[11]*x,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},_.R=ga,_.S=function(o,r,a){var f=r[0],p=r[1],x=r[2],b=r[3],T=r[4],M=r[5],z=r[6],B=r[7],N=r[8],q=r[9],$=r[10],K=r[11],J=r[12],te=r[13],ae=r[14],ve=r[15],se=a[0],ce=a[1],xe=a[2],Te=a[3];return o[0]=se*f+ce*T+xe*N+Te*J,o[1]=se*p+ce*M+xe*q+Te*te,o[2]=se*x+ce*z+xe*$+Te*ae,o[3]=se*b+ce*B+xe*K+Te*ve,o[4]=(se=a[4])*f+(ce=a[5])*T+(xe=a[6])*N+(Te=a[7])*J,o[5]=se*p+ce*M+xe*q+Te*te,o[6]=se*x+ce*z+xe*$+Te*ae,o[7]=se*b+ce*B+xe*K+Te*ve,o[8]=(se=a[8])*f+(ce=a[9])*T+(xe=a[10])*N+(Te=a[11])*J,o[9]=se*p+ce*M+xe*q+Te*te,o[10]=se*x+ce*z+xe*$+Te*ae,o[11]=se*b+ce*B+xe*K+Te*ve,o[12]=(se=a[12])*f+(ce=a[13])*T+(xe=a[14])*N+(Te=a[15])*J,o[13]=se*p+ce*M+xe*q+Te*te,o[14]=se*x+ce*z+xe*$+Te*ae,o[15]=se*b+ce*B+xe*K+Te*ve,o},_.T=Am,_.U=function(o,r){const a={};for(let f=0;f<r.length;f++){const p=r[f];p in o&&(a[p]=o[p])}return a},_.V=Tl,_.W=Jt,_.X=Sy,_.Y=C_,_.Z=Ee,_._=c,_.a=ue,_.a$=It,_.a0=oe,_.a1=Qs,_.a2=po,_.a3=I_,_.a4=np,_.a5=at,_.a6=function(o,r,a){if(!o)return r||{};if(!r)return o||{};const f=ap(o),p=ap(r);(function(b,T){T.removeAll&&(b.add.clear(),b.update.clear(),b.remove.clear(),T.remove.clear());for(const M of T.remove)b.add.delete(M),b.update.delete(M);for(const[M,z]of T.update){const B=b.update.get(M);B&&(T.update.set(M,Ty(B,z)),b.update.delete(M))}})(f,p);const x={};if((f.removeAll||p.removeAll)&&(x.removeAll=!0),x.remove=new Set([...f.remove,...p.remove]),x.add=new Map([...f.add,...p.add]),x.update=new Map([...f.update,...p.update]),x.remove.size&&x.add.size)for(const b of x.add.keys())x.remove.delete(b);return(function(b){const T={};return b.removeAll&&(T.removeAll=b.removeAll),b.remove&&(T.remove=Array.from(b.remove)),b.add&&(T.add=Array.from(b.add.values())),b.update&&(T.update=Array.from(b.update.values())),T})(x)},_.a7=function(o,r){const a=new Map;if(o==null||o.type==null)return a;if(o.type==="Feature"){const f=ip(o,r);return f==null?void 0:(a.set(f,o),a)}if(o.type==="FeatureCollection"){const f=new Set;for(const p of o.features){const x=ip(p,r);if(x==null||f.has(x))return;f.add(x),a.set(x,p)}return a}},_.a8=function(o,r,a){var f,p;const x=[];if(r.removeAll)o.clear();else if(r.remove)for(const b of r.remove){const T=o.get(b);T&&(x.push(T.geometry),o.delete(b))}if(r.add)for(const b of r.add){const T=ip(b,a);if(T==null)continue;const M=o.get(T);M&&x.push(M.geometry),x.push(b.geometry),o.set(T,b)}if(r.update)for(const b of r.update){const T=o.get(b.id);if(!T)continue;const M=!!b.newGeometry,z=b.removeAllProperties||((f=b.removeProperties)===null||f===void 0?void 0:f.length)>0||((p=b.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if(!M&&!z)continue;x.push(T.geometry);const B=Object.assign({},T);if(o.set(b.id,B),M&&(x.push(b.newGeometry),B.geometry=b.newGeometry),z){if(B.properties=b.removeAllProperties?{}:Object.assign({},B.properties||{}),b.removeProperties)for(const N of b.removeProperties)delete B.properties[N];if(b.addOrUpdateProperties)for(const{key:N,value:q}of b.addOrUpdateProperties)B.properties[N]=q}}return x},_.a9=Zr,_.aA=function(o,{uSize:r,uSizeT:a},{lowerSize:f,upperSize:p}){return o.kind==="source"?f/ko:o.kind==="composite"?gn.number(f/ko,p/ko,a):r},_.aB=function(o,r){var a=r[0],f=r[1],p=r[2],x=r[3],b=r[4],T=r[5],M=r[6],z=r[7],B=r[8],N=r[9],q=r[10],$=r[11],K=r[12],J=r[13],te=r[14],ae=r[15],ve=a*T-f*b,se=a*M-p*b,ce=a*z-x*b,xe=f*M-p*T,Te=f*z-x*T,qe=p*z-x*M,st=B*J-N*K,tt=B*te-q*K,dt=B*ae-$*K,Pt=N*te-q*J,mt=N*ae-$*J,nt=q*ae-$*te,Qe=ve*nt-se*mt+ce*Pt+xe*dt-Te*tt+qe*st;return Qe?(o[0]=(T*nt-M*mt+z*Pt)*(Qe=1/Qe),o[1]=(p*mt-f*nt-x*Pt)*Qe,o[2]=(J*qe-te*Te+ae*xe)*Qe,o[3]=(q*Te-N*qe-$*xe)*Qe,o[4]=(M*dt-b*nt-z*tt)*Qe,o[5]=(a*nt-p*dt+x*tt)*Qe,o[6]=(te*ce-K*qe-ae*se)*Qe,o[7]=(B*qe-q*ce+$*se)*Qe,o[8]=(b*mt-T*dt+z*st)*Qe,o[9]=(f*dt-a*mt-x*st)*Qe,o[10]=(K*Te-J*ce+ae*ve)*Qe,o[11]=(N*ce-B*Te-$*ve)*Qe,o[12]=(T*tt-b*Pt-M*st)*Qe,o[13]=(a*Pt-f*tt+p*st)*Qe,o[14]=(J*se-K*xe-te*ve)*Qe,o[15]=(B*xe-N*se+q*ve)*Qe,o):null},_.aC=We,_.aD=function(o){var r=o[0],a=o[1];return Math.sqrt(r*r+a*a)},_.aE=function(o){return o[0]=0,o[1]=0,o},_.aF=function(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o},_.aG=vy,_.aH=Ct,_.aI=function(o,r,a,f){const p=r.y-o.y,x=r.x-o.x,b=f.y-a.y,T=f.x-a.x,M=b*x-T*p;if(M===0)return null;const z=(T*(o.y-a.y)-b*(o.x-a.x))/M;return new P(o.x+z*x,o.y+z*p)},_.aJ=l,_.aK=bh,_.aL=function(o){let r=1/0,a=1/0,f=-1/0,p=-1/0;for(const x of o)r=Math.min(r,x.x),a=Math.min(a,x.y),f=Math.max(f,x.x),p=Math.max(p,x.y);return[r,a,f,p]},_.aM=di,_.aN=Kt,_.aO=function(o,r,a,f,p=!1){if(!a[0]&&!a[1])return[0,0];const x=p?f==="map"?-o.bearingInRadians:0:f==="viewport"?o.bearingInRadians:0;if(x){const b=Math.sin(x),T=Math.cos(x);a=[a[0]*T-a[1]*b,a[0]*b+a[1]*T]}return[p?a[0]:Kt(r,a[0],o.zoom),p?a[1]:Kt(r,a[1],o.zoom)]},_.aQ=Vm,_.aR=Zy,_.aS=py,_.aT=gb,_.aU=yn,_.aV=$d,_.aW=fe,_.aX=Mt,_.aY=Xe,_.aZ=la,_.a_=Ay,_.aa=_c,_.ab=25,_.ac=ki,_.ad=o=>{const r=window.document.createElement("video");return r.muted=!0,new Promise((a=>{r.onloadstart=()=>{a(r)};for(const f of o){const p=window.document.createElement("source");ut(f)||(r.crossOrigin="Anonymous"),p.src=f,r.appendChild(p)}}))},_.ae=xt,_.af=function(){return ct++},_.ag=v,_.ah=$f,_.ai=xp,_.aj=ca,_.ak=Oo,_.al=Wm,_.am=function(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((a,f,p,x)=>{const b=p||x;return r[f]=!b||b.toLowerCase(),""})),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r},_.an=Qt,_.ao=85.051129,_.ap=gi,_.aq=function(o){return Math.pow(2,o)},_.ar=be,_.as=D_,_.at=function(o){return Math.log(o)/Math.LN2},_.au=function(o){var r=o[0],a=o[1];return r*r+a*a},_.av=function(o){if(!o.length)return new Set;const r=Math.max(...o.map((M=>M.canonical.z)));let a=1/0,f=-1/0,p=1/0,x=-1/0;const b=[];for(const M of o){const{x:z,y:B,z:N}=M.canonical,q=Math.pow(2,r-N),$=z*q,K=B*q;b.push({id:M,x:$,y:K}),$<a&&(a=$),$>f&&(f=$),K<p&&(p=K),K>x&&(x=K)}const T=new Set;for(const M of b)M.x!==a&&M.x!==f&&M.y!==p&&M.y!==x||T.add(M.id);return T},_.aw=function(o,r){const a=Math.abs(2*o.wrap)-+(o.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return o.overscaledZ-r.overscaledZ||f-a||r.canonical.y-o.canonical.y||r.canonical.x-o.canonical.x},_.ax=class{constructor(o,r){this.max=o,this.onRemove=r,this.reset()}reset(){for(const o in this.data)for(const r of this.data[o])r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value);return this.data={},this.order=[],this}add(o,r,a){const f=o.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const p={value:r,timeout:void 0};if(a!==void 0&&(p.timeout=setTimeout((()=>{this.remove(o,p)}),a)),this.data[f].push(p),this.order.push(f),this.order.length>this.max){const x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const r=this.data[o].shift();return r.timeout&&clearTimeout(r.timeout),this.data[o].length===0&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),r.value}getByKey(o){const r=this.data[o];return r?r[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,r){if(!this.has(o))return this;const a=o.wrapped().key,f=r===void 0?0:this.data[a].indexOf(r),p=this.data[a][f];return this.data[a].splice(f,1),p.timeout&&clearTimeout(p.timeout),this.data[a].length===0&&delete this.data[a],this.onRemove(p.value),this.order.splice(this.order.indexOf(a),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const r=this._getAndRemoveByKey(this.order[0]);r&&this.onRemove(r)}return this}filter(o){const r=[];for(const a in this.data)for(const f of this.data[a])o(f.value)||r.push(f);for(const a of r)this.remove(a.value.tileID,a)}},_.ay=function(o,r){let a=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:p,minZoom:x,maxZoom:b}=o,T=p?Qt(Ji.interpolationFactor(p,r,x,b),0,1):0;o.kind==="camera"?f=gn.number(o.minSize,o.maxSize,T):a=T}return{uSizeT:a,uSize:f}},_.b=Xa,_.b$=Io,_.b0=bt,_.b1=function(o){var r=new me(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r},_.b2=function(o,r,a){return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],o},_.b3=function(o,r){var a=r[0],f=r[1],p=r[2],x=a*a+f*f+p*p;return x>0&&(x=1/Math.sqrt(x)),o[0]=r[0]*x,o[1]=r[1]*x,o[2]=r[2]*x,o},_.b4=yt,_.b5=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]},_.b6=function(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o[3]=r[3]*a[3],o},_.b7=je,_.b8=function(o,r,a){const f=r[0]*a[0]+r[1]*a[1]+r[2]*a[2];return f===0?null:(-(o[0]*a[0]+o[1]*a[1]+o[2]*a[2])-a[3])/f},_.b9=Tt,_.bA=function(o,r,a,f){return o[0]=r[0]+a[0]*f,o[1]=r[1]+a[1]*f,o[2]=r[2]+a[2]*f,o},_.bB=Le,_.bC=function(o,r,a){var f=a[0],p=a[1],x=a[2],b=a[3],T=r[0],M=r[1],z=r[2],B=p*z-x*M,N=x*T-f*z,q=f*M-p*T;return o[0]=T+b*(B+=B)+p*(q+=q)-x*(N+=N),o[1]=M+b*N+x*B-f*q,o[2]=z+b*q+f*N-p*B,o},_.bD=function(o,r,a){const f=(function(M){var z=M[3],B=M[4],N=M[5],q=M[6],$=M[7],K=M[8];return M[0]*(K*B-N*$)+M[1]*(-K*z+N*q)+M[2]*($*z-B*q)})([o[0],o[1],o[2],r[0],r[1],r[2],a[0],a[1],a[2]]);if(f===0)return null;const p=yt([],[r[0],r[1],r[2]],[a[0],a[1],a[2]]),x=yt([],[a[0],a[1],a[2]],[o[0],o[1],o[2]]),b=yt([],[o[0],o[1],o[2]],[r[0],r[1],r[2]]),T=It([],p,-o[3]);return bt(T,T,It([],x,-r[3])),bt(T,T,It([],b,-a[3])),It(T,T,1/f),T},_.bE=Xm,_.bF=function(){return new Float64Array(4)},_.bG=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[0]*Math.cos(f)-p[1]*Math.sin(f),x[1]=p[0]*Math.sin(f)+p[1]*Math.cos(f),x[2]=p[2],o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bH=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[0],x[1]=p[1]*Math.cos(f)-p[2]*Math.sin(f),x[2]=p[1]*Math.sin(f)+p[2]*Math.cos(f),o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bI=function(o,r,a,f){var p=[],x=[];return p[0]=r[0]-a[0],p[1]=r[1]-a[1],p[2]=r[2]-a[2],x[0]=p[2]*Math.sin(f)+p[0]*Math.cos(f),x[1]=p[1],x[2]=p[2]*Math.cos(f)-p[0]*Math.sin(f),o[0]=x[0]+a[0],o[1]=x[1]+a[1],o[2]=x[2]+a[2],o},_.bJ=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[0],b=r[1],T=r[2],M=r[3],z=r[8],B=r[9],N=r[10],q=r[11];return r!==o&&(o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=x*p-z*f,o[1]=b*p-B*f,o[2]=T*p-N*f,o[3]=M*p-q*f,o[8]=x*f+z*p,o[9]=b*f+B*p,o[10]=T*f+N*p,o[11]=M*f+q*p,o},_.bK=function(o,r){const a=Oe(o,360),f=Oe(r,360),p=f-a,x=f>a?p-360:p+360;return Math.abs(p)<Math.abs(x)?p:x},_.bL=function(o){return o[0]=0,o[1]=0,o[2]=0,o},_.bM=function(o,r,a,f){const p=Math.sqrt(o*o+r*r),x=Math.sqrt(a*a+f*f);o/=p,r/=p,a/=x,f/=x;const b=Math.acos(o*a+r*f);return-r*a+o*f>0?b:-b},_.bN=function(o,r){const a=Oe(o,2*Math.PI),f=Oe(r,2*Math.PI);return Math.min(Math.abs(a-f),Math.abs(a-f+2*Math.PI),Math.abs(a-f-2*Math.PI))},_.bO=function(){const o={},r=Ve.$version;for(const a in Ve.$root){const f=Ve.$root[a];if(f.required){let p=null;p=a==="version"?r:f.type==="array"?[]:{},p!=null&&(o[a]=p)}}return o},_.bP=Ze,_.bQ=Pf,_.bR=function o(r,a){if(Array.isArray(r)){if(!Array.isArray(a)||r.length!==a.length)return!1;for(let f=0;f<r.length;f++)if(!o(r[f],a[f]))return!1;return!0}if(typeof r=="object"&&r!==null&&a!==null){if(typeof a!="object"||Object.keys(r).length!==Object.keys(a).length)return!1;for(const f in r)if(!o(r[f],a[f]))return!1;return!0}return r===a},_.bS=function(o){o=o.slice();const r=Object.create(null);for(let a=0;a<o.length;a++)r[o[a].id]=o[a];for(let a=0;a<o.length;a++)"ref"in o[a]&&(o[a]=Zn(o[a],r[o[a].ref]));return o},_.bT=function(o,r){if(o.type==="custom")return new by(o,r);switch(o.type){case"background":return new Pr(o,r);case"circle":return new bm(o,r);case"color-relief":return new n_(o,r);case"fill":return new l_(o,r);case"fill-extrusion":return new sy(o,r);case"heatmap":return new t_(o,r);case"hillshade":return new kn(o,r);case"line":return new uy(o,r);case"raster":return new Rs(o,r);case"symbol":return new vc(o,r)}},_.bU=o=>o.type==="raster",_.bV=wt,_.bW=function(o,r){if(!o)return[{command:"setStyle",args:[r]}];let a=[];try{if(!sr(o.version,r.version))return[{command:"setStyle",args:[r]}];sr(o.center,r.center)||a.push({command:"setCenter",args:[r.center]}),sr(o.state,r.state)||a.push({command:"setGlobalState",args:[r.state]}),sr(o.centerAltitude,r.centerAltitude)||a.push({command:"setCenterAltitude",args:[r.centerAltitude]}),sr(o.zoom,r.zoom)||a.push({command:"setZoom",args:[r.zoom]}),sr(o.bearing,r.bearing)||a.push({command:"setBearing",args:[r.bearing]}),sr(o.pitch,r.pitch)||a.push({command:"setPitch",args:[r.pitch]}),sr(o.roll,r.roll)||a.push({command:"setRoll",args:[r.roll]}),sr(o.sprite,r.sprite)||a.push({command:"setSprite",args:[r.sprite]}),sr(o.glyphs,r.glyphs)||a.push({command:"setGlyphs",args:[r.glyphs]}),sr(o.transition,r.transition)||a.push({command:"setTransition",args:[r.transition]}),sr(o.light,r.light)||a.push({command:"setLight",args:[r.light]}),sr(o.terrain,r.terrain)||a.push({command:"setTerrain",args:[r.terrain]}),sr(o.sky,r.sky)||a.push({command:"setSky",args:[r.sky]}),sr(o.projection,r.projection)||a.push({command:"setProjection",args:[r.projection]});const f={},p=[];(function(b,T,M,z){let B;for(B in T=T||{},b=b||{})Object.prototype.hasOwnProperty.call(b,B)&&(Object.prototype.hasOwnProperty.call(T,B)||Gr(B,M,z));for(B in T)Object.prototype.hasOwnProperty.call(T,B)&&(Object.prototype.hasOwnProperty.call(b,B)?sr(b[B],T[B])||(b[B].type==="geojson"&&T[B].type==="geojson"&&Yr(b,T,B)?Nr(M,{command:"setGeoJSONSourceData",args:[B,T[B].data]}):Mn(B,T,M,z)):li(B,T,M))})(o.sources,r.sources,p,f);const x=[];o.layers&&o.layers.forEach((b=>{"source"in b&&f[b.source]?a.push({command:"removeLayer",args:[b.id]}):x.push(b)})),a=a.concat(p),(function(b,T,M){T=T||[];const z=(b=b||[]).map(Fu),B=T.map(Fu),N=b.reduce(Nl,{}),q=T.reduce(Nl,{}),$=z.slice(),K=Object.create(null);let J,te,ae,ve,se;for(let ce=0,xe=0;ce<z.length;ce++)J=z[ce],Object.prototype.hasOwnProperty.call(q,J)?xe++:(Nr(M,{command:"removeLayer",args:[J]}),$.splice($.indexOf(J,xe),1));for(let ce=0,xe=0;ce<B.length;ce++)J=B[B.length-1-ce],$[$.length-1-ce]!==J&&(Object.prototype.hasOwnProperty.call(N,J)?(Nr(M,{command:"removeLayer",args:[J]}),$.splice($.lastIndexOf(J,$.length-xe),1)):xe++,ve=$[$.length-ce],Nr(M,{command:"addLayer",args:[q[J],ve]}),$.splice($.length-ce,0,J),K[J]=!0);for(let ce=0;ce<B.length;ce++)if(J=B[ce],te=N[J],ae=q[J],!K[J]&&!sr(te,ae))if(sr(te.source,ae.source)&&sr(te["source-layer"],ae["source-layer"])&&sr(te.type,ae.type)){for(se in $n(te.layout,ae.layout,M,J,null,"setLayoutProperty"),$n(te.paint,ae.paint,M,J,null,"setPaintProperty"),sr(te.filter,ae.filter)||Nr(M,{command:"setFilter",args:[J,ae.filter]}),sr(te.minzoom,ae.minzoom)&&sr(te.maxzoom,ae.maxzoom)||Nr(M,{command:"setLayerZoomRange",args:[J,ae.minzoom,ae.maxzoom]}),te)Object.prototype.hasOwnProperty.call(te,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?$n(te[se],ae[se],M,J,se.slice(6),"setPaintProperty"):sr(te[se],ae[se])||Nr(M,{command:"setLayerProperty",args:[J,se,ae[se]]}));for(se in ae)Object.prototype.hasOwnProperty.call(ae,se)&&!Object.prototype.hasOwnProperty.call(te,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?$n(te[se],ae[se],M,J,se.slice(6),"setPaintProperty"):sr(te[se],ae[se])||Nr(M,{command:"setLayerProperty",args:[J,se,ae[se]]}))}else Nr(M,{command:"removeLayer",args:[J]}),ve=$[$.lastIndexOf(J)+1],Nr(M,{command:"addLayer",args:[ae,ve]})})(x,r.layers,a)}catch(f){console.warn("Unable to compute style diff:",f),a=[{command:"setStyle",args:[r]}]}return a},_.bX=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},_.bY=tr,_.bZ=gr,_.b_=class extends pa{constructor(o,r){super(o,r),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},_.ba=function(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o[3]=r[3]*a,o},_.bb=function(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]},_.bc=O_,_.bd=Yf,_.be=function(o,r,a,f,p){var x=1/Math.tan(r/2);if(o[0]=x/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=x,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,p!=null&&p!==1/0){var b=1/(f-p);o[10]=(p+f)*b,o[14]=2*p*f*b}else o[10]=-1,o[14]=-2*f;return o},_.bf=function(o){var r=new me(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},_.bg=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[0],b=r[1],T=r[2],M=r[3],z=r[4],B=r[5],N=r[6],q=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=x*p+z*f,o[1]=b*p+B*f,o[2]=T*p+N*f,o[3]=M*p+q*f,o[4]=z*p-x*f,o[5]=B*p-b*f,o[6]=N*p-T*f,o[7]=q*p-M*f,o},_.bh=function(o,r,a){var f=Math.sin(a),p=Math.cos(a),x=r[4],b=r[5],T=r[6],M=r[7],z=r[8],B=r[9],N=r[10],q=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=x*p+z*f,o[5]=b*p+B*f,o[6]=T*p+N*f,o[7]=M*p+q*f,o[8]=z*p-x*f,o[9]=B*p-b*f,o[10]=N*p-T*f,o[11]=q*p-M*f,o},_.bi=function(){const o=new Float32Array(16);return be(o),o},_.bj=function(){const o=new Float64Array(16);return be(o),o},_.bk=function(){return new Float64Array(16)},_.bl=function(o,r,a){const f=new Float64Array(4);return Le(f,o,r-90,a),f},_.bm=function(o,r,a,f){var p,x,b,T,M,z=r[0],B=r[1],N=r[2],q=r[3],$=a[0],K=a[1],J=a[2],te=a[3];return(x=z*$+B*K+N*J+q*te)<0&&(x=-x,$=-$,K=-K,J=-J,te=-te),1-x>he?(p=Math.acos(x),b=Math.sin(p),T=Math.sin((1-f)*p)/b,M=Math.sin(f*p)/b):(T=1-f,M=f),o[0]=T*z+M*$,o[1]=T*B+M*K,o[2]=T*N+M*J,o[3]=T*q+M*te,o},_.bn=function(o){const r=new Float64Array(9);(function(x,b){var T=b[0],M=b[1],z=b[2],B=b[3],N=T+T,q=M+M,$=z+z,K=T*N,J=M*N,te=M*q,ae=z*N,ve=z*q,se=z*$,ce=B*N,xe=B*q,Te=B*$;x[0]=1-te-se,x[3]=J-Te,x[6]=ae+xe,x[1]=J+Te,x[4]=1-K-se,x[7]=ve-ce,x[2]=ae-xe,x[5]=ve+ce,x[8]=1-K-te})(r,o);const a=la(-Math.asin(Qt(r[2],-1,1)));let f,p;return Math.hypot(r[5],r[8])<.001?(f=0,p=-la(Math.atan2(r[3],r[4]))):(f=la(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),p=la(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:f,pitch:a+90,bearing:p}},_.bo=function(o,r){return o.roll==r.roll&&o.pitch==r.pitch&&o.bearing==r.bearing},_.bp=fr,_.bq=hu,_.br=uo,_.bs=Fs,_.bt=zi,_.bu=ot,_.bv=Dt,_.bw=ci,_.bx=function(o,r,a,f,p){return ot(f,p,Qt((o-r)/(a-r),0,1))},_.by=Oe,_.bz=function(){return new Float64Array(3)},_.c=Pe,_.c$=function(o,r,a,f,p){return c(this,void 0,void 0,(function*(){if(oe())try{return yield Qs(o,r,a,f,p)}catch{}return(function(x,b,T,M,z){const B=x.width,N=x.height;qo&&_o||(qo=new OffscreenCanvas(B,N),_o=qo.getContext("2d",{willReadFrequently:!0})),qo.width=B,qo.height=N,_o.drawImage(x,0,0,B,N);const q=_o.getImageData(b,T,M,z);return _o.clearRect(0,0,B,N),q.data})(o,r,a,f,p)}))},_.c0=class extends pa{constructor(o,r){super(o,r),this.current=ma}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let r=1;r<16;r++)if(o[r]!==this.current[r]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},_.c1=fc,_.c2=class extends pa{constructor(o,r){super(o,r),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},_.c3=class extends pa{constructor(o,r){super(o,r),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},_.c4=Ce,_.c5=function(o,r){var a=Math.sin(r),f=Math.cos(r);return o[0]=f,o[1]=a,o[2]=0,o[3]=-a,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},_.c6=function(o,r,a){var f=r[0],p=r[1],x=r[2];return o[0]=f*a[0]+p*a[3]+x*a[6],o[1]=f*a[1]+p*a[4]+x*a[7],o[2]=f*a[2]+p*a[5]+x*a[8],o},_.c7=function(o,r,a,f,p,x,b){var T=1/(r-a),M=1/(f-p),z=1/(x-b);return o[0]=-2*T,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*M,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*z,o[11]=0,o[12]=(r+a)*T,o[13]=(p+f)*M,o[14]=(b+x)*z,o[15]=1,o},_.c8=class extends pa{constructor(o,r){super(o,r),this.current=new Array}set(o){if(o!=this.current){this.current=o;const r=new Float32Array(4*o.length);for(let a=0;a<o.length;a++)r[4*a]=o[a].r,r[4*a+1]=o[a].g,r[4*a+2]=o[a].b,r[4*a+3]=o[a].a;this.gl.uniform4fv(this.location,r)}}},_.c9=class extends pa{constructor(o,r){super(o,r),this.current=new Array}set(o){if(o!=this.current){this.current=o;const r=new Float32Array(o);this.gl.uniform1fv(this.location,r)}}},_.cA=function(o,r){return Ue[r]&&"touches"in o},_.cB=function(o){return Ue[o]||ne[o]},_.cC=function(o,r,a){var f=r[0],p=r[1];return o[0]=a[0]*f+a[4]*p+a[12],o[1]=a[1]*f+a[5]*p+a[13],o},_.cD=function(o,r){const{x:a,y:f}=Zr.fromLngLat(r);return!(o<0||o>25||f<0||f>=1||a<0||a>=1)},_.cE=function(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},_.cF=class extends su{},_.cG=qk,_.cI=ze,_.cJ=function(o,r){Pe.REGISTERED_PROTOCOLS[o]=r},_.cK=function(o){delete Pe.REGISTERED_PROTOCOLS[o]},_.cL=function(o,r){const a={};for(let p=0;p<o.length;p++){const x=r&&r[o[p].id]||Ps(o[p]);r&&(r[o[p].id]=x);let b=a[x];b||(b=a[x]=[]),b.push(o[p])}const f=[];for(const p in a)f.push(a[p]);return f},_.cM=zt,_.cN=Ey,_.cO=Hy,_.cP=Nm,_.cQ=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=at/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const r=o.bucket.layers[0],a=r.layout,f=r._unevaluatedLayout._values,p={layoutIconSize:f["icon-size"].possiblyEvaluate(new Fr(o.bucket.zoom+1),o.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new Fr(o.bucket.zoom+1),o.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new Fr(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:B}=o.bucket.textSizeData;p.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Fr(z),o.canonical),f["text-size"].possiblyEvaluate(new Fr(B),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:B}=o.bucket.iconSizeData;p.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Fr(z),o.canonical),f["icon-size"].possiblyEvaluate(new Fr(B),o.canonical)]}const x=a.get("text-line-height")*di,b=a.get("text-rotation-alignment")!=="viewport"&&a.get("symbol-placement")!=="point",T=a.get("text-keep-upright"),M=a.get("text-size");for(const z of o.bucket.features){const B=a.get("text-font").evaluate(z,{},o.canonical).join(","),N=M.evaluate(z,{},o.canonical),q=p.layoutTextSize.evaluate(z,{},o.canonical),$=p.layoutIconSize.evaluate(z,{},o.canonical),K={horizontal:{},vertical:void 0},J=z.text;let te,ae=[0,0];if(J){const ce=J.toString(),xe=a.get("text-letter-spacing").evaluate(z,{},o.canonical)*di,Te=Cf(ce)?xe:0,qe=a.get("text-anchor").evaluate(z,{},o.canonical),st=Tu(r,z,o.canonical);if(!st){const mt=a.get("text-radial-offset").evaluate(z,{},o.canonical);ae=mt?Vr(qe,[mt*di,Tr]):a.get("text-offset").evaluate(z,{},o.canonical).map((nt=>nt*di))}let tt=b?"center":a.get("text-justify").evaluate(z,{},o.canonical);const dt=a.get("symbol-placement")==="point"?a.get("text-max-width").evaluate(z,{},o.canonical)*di:1/0,Pt=()=>{o.bucket.allowVerticalPlacement&&us(ce)&&(K.vertical=ep(J,o.glyphMap,o.glyphPositions,o.imagePositions,B,dt,x,qe,"left",Te,ae,_.az.vertical,!0,q,N))};if(!b&&st){const mt=new Set;if(tt==="auto")for(let Qe=0;Qe<st.values.length;Qe+=2)mt.add(Zy(st.values[Qe]));else mt.add(tt);let nt=!1;for(const Qe of mt)if(!K.horizontal[Qe])if(nt)K.horizontal[Qe]=K.horizontal[0];else{const jt=ep(J,o.glyphMap,o.glyphPositions,o.imagePositions,B,dt,x,"center",Qe,Te,ae,_.az.horizontal,!1,q,N);jt&&(K.horizontal[Qe]=jt,nt=jt.positionedLines.length===1)}Pt()}else{tt==="auto"&&(tt=Zy(qe));const mt=ep(J,o.glyphMap,o.glyphPositions,o.imagePositions,B,dt,x,qe,tt,Te,ae,_.az.horizontal,!1,q,N);mt&&(K.horizontal[tt]=mt),Pt(),us(ce)&&b&&T&&(K.vertical=ep(J,o.glyphMap,o.glyphPositions,o.imagePositions,B,dt,x,qe,tt,Te,ae,_.az.vertical,!1,q,N))}}let ve=!1;if(z.icon&&z.icon.name){const ce=o.imageMap[z.icon.name];ce&&(te=gy(o.imagePositions[z.icon.name],a.get("icon-offset").evaluate(z,{},o.canonical),a.get("icon-anchor").evaluate(z,{},o.canonical)),ve=!!ce.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=ve:o.bucket.sdfIcons!==ve&&ar("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ce.pixelRatio!==o.bucket.pixelRatio||a.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const se=KS(K.horizontal)||K.vertical;o.bucket.iconsInText=!!se&&se.iconsInText,(se||te)&&Vk(o.bucket,z,K,te,o.imageMap,p,q,$,ae,ve,o.canonical,o.subdivisionGranularity)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},_.cR=Sh,_.cS=pc,_.cT=Ff,_.cU=function(o){const r=new Lm;return(function(a,f){for(const p in a.layers)f.writeMessage(3,lg,a.layers[p])})(o,r),r.finish()},_.cV=function(o,r,a,f,p,x){let b=h(o,r,a,p,0);return b=h(b,r,f,x,1),b},_.cW=class{constructor(o){this.maxEntries=o,this.map=new Map}get(o){const r=this.map.get(o);return r!==void 0&&(this.map.delete(o),this.map.set(o,r)),r}set(o,r){if(this.map.has(o))this.map.delete(o);else if(this.map.size>=this.maxEntries){const a=this.map.keys().next().value;this.map.delete(a)}this.map.set(o,r)}clear(){this.map.clear()}},_.cX=Mr,_.cY=Lm,_.cZ=_p,_.c_=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},_.ca=class extends Bs{},_.cb=d_,_.cc=class extends vn{},_.cd=Nd,_.ce=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},_.cf=Sl,_.cg=function(o,r,a){var f=r[0],p=r[1],x=r[2],b=a[3]*f+a[7]*p+a[11]*x+a[15];return o[0]=(a[0]*f+a[4]*p+a[8]*x+a[12])/(b=b||1),o[1]=(a[1]*f+a[5]*p+a[9]*x+a[13])/b,o[2]=(a[2]*f+a[6]*p+a[10]*x+a[14])/b,o},_.ch=class extends lu{},_.ci=class extends n{},_.cj=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]&&o[4]===r[4]&&o[5]===r[5]&&o[6]===r[6]&&o[7]===r[7]&&o[8]===r[8]&&o[9]===r[9]&&o[10]===r[10]&&o[11]===r[11]&&o[12]===r[12]&&o[13]===r[13]&&o[14]===r[14]&&o[15]===r[15]},_.ck=function(o,r){var a=o[0],f=o[1],p=o[2],x=o[3],b=o[4],T=o[5],M=o[6],z=o[7],B=o[8],N=o[9],q=o[10],$=o[11],K=o[12],J=o[13],te=o[14],ae=o[15],ve=r[0],se=r[1],ce=r[2],xe=r[3],Te=r[4],qe=r[5],st=r[6],tt=r[7],dt=r[8],Pt=r[9],mt=r[10],nt=r[11],Qe=r[12],jt=r[13],kt=r[14],Nt=r[15];return Math.abs(a-ve)<=he*Math.max(1,Math.abs(a),Math.abs(ve))&&Math.abs(f-se)<=he*Math.max(1,Math.abs(f),Math.abs(se))&&Math.abs(p-ce)<=he*Math.max(1,Math.abs(p),Math.abs(ce))&&Math.abs(x-xe)<=he*Math.max(1,Math.abs(x),Math.abs(xe))&&Math.abs(b-Te)<=he*Math.max(1,Math.abs(b),Math.abs(Te))&&Math.abs(T-qe)<=he*Math.max(1,Math.abs(T),Math.abs(qe))&&Math.abs(M-st)<=he*Math.max(1,Math.abs(M),Math.abs(st))&&Math.abs(z-tt)<=he*Math.max(1,Math.abs(z),Math.abs(tt))&&Math.abs(B-dt)<=he*Math.max(1,Math.abs(B),Math.abs(dt))&&Math.abs(N-Pt)<=he*Math.max(1,Math.abs(N),Math.abs(Pt))&&Math.abs(q-mt)<=he*Math.max(1,Math.abs(q),Math.abs(mt))&&Math.abs($-nt)<=he*Math.max(1,Math.abs($),Math.abs(nt))&&Math.abs(K-Qe)<=he*Math.max(1,Math.abs(K),Math.abs(Qe))&&Math.abs(J-jt)<=he*Math.max(1,Math.abs(J),Math.abs(jt))&&Math.abs(te-kt)<=he*Math.max(1,Math.abs(te),Math.abs(kt))&&Math.abs(ae-Nt)<=he*Math.max(1,Math.abs(ae),Math.abs(Nt))},_.cl=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o},_.cm=o=>o.type==="symbol",_.cn=o=>o.type==="circle",_.co=o=>o.type==="heatmap",_.cp=o=>o.type==="line",_.cq=o=>o.type==="fill",_.cr=o=>o.type==="fill-extrusion",_.cs=o=>o.type==="hillshade",_.ct=o=>o.type==="color-relief",_.cu=o=>o.type==="background",_.cv=o=>o.type==="custom",_.cw=Rt,_.cx=function(o,r,a){const f=_t(r.x-a.x,r.y-a.y),p=_t(o.x-a.x,o.y-a.y),x=Math.atan2(f[0]*p[1]-f[1]*p[0],(function(b,T){return b[0]*T[0]+b[1]*T[1]})(f,p));return la(x)},_.cy=Gt,_.cz=function(o,r){return ne[r]&&(o instanceof MouseEvent||o instanceof WheelEvent)},_.d=ut,_.d0=Lf,_.d1=C,_.d2=class{constructor(o,r){this.layers={[xp]:this},this.name=xp,this.version=r?r.version:1,this.extent=r?r.extent:4096,this.length=o.length,this.features=o}feature(o){return new H_(this.features[o],this.extent)}},_.d3=rc,_.d4=no,_.e=zr,_.f=o=>c(void 0,void 0,void 0,(function*(){if(o.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(o)],{type:"image/png"});try{return createImageBitmap(r)}catch(a){throw new Error(`Could not load image because of ${a.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),_.g=He,_.h=o=>new Promise(((r,a)=>{const f=new Image;f.onload=()=>{r(f),URL.revokeObjectURL(f.src),f.onload=null,window.requestAnimationFrame((()=>{f.src=ws}))},f.onerror=()=>a(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(o)],{type:"image/png"});f.src=o.byteLength?URL.createObjectURL(p):ws})),_.i=cn,_.j=(o,r)=>lt(zr(o,{type:"json"}),r),_.k=kr,_.l=rr,_.m=lt,_.n=(o,r)=>lt(zr(o,{type:"arrayBuffer"}),r),_.o=function(o){return new Lm(o).readFields(w_,[])},_.p=dy,_.q=function(o){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(o))},_.r=jd,_.s=Nu,_.t=Un,_.u=Ve,_.v=sh,_.w=ar,_.x=If,_.y=Ao,_.z=ks})),m("worker",["./shared"],(function(_){class c{constructor(ne,re){this.keyCache={},ne&&this.replace(ne,re)}replace(ne,re){this._layerConfigs={},this._layers={},this.update(ne,[],re)}update(ne,re,ue){for(const Pe of ne){this._layerConfigs[Pe.id]=Pe;const He=this._layers[Pe.id]=_.bT(Pe,ue);He._featureFilter=_.aj(He.filter,ue),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(const Pe of re)delete this.keyCache[Pe],delete this._layerConfigs[Pe],delete this._layers[Pe];this.familiesBySource={};const Ee=_.cL(Object.values(this._layerConfigs),this.keyCache);for(const Pe of Ee){const He=Pe.map((Lt=>this._layers[Lt.id])),Ne=He[0];if(Ne.isHidden())continue;const ze=Ne.source||"";let Ze=this.familiesBySource[ze];Ze||(Ze=this.familiesBySource[ze]={});const lt=Ne.sourceLayer||_.ai;let ut=Ze[lt];ut||(ut=Ze[lt]=[]),ut.push(He)}}}class P{constructor(ne){const re={},ue=[];for(const Ne in ne){const ze=ne[Ne],Ze=re[Ne]={};for(const lt in ze){const ut=ze[+lt];if(!ut||ut.bitmap.width===0||ut.bitmap.height===0)continue;const Lt={x:0,y:0,w:ut.bitmap.width+2,h:ut.bitmap.height+2};ue.push(Lt),Ze[lt]={rect:Lt,metrics:ut.metrics}}}const{w:Ee,h:Pe}=_.p(ue),He=new _.r({width:Ee||1,height:Pe||1});for(const Ne in ne){const ze=ne[Ne];for(const Ze in ze){const lt=ze[+Ze];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const ut=re[Ne][Ze].rect;_.r.copy(lt.bitmap,He,{x:0,y:0},{x:ut.x+1,y:ut.y+1},lt.bitmap)}}this.image=He,this.positions=re}}_.cM("GlyphAtlas",P);class C{constructor(ne){this.tileID=new _.a2(ne.tileID.overscaledZ,ne.tileID.wrap,ne.tileID.canonical.z,ne.tileID.canonical.x,ne.tileID.canonical.y),this.uid=ne.uid,this.zoom=ne.zoom,this.pixelRatio=ne.pixelRatio,this.tileSize=ne.tileSize,this.source=ne.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ne.showCollisionBoxes,this.collectResourceTiming=!!ne.collectResourceTiming,this.returnDependencies=!!ne.returnDependencies,this.promoteId=ne.promoteId,this.inFlightDependencies=[]}parse(ne,re,ue,Ee,Pe){return _._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ne,this.collisionBoxArray=new _.ag;const He=new _.cN(Object.keys(ne.layers).sort()),Ne=new _.cO(this.tileID,this.promoteId);Ne.bucketLayerIDs=[];const ze={},Ze={featureIndex:Ne,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ue,subdivisionGranularity:Pe},lt=re.familiesBySource[this.source];for(const Yr in lt){const $n=ne.layers[Yr];if(!$n)continue;$n.version===1&&_.w(`Vector tile source "${this.source}" layer "${Yr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Fu=He.encode(Yr),Nl=[];for(let xt=0;xt<$n.length;xt++){const Bi=$n.feature(xt),ji=Ne.getId(Bi,Yr);Nl.push({feature:Bi,id:ji,index:xt,sourceLayerIndex:Fu})}for(const xt of lt[Yr]){const Bi=xt[0];Bi.source!==this.source&&_.w(`layer.source = ${Bi.source} does not equal this.source = ${this.source}`),Bi.isHidden(this.zoom,!0)||(D(xt,this.zoom,ue),(ze[Bi.id]=Bi.createBucket({index:Ne.bucketLayerIDs.length,layers:xt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Fu,sourceID:this.source})).populate(Nl,Ze,this.tileID.canonical),Ne.bucketLayerIDs.push(xt.map((ji=>ji.id))))}}const ut=_.bY(Ze.glyphDependencies,(Yr=>Object.keys(Yr).map(Number)));this.inFlightDependencies.forEach((Yr=>Yr?.abort())),this.inFlightDependencies=[];let Lt=Promise.resolve({});if(Object.keys(ut).length){const Yr=new AbortController;this.inFlightDependencies.push(Yr),Lt=Ee.sendAsync({type:"GG",data:{stacks:ut,source:this.source,tileID:this.tileID,type:"glyphs"}},Yr)}const Vt=Object.keys(Ze.iconDependencies);let rr=Promise.resolve({});if(Vt.length){const Yr=new AbortController;this.inFlightDependencies.push(Yr),rr=Ee.sendAsync({type:"GI",data:{icons:Vt,source:this.source,tileID:this.tileID,type:"icons"}},Yr)}const kr=Object.keys(Ze.patternDependencies);let wr=Promise.resolve({});if(kr.length){const Yr=new AbortController;this.inFlightDependencies.push(Yr),wr=Ee.sendAsync({type:"GI",data:{icons:kr,source:this.source,tileID:this.tileID,type:"patterns"}},Yr)}const Ve=Ze.dashDependencies;let jr=Promise.resolve({});if(Object.keys(Ve).length){const Yr=new AbortController;this.inFlightDependencies.push(Yr),jr=Ee.sendAsync({type:"GDA",data:{dashes:Ve}},Yr)}const[Zn,sr,Nr,li]=yield Promise.all([Lt,rr,wr,jr]),Gr=new P(Zn),Mn=new _.cP(sr,Nr);for(const Yr in ze){const $n=ze[Yr];$n instanceof _.ah?(D($n.layers,this.zoom,ue),_.cQ({bucket:$n,glyphMap:Zn,glyphPositions:Gr.positions,imageMap:sr,imagePositions:Mn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ze.subdivisionGranularity})):$n.hasDependencies&&($n instanceof _.cR||$n instanceof _.cS||$n instanceof _.cT)&&(D($n.layers,this.zoom,ue),$n.addFeatures(Ze,this.tileID.canonical,Mn.patternPositions,li))}return this.status="done",{buckets:Object.values(ze).filter((Yr=>!Yr.isEmpty())),featureIndex:Ne,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Gr.image,imageAtlas:Mn,dashPositions:li,glyphMap:this.returnDependencies?Zn:null,iconMap:this.returnDependencies?sr:null,glyphPositions:this.returnDependencies?Gr.positions:null}}))}}function D(Ue,ne,re){const ue=new _.H(ne);for(const Ee of Ue)Ee.recalculate(ue,re)}class k{constructor(ne,re,ue,Ee,Pe){this.type=ne,this.properties=ue||{},this.extent=Pe,this.pointsArray=re,this.id=Ee}loadGeometry(){return this.pointsArray.map((ne=>ne.map((re=>new _.P(re.x,re.y)))))}}class U{constructor(ne,re,ue){this.version=2,this._myFeatures=ne,this.name=re,this.length=ne.length,this.extent=ue}feature(ne){return this._myFeatures[ne]}}class V{constructor(){this.layers={}}addLayer(ne){this.layers[ne.name]=ne}}function Q(Ue){let ne=_.cU(Ue);return ne.byteOffset===0&&ne.byteLength===ne.buffer.byteLength||(ne=new Uint8Array(ne)),{vectorTile:Ue,rawData:ne.buffer}}function Z(Ue,ne,re){const{extent:ue}=Ue,Ee=Math.pow(2,re.z-ne.z),Pe=(re.x-ne.x*Ee)*ue,He=(re.y-ne.y*Ee)*ue,Ne=[];for(let ze=0;ze<Ue.length;ze++){const Ze=Ue.feature(ze);let lt=Ze.loadGeometry();for(const Lt of lt)for(const Vt of Lt)Vt.x=Vt.x*Ee-Pe,Vt.y=Vt.y*Ee-He;const ut=128;lt=_.cV(lt,Ze.type,-ut,-ut,ue+ut,ue+ut),lt.length!==0&&Ne.push(new k(Ze.type,lt,Ze.properties,Ze.id,ue))}return new U(Ne,Ue.name,ue)}class G{constructor(ne,re,ue){this.actor=ne,this.layerIndex=re,this.availableImages=ue,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new _.cW(1e3)}loadVectorTile(ne,re){return _._(this,void 0,void 0,(function*(){const ue=yield _.n(ne.request,re);try{return{vectorTile:ne.encoding!=="mlt"?new _.cX(new _.cY(ue.data)):new _.cZ(ue.data),rawData:ue.data,cacheControl:ue.cacheControl,expires:ue.expires}}catch(Ee){const Pe=new Uint8Array(ue.data);let He=`Unable to parse the tile at ${ne.request.url}, `;throw He+=Pe[0]===31&&Pe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ee.message}`,new Error(He)}}))}loadTile(ne){return _._(this,void 0,void 0,(function*(){const{uid:re,overzoomParameters:ue}=ne;ue&&(ne.request=ue.overzoomRequest);const Ee=!!(ne&&ne.request&&ne.request.collectResourceTiming)&&new _.c_(ne.request),Pe=new C(ne);this.loading[re]=Pe;const He=new AbortController;Pe.abort=He;try{const Ne=yield this.loadVectorTile(ne,He);if(delete this.loading[re],!Ne)return null;if(ue){const Lt=this._getOverzoomTile(ne,Ne.vectorTile);Ne.rawData=Lt.rawData,Ne.vectorTile=Lt.vectorTile}const ze=Ne.rawData,Ze={};Ne.expires&&(Ze.expires=Ne.expires),Ne.cacheControl&&(Ze.cacheControl=Ne.cacheControl);const lt={};if(Ee){const Lt=Ee.finish();Lt&&(lt.resourceTiming=JSON.parse(JSON.stringify(Lt)))}Pe.vectorTile=Ne.vectorTile;const ut=Pe.parse(Ne.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);this.loaded[re]=Pe,this.fetching[re]={rawTileData:ze,cacheControl:Ze,resourceTiming:lt};try{const Lt=yield ut;return _.e({rawTileData:ze.slice(0),encoding:ne.encoding},Lt,Ze,lt)}finally{delete this.fetching[re]}}catch(Ne){throw delete this.loading[re],Pe.status="done",this.loaded[re]=Pe,Ne}}))}_getOverzoomTile(ne,re){const{tileID:ue,source:Ee,overzoomParameters:Pe}=ne,{maxZoomTileID:He}=Pe,Ne=`${He.key}_${ue.key}`,ze=this.overzoomedTileResultCache.get(Ne);if(ze)return ze;const Ze=new V,lt=this.layerIndex.familiesBySource[Ee];for(const Lt in lt){const Vt=re.layers[Lt];if(!Vt)continue;const rr=Z(Vt,He,ue.canonical);rr.length>0&&Ze.addLayer(rr)}const ut=Q(Ze);return this.overzoomedTileResultCache.set(Ne,ut),ut}reloadTile(ne){return _._(this,void 0,void 0,(function*(){const re=ne.uid;if(!this.loaded||!this.loaded[re])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ue=this.loaded[re];if(ue.showCollisionBoxes=ne.showCollisionBoxes,ue.status==="parsing"){const Ee=yield ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity);let Pe;if(this.fetching[re]){const{rawTileData:He,cacheControl:Ne,resourceTiming:ze}=this.fetching[re];delete this.fetching[re],Pe=_.e({rawTileData:He.slice(0),encoding:ne.encoding},Ee,Ne,ze)}else Pe=Ee;return Pe}if(ue.status==="done"&&ue.vectorTile)return ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,ne.subdivisionGranularity)}))}abortTile(ne){return _._(this,void 0,void 0,(function*(){const re=this.loading,ue=ne.uid;re&&re[ue]&&re[ue].abort&&(re[ue].abort.abort(),delete re[ue])}))}removeTile(ne){return _._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[ne.uid]&&delete this.loaded[ne.uid]}))}}class oe{constructor(){this.loaded={}}loadTile(ne){return _._(this,void 0,void 0,(function*(){const{uid:re,encoding:ue,rawImageData:Ee,redFactor:Pe,greenFactor:He,blueFactor:Ne,baseShift:ze}=ne,Ze=Ee.width+2,lt=Ee.height+2,ut=_.b(Ee)?new _.R({width:Ze,height:lt},yield _.c$(Ee,-1,-1,Ze,lt)):Ee,Lt=new _.d0(re,ut,ue,Pe,He,Ne,ze);return this.loaded=this.loaded||{},this.loaded[re]=Lt,Lt}))}removeTile(ne){const re=this.loaded,ue=ne.uid;re&&re[ue]&&delete re[ue]}}var he,me,Ce=(function(){if(me)return he;function Ue(re,ue){if(re.length!==0){ne(re[0],ue);for(var Ee=1;Ee<re.length;Ee++)ne(re[Ee],!ue)}}function ne(re,ue){for(var Ee=0,Pe=0,He=0,Ne=re.length,ze=Ne-1;He<Ne;ze=He++){var Ze=(re[He][0]-re[ze][0])*(re[ze][1]+re[He][1]),lt=Ee+Ze;Pe+=Math.abs(Ee)>=Math.abs(Ze)?Ee-lt+Ze:Ze-lt+Ee,Ee=lt}Ee+Pe>=0!=!!ue&&re.reverse()}return me=1,he=function re(ue,Ee){var Pe,He=ue&&ue.type;if(He==="FeatureCollection")for(Pe=0;Pe<ue.features.length;Pe++)re(ue.features[Pe],Ee);else if(He==="GeometryCollection")for(Pe=0;Pe<ue.geometries.length;Pe++)re(ue.geometries[Pe],Ee);else if(He==="Feature")re(ue.geometry,Ee);else if(He==="Polygon")Ue(ue.coordinates,Ee);else if(He==="MultiPolygon")for(Pe=0;Pe<ue.coordinates.length;Pe++)Ue(ue.coordinates[Pe],Ee);return ue}})(),be=_.d1(Ce);const ke={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},je=Math.fround||(gt=new Float32Array(1),Ue=>(gt[0]=+Ue,gt[0]));var gt;class bt{constructor(ne){this.options=Object.assign(Object.create(ke),ne),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ne){const{log:re,minZoom:ue,maxZoom:Ee}=this.options;re&&console.time("total time");const Pe=`prepare ${ne.length} points`;re&&console.time(Pe),this.points=ne;const He=[];for(let ze=0;ze<ne.length;ze++){const Ze=ne[ze];if(!Ze.geometry)continue;const[lt,ut]=Ze.geometry.coordinates,Lt=je(De(lt)),Vt=je(Tt(ut));He.push(Lt,Vt,1/0,ze,-1,1),this.options.reduce&&He.push(0)}let Ne=this.trees[Ee+1]=this._createTree(He);re&&console.timeEnd(Pe);for(let ze=Ee;ze>=ue;ze--){const Ze=+Date.now();Ne=this.trees[ze]=this._createTree(this._cluster(Ne,ze)),re&&console.log("z%d: %d clusters in %dms",ze,Ne.numItems,+Date.now()-Ze)}return re&&console.timeEnd("total time"),this}getClusters(ne,re){let ue=((ne[0]+180)%360+360)%360-180;const Ee=Math.max(-90,Math.min(90,ne[1]));let Pe=ne[2]===180?180:((ne[2]+180)%360+360)%360-180;const He=Math.max(-90,Math.min(90,ne[3]));if(ne[2]-ne[0]>=360)ue=-180,Pe=180;else if(ue>Pe){const ut=this.getClusters([ue,Ee,180,He],re),Lt=this.getClusters([-180,Ee,Pe,He],re);return ut.concat(Lt)}const Ne=this.trees[this._limitZoom(re)],ze=Ne.range(De(ue),Tt(He),De(Pe),Tt(Ee)),Ze=Ne.data,lt=[];for(const ut of ze){const Lt=this.stride*ut;lt.push(Ze[Lt+5]>1?It(Ze,Lt,this.clusterProps):this.points[Ze[Lt+3]])}return lt}getChildren(ne){const re=this._getOriginId(ne),ue=this._getOriginZoom(ne),Ee="No cluster with the specified id.",Pe=this.trees[ue];if(!Pe)throw new Error(Ee);const He=Pe.data;if(re*this.stride>=He.length)throw new Error(Ee);const Ne=this.options.radius/(this.options.extent*Math.pow(2,ue-1)),ze=Pe.within(He[re*this.stride],He[re*this.stride+1],Ne),Ze=[];for(const lt of ze){const ut=lt*this.stride;He[ut+4]===ne&&Ze.push(He[ut+5]>1?It(He,ut,this.clusterProps):this.points[He[ut+3]])}if(Ze.length===0)throw new Error(Ee);return Ze}getLeaves(ne,re,ue){const Ee=[];return this._appendLeaves(Ee,ne,re=re||10,ue=ue||0,0),Ee}getTile(ne,re,ue){const Ee=this.trees[this._limitZoom(ne)],Pe=Math.pow(2,ne),{extent:He,radius:Ne}=this.options,ze=Ne/He,Ze=(ue-ze)/Pe,lt=(ue+1+ze)/Pe,ut={features:[]};return this._addTileFeatures(Ee.range((re-ze)/Pe,Ze,(re+1+ze)/Pe,lt),Ee.data,re,ue,Pe,ut),re===0&&this._addTileFeatures(Ee.range(1-ze/Pe,Ze,1,lt),Ee.data,Pe,ue,Pe,ut),re===Pe-1&&this._addTileFeatures(Ee.range(0,Ze,ze/Pe,lt),Ee.data,-1,ue,Pe,ut),ut.features.length?ut:null}getClusterExpansionZoom(ne){let re=this._getOriginZoom(ne)-1;for(;re<=this.options.maxZoom;){const ue=this.getChildren(ne);if(re++,ue.length!==1)break;ne=ue[0].properties.cluster_id}return re}_appendLeaves(ne,re,ue,Ee,Pe){const He=this.getChildren(re);for(const Ne of He){const ze=Ne.properties;if(ze&&ze.cluster?Pe+ze.point_count<=Ee?Pe+=ze.point_count:Pe=this._appendLeaves(ne,ze.cluster_id,ue,Ee,Pe):Pe<Ee?Pe++:ne.push(Ne),ne.length===ue)break}return Pe}_createTree(ne){const re=new _.aT(ne.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ue=0;ue<ne.length;ue+=this.stride)re.add(ne[ue],ne[ue+1]);return re.finish(),re.data=ne,re}_addTileFeatures(ne,re,ue,Ee,Pe,He){for(const Ne of ne){const ze=Ne*this.stride,Ze=re[ze+5]>1;let lt,ut,Lt;if(Ze)lt=yt(re,ze,this.clusterProps),ut=re[ze],Lt=re[ze+1];else{const kr=this.points[re[ze+3]];lt=kr.properties;const[wr,Ve]=kr.geometry.coordinates;ut=De(wr),Lt=Tt(Ve)}const Vt={type:1,geometry:[[Math.round(this.options.extent*(ut*Pe-ue)),Math.round(this.options.extent*(Lt*Pe-Ee))]],tags:lt};let rr;rr=Ze||this.options.generateId?re[ze+3]:this.points[re[ze+3]].id,rr!==void 0&&(Vt.id=rr),He.features.push(Vt)}}_limitZoom(ne){return Math.max(this.options.minZoom,Math.min(Math.floor(+ne),this.options.maxZoom+1))}_cluster(ne,re){const{radius:ue,extent:Ee,reduce:Pe,minPoints:He}=this.options,Ne=ue/(Ee*Math.pow(2,re)),ze=ne.data,Ze=[],lt=this.stride;for(let ut=0;ut<ze.length;ut+=lt){if(ze[ut+2]<=re)continue;ze[ut+2]=re;const Lt=ze[ut],Vt=ze[ut+1],rr=ne.within(ze[ut],ze[ut+1],Ne),kr=ze[ut+5];let wr=kr;for(const Ve of rr){const jr=Ve*lt;ze[jr+2]>re&&(wr+=ze[jr+5])}if(wr>kr&&wr>=He){let Ve,jr=Lt*kr,Zn=Vt*kr,sr=-1;const Nr=(ut/lt<<5)+(re+1)+this.points.length;for(const li of rr){const Gr=li*lt;if(ze[Gr+2]<=re)continue;ze[Gr+2]=re;const Mn=ze[Gr+5];jr+=ze[Gr]*Mn,Zn+=ze[Gr+1]*Mn,ze[Gr+4]=Nr,Pe&&(Ve||(Ve=this._map(ze,ut,!0),sr=this.clusterProps.length,this.clusterProps.push(Ve)),Pe(Ve,this._map(ze,Gr)))}ze[ut+4]=Nr,Ze.push(jr/wr,Zn/wr,1/0,Nr,-1,wr),Pe&&Ze.push(sr)}else{for(let Ve=0;Ve<lt;Ve++)Ze.push(ze[ut+Ve]);if(wr>1)for(const Ve of rr){const jr=Ve*lt;if(!(ze[jr+2]<=re)){ze[jr+2]=re;for(let Zn=0;Zn<lt;Zn++)Ze.push(ze[jr+Zn])}}}}return Ze}_getOriginId(ne){return ne-this.points.length>>5}_getOriginZoom(ne){return(ne-this.points.length)%32}_map(ne,re,ue){if(ne[re+5]>1){const He=this.clusterProps[ne[re+6]];return ue?Object.assign({},He):He}const Ee=this.points[ne[re+3]].properties,Pe=this.options.map(Ee);return ue&&Pe===Ee?Object.assign({},Pe):Pe}}function It(Ue,ne,re){return{type:"Feature",id:Ue[ne+3],properties:yt(Ue,ne,re),geometry:{type:"Point",coordinates:[(ue=Ue[ne],360*(ue-.5)),Ct(Ue[ne+1])]}};var ue}function yt(Ue,ne,re){const ue=Ue[ne+5],Ee=ue>=1e4?`${Math.round(ue/1e3)}k`:ue>=1e3?Math.round(ue/100)/10+"k":ue,Pe=Ue[ne+6],He=Pe===-1?{}:Object.assign({},re[Pe]);return Object.assign(He,{cluster:!0,cluster_id:Ue[ne+3],point_count:ue,point_count_abbreviated:Ee})}function De(Ue){return Ue/360+.5}function Tt(Ue){const ne=Math.sin(Ue*Math.PI/180),re=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return re<0?0:re>1?1:re}function Ct(Ue){const ne=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(ne))/Math.PI-90}function Ft(Ue,ne,re,ue){let Ee=ue;const Pe=ne+(re-ne>>1);let He,Ne=re-ne;const ze=Ue[ne],Ze=Ue[ne+1],lt=Ue[re],ut=Ue[re+1];for(let Lt=ne+3;Lt<re;Lt+=3){const Vt=Le(Ue[Lt],Ue[Lt+1],ze,Ze,lt,ut);if(Vt>Ee)He=Lt,Ee=Vt;else if(Vt===Ee){const rr=Math.abs(Lt-Pe);rr<Ne&&(He=Lt,Ne=rr)}}Ee>ue&&(He-ne>3&&Ft(Ue,ne,He,ue),Ue[He+2]=Ee,re-He>3&&Ft(Ue,He,re,ue))}function Le(Ue,ne,re,ue,Ee,Pe){let He=Ee-re,Ne=Pe-ue;if(He!==0||Ne!==0){const ze=((Ue-re)*He+(ne-ue)*Ne)/(He*He+Ne*Ne);ze>1?(re=Ee,ue=Pe):ze>0&&(re+=He*ze,ue+=Ne*ze)}return He=Ue-re,Ne=ne-ue,He*He+Ne*Ne}function We(Ue,ne,re,ue){const Ee={id:Ue??null,type:ne,geometry:re,tags:ue,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(ne==="Point"||ne==="MultiPoint"||ne==="LineString")_t(Ee,re);else if(ne==="Polygon")_t(Ee,re[0]);else if(ne==="MultiLineString")for(const Pe of re)_t(Ee,Pe);else if(ne==="MultiPolygon")for(const Pe of re)_t(Ee,Pe[0]);return Ee}function _t(Ue,ne){for(let re=0;re<ne.length;re+=3)Ue.minX=Math.min(Ue.minX,ne[re]),Ue.minY=Math.min(Ue.minY,ne[re+1]),Ue.maxX=Math.max(Ue.maxX,ne[re]),Ue.maxY=Math.max(Ue.maxY,ne[re+1])}function at(Ue,ne,re,ue){if(!ne.geometry)return;const Ee=ne.geometry.coordinates;if(Ee&&Ee.length===0)return;const Pe=ne.geometry.type,He=Math.pow(re.tolerance/((1<<re.maxZoom)*re.extent),2);let Ne=[],ze=ne.id;if(re.promoteId?ze=ne.properties[re.promoteId]:re.generateId&&(ze=ue||0),Pe==="Point")Kt(Ee,Ne);else if(Pe==="MultiPoint")for(const Ze of Ee)Kt(Ze,Ne);else if(Pe==="LineString")Oe(Ee,Ne,He,!1);else if(Pe==="MultiLineString"){if(re.lineMetrics){for(const Ze of Ee)Ne=[],Oe(Ze,Ne,He,!1),Ue.push(We(ze,"LineString",Ne,ne.properties));return}ot(Ee,Ne,He,!1)}else if(Pe==="Polygon")ot(Ee,Ne,He,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(const Ze of ne.geometry.geometries)at(Ue,{id:ze,geometry:Ze,properties:ne.properties},re,ue);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ze of Ee){const lt=[];ot(Ze,lt,He,!0),Ne.push(lt)}}Ue.push(We(ze,Pe,Ne,ne.properties))}function Kt(Ue,ne){ne.push(Dt(Ue[0]),Rt(Ue[1]),0)}function Oe(Ue,ne,re,ue){let Ee,Pe,He=0;for(let ze=0;ze<Ue.length;ze++){const Ze=Dt(Ue[ze][0]),lt=Rt(Ue[ze][1]);ne.push(Ze,lt,0),ze>0&&(He+=ue?(Ee*lt-Ze*Pe)/2:Math.sqrt(Math.pow(Ze-Ee,2)+Math.pow(lt-Pe,2))),Ee=Ze,Pe=lt}const Ne=ne.length-3;ne[2]=1,Ft(ne,0,Ne,re),ne[Ne+2]=1,ne.size=Math.abs(He),ne.start=0,ne.end=ne.size}function ot(Ue,ne,re,ue){for(let Ee=0;Ee<Ue.length;Ee++){const Pe=[];Oe(Ue[Ee],Pe,re,ue),ne.push(Pe)}}function Dt(Ue){return Ue/360+.5}function Rt(Ue){const ne=Math.sin(Ue*Math.PI/180),re=.5-.25*Math.log((1+ne)/(1-ne))/Math.PI;return re<0?0:re>1?1:re}function Gt(Ue,ne,re,ue,Ee,Pe,He,Ne){if(ue/=ne,Pe>=(re/=ne)&&He<ue)return Ue;if(He<re||Pe>=ue)return null;const ze=[];for(const Ze of Ue){const lt=Ze.geometry;let ut=Ze.type;const Lt=Ee===0?Ze.minX:Ze.minY,Vt=Ee===0?Ze.maxX:Ze.maxY;if(Lt>=re&&Vt<ue){ze.push(Ze);continue}if(Vt<re||Lt>=ue)continue;let rr=[];if(ut==="Point"||ut==="MultiPoint")Qt(lt,rr,re,ue,Ee);else if(ut==="LineString")Jt(lt,rr,re,ue,Ee,!1,Ne.lineMetrics);else if(ut==="MultiLineString")ct(lt,rr,re,ue,Ee,!1);else if(ut==="Polygon")ct(lt,rr,re,ue,Ee,!0);else if(ut==="MultiPolygon")for(const kr of lt){const wr=[];ct(kr,wr,re,ue,Ee,!0),wr.length&&rr.push(wr)}if(rr.length){if(Ne.lineMetrics&&ut==="LineString"){for(const kr of rr)ze.push(We(Ze.id,ut,kr,Ze.tags));continue}ut!=="LineString"&&ut!=="MultiLineString"||(rr.length===1?(ut="LineString",rr=rr[0]):ut="MultiLineString"),ut!=="Point"&&ut!=="MultiPoint"||(ut=rr.length===3?"Point":"MultiPoint"),ze.push(We(Ze.id,ut,rr,Ze.tags))}}return ze.length?ze:null}function Qt(Ue,ne,re,ue,Ee){for(let Pe=0;Pe<Ue.length;Pe+=3){const He=Ue[Pe+Ee];He>=re&&He<=ue&&tr(ne,Ue[Pe],Ue[Pe+1],Ue[Pe+2])}}function Jt(Ue,ne,re,ue,Ee,Pe,He){let Ne=zr(Ue);const ze=Ee===0?gr:wt;let Ze,lt,ut=Ue.start;for(let wr=0;wr<Ue.length-3;wr+=3){const Ve=Ue[wr],jr=Ue[wr+1],Zn=Ue[wr+2],sr=Ue[wr+3],Nr=Ue[wr+4],li=Ee===0?Ve:jr,Gr=Ee===0?sr:Nr;let Mn=!1;He&&(Ze=Math.sqrt(Math.pow(Ve-sr,2)+Math.pow(jr-Nr,2))),li<re?Gr>re&&(lt=ze(Ne,Ve,jr,sr,Nr,re),He&&(Ne.start=ut+Ze*lt)):li>ue?Gr<ue&&(lt=ze(Ne,Ve,jr,sr,Nr,ue),He&&(Ne.start=ut+Ze*lt)):tr(Ne,Ve,jr,Zn),Gr<re&&li>=re&&(lt=ze(Ne,Ve,jr,sr,Nr,re),Mn=!0),Gr>ue&&li<=ue&&(lt=ze(Ne,Ve,jr,sr,Nr,ue),Mn=!0),!Pe&&Mn&&(He&&(Ne.end=ut+Ze*lt),ne.push(Ne),Ne=zr(Ue)),He&&(ut+=Ze)}let Lt=Ue.length-3;const Vt=Ue[Lt],rr=Ue[Lt+1],kr=Ee===0?Vt:rr;kr>=re&&kr<=ue&&tr(Ne,Vt,rr,Ue[Lt+2]),Lt=Ne.length-3,Pe&&Lt>=3&&(Ne[Lt]!==Ne[0]||Ne[Lt+1]!==Ne[1])&&tr(Ne,Ne[0],Ne[1],Ne[2]),Ne.length&&ne.push(Ne)}function zr(Ue){const ne=[];return ne.size=Ue.size,ne.start=Ue.start,ne.end=Ue.end,ne}function ct(Ue,ne,re,ue,Ee,Pe){for(const He of Ue)Jt(He,ne,re,ue,Ee,Pe,!1)}function tr(Ue,ne,re,ue){Ue.push(ne,re,ue)}function gr(Ue,ne,re,ue,Ee,Pe){const He=(Pe-ne)/(ue-ne);return tr(Ue,Pe,re+(Ee-re)*He,1),He}function wt(Ue,ne,re,ue,Ee,Pe){const He=(Pe-re)/(Ee-re);return tr(Ue,ne+(ue-ne)*He,Pe,1),He}function Hn(Ue,ne){const re=[];for(let ue=0;ue<Ue.length;ue++){const Ee=Ue[ue],Pe=Ee.type;let He;if(Pe==="Point"||Pe==="MultiPoint"||Pe==="LineString")He=ar(Ee.geometry,ne);else if(Pe==="MultiLineString"||Pe==="Polygon"){He=[];for(const Ne of Ee.geometry)He.push(ar(Ne,ne))}else if(Pe==="MultiPolygon"){He=[];for(const Ne of Ee.geometry){const ze=[];for(const Ze of Ne)ze.push(ar(Ze,ne));He.push(ze)}}re.push(We(Ee.id,Pe,He,Ee.tags))}return re}function ar(Ue,ne){const re=[];re.size=Ue.size,Ue.start!==void 0&&(re.start=Ue.start,re.end=Ue.end);for(let ue=0;ue<Ue.length;ue+=3)re.push(Ue[ue]+ne,Ue[ue+1],Ue[ue+2]);return re}function rn(Ue,ne){if(Ue.transformed)return Ue;const re=1<<Ue.z,ue=Ue.x,Ee=Ue.y;for(const Pe of Ue.features){const He=Pe.geometry,Ne=Pe.type;if(Pe.geometry=[],Ne===1)for(let ze=0;ze<He.length;ze+=2)Pe.geometry.push(cn(He[ze],He[ze+1],ne,re,ue,Ee));else for(let ze=0;ze<He.length;ze++){const Ze=[];for(let lt=0;lt<He[ze].length;lt+=2)Ze.push(cn(He[ze][lt],He[ze][lt+1],ne,re,ue,Ee));Pe.geometry.push(Ze)}}return Ue.transformed=!0,Ue}function cn(Ue,ne,re,ue,Ee,Pe){return[Math.round(re*(Ue*ue-Ee)),Math.round(re*(ne*ue-Pe))]}function Br(Ue,ne,re,ue,Ee){const Pe=ne===Ee.maxZoom?0:Ee.tolerance/((1<<ne)*Ee.extent),He={features:[],numPoints:0,numSimplified:0,numFeatures:Ue.length,source:null,x:re,y:ue,z:ne,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const Ne of Ue)Xa(He,Ne,Pe,Ee);return He}function Xa(Ue,ne,re,ue){const Ee=ne.geometry,Pe=ne.type,He=[];if(Ue.minX=Math.min(Ue.minX,ne.minX),Ue.minY=Math.min(Ue.minY,ne.minY),Ue.maxX=Math.max(Ue.maxX,ne.maxX),Ue.maxY=Math.max(Ue.maxY,ne.maxY),Pe==="Point"||Pe==="MultiPoint")for(let Ne=0;Ne<Ee.length;Ne+=3)He.push(Ee[Ne],Ee[Ne+1]),Ue.numPoints++,Ue.numSimplified++;else if(Pe==="LineString")ws(He,Ee,Ue,re,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(let Ne=0;Ne<Ee.length;Ne++)ws(He,Ee[Ne],Ue,re,Pe==="Polygon",Ne===0);else if(Pe==="MultiPolygon")for(let Ne=0;Ne<Ee.length;Ne++){const ze=Ee[Ne];for(let Ze=0;Ze<ze.length;Ze++)ws(He,ze[Ze],Ue,re,!0,Ze===0)}if(He.length){let Ne=ne.tags||null;if(Pe==="LineString"&&ue.lineMetrics){Ne={};for(const Ze in ne.tags)Ne[Ze]=ne.tags[Ze];Ne.mapbox_clip_start=Ee.start/Ee.size,Ne.mapbox_clip_end=Ee.end/Ee.size}const ze={geometry:He,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:Ne};ne.id!==null&&(ze.id=ne.id),Ue.features.push(ze)}}function ws(Ue,ne,re,ue,Ee,Pe){const He=ue*ue;if(ue>0&&ne.size<(Ee?He:ue))return void(re.numPoints+=ne.length/3);const Ne=[];for(let ze=0;ze<ne.length;ze+=3)(ue===0||ne[ze+2]>He)&&(re.numSimplified++,Ne.push(ne[ze],ne[ze+1])),re.numPoints++;Ee&&(function(ze,Ze){let lt=0;for(let ut=0,Lt=ze.length,Vt=Lt-2;ut<Lt;Vt=ut,ut+=2)lt+=(ze[ut]-ze[Vt])*(ze[ut+1]+ze[Vt+1]);if(lt>0===Ze)for(let ut=0,Lt=ze.length;ut<Lt/2;ut+=2){const Vt=ze[ut],rr=ze[ut+1];ze[ut]=ze[Lt-2-ut],ze[ut+1]=ze[Lt-1-ut],ze[Lt-2-ut]=Vt,ze[Lt-1-ut]=rr}})(Ne,Pe),Ue.push(Ne)}const Qs={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class qo{constructor(ne,re){const ue=(re=this.options=(function(Pe,He){for(const Ne in He)Pe[Ne]=He[Ne];return Pe})(Object.create(Qs),re)).debug;if(ue&&console.time("preprocess data"),re.maxZoom<0||re.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(re.promoteId&&re.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ee=(function(Pe,He){const Ne=[];if(Pe.type==="FeatureCollection")for(let ze=0;ze<Pe.features.length;ze++)at(Ne,Pe.features[ze],He,ze);else at(Ne,Pe.type==="Feature"?Pe:{geometry:Pe},He);return Ne})(ne,re);this.tiles={},this.tileCoords=[],ue&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",re.indexMaxZoom,re.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=(function(Pe,He){const Ne=He.buffer/He.extent;let ze=Pe;const Ze=Gt(Pe,1,-1-Ne,Ne,0,-1,2,He),lt=Gt(Pe,1,1-Ne,2+Ne,0,-1,2,He);return(Ze||lt)&&(ze=Gt(Pe,1,-Ne,1+Ne,0,-1,2,He)||[],Ze&&(ze=Hn(Ze,1).concat(ze)),lt&&(ze=ze.concat(Hn(lt,-1)))),ze})(Ee,re),Ee.length&&this.splitTile(Ee,0,0,0),ue&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ne,re,ue,Ee,Pe,He,Ne){const ze=[ne,re,ue,Ee],Ze=this.options,lt=Ze.debug;for(;ze.length;){Ee=ze.pop(),ue=ze.pop(),re=ze.pop(),ne=ze.pop();const ut=1<<re,Lt=_o(re,ue,Ee);let Vt=this.tiles[Lt];if(!Vt&&(lt>1&&console.time("creation"),Vt=this.tiles[Lt]=Br(ne,re,ue,Ee,Ze),this.tileCoords.push({z:re,x:ue,y:Ee}),lt)){lt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",re,ue,Ee,Vt.numFeatures,Vt.numPoints,Vt.numSimplified),console.timeEnd("creation"));const Mn=`z${re}`;this.stats[Mn]=(this.stats[Mn]||0)+1,this.total++}if(Vt.source=ne,Pe==null){if(re===Ze.indexMaxZoom||Vt.numPoints<=Ze.indexMaxPoints)continue}else{if(re===Ze.maxZoom||re===Pe)continue;if(Pe!=null){const Mn=Pe-re;if(ue!==He>>Mn||Ee!==Ne>>Mn)continue}}if(Vt.source=null,ne.length===0)continue;lt>1&&console.time("clipping");const rr=.5*Ze.buffer/Ze.extent,kr=.5-rr,wr=.5+rr,Ve=1+rr;let jr=null,Zn=null,sr=null,Nr=null,li=Gt(ne,ut,ue-rr,ue+wr,0,Vt.minX,Vt.maxX,Ze),Gr=Gt(ne,ut,ue+kr,ue+Ve,0,Vt.minX,Vt.maxX,Ze);ne=null,li&&(jr=Gt(li,ut,Ee-rr,Ee+wr,1,Vt.minY,Vt.maxY,Ze),Zn=Gt(li,ut,Ee+kr,Ee+Ve,1,Vt.minY,Vt.maxY,Ze),li=null),Gr&&(sr=Gt(Gr,ut,Ee-rr,Ee+wr,1,Vt.minY,Vt.maxY,Ze),Nr=Gt(Gr,ut,Ee+kr,Ee+Ve,1,Vt.minY,Vt.maxY,Ze),Gr=null),lt>1&&console.timeEnd("clipping"),ze.push(jr||[],re+1,2*ue,2*Ee),ze.push(Zn||[],re+1,2*ue,2*Ee+1),ze.push(sr||[],re+1,2*ue+1,2*Ee),ze.push(Nr||[],re+1,2*ue+1,2*Ee+1)}}getTile(ne,re,ue){ne=+ne,re=+re,ue=+ue;const Ee=this.options,{extent:Pe,debug:He}=Ee;if(ne<0||ne>24)return null;const Ne=1<<ne,ze=_o(ne,re=re+Ne&Ne-1,ue);if(this.tiles[ze])return rn(this.tiles[ze],Pe);He>1&&console.log("drilling down to z%d-%d-%d",ne,re,ue);let Ze,lt=ne,ut=re,Lt=ue;for(;!Ze&&lt>0;)lt--,ut>>=1,Lt>>=1,Ze=this.tiles[_o(lt,ut,Lt)];return Ze&&Ze.source?(He>1&&(console.log("found parent tile z%d-%d-%d",lt,ut,Lt),console.time("drilling down")),this.splitTile(Ze.source,lt,ut,Lt,ne,re,ue),He>1&&console.timeEnd("drilling down"),this.tiles[ze]?rn(this.tiles[ze],Pe):null):null}}function _o(Ue,ne,re){return 32*((1<<Ue)*re+ne)+Ue}class Nu extends G{constructor(ne,re,ue,Ee=gi){super(ne,re,ue),this._dataUpdateable=new Map,this._createGeoJSONIndex=Ee}loadVectorTile(ne,re){return _._(this,void 0,void 0,(function*(){const ue=ne.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ee=this._geoJSONIndex.getTile(ue.z,ue.x,ue.y);return Ee?Q(new _.d2(Ee.features,{version:2,extent:_.a5})):null}))}loadData(ne){return _._(this,void 0,void 0,(function*(){var re;(re=this._pendingRequest)===null||re===void 0||re.abort();const ue=this._startPerformance(ne);this._pendingRequest=new AbortController;try{(!this._pendingData||ne.request||ne.data||ne.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ne,this._pendingRequest));const Ee=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Ee,ne),this.loaded={};const Pe={};return ne.request&&(Pe.data=Ee),this._finishPerformance(ue,ne,Pe),Pe}catch(Ee){if(delete this._pendingRequest,_.Z(Ee))return{abandoned:!0};throw Ee}}))}_startPerformance(ne){var re;if(!((re=ne?.request)===null||re===void 0)&&re.collectResourceTiming)return new _.c_(ne.request)}_finishPerformance(ne,re,ue){if(!ne)return;const Ee=ne.finish();Ee&&(ue.resourceTiming={},ue.resourceTiming[re.source]=JSON.parse(JSON.stringify(Ee)))}getData(){return _._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ne){const re=this.loaded;return re&&re[ne.uid]?super.reloadTile(ne):this.loadTile(ne)}loadAndProcessGeoJSON(ne,re){return _._(this,void 0,void 0,(function*(){let ue;if(ne.request?ue=yield this.loadGeoJSONFromUrl(ne.request,ne.promoteId,re):ne.data?ue=this._loadGeoJSONFromObject(ne.data,ne.promoteId):ne.dataDiff&&(ue=this._loadGeoJSONFromDiff(ne.dataDiff,ne.promoteId,ne.source)),delete this._pendingRequest,typeof ue!="object")throw new Error(`Input data given to '${ne.source}' is not a valid GeoJSON object.`);return be(ue,!0),ne.filter&&(ue=this._filterGeoJSON(ue,ne.filter)),ue}))}loadGeoJSONFromUrl(ne,re,ue){return _._(this,void 0,void 0,(function*(){const Ee=yield _.j(ne,ue);return this._dataUpdateable=_.a7(Ee.data,re),Ee.data}))}_loadGeoJSONFromObject(ne,re){return this._dataUpdateable=_.a7(ne,re),ne}_loadGeoJSONFromDiff(ne,re,ue){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ue}`);_.a8(this._dataUpdateable,ne,re);const Ee=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Ee)}_filterGeoJSON(ne,re){const ue=_.d3(re,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ue.result==="error")throw new Error(ue.value.map((Pe=>`${Pe.key}: ${Pe.message}`)).join(", "));const Ee=ne.features.filter((Pe=>ue.value.evaluate({zoom:0},Pe)));return this._toFeatureCollection(Ee)}_toFeatureCollection(ne){return{type:"FeatureCollection",features:ne}}removeSource(ne){return _._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(ne){return this._geoJSONIndex.getClusterExpansionZoom(ne.clusterId)}getClusterChildren(ne){return this._geoJSONIndex.getChildren(ne.clusterId)}getClusterLeaves(ne){return this._geoJSONIndex.getLeaves(ne.clusterId,ne.limit,ne.offset)}}function gi(Ue,ne){return ne.cluster?new bt((function({superclusterOptions:re,clusterProperties:ue}){if(!ue||!re)return re;const Ee={},Pe={},He={accumulated:null,zoom:0},Ne={properties:null},ze=Object.keys(ue);for(const Ze of ze){const[lt,ut]=ue[Ze],Lt=_.d3(ut),Vt=_.d3(typeof lt=="string"?[lt,["accumulated"],["get",Ze]]:lt);Ee[Ze]=Lt.value,Pe[Ze]=Vt.value}return re.map=Ze=>{Ne.properties=Ze;const lt={};for(const ut of ze)lt[ut]=Ee[ut].evaluate(He,Ne);return lt},re.reduce=(Ze,lt)=>{Ne.properties=lt;for(const ut of ze)He.accumulated=Ze[ut],Ze[ut]=Pe[ut].evaluate(He,Ne)},re})(ne)).load(Ue.features):(function(re,ue){return new qo(re,ue)})(Ue,ne.geojsonVtOptions)}class la{constructor(ne){this.self=ne,this.actor=new _.L(ne),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(re,ue)=>{if(this.externalWorkerSourceTypes[re])throw new Error(`Worker source with name "${re}" already registered.`);this.externalWorkerSourceTypes[re]=ue},this.self.addProtocol=_.cJ,this.self.removeProtocol=_.cK,this.self.registerRTLTextPlugin=re=>{_.d4.setMethods(re)},this.actor.registerMessageHandler("LDT",((re,ue)=>this._getDEMWorkerSource(re,ue.source).loadTile(ue))),this.actor.registerMessageHandler("RDT",((re,ue)=>_._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(re,ue.source).removeTile(ue)})))),this.actor.registerMessageHandler("GCEZ",((re,ue)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(re,ue.type,ue.source).getClusterExpansionZoom(ue)})))),this.actor.registerMessageHandler("GCC",((re,ue)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(re,ue.type,ue.source).getClusterChildren(ue)})))),this.actor.registerMessageHandler("GCL",((re,ue)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(re,ue.type,ue.source).getClusterLeaves(ue)})))),this.actor.registerMessageHandler("LD",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).loadData(ue))),this.actor.registerMessageHandler("GD",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).getData())),this.actor.registerMessageHandler("LT",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).loadTile(ue))),this.actor.registerMessageHandler("RT",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).reloadTile(ue))),this.actor.registerMessageHandler("AT",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).abortTile(ue))),this.actor.registerMessageHandler("RMT",((re,ue)=>this._getWorkerSource(re,ue.type,ue.source).removeTile(ue))),this.actor.registerMessageHandler("RS",((re,ue)=>_._(this,void 0,void 0,(function*(){if(!this.workerSources[re]||!this.workerSources[re][ue.type]||!this.workerSources[re][ue.type][ue.source])return;const Ee=this.workerSources[re][ue.type][ue.source];delete this.workerSources[re][ue.type][ue.source],Ee.removeSource!==void 0&&Ee.removeSource(ue)})))),this.actor.registerMessageHandler("RM",(re=>_._(this,void 0,void 0,(function*(){delete this.layerIndexes[re],delete this.availableImages[re],delete this.workerSources[re],delete this.demWorkerSources[re],this.globalStates.delete(re)})))),this.actor.registerMessageHandler("SR",((re,ue)=>_._(this,void 0,void 0,(function*(){this.referrer=ue})))),this.actor.registerMessageHandler("SRPS",((re,ue)=>this._syncRTLPluginState(re,ue))),this.actor.registerMessageHandler("IS",((re,ue)=>_._(this,void 0,void 0,(function*(){this.self.importScripts(ue)})))),this.actor.registerMessageHandler("SI",((re,ue)=>this._setImages(re,ue))),this.actor.registerMessageHandler("UL",((re,ue)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(re).update(ue.layers,ue.removedIds,this._getGlobalState(re))})))),this.actor.registerMessageHandler("UGS",((re,ue)=>_._(this,void 0,void 0,(function*(){const Ee=this._getGlobalState(re);for(const Pe in ue)Ee[Pe]=ue[Pe]})))),this.actor.registerMessageHandler("SL",((re,ue)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(re).replace(ue,this._getGlobalState(re))}))))}_getGlobalState(ne){let re=this.globalStates.get(ne);return re||(re={},this.globalStates.set(ne,re)),re}_setImages(ne,re){return _._(this,void 0,void 0,(function*(){this.availableImages[ne]=re;for(const ue in this.workerSources[ne]){const Ee=this.workerSources[ne][ue];for(const Pe in Ee)Ee[Pe].availableImages=re}}))}_syncRTLPluginState(ne,re){return _._(this,void 0,void 0,(function*(){return yield _.d4.syncState(re,this.self.importScripts)}))}_getAvailableImages(ne){let re=this.availableImages[ne];return re||(re=[]),re}_getLayerIndex(ne){let re=this.layerIndexes[ne];return re||(re=this.layerIndexes[ne]=new c),re}_getWorkerSource(ne,re,ue){if(this.workerSources[ne]||(this.workerSources[ne]={}),this.workerSources[ne][re]||(this.workerSources[ne][re]={}),!this.workerSources[ne][re][ue]){const Ee={sendAsync:(Pe,He)=>(Pe.targetMapId=ne,this.actor.sendAsync(Pe,He))};switch(re){case"vector":this.workerSources[ne][re][ue]=new G(Ee,this._getLayerIndex(ne),this._getAvailableImages(ne));break;case"geojson":this.workerSources[ne][re][ue]=new Nu(Ee,this._getLayerIndex(ne),this._getAvailableImages(ne));break;default:this.workerSources[ne][re][ue]=new this.externalWorkerSourceTypes[re](Ee,this._getLayerIndex(ne),this._getAvailableImages(ne))}}return this.workerSources[ne][re][ue]}_getDEMWorkerSource(ne,re){return this.demWorkerSources[ne]||(this.demWorkerSources[ne]={}),this.demWorkerSources[ne][re]||(this.demWorkerSources[ne][re]=new oe),this.demWorkerSources[ne][re]}}return _.i(self)&&(self.worker=new la(self)),la})),m("index",["exports","./shared"],(function(_,c){var P="5.15.0";function C(){var w=new c.A(4);return c.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let D,k,U;const V={frame(w,n,u){const d=requestAnimationFrame((A=>{v(),n(A)})),{unsubscribe:v}=c.s(w.signal,"abort",(()=>{v(),cancelAnimationFrame(d),u(new c.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((n,u)=>{this.frame(w,n,u)}))},getImageData(w,n=0){return this.getImageCanvasContext(w).getImageData(-n,-n,w.width+2*n,w.height+2*n)},getImageCanvasContext(w){const n=window.document.createElement("canvas"),u=n.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return n.width=w.width,n.height=w.height,u.drawImage(w,0,0,w.width,w.height),u},resolveURL:w=>(D||(D=document.createElement("a")),D.href=w,D.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return U!==void 0?U:!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)},set prefersReducedMotion(w){U=w}},Q=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function Z(){return Q.getCurrentTime()}class G{static testProp(n){if(!G.docStyle)return n[0];for(let u=0;u<n.length;u++)if(n[u]in G.docStyle)return n[u];return n[0]}static create(n,u,d){const v=window.document.createElement(n);return u!==void 0&&(v.className=u),d&&d.appendChild(v),v}static createNS(n,u){return window.document.createElementNS(n,u)}static disableDrag(){G.docStyle&&G.selectProp&&(G.userSelect=G.docStyle[G.selectProp],G.docStyle[G.selectProp]="none")}static enableDrag(){G.docStyle&&G.selectProp&&(G.docStyle[G.selectProp]=G.userSelect)}static setTransform(n,u){n.style[G.transformProp]=u}static addEventListener(n,u,d,v={}){n.addEventListener(u,d,"passive"in v?v:v.capture)}static removeEventListener(n,u,d,v={}){n.removeEventListener(u,d,"passive"in v?v:v.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",G.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",G.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",G.suppressClickInternal,!0)}),0)}static getScale(n){const u=n.getBoundingClientRect();return{x:u.width/n.offsetWidth||1,y:u.height/n.offsetHeight||1,boundingClientRect:u}}static getPoint(n,u,d){const v=u.boundingClientRect;return new c.P((d.clientX-v.left)/u.x-n.clientLeft,(d.clientY-v.top)/u.y-n.clientTop)}static mousePos(n,u){const d=G.getScale(n);return G.getPoint(n,d,u)}static touchPos(n,u){const d=[],v=G.getScale(n);for(let A=0;A<u.length;A++)d.push(G.getPoint(n,v,u[A]));return d}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const u=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),d=u.querySelectorAll("script");for(const v of d)v.remove();return G.clean(u),u.innerHTML}static isPossiblyDangerous(n,u){const d=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!d.includes("javascript:")&&!d.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const u=n.children;for(const d of u)G.removeAttributes(d),G.clean(d)}static removeAttributes(n){for(const{name:u,value:d}of n.attributes)G.isPossiblyDangerous(u,d)&&n.removeAttribute(u)}}G.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,G.selectProp=G.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),G.transformProp=G.testProp(["transform","WebkitTransform"]);const oe={supported:!1,testSupport:function(w){!Ce&&me&&(be?ke(w):he=w)}};let he,me,Ce=!1,be=!1;function ke(w){const n=w.createTexture();w.bindTexture(w.TEXTURE_2D,n);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,me),w.isContextLost())return;oe.supported=!0}catch{}w.deleteTexture(n),Ce=!0}var je;typeof document<"u"&&(me=document.createElement("img"),me.onload=()=>{he&&ke(he),he=null,be=!0},me.onerror=()=>{Ce=!0,he=null},me.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let n,u,d,v;w.resetRequestQueue=()=>{n=[],u=0,d=0,v={}},w.addThrottleControl=R=>{const j=d++;return v[j]=R,j},w.removeThrottleControl=R=>{delete v[R],E()},w.getImage=(R,j,F=!0)=>new Promise(((Y,X)=>{oe.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),c.e(R,{type:"image"}),n.push({abortController:j,requestParameters:R,supportImageRefresh:F,state:"queued",onError:ee=>{X(ee)},onSuccess:ee=>{Y(ee)}}),E()}));const A=R=>c._(this,void 0,void 0,(function*(){R.state="running";const{requestParameters:j,supportImageRefresh:F,onError:Y,onSuccess:X,abortController:ee}=R,ie=F===!1&&!c.i(self)&&!c.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce(((de,ye)=>de&&ye==="accept"),!0));u++;const fe=ie?I(j,ee):c.m(j,ee);try{const de=yield fe;delete R.abortController,R.state="completed",de.data instanceof HTMLImageElement||c.b(de.data)?X(de):de.data&&X({data:yield(pe=de.data,typeof createImageBitmap=="function"?c.f(pe):c.h(pe)),cacheControl:de.cacheControl,expires:de.expires})}catch(de){delete R.abortController,Y(de)}finally{u--,E()}var pe})),E=()=>{const R=(()=>{for(const j of Object.keys(v))if(v[j]())return!0;return!1})()?c.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=u;j<R&&n.length>0;j++){const F=n.shift();F.abortController.signal.aborted?j--:A(F)}},I=(R,j)=>new Promise(((F,Y)=>{const X=new Image,ee=R.url,ie=R.credentials;ie&&ie==="include"?X.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!c.d(ee))&&(X.crossOrigin="anonymous"),j.signal.addEventListener("abort",(()=>{X.src="",Y(new c.a(j.signal.reason))})),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,F({data:X})},X.onerror=()=>{X.onerror=X.onload=null,j.signal.aborted||Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=ee}))})(je||(je={})),je.resetRequestQueue();class gt{constructor(n){this._transformRequestFn=n??null}transformRequest(n,u){return this._transformRequestFn&&this._transformRequestFn(n,u)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function bt(w){const n=[];if(typeof w=="string")n.push({id:"default",url:w});else if(w&&w.length>0){const u=[];for(const{id:d,url:v}of w){const A=`${d}${v}`;u.indexOf(A)===-1&&(u.push(A),n.push({id:d,url:v}))}}return n}function It(w,n,u){try{const d=new URL(w);return d.pathname+=`${n}${u}`,d.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function yt(w){const{userImage:n}=w;return!!(n&&n.render&&n.render())&&(w.data.replace(new Uint8Array(n.data.buffer)),!0)}class De extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:u,promiseResolve:d}of this.requestors)d(this._getImagesForIds(u));this.requestors=[]}}getImage(n){const u=this.images[n];if(u&&!u.data&&u.spriteData){const d=u.spriteData;u.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),u.spriteData=null}return u}addImage(n,u){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,u)&&(this.images[n]=u)}_validate(n,u){let d=!0;const v=u.data||u.spriteData;return this._validateStretch(u.stretchX,v&&v.width)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchX" value`))),d=!1),this._validateStretch(u.stretchY,v&&v.height)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "stretchY" value`))),d=!1),this._validateContent(u.content,u)||(this.fire(new c.k(new Error(`Image "${n}" has invalid "content" value`))),d=!1),d}_validateStretch(n,u){if(!n)return!0;let d=0;for(const v of n){if(v[0]<d||v[1]<v[0]||u<v[1])return!1;d=v[1]}return!0}_validateContent(n,u){if(!n)return!0;if(n.length!==4)return!1;const d=u.spriteData,v=d&&d.width||u.data.width,A=d&&d.height||u.data.height;return!(n[0]<0||v<n[0]||n[1]<0||A<n[1]||n[2]<0||v<n[2]||n[3]<0||A<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,u,d=!0){const v=this.getImage(n);if(d&&(v.data.width!==u.data.width||v.data.height!==u.data.height))throw new Error(`size mismatch between old image (${v.data.width}x${v.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=v.version+1,this.images[n]=u,this.updatedImages[n]=!0}removeImage(n){const u=this.images[n];delete this.images[n],delete this.patterns[n],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((u,d)=>{let v=!0;if(!this.isLoaded())for(const A of n)this.images[A]||(v=!1);this.isLoaded()||v?u(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:u})}))}_getImagesForIds(n){const u={};for(const d of n){let v=this.getImage(d);v||(this.fire(new c.l("styleimagemissing",{id:d})),v=this.getImage(d)),v?u[d]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,textFitWidth:v.textFitWidth,textFitHeight:v.textFitHeight,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:n,height:u}=this.atlasImage;return{width:n,height:u}}getPattern(n){const u=this.patterns[n],d=this.getImage(n);if(!d)return null;if(u&&u.position.version===d.version)return u.position;if(u)u.position.version=d.version;else{const v={w:d.data.width+2,h:d.data.height+2,x:0,y:0},A=new c.I(v,d);this.patterns[n]={bin:v,position:A}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const u=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new c.T(n,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const A in this.patterns)n.push(this.patterns[A].bin);const{w:u,h:d}=c.p(n),v=this.atlasImage;v.resize({width:u||1,height:d||1});for(const A in this.patterns){const{bin:E}=this.patterns[A],I=E.x+1,R=E.y+1,j=this.getImage(A).data,F=j.width,Y=j.height;c.R.copy(j,v,{x:0,y:0},{x:I,y:R},{width:F,height:Y}),c.R.copy(j,v,{x:0,y:Y-1},{x:I,y:R-1},{width:F,height:1}),c.R.copy(j,v,{x:0,y:0},{x:I,y:R+Y},{width:F,height:1}),c.R.copy(j,v,{x:F-1,y:0},{x:I-1,y:R},{width:1,height:Y}),c.R.copy(j,v,{x:0,y:0},{x:I+F,y:R},{width:1,height:Y})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const u of n){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const d=this.getImage(u);d||c.w(`Image with ID: "${u}" was not found`),yt(d)&&this.updateImage(u,d)}}cloneImages(){const n={};for(const u in this.images){const d=this.images[u];n[u]=Object.assign(Object.assign({},d),{data:d.data?d.data.clone():null})}return n}}const Tt=1e20;function Ct(w,n,u,d,v,A,E,I,R){for(let j=n;j<n+d;j++)Ft(w,u*A+j,A,v,E,I,R);for(let j=u;j<u+v;j++)Ft(w,j*A+n,1,d,E,I,R)}function Ft(w,n,u,d,v,A,E){A[0]=0,E[0]=-Tt,E[1]=Tt,v[0]=w[n];for(let I=1,R=0,j=0;I<d;I++){v[I]=w[n+I*u];const F=I*I;do{const Y=A[R];j=(v[I]-v[Y]+F-Y*Y)/(I-Y)/2}while(j<=E[R]&&--R>-1);R++,A[R]=I,E[R]=j,E[R+1]=Tt}for(let I=0,R=0;I<d;I++){for(;E[R+1]<I;)R++;const j=A[R],F=I-j;w[n+I*u]=v[j]+F*F}}const Le=c.v.layout_symbol["text-font"].default.join(",");class We{constructor(n,u,d){this.requestManager=n,this.localIdeographFontFamily=u,this.entries={},this.lang=d}setURL(n){this.url=n}getGlyphs(n){return c._(this,void 0,void 0,(function*(){const u=[];for(const A in n)for(const E of n[A])u.push(this._getAndCacheGlyphsPromise(A,E));const d=yield Promise.all(u),v={};for(const{stack:A,id:E,glyph:I}of d)v[A]||(v[A]={}),v[A][E]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return v}))}_getAndCacheGlyphsPromise(n,u){return c._(this,void 0,void 0,(function*(){let d=this.entries[n];d||(d=this.entries[n]={glyphs:{},requests:{},ranges:{}});let v=d.glyphs[u];return v!==void 0?{stack:n,id:u,glyph:v}:!this.url||this._charUsesLocalIdeographFontFamily(u)?(v=d.glyphs[u]=this._drawGlyph(d,n,u),{stack:n,id:u,glyph:v}):yield this._downloadAndCacheRangePromise(n,u)}))}_downloadAndCacheRangePromise(n,u){return c._(this,void 0,void 0,(function*(){const d=this.entries[n],v=Math.floor(u/256);if(d.ranges[v])return{stack:n,id:u,glyph:null};if(!d.requests[v]){const A=We.loadGlyphRange(n,v,this.url,this.requestManager);d.requests[v]=A}try{const A=yield d.requests[v];for(const E in A)d.glyphs[+E]=A[+E];return d.ranges[v]=!0,{stack:n,id:u,glyph:A[u]||null}}catch(A){const E=d.glyphs[u]=this._drawGlyph(d,n,u);return this._warnOnMissingGlyphRange(E,v,u,A),{stack:n,id:u,glyph:E}}}))}_warnOnMissingGlyphRange(n,u,d,v){const A=256*u,E=A+255,I=d.toString(16).padStart(4,"0").toUpperCase();c.w(`Unable to load glyph range ${u}, ${A}-${E}. Rendering codepoint U+${I} locally instead. ${v}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&c.q(n)}_drawGlyph(n,u,d){const v=u===Le&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(d),A=v?"ideographTinySDF":"tinySDF";n[A]||(n[A]=this._createTinySDF(v?this.localIdeographFontFamily:u));const E=n[A].draw(String.fromCodePoint(d));return{id:d,bitmap:new c.r({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const u=n?n.split(","):[];u.push("sans-serif");const d=u.map((v=>/[-\w]+/.test(v)?v:`'${CSS.escape(v)}'`)).join(",");return new We.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:this._fontWeight(u[0]),fontStyle:this._fontStyle(u[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const u={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let d;for(const[v,A]of Object.entries(u))new RegExp(`\\b${v}\\b`,"i").test(n)&&(d=`${A}`);return d}destroy(){for(const n in this.entries){const u=this.entries[n];u.tinySDF&&(u.tinySDF=null),u.ideographTinySDF&&(u.ideographTinySDF=null),u.glyphs={},u.requests={},u.ranges={}}this.entries={}}}We.loadGlyphRange=function(w,n,u,d){return c._(this,void 0,void 0,(function*(){const v=256*n,A=v+255,E=d.transformRequest(u.replace("{fontstack}",w).replace("{range}",`${v}-${A}`),"Glyphs"),I=yield c.n(E,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${n}, ${v}-${A}`);const R={};for(const j of c.o(I.data))R[j.id]=j;return R}))},We.TinySDF=class{constructor({fontSize:w=24,buffer:n=3,radius:u=8,cutoff:d=.25,fontFamily:v="sans-serif",fontWeight:A="normal",fontStyle:E="normal",lang:I=null}={}){this.buffer=n,this.cutoff=d,this.radius=u,this.lang=I;const R=this.size=w+4*n,j=this._createCanvas(R),F=this.ctx=j.getContext("2d",{willReadFrequently:!0});F.font=`${E} ${A} ${w}px ${v}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(w){const n=document.createElement("canvas");return n.width=n.height=w,n}draw(w){const{width:n,actualBoundingBoxAscent:u,actualBoundingBoxDescent:d,actualBoundingBoxLeft:v,actualBoundingBoxRight:A}=this.ctx.measureText(w),E=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(A-v))),R=Math.min(this.size-this.buffer,E+Math.ceil(d)),j=I+2*this.buffer,F=R+2*this.buffer,Y=Math.max(j*F,0),X=new Uint8ClampedArray(Y),ee={data:X,width:j,height:F,glyphWidth:I,glyphHeight:R,glyphTop:E,glyphLeft:0,glyphAdvance:n};if(I===0||R===0)return ee;const{ctx:ie,buffer:fe,gridInner:pe,gridOuter:de}=this;this.lang&&(ie.lang=this.lang),ie.clearRect(fe,fe,I,R),ie.fillText(w,fe,fe+E);const ye=ie.getImageData(fe,fe,I,R);de.fill(Tt,0,Y),pe.fill(0,0,Y);for(let Ae=0;Ae<R;Ae++)for(let ge=0;ge<I;ge++){const Se=ye.data[4*(Ae*I+ge)+3]/255;if(Se===0)continue;const Me=(Ae+fe)*j+ge+fe;if(Se===1)de[Me]=0,pe[Me]=Tt;else{const _e=.5-Se;de[Me]=_e>0?_e*_e:0,pe[Me]=_e<0?_e*_e:0}}Ct(de,0,0,j,F,j,this.f,this.v,this.z),Ct(pe,fe,fe,I,R,j,this.f,this.v,this.z);for(let Ae=0;Ae<Y;Ae++){const ge=Math.sqrt(de[Ae])-Math.sqrt(pe[Ae]);X[Ae]=Math.round(255-255*(ge/this.radius+this.cutoff))}return ee}};class _t{constructor(){this.specification=c.u.light.position}possiblyEvaluate(n,u){return c.F(n.expression.evaluate(u))}interpolate(n,u,d){return{x:c.G.number(n.x,u.x,d),y:c.G.number(n.y,u.y,d),z:c.G.number(n.z,u.z,d)}}}let at;class Kt extends c.E{constructor(n){super(),at=at||new c.t({anchor:new c.D(c.u.light.anchor),position:new _t,color:new c.D(c.u.light.color),intensity:new c.D(c.u.light.intensity)}),this._transitionable=new c.x(at,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,u={}){if(!this._validate(c.y,n,u))for(const d in n){const v=n[d];d.endsWith(c.z)?this._transitionable.setTransition(d.slice(0,-c.z.length),v):this._transitionable.setValue(d,v)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,d){return(!d||d.validate!==!1)&&c.B(this,n.call(c.C,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u}))}}const Oe=new c.t({"sky-color":new c.D(c.u.sky["sky-color"]),"horizon-color":new c.D(c.u.sky["horizon-color"]),"fog-color":new c.D(c.u.sky["fog-color"]),"fog-ground-blend":new c.D(c.u.sky["fog-ground-blend"]),"horizon-fog-blend":new c.D(c.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new c.D(c.u.sky["sky-horizon-blend"]),"atmosphere-blend":new c.D(c.u.sky["atmosphere-blend"])});class ot extends c.E{constructor(n){super(),this._transitionable=new c.x(Oe,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0))}setSky(n,u={}){if(!this._validate(c.J,n,u)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const d in n){const v=n[d];d.endsWith(c.z)?this._transitionable.setTransition(d.slice(0,-c.z.length),v):this._transitionable.setValue(d,v)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,u,d={}){return d?.validate!==!1&&c.B(this,n.call(c.C,c.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:c.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Dt{constructor(n,u){this.width=n,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,u){const d=n.join(",")+String(u);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(n,u)),this.dashEntry[d]}getDashRanges(n,u,d){const v=[];let A=n.length%2==1?-n[n.length-1]*d:0,E=n[0]*d,I=!0;v.push({left:A,right:E,isDash:I,zeroLength:n[0]===0});let R=n[0];for(let j=1;j<n.length;j++){I=!I;const F=n[j];A=R*d,R+=F,E=R*d,v.push({left:A,right:E,isDash:I,zeroLength:F===0})}return v}addRoundDash(n,u,d){const v=u/2;for(let A=-d;A<=d;A++){const E=this.width*(this.nextRow+d+A);let I=0,R=n[I];for(let j=0;j<this.width;j++){j/R.right>1&&(R=n[++I]);const F=Math.abs(j-R.left),Y=Math.abs(j-R.right),X=Math.min(F,Y);let ee;const ie=A/d*(v+1);if(R.isDash){const fe=v-Math.abs(ie);ee=Math.sqrt(X*X+fe*fe)}else ee=v-Math.sqrt(X*X+ie*ie);this.data[E+j]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(n){for(let I=n.length-1;I>=0;--I){const R=n[I],j=n[I+1];R.zeroLength?n.splice(I,1):j&&j.isDash===R.isDash&&(j.left=R.left,n.splice(I,1))}const u=n[0],d=n[n.length-1];u.isDash===d.isDash&&(u.left=d.left-this.width,d.right=u.right+this.width);const v=this.width*this.nextRow;let A=0,E=n[A];for(let I=0;I<this.width;I++){I/E.right>1&&(E=n[++A]);const R=Math.abs(I-E.left),j=Math.abs(I-E.right),F=Math.min(R,j);this.data[v+I]=Math.max(0,Math.min(255,(E.isDash?F:-F)+128))}}addDash(n,u){const d=u?7:0,v=2*d+1;if(this.nextRow+v>this.height)return c.w("LineAtlas out of space"),null;let A=0;for(let I=0;I<n.length;I++)A+=n[I];if(A!==0){const I=this.width/A,R=this.getDashRanges(n,this.width,I);u?this.addRoundDash(R,I,d):this.addRegularDash(R)}const E={y:this.nextRow+d,height:2*d,width:A};return this.nextRow+=v,this.dirty=!0,E}bind(n){const u=n.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Rt="maplibre_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new Worker(c.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Rt]}numActive(){return Object.keys(this.active).length}}const Qt=Math.floor(V.hardwareConcurrency/2);let Jt,zr;function ct(){return Jt||(Jt=new Gt),Jt}Gt.workerCount=c.K(globalThis)?Math.max(Math.min(Qt,3),1):1;class tr{constructor(n,u){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=u;const d=this.workerPool.acquire(u);for(let v=0;v<d.length;v++){const A=new c.L(d[v],u);A.name=`Worker ${v}`,this.actors.push(A)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,u){const d=[];for(const v of this.actors)d.push(v.sendAsync({type:n,data:u}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,u){for(const d of this.actors)d.registerMessageHandler(n,u)}unregisterMessageHandler(n){for(const u of this.actors)u.unregisterMessageHandler(n)}}function gr(){return zr||(zr=new tr(ct(),c.M),zr.registerMessageHandler("GR",((w,n,u)=>c.m(n,u)))),zr}function wt(w,n){const u=c.N();return c.O(u,u,[1,1,0]),c.Q(u,u,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?c.S(u,u,w.calculatePosMatrix(n.toUnwrapped())):u}function Hn(w,n,u,d,v,A,E){var I;const R=(function(X,ee,ie){if(X)for(const fe of X){const pe=ee[fe];if(pe&&pe.source===ie&&pe.type==="fill-extrusion")return!0}else for(const fe in ee){const pe=ee[fe];if(pe.source===ie&&pe.type==="fill-extrusion")return!0}return!1})((I=v?.layers)!==null&&I!==void 0?I:null,n,w.id),j=A.maxPitchScaleFactor(),F=w.tilesIn(d,j,R);F.sort(ar);const Y=[];for(const X of F)Y.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(n,u,w.getState(),X.queryGeometry,X.cameraQueryGeometry,X.scale,v,A,j,wt(A,X.tileID),E?(ee,ie)=>E(X.tileID,ee,ie):void 0)});return(function(X,ee){for(const ie in X)for(const fe of X[ie])rn(fe,ee);return X})((function(X){const ee={},ie={};for(const fe of X){const pe=fe.queryResults,de=fe.wrappedTileID,ye=ie[de]=ie[de]||{};for(const Ae in pe){const ge=pe[Ae],Se=ye[Ae]=ye[Ae]||{},Me=ee[Ae]=ee[Ae]||[];for(const _e of ge)Se[_e.featureIndex]||(Se[_e.featureIndex]=!0,Me.push(_e))}}return ee})(Y),w)}function ar(w,n){const u=w.tileID,d=n.tileID;return u.overscaledZ-d.overscaledZ||u.canonical.y-d.canonical.y||u.wrap-d.wrap||u.canonical.x-d.canonical.x}function rn(w,n){const u=w.feature,d=n.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=d}function cn(w,n,u){return c._(this,void 0,void 0,(function*(){let d=w;if(w.url?d=(yield c.j(n.transformRequest(w.url,"Source"),u)).data:yield V.frameAsync(u),!d)return null;const v=c.U(c.e(d,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(v.vectorLayerIds=d.vector_layers.map((A=>A.id))),v}))}class Br{constructor(n,u){n&&(u?this.setSouthWest(n).setNorthEast(u):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof c.V?new c.V(n.lng,n.lat):c.V.convert(n),this}extend(n){const u=this._sw,d=this._ne;let v,A;if(n instanceof c.V)v=n,A=n;else{if(!(n instanceof Br))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Br.convert(n)):this.extend(c.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(c.V.convert(n)):this;if(v=n._sw,A=n._ne,!v||!A)return this}return u||d?(u.lng=Math.min(v.lng,u.lng),u.lat=Math.min(v.lat,u.lat),d.lng=Math.max(A.lng,d.lng),d.lat=Math.max(A.lat,d.lat)):(this._sw=new c.V(v.lng,v.lat),this._ne=new c.V(A.lng,A.lat)),this}getCenter(){return new c.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.V(this.getWest(),this.getNorth())}getSouthEast(){return new c.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:u,lat:d}=c.V.convert(n);let v=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(v=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&v}intersects(n){if(!((n=Br.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const u=Math.abs(this.getEast()-this.getWest()),d=Math.abs(n.getEast()-n.getWest());if(u>=360||d>=360)return!0;const v=c.W(this.getWest(),-180,180),A=c.W(this.getEast(),-180,180),E=c.W(n.getWest(),-180,180),I=c.W(n.getEast(),-180,180),R=v>=A,j=E>=I;return!(!R||!j)||(R?I>=v||E<=A:j?A>=E||v<=I:E<=A&&I>=v)}static convert(n){return n instanceof Br?n:n&&new Br(n)}static fromLngLat(n,u=0){const d=360*u/40075017,v=d/Math.cos(Math.PI/180*n.lat);return new Br(new c.V(n.lng-v,n.lat-d),new c.V(n.lng+v,n.lat+d))}adjustAntiMeridian(){const n=new c.V(this._sw.lng,this._sw.lat),u=new c.V(this._ne.lng,this._ne.lat);return new Br(n,n.lng>u.lng?new c.V(u.lng+360,u.lat):u)}}class Xa{constructor(n,u,d){this.bounds=Br.convert(this.validateBounds(n)),this.minzoom=u||0,this.maxzoom=d||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const u=Math.pow(2,n.z),d=Math.floor(c.Y(this.bounds.getWest())*u),v=Math.floor(c.X(this.bounds.getNorth())*u),A=Math.ceil(c.Y(this.bounds.getEast())*u),E=Math.ceil(c.X(this.bounds.getSouth())*u);return n.x>=d&&n.x<A&&n.y>=v&&n.y<E}}class ws extends c.E{constructor(n,u,d,v){if(super(),this.id=n,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.U(u,["url","scheme","tileSize","promoteId","encoding"])),this._options=c.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield cn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(c.e(this,n),n.bounds&&(this.tileBounds=new Xa(n.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,c.Z(n)||this.fire(new c.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(u,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};d.request.collectResourceTiming=this._collectResourceTiming;let v="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((A,E)=>{n.reloadPromise={resolve:A,reject:E}}))}else n.actor=this.dispatcher.getActor(),v="LT";n.abortController=new AbortController;try{const A=yield n.actor.sendAsync({type:v,data:d},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,A)}catch(A){if(delete n.abortController,n.aborted)return;if(A&&A.status!==404)throw A;this._afterTileLoadWorkerResponse(n,null)}}))}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const u=n.tileID.scaledTo(this.maxzoom).canonical,d=u.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:u,overzoomRequest:this.map._requestManager.transformRequest(d,"Tile")}}_afterTileLoadWorkerResponse(n,u){if(u&&u.resourceTiming&&(n.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&n.setExpiryData(u),n.loadVectorData(u,this.map.painter),n.reloadPromise){const d=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(d.resolve).catch(d.reject)}}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Qs extends c.E{constructor(n,u,d,v){super(),this.id=n,this.dispatcher=d,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},u),c.e(this,c.U(u,["url","scheme","tileSize"]))}load(){return c._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield cn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(c.e(this,u),u.bounds&&(this.tileBounds=new Xa(u.bounds,this.minzoom,this.maxzoom)),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return c.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const d=yield je.getImage(this.map._requestManager.transformRequest(u,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&n.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const v=this.map.painter.context,A=v.gl,E=d.data;n.texture=this.map.painter.getTileTexture(E.width),n.texture?n.texture.update(E,{useMipmap:!0}):(n.texture=new c.T(v,E,A.RGBA,{useMipmap:!0}),n.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(d){if(delete n.abortController,n.aborted)n.state="unloaded";else if(d)throw n.state="errored",d}}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class qo extends Qs{constructor(n,u,d,v){super(n,u,d,v),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(u,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const v=yield je.getImage(d,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(v&&v.data){const A=v.data;this.map._refreshExpiredTiles&&(v.cacheControl||v.expires)&&n.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});const E=c.b(A)&&c.$()?A:yield this.readImageNow(A),I={type:this.type,uid:n.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const R=yield n.actor.sendAsync({type:"LDT",data:I});n.dem=R,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(v){if(delete n.abortController,n.aborted)n.state="unloaded";else if(v)throw n.state="errored",v}}))}readImageNow(n){return c._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&c.a0()){const u=n.width+2,d=n.height+2;try{return new c.R({width:u,height:d},yield c.a1(n,-1,-1,u,d))}catch{}}return V.getImageData(n,1)}))}_getNeighboringTiles(n){const u=n.canonical,d=Math.pow(2,u.z),v=(u.x-1+d)%d,A=u.x===0?n.wrap-1:n.wrap,E=(u.x+1+d)%d,I=u.x+1===d?n.wrap+1:n.wrap,R={};return R[new c.a2(n.overscaledZ,A,u.z,v,u.y).key]={backfilled:!1},R[new c.a2(n.overscaledZ,I,u.z,E,u.y).key]={backfilled:!1},u.y>0&&(R[new c.a2(n.overscaledZ,A,u.z,v,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,I,u.z,E,u.y-1).key]={backfilled:!1}),u.y+1<d&&(R[new c.a2(n.overscaledZ,A,u.z,v,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,n.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},R[new c.a2(n.overscaledZ,I,u.z,E,u.y+1).key]={backfilled:!1}),R}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}function _o(w){return w.type==="GeometryCollection"?w.geometries.map((n=>n.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function Nu(w){const n=new Br;let u;switch(w.type){case"FeatureCollection":u=w.features.map((d=>_o(d.geometry))).flat(1/0);break;case"Feature":u=_o(w.geometry);break;default:u=_o(w)}if(u.length==0)return n;for(let d=0;d<u.length-1;d+=2)n.extend([u[d],u[d+1]]);return n}class gi extends c.E{constructor(n,u,d,v){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=d.getActor(),this.setEventedParent(v),this._data=typeof u.data=="string"?{url:u.data}:{geojson:u.data},this._options=c.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&c.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=c.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:c.a5,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:c.a5,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(c.a5/this.tileSize)}_getClusterMaxZoom(n){const u=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||c.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${u}"`),u}load(){return c._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n,u){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const d=this._updateWorkerData();return u?d:this}updateData(n,u){this._pendingWorkerUpdate.diff=c.a6(this._pendingWorkerUpdate.diff,n);const d=this._updateWorkerData();return u?d:this}getData(){return c._(this,void 0,void 0,(function*(){const n=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getBounds(){return c._(this,void 0,void 0,(function*(){return Nu(yield this.getData())}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,u,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:u,offset:d}})}_updateWorkerData(){return c._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void c.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:u}=this._pendingWorkerUpdate,d=c.e({type:this.type},this.workerOptions);n!==void 0?(typeof n=="string"?(d.request=this.map._requestManager.transformRequest(V.resolveURL(n),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=n,this._pendingWorkerUpdate.data=void 0):u&&(d.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new c.l("dataloading",{dataType:"source"}));try{const v=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||v.abandoned)return void this.fire(new c.l("dataabort",{dataType:"source"}));v.data&&(this._data={geojson:v.data});const A=this._applyDiffToSource(u),E=this._getShouldReloadTileOptions(A);let I=null;v.resourceTiming&&v.resourceTiming[this.id]&&(I=v.resourceTiming[this.id].slice(0));const R={dataType:"source"};this._collectResourceTiming&&I&&I.length>0&&c.e(R,{resourceTiming:I}),this.fire(new c.l("data",Object.assign(Object.assign({},R),{sourceDataType:"metadata"}))),this.fire(new c.l("data",Object.assign(Object.assign({},R),{sourceDataType:"content",shouldReloadTileOptions:E})))}catch(v){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new c.l("dataabort",{dataType:"source"}));this.fire(new c.k(v))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiffToSource(n){if(!n)return;const u=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const v=c.a7(this._data.geojson,u);if(!v)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:v}}if(!this._data.updateable)return;const d=c.a8(this._data.updateable,n,u);return n.removeAll||this._options.cluster?void 0:d}_getShouldReloadTileOptions(n){if(n)return{affectedBounds:n.filter(Boolean).map((u=>Nu(u)))}}shouldReloadTile(n,{affectedBounds:u}){if(n.state==="loading")return!0;if(n.state==="unloaded")return!1;const{buffer:d,extent:v}=this.workerOptions.geojsonVtOptions,A=(function({x:E,y:I,z:R},j=0){const F=c.a3((E-j)/Math.pow(2,R)),Y=c.a4((I+1+j)/Math.pow(2,R)),X=c.a3((E+1+j)/Math.pow(2,R)),ee=c.a4((I-j)/Math.pow(2,R));return new Br([F,Y],[X,ee])})(n.tileID.canonical,d/v);for(const E of u)if(A.intersects(E))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return c._(this,void 0,void 0,(function*(){const u=n.actor?"RT":"LT";n.actor=this.actor;const d={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const v=yield this.actor.sendAsync({type:u,data:d},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(v,this.map.painter,u==="RT")}))}abortTile(n){return c._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return c._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class la extends c.E{constructor(n,u,d,v){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=d,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(n){return c._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new c.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield je.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,n&&(this.coordinates=n),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,c.Z(u)||this.fire(new c.k(u))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const u=n.map(c.a9.fromLngLat);var d;return this.tileID=(function(v){const A=c.aa.fromPoints(v),E=A.width(),I=A.height(),R=Math.max(E,I),j=Math.max(0,Math.floor(-Math.log(R)/Math.LN2)),F=Math.pow(2,j);return new c.ac(j,Math.floor((A.minX+A.maxX)/2*F),Math.floor((A.minY+A.maxY)/2*F))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((v=>this.tileID.getTilePoint(v)._round())),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new c.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,u=n.gl;this.texture||(this.texture=new c.T(n,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const v in this.tiles){const A=this.tiles[v];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return c._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:u,minY:d,maxX:v,maxY:A}=c.aa.fromPoints(n),E={};for(let I=0;I<=c.ab;I++){const R=Math.pow(2,I),j=Math.floor(u*R),F=Math.floor(d*R),Y=Math.floor(v*R),X=Math.floor(A*R);E[I]={minTileX:j,minTileY:F,maxTileX:Y,maxTileY:X}}return E}}class Ue extends la{constructor(n,u,d,v){super(n,u,d,v),this.roundZoom=!0,this.type="video",this.options=u}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const u of n.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield c.ad(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new c.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const u=this.video.seekable;n<u.start(0)||n>u.end(0)?this.fire(new c.k(new c.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,u=n.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new c.T(n,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let d=!1;for(const v in this.tiles){const A=this.tiles[v];A.state!=="loaded"&&(A.state="loaded",A.texture=this.texture,d=!0)}d&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class ne extends la{constructor(n,u,d,v){super(n,u,d,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((A=>!Array.isArray(A)||A.length!==2||A.some((E=>typeof E!="number"))))||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new c.k(new c.ae(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new c.k(new c.ae(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.k(new c.ae(`sources.${n}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return c._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,d=u.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new c.T(u,this.canvas,d.RGBA,{premultiply:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(const A in this.tiles){const E=this.tiles[A];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture,v=!0)}v&&this.fire(new c.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const re={},ue=w=>{switch(w){case"geojson":return gi;case"image":return la;case"raster":return Qs;case"raster-dem":return qo;case"vector":return ws;case"video":return Ue;case"canvas":return ne}return re[w]},Ee="RTLPluginLoaded";class Pe extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=gr()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return c._(this,arguments,void 0,(function*(u,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=V.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return c._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.l(Ee))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let He=null;function Ne(){return He||(He=new Pe),He}var ze,Ze;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(ze||(ze={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(Ze||(Ze={}));class lt{constructor(n,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=c.af(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:u,fadingParentID:d,fadeEndTime:v}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=u,this.fadingParentID=d,this.fadeEndTime=v}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=Z(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,u,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(v,A){const E={};if(!A)return E;for(const I of v){const R=I.layerIds.map((j=>A.getLayer(j))).filter(Boolean);if(R.length!==0){I.layers=R,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map((j=>R.filter((F=>F.id===j))[0])));for(const j of R)E[j.id]=I}}return E})(n.buckets,u?.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const A=this.buckets[v];if(A instanceof c.ah){if(this.hasSymbolBuckets=!0,!d)break;A.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const A=this.buckets[v];if(A instanceof c.ah&&A.hasRTLText){this.hasRTLText=!0,Ne().lazyLoad();break}}this.queryPadding=0;for(const v in this.buckets){const A=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(A))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new c.ag}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const d in this.buckets){const v=this.buckets[d];v.uploadPending()&&v.upload(n)}const u=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new c.T(n,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new c.T(n,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,u,d,v,A,E,I,R,j,F,Y){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:A,scale:E,tileSize:this.tileSize,pixelPosMatrix:F,transform:R,params:I,queryPadding:this.queryPadding*j,getElevation:Y},n,u,d):{}}querySourceFeatures(n,u){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const v=d.loadVTLayers(),A=u&&u.sourceLayer?u.sourceLayer:"",E=v[c.ai]||v[A];if(!E)return;const I=c.aj(u?.filter,u?.globalState),{z:R,x:j,y:F}=this.tileID.canonical,Y={z:R,x:j,y:F};for(let X=0;X<E.length;X++){const ee=E.feature(X);if(I.needGeometry){const pe=c.ak(ee,!0);if(!I.filter(new c.H(this.tileID.overscaledZ),pe,this.tileID.canonical))continue}else if(!I.filter(new c.H(this.tileID.overscaledZ),ee))continue;const ie=d.getId(ee,A),fe=new c.al(ee,R,j,F,ie);fe.tile=Y,n.push(fe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const u=this.expirationTime;if(n.cacheControl){const d=c.am(n.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const d=Date.now();let v=!1;if(this.expirationTime>d)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const A=this.expirationTime-u;A?this.expirationTime=d+Math.max(A,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!u.style.hasLayer(v))continue;const A=this.buckets[v],E=A.layers[0].sourceLayer||c.ai,I=d[E],R=n[E];if(!I||!R||Object.keys(R).length===0)continue;A.update(R,I,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const j=u&&u.style&&u.style.getLayer(v);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(A)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Z()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=Z()+n}setDependencies(n,u){const d={};for(const v of u)d[v]=!0;this.dependencies[n]=d}hasDependency(n,u){for(const d of n){const v=this.dependencies[d];if(v){for(const A of u)if(v[A])return!0}}return!1}}class ut{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,u,d){const v=String(u);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][v]=this.stateChanges[n][v]||{},c.e(this.stateChanges[n][v],d),this.deletedStates[n]===null){this.deletedStates[n]={};for(const A in this.state[n])A!==v&&(this.deletedStates[n][A]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][v]===null){this.deletedStates[n][v]={};for(const A in this.state[n][v])d[A]||(this.deletedStates[n][v][A]=null)}else for(const A in d)this.deletedStates[n]&&this.deletedStates[n][v]&&this.deletedStates[n][v][A]===null&&delete this.deletedStates[n][v][A]}removeFeatureState(n,u,d){if(this.deletedStates[n]===null)return;const v=String(u);if(this.deletedStates[n]=this.deletedStates[n]||{},d&&u!==void 0)this.deletedStates[n][v]!==null&&(this.deletedStates[n][v]=this.deletedStates[n][v]||{},this.deletedStates[n][v][d]=null);else if(u!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][v])for(d in this.deletedStates[n][v]={},this.stateChanges[n][v])this.deletedStates[n][v][d]=null;else this.deletedStates[n][v]=null;else this.deletedStates[n]=null}getState(n,u){const d=String(u),v=c.e({},(this.state[n]||{})[d],(this.stateChanges[n]||{})[d]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const A=this.deletedStates[n][u];if(A===null)return{};for(const E in A)delete v[E]}return v}initializeTileState(n,u){n.setFeatureState(this.state,u)}coalesceChanges(n,u){const d={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const A={};for(const E in this.stateChanges[v])this.state[v][E]||(this.state[v][E]={}),c.e(this.state[v][E],this.stateChanges[v][E]),A[E]=this.state[v][E];d[v]=A}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const A={};if(this.deletedStates[v]===null)for(const E in this.state[v])A[E]={},this.state[v][E]={};else for(const E in this.deletedStates[v]){if(this.deletedStates[v][E]===null)this.state[v][E]={};else for(const I of Object.keys(this.deletedStates[v][E]))delete this.state[v][E][I];A[E]=this.state[v][E]}d[v]=d[v]||{},c.e(d[v],A)}this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0&&n.setFeatureState(d,u)}}const Lt=89.25;function Vt(w,n){const u=c.an(n.lat,-c.ao,c.ao);return new c.P(c.Y(n.lng)*w,c.X(u)*w)}function rr(w,n){return new c.a9(n.x/w,n.y/w).toLngLat()}function kr(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(c.ap(90-w.pitch)),Math.tan(c.ap(Lt-w.pitch)))}function wr(w,n){const u=w.canonical,d=n/c.aq(u.z),v=u.x+Math.pow(2,u.z)*w.wrap,A=c.ar(new Float64Array(16));return c.O(A,A,[v*d,u.y*d,0]),c.Q(A,A,[d/c.a5,d/c.a5,1]),A}function Ve(w,n,u,d,v){const A=c.a9.fromLngLat(w,n),E=v*c.as(1,w.lat),{x:I,y:R,z:j}=jr(u,d);return new c.a9(A.x+E*-I,A.y+E*-R,A.z+E*-j)}function jr(w,n){const u=c.ap(w),d=c.ap(n),v=Math.cos(-u),A=Math.sin(u);return{x:A*Math.sin(d),y:-A*Math.cos(d),z:v}}function Zn(w,n,u){const d=n.intersectsFrustum(w);if(!u||d===0)return d;const v=n.intersectsPlane(u);return v===0?0:d===2&&v===2?2:1}function sr(w,n,u){let d=0;const v=(u-n)/10;for(let A=0;A<10;A++)d+=v*Math.pow(Math.cos(n+(A+.5)/10*(u-n)),w);return d}function Nr(w,n){return function(u,d,v,A,E){const I=2*((w-1)/c.at(Math.cos(c.ap(Lt-E))/Math.cos(c.ap(Lt)))-1),R=Math.acos(v/A),j=2*sr(I-1,0,c.ap(E/2)),F=Math.min(c.ap(Lt),R+c.ap(E/2)),Y=sr(I-1,Math.min(F,R-c.ap(E/2)),F),X=Math.atan(d/v),ee=Math.hypot(d,v);let ie=u;return ie+=c.at(A/ee/Math.max(.5,Math.cos(c.ap(E/2)))),ie+=I*c.at(Math.cos(X))/2,ie-=c.at(Math.max(1,Y/j/n))/2,ie}}const li=Nr(9.314,3);function Gr(w,n){const u=(n.roundZoom?Math.round:Math.floor)(w.zoom+c.at(w.tileSize/n.tileSize));return Math.max(0,u)}function Mn(w,n){const u=w.getCameraFrustum(),d=w.getClippingPlane(),v=w.screenPointToMercatorCoordinate(w.getCameraPoint()),A=c.a9.fromLngLat(w.center,w.elevation);v.z=A.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const E=w.getCoveringTilesDetailsProvider(),I=E.allowVariableZoom(w,n),R=Gr(w,n),j=n.minzoom||0,F=n.maxzoom!==void 0?n.maxzoom:w.maxZoom,Y=Math.min(Math.max(0,R),F),X=Math.pow(2,Y),ee=[X*v.x,X*v.y,0],ie=[X*A.x,X*A.y,0],fe=Math.hypot(A.x-v.x,A.y-v.y),pe=Math.abs(A.z-v.z),de=Math.hypot(fe,pe),ye=Se=>({zoom:0,x:0,y:0,wrap:Se,fullyVisible:!1}),Ae=[],ge=[];if(w.renderWorldCopies&&E.allowWorldCopies())for(let Se=1;Se<=3;Se++)Ae.push(ye(-Se)),Ae.push(ye(Se));for(Ae.push(ye(0));Ae.length>0;){const Se=Ae.pop(),Me=Se.x,_e=Se.y;let Re=Se.fullyVisible;const Ye={x:Me,y:_e,z:Se.zoom},Ge=E.getTileBoundingVolume(Ye,Se.wrap,w.elevation,n);if(!Re){const At=Zn(u,Ge,d);if(At===0)continue;Re=At===2}const $e=E.distanceToTile2d(v.x,v.y,Ye,Ge);let Xe=R;I&&(Xe=(n.calculateTileZoom||li)(w.zoom+c.at(w.tileSize/n.tileSize),$e,pe,de,w.fov)),Xe=(n.roundZoom?Math.round:Math.floor)(Xe),Xe=Math.max(0,Xe);const St=Math.min(Xe,F);if(Se.wrap=E.getWrap(A,Ye,Se.wrap),Se.zoom>=St){if(Se.zoom<j)continue;const At=Y-Se.zoom,ft=ee[0]-.5-(Me<<At),Mt=ee[1]-.5-(_e<<At),or=n.reparseOverscaled?Math.max(Se.zoom,Xe):Se.zoom;ge.push({tileID:new c.a2(Se.zoom===F?or:Se.zoom,Se.wrap,Se.zoom,Me,_e),distanceSq:c.au([ie[0]-.5-Me,ie[1]-.5-_e]),tileDistanceToCamera:Math.sqrt(ft*ft+Mt*Mt)})}else for(let At=0;At<4;At++)Ae.push({zoom:Se.zoom+1,x:(Me<<1)+At%2,y:(_e<<1)+(At>>1),wrap:Se.wrap,fullyVisible:Re})}return ge.sort(((Se,Me)=>Se.distanceSq-Me.distanceSq)).map((Se=>Se.tileID))}const Yr=c.aa.fromPoints([new c.P(0,0),new c.P(c.a5,c.a5)]);function $n(w){return w==="raster"||w==="image"||w==="video"}function Fu(w,n,u,d,v,A,E){if(!n.hasData())return!1;const{tileID:I,fadingRole:R,fadingDirection:j,fadingParentID:F}=n;if(R===ze.Base&&j===Ze.Incoming&&F)return u[F.key]=F,!0;const Y=Math.max(I.overscaledZ-v,A);for(let X=I.overscaledZ-1;X>=Y;X--){const ee=I.scaledTo(X),ie=w.getLoadedTile(ee);if(ie)return n.setCrossFadeLogic({fadingRole:ze.Base,fadingDirection:Ze.Incoming,fadingParentID:ie.tileID,fadeEndTime:d+E}),ie.setCrossFadeLogic({fadingRole:ze.Parent,fadingDirection:Ze.Departing,fadeEndTime:d+E}),u[ee.key]=ee,!0}return!1}function Nl(w,n,u,d,v,A){if(!n.hasData())return!1;const E=n.tileID.children(v);let I=xt(w,n,E,u,d,v,A);if(I)return!0;for(const R of E)xt(w,n,R.children(v),u,d,v,A)&&(I=!0);return I}function xt(w,n,u,d,v,A,E){if(u[0].overscaledZ>=A)return!1;let I=!1;for(const R of u){const j=w.getLoadedTile(R);if(!j)continue;const{fadingRole:F,fadingDirection:Y,fadingParentID:X}=j;F===ze.Base&&Y===Ze.Departing&&X||(j.setCrossFadeLogic({fadingRole:ze.Base,fadingDirection:Ze.Departing,fadingParentID:n.tileID,fadeEndTime:v+E}),n.setCrossFadeLogic({fadingRole:ze.Parent,fadingDirection:Ze.Incoming,fadeEndTime:v+E})),d[R.key]=R,I=!0}return I}function Bi(w,n,u,d){const v=w.tileID;return!!w.selfFading||!w.hasData()&&!!n.has(v)&&(w.setSelfFadeLogic(u+d),!0)}function ji(w,n){var u;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let d=n.tileID.canonical.x-w.tileID.canonical.x;const v=n.tileID.canonical.y-w.tileID.canonical.y,A=Math.pow(2,w.tileID.canonical.z),E=n.tileID.key;d===0&&v===0||Math.abs(v)>1||(Math.abs(d)>1&&(Math.abs(d+A)===1?d+=A:Math.abs(d-A)===1&&(d-=A)),n.dem&&w.dem&&(w.dem.backfillBorder(n.dem,d,v),!((u=w.neighboringTiles)===null||u===void 0)&&u[E]&&(w.neighboringTiles[E].backfilled=!0)))}class xo{constructor(){this._tiles={}}handleWrapJump(n){const u={};for(const d in this._tiles){const v=this._tiles[d];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+n),u[v.tileID.key]=v}this._tiles=u}setFeatureState(n,u){for(const d in this._tiles)this._tiles[d].setFeatureState(n,u)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map((u=>u.tileID)).sort(c.aw).map((u=>u.key)):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,u){this._tiles[n]=u}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const u=this.getTileById(n.key);return u?.hasData()?u:null}isIdRenderable(n,u=!1){var d;return(d=this.getTileById(n))===null||d===void 0?void 0:d.isRenderable(u)}getRenderableIds(n=0,u){const d=[];for(const v of this.getAllIds())this.isIdRenderable(v,u)&&d.push(this.getTileById(v));return u?d.sort(((v,A)=>{const E=v.tileID,I=A.tileID,R=new c.P(E.canonical.x,E.canonical.y)._rotate(-n),j=new c.P(I.canonical.x,I.canonical.y)._rotate(-n);return E.overscaledZ-I.overscaledZ||j.y-R.y||j.x-R.x})).map((v=>v.tileID.key)):d.map((v=>v.tileID)).sort(c.aw).map((v=>v.key))}}class nn extends c.E{constructor(n,u,d){super(),this.id=n,this.dispatcher=d,this.on("data",(v=>this._dataHandler(v))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((v,A,E,I)=>{const R=new(ue(A.type))(v,A,E,I);if(R.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${R.id}`);return R})(n,u,d,this),this._inViewTiles=new xo,this._outOfViewCache=new c.ax(0,(v=>this._unloadTile(v))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ut,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const u of this._inViewTiles.getAllTiles())u.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new xo}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,u,d){return c._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,u,d)}catch(v){n.state="errored",v.status!==404?this._source.fire(new c.k(v,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new c.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const u of this._inViewTiles.getAllTiles())u.upload(n),u.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var u;return this._inViewTiles.getRenderableIds((u=this.transform)===null||u===void 0?void 0:u.bearingInRadians,n)}hasRenderableParent(n){const u=n.overscaledZ-1;if(u>=this._source.minzoom){const d=this.getLoadedTile(n.scaledTo(u));if(d)return this._inViewTiles.isIdRenderable(d.tileID.key)}return!1}reload(n,u=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const d of this._inViewTiles.getAllIds()){const v=this._inViewTiles.getTileById(d);u&&!this._source.shouldReloadTile(v,u)||(n?this._reloadTile(d,"expired"):v.state!=="errored"&&this._reloadTile(d,"reloading"))}}}_reloadTile(n,u){return c._(this,void 0,void 0,(function*(){const d=this._inViewTiles.getTileById(n);d&&(d.state!=="loading"&&(d.state=u),yield this._loadTile(d,n,u))}))}_tileLoaded(n,u,d){n.timeAdded=Z(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),d==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(u,n),this.getSource().type==="raster-dem"&&n.dem&&(function(v,A){var E,I;const R=A.getRenderableIds();for(const j of R){if(!v.neighboringTiles||!v.neighboringTiles[j])continue;const F=A.getTileById(j);v.neighboringTiles[j].backfilled||ji(v,F),!((I=(E=F.neighboringTiles)===null||E===void 0?void 0:E[v.tileID.key])===null||I===void 0)&&I.backfilled||ji(F,v)}})(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new c.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,u){const d=this._getLoadedDescendents(u),v=new Set;for(const A of u){const E=d[A.key];if(!E?.length){v.add(A);continue}const I=A.overscaledZ+nn.maxOverzooming,R=E.filter((Y=>Y.tileID.overscaledZ<=I));if(!R.length){v.add(A);continue}const j=Math.min(...R.map((Y=>Y.tileID.overscaledZ))),F=R.filter((Y=>Y.tileID.overscaledZ===j)).map((Y=>Y.tileID));for(const Y of F)n[Y.key]=Y;this._areDescendentsComplete(F,j,A.overscaledZ)||v.add(A)}return v}_getLoadedDescendents(n){var u;const d={};for(const v of this._inViewTiles.getAllTiles().filter((A=>A.hasData())))for(const A of n)v.tileID.isChildOf(A)&&(d[u=A.key]||(d[u]=[])).push(v);return d}_areDescendentsComplete(n,u,d){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===u:Math.pow(4,u-d)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const u=Math.ceil(n.width/this._source.tileSize)+1,d=Math.ceil(n.height/this._source.tileSize)+1,v=Math.floor(u*d*(this._maxTileCacheZoomLevels===null?c.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),A=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._outOfViewCache.setMaxSize(A)}handleWrapJump(n){const u=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,u&&(this._inViewTiles.handleWrapJump(u),this._resetTileReloadTimers())}update(n,u){if(!this._sourceLoaded||this._paused)return;let d;this.transform=n,this.terrain=u,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((R=>new c.a2(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y))):(d=Mn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter((R=>this._source.hasTile(R))))):d=[],this.usedForTerrain&&(d=this._addTerrainIdealTiles(d));const v=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,v&&this.fire(new c.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const A=Gr(n,this._source),E=this._updateRetainedTiles(d,A),I=$n(this._source.type);I&&this._rasterFadeDuration>0&&!u&&(function(R,j,F,Y,X,ee,ie){const fe=Z(),pe=c.av(j);for(const de of j){const ye=R.getTileById(de.key);ye.fadingDirection!==Ze.Departing&&ye.fadeOpacity!==0||ye.resetFadeLogic(),Fu(R,ye,F,fe,Y,X,ie)||Nl(R,ye,F,fe,ee,ie)||Bi(ye,pe,fe,ie)||ye.resetFadeLogic()}})(this._inViewTiles,d,E,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),I?this._cleanUpRasterTiles(E):this._cleanUpVectorTiles(E)}_cleanUpRasterTiles(n){for(const u of this._inViewTiles.getAllIds())n[u]||this._removeTile(u)}_cleanUpVectorTiles(n){for(const u of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(u);n[u]?d.clearSymbolFadeHold():d.hasSymbolBuckets?d.holdingForSymbolFade()?d.symbolFadeFinished()&&this._removeTile(u):d.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(n){const u=[];for(const d of n)if(d.canonical.z>this._source.minzoom){const v=d.scaledTo(d.canonical.z-1);u.push(v);const A=d.scaledTo(Math.max(this._source.minzoom,Math.min(d.canonical.z,5)));u.push(A)}return n.concat(u)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,u){var d;const v=new Set;for(const j of n)this._addTile(j).hasData()||v.add(j);const A=n.reduce(((j,F)=>(j[F.key]=F,j)),{}),E=this._retainLoadedChildren(A,v),I={},R=Math.max(u-nn.maxUnderzooming,this._source.minzoom);for(const j of E){let F=this._inViewTiles.getTileById(j.key),Y=F?.wasRequested();for(let X=j.overscaledZ-1;X>=R;--X){const ee=j.scaledTo(X);if(I[ee.key])break;if(I[ee.key]=!0,F=this.getTile(ee),!F&&Y&&(F=this._addTile(ee)),F){const ie=F.hasData();if((ie||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||Y)&&(A[ee.key]=ee),Y=F.wasRequested(),ie)break}}}return A}_addTile(n){let u=this._inViewTiles.getTileById(n.key);if(u)return u;u=this._outOfViewCache.getAndRemove(n),u&&(u.resetFadeLogic(),this._setTileReloadTimer(n.key,u),u.tileID=n,this._state.initializeTileState(u,this.map?this.map.painter:null));const d=u;return u||(u=new lt(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(u,n.key,u.state)),u.uses++,this._inViewTiles.setTile(n.key,u),d||this._source.fire(new c.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(n,u){this._clearTileReloadTimer(n);const d=u.getExpiryTimeout();d&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),d))}_clearTileReloadTimer(n){const u=this._timers[n];u&&(clearTimeout(u),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const u=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,u)}}refreshTiles(n){for(const u of this._inViewTiles.getAllIds()){const d=this._inViewTiles.getTileById(u);(this._inViewTiles.isIdRenderable(u)||d.state=="errored")&&n.some((v=>v.equals(d.tileID.canonical)))&&this._reloadTile(u,"expired")}}_removeTile(n){const u=this._inViewTiles.getTileById(n);u&&(u.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._outOfViewCache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,u,d){const v=[],A=this.transform;if(!A)return v;const E=A.getCoveringTilesDetailsProvider().allowWorldCopies(),I=d?A.getCameraQueryGeometry(n):n,R=ee=>A.screenPointToMercatorCoordinate(ee,this.terrain),j=this.transformBbox(n,R,!E),F=this.transformBbox(I,R,!E),Y=this.getIds(),X=c.aa.fromPoints(F);for(let ee=0;ee<Y.length;ee++){const ie=this._inViewTiles.getTileById(Y[ee]);if(ie.holdingForSymbolFade())continue;const fe=E?[ie.tileID]:[ie.tileID.unwrapTo(-1),ie.tileID.unwrapTo(0)],pe=Math.pow(2,A.zoom-ie.tileID.overscaledZ),de=u*ie.queryPadding*c.a5/ie.tileSize/pe;for(const ye of fe){const Ae=X.map((ge=>ye.getTilePoint(new c.a9(ge.x,ge.y))));if(Ae.expandBy(de),Ae.intersects(Yr)){const ge=j.map((Me=>ye.getTilePoint(Me))),Se=F.map((Me=>ye.getTilePoint(Me)));v.push({tile:ie,tileID:E?ye:ye.unwrapTo(0),queryGeometry:ge,cameraQueryGeometry:Se,scale:pe})}}}return v}transformBbox(n,u,d){let v=n.map(u);if(d){const A=c.aa.fromPoints(n);A.shrinkBy(.001*Math.min(A.width(),A.height()));const E=A.map(u);c.aa.fromPoints(v).covers(E)||(v=v.map((I=>I.x>.5?new c.a9(I.x-1,I.y,I.z):I)))}return v}getVisibleCoordinates(n){const u=this.getRenderableIds(n).map((d=>this._inViewTiles.getTileById(d).tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){return!!this._source.hasTransition()||!(!$n(this._source.type)||!(function(n,u){if(u<=0)return!1;const d=Z();for(const v of n.getAllTiles())if(v.fadeEndTime>=d)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,u,d){this._state.updateState(n=n||c.ai,u,d)}removeFeatureState(n,u,d){this._state.removeFeatureState(n=n||c.ai,u,d)}getFeatureState(n,u){return this._state.getState(n=n||c.ai,u)}setDependencies(n,u,d){const v=this._inViewTiles.getTileById(n);v&&v.setDependencies(u,d)}reloadTilesForDependencies(n,u){for(const d of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(d).hasDependency(n,u)&&this._reloadTile(d,"reloading");this._outOfViewCache.filter((d=>!d.hasDependency(n,u)))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}nn.maxUnderzooming=10,nn.maxOverzooming=3;class Et{constructor(n,u){this.reset(n,u)}reset(n,u){this.points=n||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=c.an(n,0,1);let u=1,d=this._distances[u];const v=n*this.paddedLength+this.padding;for(;d<v&&u<this._distances.length;)d=this._distances[++u];const A=u-1,E=this._distances[A],I=d-E,R=I>0?(v-E)/I:0;return this.points[A].mult(1-R).add(this.points[u].mult(R))}}function ur(w,n){let u=!0;return w==="always"||w!=="never"&&n!=="never"||(u=!1),u}class dr{constructor(n,u,d){const v=this.boxCells=[],A=this.circleCells=[];this.xCellCount=Math.ceil(n/d),this.yCellCount=Math.ceil(u/d);for(let E=0;E<this.xCellCount*this.yCellCount;E++)v.push([]),A.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=u,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,u,d,v,A){this._forEachCell(u,d,v,A,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(u),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(A)}insertCircle(n,u,d,v){this._forEachCell(u-v,d-v,u+v,d+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(u),this.circles.push(d),this.circles.push(v)}_insertBoxCell(n,u,d,v,A,E){this.boxCells[A].push(E)}_insertCircleCell(n,u,d,v,A,E){this.circleCells[A].push(E)}_query(n,u,d,v,A,E,I){if(d<0||n>this.width||v<0||u>this.height)return[];const R=[];if(n<=0&&u<=0&&this.width<=d&&this.height<=v){if(A)return[{key:null,x1:n,y1:u,x2:d,y2:v}];for(let j=0;j<this.boxKeys.length;j++)R.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const F=this.circles[3*j],Y=this.circles[3*j+1],X=this.circles[3*j+2];R.push({key:this.circleKeys[j],x1:F-X,y1:Y-X,x2:F+X,y2:Y+X})}}else this._forEachCell(n,u,d,v,this._queryCell,R,{hitTest:A,overlapMode:E,seenUids:{box:{},circle:{}}},I);return R}query(n,u,d,v){return this._query(n,u,d,v,!1,null)}hitTest(n,u,d,v,A,E){return this._query(n,u,d,v,!0,A,E).length>0}hitTestCircle(n,u,d,v,A){const E=n-d,I=n+d,R=u-d,j=u+d;if(I<0||E>this.width||j<0||R>this.height)return!1;const F=[];return this._forEachCell(E,R,I,j,this._queryCellCircle,F,{hitTest:!0,overlapMode:v,circle:{x:n,y:u,radius:d},seenUids:{box:{},circle:{}}},A),F.length>0}_queryCell(n,u,d,v,A,E,I,R){const{seenUids:j,hitTest:F,overlapMode:Y}=I,X=this.boxCells[A];if(X!==null){const ie=this.bboxes;for(const fe of X)if(!j.box[fe]){j.box[fe]=!0;const pe=4*fe,de=this.boxKeys[fe];if(n<=ie[pe+2]&&u<=ie[pe+3]&&d>=ie[pe+0]&&v>=ie[pe+1]&&(!R||R(de))&&(!F||!ur(Y,de.overlapMode))&&(E.push({key:de,x1:ie[pe],y1:ie[pe+1],x2:ie[pe+2],y2:ie[pe+3]}),F))return!0}}const ee=this.circleCells[A];if(ee!==null){const ie=this.circles;for(const fe of ee)if(!j.circle[fe]){j.circle[fe]=!0;const pe=3*fe,de=this.circleKeys[fe];if(this._circleAndRectCollide(ie[pe],ie[pe+1],ie[pe+2],n,u,d,v)&&(!R||R(de))&&(!F||!ur(Y,de.overlapMode))){const ye=ie[pe],Ae=ie[pe+1],ge=ie[pe+2];if(E.push({key:de,x1:ye-ge,y1:Ae-ge,x2:ye+ge,y2:Ae+ge}),F)return!0}}}return!1}_queryCellCircle(n,u,d,v,A,E,I,R){const{circle:j,seenUids:F,overlapMode:Y}=I,X=this.boxCells[A];if(X!==null){const ie=this.bboxes;for(const fe of X)if(!F.box[fe]){F.box[fe]=!0;const pe=4*fe,de=this.boxKeys[fe];if(this._circleAndRectCollide(j.x,j.y,j.radius,ie[pe+0],ie[pe+1],ie[pe+2],ie[pe+3])&&(!R||R(de))&&!ur(Y,de.overlapMode))return E.push(!0),!0}}const ee=this.circleCells[A];if(ee!==null){const ie=this.circles;for(const fe of ee)if(!F.circle[fe]){F.circle[fe]=!0;const pe=3*fe,de=this.circleKeys[fe];if(this._circlesCollide(ie[pe],ie[pe+1],ie[pe+2],j.x,j.y,j.radius)&&(!R||R(de))&&!ur(Y,de.overlapMode))return E.push(!0),!0}}}_forEachCell(n,u,d,v,A,E,I,R){const j=this._convertToXCellCoord(n),F=this._convertToYCellCoord(u),Y=this._convertToXCellCoord(d),X=this._convertToYCellCoord(v);for(let ee=j;ee<=Y;ee++)for(let ie=F;ie<=X;ie++)if(A.call(this,n,u,d,v,this.xCellCount*ie+ee,E,I,R))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,u,d,v,A,E){const I=v-n,R=A-u,j=d+E;return j*j>I*I+R*R}_circleAndRectCollide(n,u,d,v,A,E,I){const R=(E-v)/2,j=Math.abs(n-(v+R));if(j>R+d)return!1;const F=(I-A)/2,Y=Math.abs(u-(A+F));if(Y>F+d)return!1;if(j<=R||Y<=F)return!0;const X=j-R,ee=Y-F;return X*X+ee*ee<=d*d}}function Pa(w,n,u){const d=c.N();if(!w){const{vecSouth:Y,vecEast:X}=Ho(n),ee=C();ee[0]=X[0],ee[1]=X[1],ee[2]=Y[0],ee[3]=Y[1],v=ee,(F=(E=(A=ee)[0])*(j=A[3])-(R=A[2])*(I=A[1]))&&(v[0]=j*(F=1/F),v[1]=-I*F,v[2]=-R*F,v[3]=E*F),d[0]=ee[0],d[1]=ee[1],d[4]=ee[2],d[5]=ee[3]}var v,A,E,I,R,j,F;return c.Q(d,d,[1/u,1/u,1]),d}function nf(w,n,u,d){if(w){const v=c.N();if(!n){const{vecSouth:A,vecEast:E}=Ho(u);v[0]=E[0],v[1]=E[1],v[4]=A[0],v[5]=A[1]}return c.Q(v,v,[d,d,1]),v}return u.pixelsToClipSpaceMatrix}function Ho(w){const n=Math.cos(w.rollInRadians),u=Math.sin(w.rollInRadians),d=Math.cos(w.pitchInRadians),v=Math.cos(w.bearingInRadians),A=Math.sin(w.bearingInRadians),E=c.aC();E[0]=-v*d*u-A*n,E[1]=-A*d*u+v*n;const I=c.aD(E);I<1e-9?c.aE(E):c.aF(E,E,1/I);const R=c.aC();R[0]=v*d*n-A*u,R[1]=A*d*n+v*u;const j=c.aD(R);return j<1e-9?c.aE(R):c.aF(R,R,1/j),{vecEast:R,vecSouth:E}}function lr(w,n,u,d){let v;d?(v=[w,n,d(w,n),1],c.aH(v,v,u)):(v=[w,n,0,1],Ya(v,v,u));const A=v[3];return{point:new c.P(v[0]/A,v[1]/A),signedDistanceFromCamera:A,isOccluded:!1}}function Fl(w,n){return .5+w/n*.5}function Zo(w,n){return w.x>=-n[0]&&w.x<=n[0]&&w.y>=-n[1]&&w.y<=n[1]}function Ss(w,n,u,d,v,A,E,I,R,j,F,Y,X){const ee=u?w.textSizeData:w.iconSizeData,ie=c.ay(ee,n.transform.zoom),fe=[256/n.width*2+1,256/n.height*2+1],pe=u?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;pe.clear();const de=w.lineVertexArray,ye=u?w.text.placedSymbolArray:w.icon.placedSymbolArray,Ae=n.transform.width/n.transform.height;let ge=!1;for(let Se=0;Se<ye.length;Se++){const Me=ye.get(Se);if(Me.hidden||Me.writingMode===c.az.vertical&&!ge){Yo(Me.numGlyphs,pe);continue}ge=!1;const _e=new c.P(Me.anchorX,Me.anchorY),Re={getElevation:X,pitchedLabelPlaneMatrix:d,lineVertexArray:de,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:_e,unwrappedTileID:R,width:j,height:F,translation:Y},Ye=Vu(Me.anchorX,Me.anchorY,Re);if(!Zo(Ye.point,fe)){Yo(Me.numGlyphs,pe);continue}const Ge=Fl(n.transform.cameraToCenterDistance,Ye.signedDistanceFromCamera),$e=c.aA(ee,ie,Me),Xe=A?$e*n.transform.getPitchedTextCorrection(Me.anchorX,Me.anchorY,R)/Ge:$e*Ge,St=Pn({projectionContext:Re,pitchedLabelPlaneMatrixInverse:v,symbol:Me,fontSize:Xe,flip:!1,keepUpright:E,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ae,rotateToLine:I});ge=St.useVertical,(St.notEnoughRoom||ge||St.needsFlipping&&Pn({projectionContext:Re,pitchedLabelPlaneMatrixInverse:v,symbol:Me,fontSize:Xe,flip:!0,keepUpright:E,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:pe,aspectRatio:Ae,rotateToLine:I}).notEnoughRoom)&&Yo(Me.numGlyphs,pe)}u?w.text.dynamicLayoutVertexBuffer.updateData(pe):w.icon.dynamicLayoutVertexBuffer.updateData(pe)}function $o(w,n,u,d,v,A,E,I){const R=A.glyphStartIndex+A.numGlyphs,j=A.lineStartIndex,F=A.lineStartIndex+A.lineLength,Y=n.getoffsetX(A.glyphStartIndex),X=n.getoffsetX(R-1),ee=bo(w*Y,u,d,v,A.segment,j,F,I,E);if(!ee)return null;const ie=bo(w*X,u,d,v,A.segment,j,F,I,E);return ie?I.projectionCache.anyProjectionOccluded?null:{first:ee,last:ie}:null}function Xo(w,n,u,d){return w===c.az.horizontal&&Math.abs(u.y-n.y)>Math.abs(u.x-n.x)*d?{useVertical:!0}:(w===c.az.vertical?n.y<u.y:n.x>u.x)?{needsFlipping:!0}:null}function Pn(w){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:u,symbol:d,fontSize:v,flip:A,keepUpright:E,glyphOffsetArray:I,dynamicLayoutVertexArray:R,aspectRatio:j,rotateToLine:F}=w,Y=v/24,X=d.lineOffsetX*Y,ee=d.lineOffsetY*Y;let ie;if(d.numGlyphs>1){const fe=d.glyphStartIndex+d.numGlyphs,pe=d.lineStartIndex,de=d.lineStartIndex+d.lineLength,ye=$o(Y,I,X,ee,A,d,F,n);if(!ye)return{notEnoughRoom:!0};const Ae=As(ye.first.point.x,ye.first.point.y,n,u),ge=As(ye.last.point.x,ye.last.point.y,n,u);if(E&&!A){const Se=Xo(d.writingMode,Ae,ge,j);if(Se)return Se}ie=[ye.first];for(let Se=d.glyphStartIndex+1;Se<fe-1;Se++){const Me=bo(Y*I.getoffsetX(Se),X,ee,A,d.segment,pe,de,n,F);if(!Me)return{notEnoughRoom:!0};ie.push(Me)}ie.push(ye.last)}else{if(E&&!A){const pe=Sr(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,de=d.lineStartIndex+d.segment+1,ye=new c.P(n.lineVertexArray.getx(de),n.lineVertexArray.gety(de)),Ae=Sr(ye.x,ye.y,n),ge=Ae.signedDistanceFromCamera>0?Ae.point:Uu(n.tileAnchorPoint,ye,pe,1,n),Se=As(pe.x,pe.y,n,u),Me=As(ge.x,ge.y,n,u),_e=Xo(d.writingMode,Se,Me,j);if(_e)return _e}const fe=bo(Y*I.getoffsetX(d.glyphStartIndex),X,ee,A,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,n,F);if(!fe||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[fe]}for(const fe of ie)c.aG(R,fe.point,fe.angle);return{}}function Uu(w,n,u,d,v){const A=w.add(w.sub(n)._unit()),E=Sr(A.x,A.y,v).point,I=u.sub(E);return u.add(I._mult(d/I.mag()))}function Ni(w,n,u){const d=n.projectionCache;if(d.projections[w])return d.projections[w];const v=new c.P(n.lineVertexArray.getx(w),n.lineVertexArray.gety(w)),A=Sr(v.x,v.y,n);if(A.signedDistanceFromCamera>0)return d.projections[w]=A.point,d.anyProjectionOccluded=d.anyProjectionOccluded||A.isOccluded,A.point;const E=w-u.direction;return Uu(u.distanceFromAnchor===0?n.tileAnchorPoint:new c.P(n.lineVertexArray.getx(E),n.lineVertexArray.gety(E)),v,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,n)}function Sr(w,n,u){const d=w+u.translation[0],v=n+u.translation[1];let A;return u.pitchWithMap?(A=lr(d,v,u.pitchedLabelPlaneMatrix,u.getElevation),A.isOccluded=!1):(A=u.transform.projectTileCoordinates(d,v,u.unwrappedTileID,u.getElevation),A.point.x=(.5*A.point.x+.5)*u.width,A.point.y=(.5*-A.point.y+.5)*u.height),A}function As(w,n,u,d){if(u.pitchWithMap){const v=[w,n,0,1];return c.aH(v,v,d),u.transform.projectTileCoordinates(v[0]/v[3],v[1]/v[3],u.unwrappedTileID,u.getElevation).point}return{x:w/u.width*2-1,y:1-n/u.height*2}}function Vu(w,n,u){return u.transform.projectTileCoordinates(w,n,u.unwrappedTileID,u.getElevation)}function Gu(w,n,u){return w._unit()._perp()._mult(n*u)}function Js(w,n,u,d,v,A,E,I,R){if(I.projectionCache.offsets[w])return I.projectionCache.offsets[w];const j=u.add(n);if(w+R.direction<d||w+R.direction>=v)return I.projectionCache.offsets[w]=j,j;const F=Ni(w+R.direction,I,R),Y=Gu(F.sub(u),E,R.direction),X=u.add(Y),ee=F.add(Y);return I.projectionCache.offsets[w]=c.aI(A,j,X,ee)||j,I.projectionCache.offsets[w]}function bo(w,n,u,d,v,A,E,I,R){const j=d?w-n:w+n;let F=j>0?1:-1,Y=0;d&&(F*=-1,Y=Math.PI),F<0&&(Y+=Math.PI);let X,ee=F>0?A+v:A+v+1;I.projectionCache.cachedAnchorPoint?X=I.projectionCache.cachedAnchorPoint:(X=Sr(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=X);let ie,fe,pe=X,de=X,ye=0,Ae=0;const ge=Math.abs(j),Se=[];let Me;for(;ye+Ae<=ge;){if(ee+=F,ee<A||ee>=E)return null;ye+=Ae,de=pe,fe=ie;const Ye={absOffsetX:ge,direction:F,distanceFromAnchor:ye,previousVertex:de};if(pe=Ni(ee,I,Ye),u===0)Se.push(de),Me=pe.sub(de);else{let Ge;const $e=pe.sub(de);Ge=$e.mag()===0?Gu(Ni(ee+F,I,Ye).sub(pe),u,F):Gu($e,u,F),fe||(fe=de.add(Ge)),ie=Js(ee,Ge,pe,A,E,fe,u,I,Ye),Se.push(fe),Me=ie.sub(fe)}Ae=Me.mag()}const _e=Me._mult((ge-ye)/Ae)._add(fe||de),Re=Y+Math.atan2(pe.y-de.y,pe.x-de.x);return Se.push(_e),{point:_e,angle:R?Re:0,path:Se}}const Rc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Yo(w,n){for(let u=0;u<w;u++){const d=n.length;n.resize(d+4),n.float32.set(Rc,3*d)}}function Ya(w,n,u){const d=n[0],v=n[1];return w[0]=u[0]*d+u[4]*v+u[12],w[1]=u[1]*d+u[5]*v+u[13],w[3]=u[3]*d+u[7]*v+u[15],w}const Cr=100;class pd{constructor(n,u=new dr(n.width+200,n.height+200,25),d=new dr(n.width+200,n.height+200,25)){this.transform=n,this.grid=u,this.ignoredGrid=d,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Cr,this.screenBottomBoundary=n.height+Cr,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,u,d,v,A,E,I,R,j,F,Y,X){const ee=this.projectAndGetPerspectiveRatio(n.anchorPointX+R[0],n.anchorPointY+R[1],A,F,X),ie=d*ee.perspectiveRatio;let fe;if(E||I)fe=this._projectCollisionBox(n,ie,v,A,E,I,R,ee,F,Y,X);else{const Me=ee.x+(Y?Y.x*ie:0),_e=ee.y+(Y?Y.y*ie:0);fe={allPointsOccluded:!1,box:[Me+n.x1*ie,_e+n.y1*ie,Me+n.x2*ie,_e+n.y2*ie]}}const[pe,de,ye,Ae]=fe.box,ge=E?fe.allPointsOccluded:ee.isOccluded;let Se=ge;return Se||(Se=ee.perspectiveRatio<this.perspectiveRatioCutoff),Se||(Se=!this.isInsideGrid(pe,de,ye,Ae)),Se||u!=="always"&&this.grid.hitTest(pe,de,ye,Ae,u,j)?{box:[pe,de,ye,Ae],placeable:!1,offscreen:!1,occluded:ge}:{box:[pe,de,ye,Ae],placeable:!0,offscreen:this.isOffscreen(pe,de,ye,Ae),occluded:ge}}placeCollisionCircles(n,u,d,v,A,E,I,R,j,F,Y,X,ee,ie){const fe=[],pe=new c.P(u.anchorX,u.anchorY),de=this.getPerspectiveRatio(pe.x,pe.y,E,ie),ye=(j?A*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,E)/de:A*de)/c.aM,Ae={getElevation:ie,pitchedLabelPlaneMatrix:I,lineVertexArray:d,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pe,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:ee},ge=$o(ye,v,u.lineOffsetX*ye,u.lineOffsetY*ye,!1,u,!1,Ae);let Se=!1,Me=!1,_e=!0;if(ge){const Re=.5*Y*de+X,Ye=new c.P(-100,-100),Ge=new c.P(this.screenRightBoundary,this.screenBottomBoundary),$e=new Et,Xe=ge.first,St=ge.last;let At=[];for(let or=Xe.path.length-1;or>=1;or--)At.push(Xe.path[or]);for(let or=1;or<St.path.length;or++)At.push(St.path[or]);const ft=2.5*Re;if(j){const or=this.projectPathToScreenSpace(At,Ae);At=or.some((Lr=>Lr.signedDistanceFromCamera<=0))?[]:or.map((Lr=>Lr.point))}let Mt=[];if(At.length>0){const or=At[0].clone(),Lr=At[0].clone();for(let an=1;an<At.length;an++)or.x=Math.min(or.x,At[an].x),or.y=Math.min(or.y,At[an].y),Lr.x=Math.max(Lr.x,At[an].x),Lr.y=Math.max(Lr.y,At[an].y);Mt=or.x>=Ye.x&&Lr.x<=Ge.x&&or.y>=Ye.y&&Lr.y<=Ge.y?[At]:Lr.x<Ye.x||or.x>Ge.x||Lr.y<Ye.y||or.y>Ge.y?[]:c.aJ([At],Ye.x,Ye.y,Ge.x,Ge.y)}for(const or of Mt){$e.reset(or,.25*Re);let Lr=0;Lr=$e.length<=.5*Re?1:Math.ceil($e.paddedLength/ft)+1;for(let an=0;an<Lr;an++){const Qr=an/Math.max(Lr-1,1),fn=$e.lerp(Qr),Hr=fn.x+Cr,An=fn.y+Cr;fe.push(Hr,An,Re,0);const dn=Hr-Re,_i=An-Re,On=Hr+Re,zn=An+Re;if(_e=_e&&this.isOffscreen(dn,_i,On,zn),Me=Me||this.isInsideGrid(dn,_i,On,zn),n!=="always"&&this.grid.hitTestCircle(Hr,An,Re,n,F)&&(Se=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Se}}}}return{circles:!R&&Se||!Me||de<this.perspectiveRatioCutoff?[]:fe,offscreen:_e,collisionDetected:Se}}projectPathToScreenSpace(n,u){const d=(function(v,A){const E=c.N();return c.aB(E,A.pitchedLabelPlaneMatrix),v.map((I=>{const R=lr(I.x,I.y,E,A.getElevation),j=A.transform.projectTileCoordinates(R.point.x,R.point.y,A.unwrappedTileID,A.getElevation);return j.point.x=(.5*j.point.x+.5)*A.width,j.point.y=(.5*-j.point.y+.5)*A.height,j}))})(n,u);return(function(v){let A=0,E=0,I=0,R=0;for(let j=0;j<v.length;j++)v[j].isOccluded?(I=j+1,R=0):(R++,R>E&&(E=R,A=I));return v.slice(A,A+E)})(d)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],d=new c.aa;for(const Y of n){const X=new c.P(Y.x+Cr,Y.y+Cr);d.extend(X),u.push(X)}const{minX:v,minY:A,maxX:E,maxY:I}=d,R=this.grid.query(v,A,E,I).concat(this.ignoredGrid.query(v,A,E,I)),j={},F={};for(const Y of R){const X=Y.key;if(j[X.bucketInstanceId]===void 0&&(j[X.bucketInstanceId]={}),j[X.bucketInstanceId][X.featureIndex])continue;const ee=[new c.P(Y.x1,Y.y1),new c.P(Y.x2,Y.y1),new c.P(Y.x2,Y.y2),new c.P(Y.x1,Y.y2)];c.aK(u,ee)&&(j[X.bucketInstanceId][X.featureIndex]=!0,F[X.bucketInstanceId]===void 0&&(F[X.bucketInstanceId]=[]),F[X.bucketInstanceId].push(X.featureIndex))}return F}insertCollisionBox(n,u,d,v,A,E){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:A,collisionGroupID:E,overlapMode:u},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,u,d,v,A,E){const I=d?this.ignoredGrid:this.grid,R={bucketInstanceId:v,featureIndex:A,collisionGroupID:E,overlapMode:u};for(let j=0;j<n.length;j+=4)I.insertCircle(R,n[j],n[j+1],n[j+2])}projectAndGetPerspectiveRatio(n,u,d,v,A){if(A){let E;v?(E=[n,u,v(n,u),1],c.aH(E,E,A)):(E=[n,u,0,1],Ya(E,E,A));const I=E[3];return{x:(E[0]/I+1)/2*this.transform.width+Cr,y:(-E[1]/I+1)/2*this.transform.height+Cr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const E=this.transform.projectTileCoordinates(n,u,d,v);return{x:(E.point.x+1)/2*this.transform.width+Cr,y:(1-E.point.y)/2*this.transform.height+Cr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}}getPerspectiveRatio(n,u,d,v){const A=this.transform.projectTileCoordinates(n,u,d,v);return .5+this.transform.cameraToCenterDistance/A.signedDistanceFromCamera*.5}isOffscreen(n,u,d,v){return d<Cr||n>=this.screenRightBoundary||v<Cr||u>this.screenBottomBoundary}isInsideGrid(n,u,d,v){return d>=0&&n<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const n=c.ar([]);return c.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,u,d,v,A,E,I,R,j,F,Y){let X=1,ee=0,ie=0,fe=1;const pe=n.anchorPointX+I[0],de=n.anchorPointY+I[1];if(E&&!A){const At=this.projectAndGetPerspectiveRatio(pe+1,de,v,j,Y),ft=At.x-R.x,Mt=Math.atan((At.y-R.y)/ft)+(ft<0?Math.PI:0),or=Math.sin(Mt),Lr=Math.cos(Mt);X=Lr,ee=or,ie=-or,fe=Lr}else if(!E&&A){const At=Ho(this.transform);X=At.vecEast[0],ee=At.vecEast[1],ie=At.vecSouth[0],fe=At.vecSouth[1]}let ye=R.x,Ae=R.y,ge=u;A&&(ye=pe,Ae=de,ge=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),ge*=this.transform.getPitchedTextCorrection(pe,de,v),F||(ge*=c.an(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),F&&(ye+=X*F.x*ge+ie*F.y*ge,Ae+=ee*F.x*ge+fe*F.y*ge);const Se=n.x1*ge,Me=n.x2*ge,_e=(Se+Me)/2,Re=n.y1*ge,Ye=n.y2*ge,Ge=(Re+Ye)/2,$e=[{offsetX:Se,offsetY:Re},{offsetX:_e,offsetY:Re},{offsetX:Me,offsetY:Re},{offsetX:Me,offsetY:Ge},{offsetX:Me,offsetY:Ye},{offsetX:_e,offsetY:Ye},{offsetX:Se,offsetY:Ye},{offsetX:Se,offsetY:Ge}];let Xe=[];for(const{offsetX:At,offsetY:ft}of $e)Xe.push(new c.P(ye+X*At+ie*ft,Ae+ee*At+fe*ft));let St=!1;if(A){const At=Xe.map((ft=>this.projectAndGetPerspectiveRatio(ft.x,ft.y,v,j,Y)));St=At.some((ft=>!ft.isOccluded)),Xe=At.map((ft=>new c.P(ft.x,ft.y)))}else St=!0;return{box:c.aL(Xe),allPointsOccluded:!St}}}class Xp{constructor(n,u,d,v){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?u:-u))):v&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class Ul{constructor(n,u,d,v,A){this.text=new Xp(n?n.text:null,u,d,A),this.icon=new Xp(n?n.icon:null,u,v,A)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class md{constructor(n,u,d){this.text=n,this.icon=u,this.skipFade=d}}class Lc{constructor(n,u,d,v,A){this.bucketInstanceId=n,this.featureIndex=u,this.sourceLayerIndex=d,this.bucketIndex=v,this.tileID=A}}class Yp{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const u=++this.maxGroupID;this.collisionGroups[n]={ID:u,predicate:d=>d.collisionGroupID===u}}return this.collisionGroups[n]}}function Yi(w,n,u,d,v){const{horizontalAlign:A,verticalAlign:E}=c.aS(w);return new c.P(-(A-.5)*n+d[0]*v,-(E-.5)*u+d[1]*v)}class Bc{constructor(n,u,d,v,A){this.transform=n.clone(),this.terrain=u,this.collisionIndex=new pd(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Yp(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=A,A&&(A.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const u=this.terrain;return u?(d,v)=>u.getElevation(n,d,v):null}getBucketParts(n,u,d,v){const A=d.getBucket(u),E=d.latestFeatureIndex;if(!A||!E||u.id!==A.layerIds[0])return;const I=d.collisionBoxArray,R=A.layers[0].layout,j=A.layers[0].paint,F=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),Y=d.tileSize/c.a5,X=d.tileID.toUnwrapped(),ee=R.get("text-rotation-alignment")==="map",ie=c.aN(d,1,this.transform.zoom),fe=c.aO(this.collisionIndex.transform,d,j.get("text-translate"),j.get("text-translate-anchor")),pe=c.aO(this.collisionIndex.transform,d,j.get("icon-translate"),j.get("icon-translate-anchor")),de=Pa(ee,this.transform,ie);this.retainedQueryData[A.bucketInstanceId]=new Lc(A.bucketInstanceId,E,A.sourceLayerIndex,A.index,d.tileID);const ye={bucket:A,layout:R,translationText:fe,translationIcon:pe,unwrappedTileID:X,pitchedLabelPlaneMatrix:de,scale:F,textPixelRatio:Y,holdingForFade:d.holdingForSymbolFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:c.ay(A.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(A.sourceID)};if(v)for(const Ae of A.sortKeyRanges){const{sortKey:ge,symbolInstanceStart:Se,symbolInstanceEnd:Me}=Ae;n.push({sortKey:ge,symbolInstanceStart:Se,symbolInstanceEnd:Me,parameters:ye})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:A.symbolInstances.length,parameters:ye})}attemptAnchorPlacement(n,u,d,v,A,E,I,R,j,F,Y,X,ee,ie,fe,pe,de,ye,Ae,ge){const Se=c.aP[n.textAnchor],Me=[n.textOffset0,n.textOffset1],_e=Yi(Se,d,v,Me,A),Re=this.collisionIndex.placeCollisionBox(u,X,R,j,F,I,E,pe,Y.predicate,Ae,_e,ge);if((!ye||this.collisionIndex.placeCollisionBox(ye,X,R,j,F,I,E,de,Y.predicate,Ae,_e,ge).placeable)&&Re.placeable){let Ye;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ye=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Me,width:d,height:v,anchor:Se,textBoxScale:A,prevAnchor:Ye},this.markUsedJustification(ie,Se,ee,fe),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,fe,ee),this.placedOrientations[ee.crossTileID]=fe),{shift:_e,placedGlyphBoxes:Re}}}placeLayerBucketPart(n,u,d){const{bucket:v,layout:A,translationText:E,translationIcon:I,unwrappedTileID:R,pitchedLabelPlaneMatrix:j,textPixelRatio:F,holdingForFade:Y,collisionBoxArray:X,partiallyEvaluatedTextSize:ee,collisionGroup:ie}=n.parameters,fe=A.get("text-optional"),pe=A.get("icon-optional"),de=c.aQ(A,"text-overlap","text-allow-overlap"),ye=de==="always",Ae=c.aQ(A,"icon-overlap","icon-allow-overlap"),ge=Ae==="always",Se=A.get("text-rotation-alignment")==="map",Me=A.get("text-pitch-alignment")==="map",_e=A.get("icon-text-fit")!=="none",Re=A.get("symbol-z-order")==="viewport-y",Ye=ye&&(ge||!v.hasIconData()||pe),Ge=ge&&(ye||!v.hasTextData()||fe);!v.collisionArrays&&X&&v.deserializeCollisionBoxes(X);const $e=this.retainedQueryData[v.bucketInstanceId].tileID,Xe=this._getTerrainElevationFunc($e),St=this.transform.getFastPathSimpleProjectionMatrix($e),At=(ft,Mt,or)=>{var Lr,an;if(u[ft.crossTileID])return;if(Y)return void(this.placements[ft.crossTileID]=new md(!1,!1,!1));let Qr=!1,fn=!1,Hr=!0,An=null,dn={box:null,placeable:!1,offscreen:null,occluded:!1},_i={placeable:!1},On=null,zn=null,xi=null,ps=0,ms=0,Do=0;Mt.textFeatureIndex?ps=Mt.textFeatureIndex:ft.useRuntimeCollisionCircles&&(ps=ft.featureIndex),Mt.verticalTextFeatureIndex&&(ms=Mt.verticalTextFeatureIndex);const pa=Mt.textBox;if(pa){const ma=Ur=>{let Jr=c.az.horizontal;if(v.allowVerticalPlacement&&!Ur&&this.prevPlacement){const Wn=this.prevPlacement.placedOrientations[ft.crossTileID];Wn&&(this.placedOrientations[ft.crossTileID]=Wn,Jr=Wn,this.markUsedOrientation(v,Jr,ft))}return Jr},Na=(Ur,Jr)=>{if(v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Mt.verticalTextBox){for(const Wn of v.writingModes)if(Wn===c.az.vertical?(dn=Jr(),_i=dn):dn=Ur(),dn&&dn.placeable)break}else dn=Ur()},oo=ft.textAnchorOffsetStartIndex,so=ft.textAnchorOffsetEndIndex;if(so===oo){const Ur=(Jr,Wn)=>{const ri=this.collisionIndex.placeCollisionBox(Jr,de,F,$e,R,Me,Se,E,ie.predicate,Xe,void 0,St);return ri&&ri.placeable&&(this.markUsedOrientation(v,Wn,ft),this.placedOrientations[ft.crossTileID]=Wn),ri};Na((()=>Ur(pa,c.az.horizontal)),(()=>{const Jr=Mt.verticalTextBox;return v.allowVerticalPlacement&&ft.numVerticalGlyphVertices>0&&Jr?Ur(Jr,c.az.vertical):{box:null,offscreen:null}})),ma(dn&&dn.placeable)}else{let Ur=c.aP[(an=(Lr=this.prevPlacement)===null||Lr===void 0?void 0:Lr.variableOffsets[ft.crossTileID])===null||an===void 0?void 0:an.anchor];const Jr=(ri,Of,zf)=>{const _l=ri.x2-ri.x1,dm=ri.y2-ri.y1,xl=ft.textBoxScale,kf=_e&&Ae==="never"?Of:null;let js=null,Ns=de==="never"?1:2,Oo="never";Ur&&Ns++;for(let Rf=0;Rf<Ns;Rf++){for(let _h=oo;_h<so;_h++){const xh=v.textAnchorOffsets.get(_h);if(Ur&&xh.textAnchor!==Ur)continue;const bh=this.attemptAnchorPlacement(xh,ri,_l,dm,xl,Se,Me,F,$e,R,ie,Oo,ft,v,zf,E,I,kf,Xe);if(bh&&(js=bh.placedGlyphBoxes,js&&js.placeable))return Qr=!0,An=bh.shift,js}Ur?Ur=null:Oo=de}return d&&!js&&(js={box:this.collisionIndex.placeCollisionBox(pa,"always",F,$e,R,Me,Se,E,ie.predicate,Xe,void 0,St).box,offscreen:!1,placeable:!1,occluded:!1}),js};Na((()=>Jr(pa,Mt.iconBox,c.az.horizontal)),(()=>{const ri=Mt.verticalTextBox;return v.allowVerticalPlacement&&(!dn||!dn.placeable)&&ft.numVerticalGlyphVertices>0&&ri?Jr(ri,Mt.verticalIconBox,c.az.vertical):{box:null,occluded:!0,offscreen:null}})),dn&&(Qr=dn.placeable,Hr=dn.offscreen);const Wn=ma(dn&&dn.placeable);if(!Qr&&this.prevPlacement){const ri=this.prevPlacement.variableOffsets[ft.crossTileID];ri&&(this.variableOffsets[ft.crossTileID]=ri,this.markUsedJustification(v,ri.anchor,ft,Wn))}}}if(On=dn,Qr=On&&On.placeable,Hr=On&&On.offscreen,ft.useRuntimeCollisionCircles&&ft.centerJustifiedTextSymbolIndex>=0){const ma=v.text.placedSymbolArray.get(ft.centerJustifiedTextSymbolIndex),Na=c.aA(v.textSizeData,ee,ma),oo=A.get("text-padding");zn=this.collisionIndex.placeCollisionCircles(de,ma,v.lineVertexArray,v.glyphOffsetArray,Na,R,j,d,Me,ie.predicate,ft.collisionCircleDiameter,oo,E,Xe),zn.circles.length&&zn.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Qr=ye||zn.circles.length>0&&!zn.collisionDetected,Hr=Hr&&zn.offscreen}if(Mt.iconFeatureIndex&&(Do=Mt.iconFeatureIndex),Mt.iconBox){const ma=Na=>this.collisionIndex.placeCollisionBox(Na,Ae,F,$e,R,Me,Se,I,ie.predicate,Xe,_e&&An?An:void 0,St);_i&&_i.placeable&&Mt.verticalIconBox?(xi=ma(Mt.verticalIconBox),fn=xi.placeable):(xi=ma(Mt.iconBox),fn=xi.placeable),Hr=Hr&&xi.offscreen}const hu=fe||ft.numHorizontalGlyphVertices===0&&ft.numVerticalGlyphVertices===0,fc=pe||ft.numIconVertices===0;hu||fc?fc?hu||(fn=fn&&Qr):Qr=fn&&Qr:fn=Qr=fn&&Qr;const Io=fn&&xi.placeable;if(Qr&&On.placeable&&this.collisionIndex.insertCollisionBox(On.box,de,A.get("text-ignore-placement"),v.bucketInstanceId,_i&&_i.placeable&&ms?ms:ps,ie.ID),Io&&this.collisionIndex.insertCollisionBox(xi.box,Ae,A.get("icon-ignore-placement"),v.bucketInstanceId,Do,ie.ID),zn&&Qr&&this.collisionIndex.insertCollisionCircles(zn.circles,de,A.get("text-ignore-placement"),v.bucketInstanceId,ps,ie.ID),d&&this.storeCollisionData(v.bucketInstanceId,or,Mt,On,xi,zn),ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ft.crossTileID]=new md((Qr||Ye)&&!On?.occluded,(fn||Ge)&&!xi?.occluded,Hr||v.justReloaded),u[ft.crossTileID]=!0};if(Re){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ft=v.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Mt=ft.length-1;Mt>=0;--Mt){const or=ft[Mt];At(v.symbolInstances.get(or),v.collisionArrays[or],or)}}else for(let ft=n.symbolInstanceStart;ft<n.symbolInstanceEnd;ft++)At(v.symbolInstances.get(ft),v.collisionArrays[ft],ft);v.justReloaded=!1}storeCollisionData(n,u,d,v,A,E){if(d.textBox||d.iconBox){let I,R;this.collisionBoxArrays.has(n)?I=this.collisionBoxArrays.get(n):(I=new Map,this.collisionBoxArrays.set(n,I)),I.has(u)?R=I.get(u):(R={text:null,icon:null},I.set(u,R)),d.textBox&&(R.text=v.box),d.iconBox&&(R.icon=A.box)}if(E){let I=this.collisionCircleArrays[n];I===void 0&&(I=this.collisionCircleArrays[n]=[]);for(let R=0;R<E.circles.length;R+=4)I.push(E.circles[R+0]-Cr),I.push(E.circles[R+1]-Cr),I.push(E.circles[R+2]),I.push(E.collisionDetected?1:0)}}markUsedJustification(n,u,d,v){let A;A=v===c.az.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.aR(u)];const E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const I of E)I>=0&&(n.text.placedSymbolArray.get(I).crossTileID=A>=0&&I!==A?0:d.crossTileID)}markUsedOrientation(n,u,d){const v=u===c.az.horizontal||u===c.az.horizontalOnly?u:0,A=u===c.az.vertical?u:0,E=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const I of E)n.text.placedSymbolArray.get(I).placedOrientation=v;d.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=A)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let d=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(n):1,A=u?u.opacities:{},E=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const R in this.placements){const j=this.placements[R],F=A[R];F?(this.opacities[R]=new Ul(F,v,j.text,j.icon),d=d||j.text!==F.text.placed||j.icon!==F.icon.placed):(this.opacities[R]=new Ul(null,v,j.text,j.icon,j.skipFade),d=d||j.text||j.icon)}for(const R in A){const j=A[R];if(!this.opacities[R]){const F=new Ul(j,v,!1,!1);F.isHidden()||(this.opacities[R]=F,d=d||j.text.placed||j.icon.placed)}}for(const R in E)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=E[R]);for(const R in I)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=I[R]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:n)}updateLayerOpacities(n,u){const d={};for(const v of u){const A=v.getBucket(n);A&&v.latestFeatureIndex&&n.id===A.layerIds[0]&&this.updateBucketOpacities(A,v.tileID,d,v.collisionBoxArray)}}updateBucketOpacities(n,u,d,v){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const A=n.layers[0],E=A.layout,I=new Ul(null,0,!1,!1,!0),R=E.get("text-allow-overlap"),j=E.get("icon-allow-overlap"),F=A._unevaluatedLayout.hasValue("text-variable-anchor")||A._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Y=E.get("text-rotation-alignment")==="map",X=E.get("text-pitch-alignment")==="map",ee=E.get("icon-text-fit")!=="none",ie=new Ul(null,0,R&&(j||!n.hasIconData()||E.get("icon-optional")),j&&(R||!n.hasTextData()||E.get("text-optional")),!0);!n.collisionArrays&&v&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(v);const fe=(de,ye,Ae)=>{for(let ge=0;ge<ye/4;ge++)de.opacityVertexArray.emplaceBack(Ae);de.hasVisibleVertices=de.hasVisibleVertices||Ae!==Gl},pe=this.collisionBoxArrays.get(n.bucketInstanceId);for(let de=0;de<n.symbolInstances.length;de++){const ye=n.symbolInstances.get(de),{numHorizontalGlyphVertices:Ae,numVerticalGlyphVertices:ge,crossTileID:Se}=ye;let Me=this.opacities[Se];d[Se]?Me=I:Me||(Me=ie,this.opacities[Se]=Me),d[Se]=!0;const _e=ye.numIconVertices>0,Re=this.placedOrientations[ye.crossTileID],Ye=Re===c.az.vertical,Ge=Re===c.az.horizontal||Re===c.az.horizontalOnly;if(Ae>0||ge>0){const Xe=of(Me.text);fe(n.text,Ae,Ye?Gl:Xe),fe(n.text,ge,Ge?Gl:Xe);const St=Me.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach((Mt=>{Mt>=0&&(n.text.placedSymbolArray.get(Mt).hidden=St||Ye?1:0)})),ye.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=St||Ge?1:0);const At=this.variableOffsets[ye.crossTileID];At&&this.markUsedJustification(n,At.anchor,ye,Re);const ft=this.placedOrientations[ye.crossTileID];ft&&(this.markUsedJustification(n,"left",ye,ft),this.markUsedOrientation(n,ft,ye))}if(_e){const Xe=of(Me.icon),St=!(ee&&ye.verticalPlacedIconSymbolIndex&&Ye);ye.placedIconSymbolIndex>=0&&(fe(n.icon,ye.numIconVertices,St?Xe:Gl),n.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Me.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(fe(n.icon,ye.numVerticalIconVertices,St?Gl:Xe),n.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}const $e=pe&&pe.has(de)?pe.get(de):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Xe=n.collisionArrays[de];if(Xe){let St=new c.P(0,0);if(Xe.textBox||Xe.verticalTextBox){let At=!0;if(F){const ft=this.variableOffsets[Se];ft?(St=Yi(ft.anchor,ft.width,ft.height,ft.textOffset,ft.textBoxScale),Y&&St._rotate(X?-this.transform.bearingInRadians:this.transform.bearingInRadians)):At=!1}if(Xe.textBox||Xe.verticalTextBox){let ft;Xe.textBox&&(ft=Ye),Xe.verticalTextBox&&(ft=Ge),af(n.textCollisionBox.collisionVertexArray,Me.text.placed,!At||ft,$e.text,St.x,St.y)}}if(Xe.iconBox||Xe.verticalIconBox){const At=!!(!Ge&&Xe.verticalIconBox);let ft;Xe.iconBox&&(ft=At),Xe.verticalIconBox&&(ft=!At),af(n.iconCollisionBox.collisionVertexArray,Me.icon.placed,ft,$e.icon,ee?St.x:0,ee?St.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,u){const d=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*d>n}setStale(){this.stale=!0}}function af(w,n,u,d,v,A){d&&d.length!==0||(d=[0,0,0,0]);const E=d[0]-Cr,I=d[1]-Cr,R=d[2]-Cr,j=d[3]-Cr;w.emplaceBack(n?1:0,u?1:0,v||0,A||0,E,I),w.emplaceBack(n?1:0,u?1:0,v||0,A||0,R,I),w.emplaceBack(n?1:0,u?1:0,v||0,A||0,R,j),w.emplaceBack(n?1:0,u?1:0,v||0,A||0,E,j)}const jc=Math.pow(2,25),el=Math.pow(2,24),Wp=Math.pow(2,17),qu=Math.pow(2,16),Ts=Math.pow(2,9),Kp=Math.pow(2,8),Vl=Math.pow(2,1);function of(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const n=w.placed?1:0,u=Math.floor(127*w.opacity);return u*jc+n*el+u*Wp+n*qu+u*Ts+n*Kp+u*Vl+n}const Gl=0;class tl{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,u,d,v,A){const E=this._bucketParts;for(;this._currentTileIndex<n.length;)if(u.getBucketParts(E,v,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,A())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort(((I,R)=>I.sortKey-R.sortKey)));this._currentPartIndex<E.length;)if(u.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,A())return!0;return!1}}class Hu{constructor(n,u,d,v,A,E,I,R){this.placement=new Bc(n,u,E,I,R),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=A,this._done=!1}isDone(){return this._done}continuePlacement(n,u,d){const v=Z(),A=()=>!this._forceFullPlacement&&Z()-v>2;for(;this._currentPlacementIndex>=0;){const E=u[n[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(E.type==="symbol"&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new tl(E)),this._inProgressLayer.continuePlacement(d[E.source],this.placement,this._showCollisionBoxes,E,A))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const fr=512/c.a5/2;class wo{constructor(n,u,d){this.tileID=n,this.bucketInstanceId=d,this._symbolsByKey={};const v=new Map;for(let A=0;A<u.length;A++){const E=u.get(A),I=E.key,R=v.get(I);R?R.push(E):v.set(I,[E])}for(const[A,E]of v){const I={positions:E.map((R=>({x:Math.floor(R.anchorX*fr),y:Math.floor(R.anchorY*fr)}))),crossTileIDs:E.map((R=>R.crossTileID))};if(I.positions.length>128){const R=new c.aT(I.positions.length,16,Uint16Array);for(const{x:j,y:F}of I.positions)R.add(j,F);R.finish(),delete I.positions,I.index=R}this._symbolsByKey[A]=I}}getScaledCoordinates(n,u){const{x:d,y:v,z:A}=this.tileID.canonical,{x:E,y:I,z:R}=u.canonical,j=fr/Math.pow(2,R-A),F=(I*c.a5+n.anchorY)*j,Y=v*c.a5*fr;return{x:Math.floor((E*c.a5+n.anchorX)*j-d*c.a5*fr),y:Math.floor(F-Y)}}findMatches(n,u,d){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let A=0;A<n.length;A++){const E=n.get(A);if(E.crossTileID)continue;const I=this._symbolsByKey[E.key];if(!I)continue;const R=this.getScaledCoordinates(E,u);if(I.index){const j=I.index.range(R.x-v,R.y-v,R.x+v,R.y+v).sort();for(const F of j){const Y=I.crossTileIDs[F];if(!d[Y]){d[Y]=!0,E.crossTileID=Y;break}}}else if(I.positions)for(let j=0;j<I.positions.length;j++){const F=I.positions[j],Y=I.crossTileIDs[j];if(Math.abs(F.x-R.x)<=v&&Math.abs(F.y-R.y)<=v&&!d[Y]){d[Y]=!0,E.crossTileID=Y;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class gd{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Nc{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const u=Math.round((n-this.lng)/360);if(u!==0)for(const d in this.indexes){const v=this.indexes[d],A={};for(const E in v){const I=v[E];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),A[I.tileID.key]=I}this.indexes[d]=A}this.lng=n}addBucket(n,u,d){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let A=0;A<u.symbolInstances.length;A++)u.symbolInstances.get(A).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const v=this.usedCrossTileIDs[n.overscaledZ];for(const A in this.indexes){const E=this.indexes[A];if(Number(A)>n.overscaledZ)for(const I in E){const R=E[I];R.tileID.isChildOf(n)&&R.findMatches(u.symbolInstances,n,v)}else{const I=E[n.scaledTo(Number(A)).key];I&&I.findMatches(u.symbolInstances,n,v)}}for(let A=0;A<u.symbolInstances.length;A++){const E=u.symbolInstances.get(A);E.crossTileID||(E.crossTileID=d.generate(),v[E.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new wo(n,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(n,u){for(const d of u.getCrossTileIDsLists())for(const v of d)delete this.usedCrossTileIDs[n][v]}removeStaleBuckets(n){let u=!1;for(const d in this.indexes){const v=this.indexes[d];for(const A in v)n[v[A].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,v[A]),delete v[A],u=!0)}return u}}class ui{constructor(){this.layerIndexes={},this.crossTileIDs=new gd,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,u,d){let v=this.layerIndexes[n.id];v===void 0&&(v=this.layerIndexes[n.id]=new Nc);let A=!1;const E={};v.handleWrapJump(d);for(const I of u){const R=I.getBucket(n);R&&n.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(I.tileID,R,this.crossTileIDs)&&(A=!0),E[R.bucketInstanceId]=!0)}return v.removeStaleBuckets(E)&&(A=!0),A}pruneUnusedLayers(n){const u={};n.forEach((d=>{u[d]=!0}));for(const d in this.layerIndexes)u[d]||delete this.layerIndexes[d]}}var Xn="void main() {fragColor=vec4(1.0);}";const pn={prelude:Wt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Wt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Wt("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Wt(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Wt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Wt(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Wt(Xn,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Wt(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Wt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Wt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Wt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Wt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Wt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Wt(Xn,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Wt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Wt(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Wt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Wt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Wt(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Wt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Wt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wt(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Wt(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Wt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Wt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Wt(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:Wt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:Wt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Wt(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Wt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Wt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Wt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Wt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Wt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Wt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Wt(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Wt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Wt(w,n){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=n.match(/in ([\w]+) ([\w]+)/g),v=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),A=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=A?A.concat(v):v,I={};return{fragmentSource:w=w.replace(u,((R,j,F,Y,X)=>(I[X]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
in ${F} ${Y} ${X};
#else
uniform ${F} ${Y} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${F} ${Y} ${X} = u_${X};
#endif
`))),vertexSource:n=n.replace(u,((R,j,F,Y,X)=>{const ee=Y==="float"?"vec2":"vec4",ie=X.match(/color/)?"color":ee;return I[X]?j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
in ${F} ${ee} a_${X};
out ${F} ${Y} ${X};
#else
uniform ${F} ${Y} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${F} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${F} ${Y} ${X} = u_${X};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
in ${F} ${ee} a_${X};
#else
uniform ${F} ${Y} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${Y} ${X} = a_${X};
#else
    ${F} ${Y} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${F} ${Y} ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${F} ${Y} ${X} = u_${X};
#endif
`})),staticAttributes:d,staticUniforms:E}}class Wr{constructor(n,u,d){this.vertexBuffer=n,this.indexBuffer=u,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Wa=c.aU([{name:"a_pos",type:"Int16",components:2}]);const Cn="#define PROJECTION_MERCATOR",Wi="mercator";class ci{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Wi}get shaderDefine(){return Cn}get shaderPreludeCode(){return pn.projectionMercator}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return c.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,u,d,v,A){if(this._cachedMesh)return this._cachedMesh;const E=new c.aW;E.emplaceBack(0,0),E.emplaceBack(c.a5,0),E.emplaceBack(0,c.a5),E.emplaceBack(c.a5,c.a5);const I=n.createVertexBuffer(E,Wa.members),R=c.aX.simpleSegment(0,0,4,2),j=new c.aY;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const F=n.createIndexBuffer(j);return this._cachedMesh=new Wr(I,F,R),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class Ca{constructor(n=0,u=0,d=0,v=0){if(isNaN(n)||n<0||isNaN(u)||u<0||isNaN(d)||d<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=u,this.left=d,this.right=v}interpolate(n,u,d){return u.top!=null&&n.top!=null&&(this.top=c.G.number(n.top,u.top,d)),u.bottom!=null&&n.bottom!=null&&(this.bottom=c.G.number(n.bottom,u.bottom,d)),u.left!=null&&n.left!=null&&(this.left=c.G.number(n.left,u.left,d)),u.right!=null&&n.right!=null&&(this.right=c.G.number(n.right,u.right,d)),this}getCenter(n,u){const d=c.an((this.left+n-this.right)/2,0,n),v=c.an((this.top+u-this.bottom)/2,0,u);return new c.P(d,v)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ca(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Wo(w,n){if(!w.renderWorldCopies||w.lngRange)return;const u=n.lng-w.center.lng;n.lng+=u>180?-360:u<-180?360:0}function mn(w){return Math.max(0,Math.floor(w))}class rl{constructor(n,u){var d;this.applyConstrain=(v,A)=>this._constrainOverride!==null?this._constrainOverride(v,A):this._callbacks.defaultConstrain(v,A),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=u?.renderWorldCopies===void 0||!!u?.renderWorldCopies,this._minZoom=u?.minZoom||0,this._maxZoom=u?.maxZoom||22,this._minPitch=u?.minPitch==null?0:u?.minPitch,this._maxPitch=u?.maxPitch==null?60:u?.maxPitch,this._constrainOverride=(d=u?.constrainOverride)!==null&&d!==void 0?d:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new c.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=mn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ca,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,u,d){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=mn(this._zoom),this._scale=c.aq(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new Ca(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!d&&n.autoCalculateNearFarZ,u&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const u=c.W(n,-180,180)*Math.PI/180;var d,v,A,E,I,R,j,F,Y;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=C(),d=this._rotationMatrix,A=-this._bearingInRadians,E=(v=this._rotationMatrix)[0],I=v[1],R=v[2],j=v[3],F=Math.sin(A),Y=Math.cos(A),d[0]=E*Y+R*F,d[1]=I*Y+j*F,d[2]=E*-F+R*Y,d[3]=I*-F+j*Y)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const u=c.an(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const u=n/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return c.aZ(this._fovInRadians)}setFov(n){n=c.an(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=c.ap(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const u=this.applyConstrain(this._center,n).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=c.aq(u),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,u){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,u,d){this._unmodified=!1,this._edgeInsets.interpolate(n,u,d),this.constrainInternal(),this._calcMatrices()}resize(n,u,d=!0){this._width=n,this._height=u,d&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Br([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-c.ao,c.ao])}getCameraQueryGeometry(n,u){if(u.length===1)return[u[0],n];{const{minX:d,minY:v,maxX:A,maxY:E}=c.aa.fromPoints(u).extend(n);return[new c.P(d,v),new c.P(A,v),new c.P(A,E),new c.P(d,E),new c.P(d,v)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:u,zoom:d}=this.applyConstrain(this.center,this.zoom);this.setCenter(u),this.setZoom(d),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=c.ar(new Float64Array(16));c.Q(n,n,[this._width/2,-this._height/2,1]),c.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=c.ar(new Float64Array(16)),c.Q(n,n,[1,-1,1]),c.O(n,n,[-1,-1,0]),c.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,u,d,v){const A=d!==void 0?d:this.bearing,E=v=v!==void 0?v:this.pitch,{distanceToCenter:I,clampedElevation:R}=this._distanceToCenterFromAltElevationPitch(u,this.elevation,E),{x:j,y:F}=jr(E,A),Y=c.a9.fromLngLat(n,u);let X,ee,ie=c.a_(1,Y.y),fe=0;do{if(fe+=1,fe>10)break;ee=I/ie,X=new c.a9(Y.x+j*ee,Y.y+F*ee),ie=1/X.meterInMercatorCoordinateUnits()}while(Math.abs(I-ee*ie)>1e-12);return{center:X.toLngLat(),elevation:R,zoom:c.at(this.height/2/Math.tan(this.fovInRadians/2)/ee/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const u=1/this.worldSize,d=c.as(1,this.center.lat)*this.worldSize,v=c.a9.fromLngLat(this.center,this.elevation),A=v.x/u,E=v.y/u,I=v.z/u,R=this.pitch,j=this.bearing,{x:F,y:Y,z:X}=jr(R,j),ee=this.cameraToCenterDistance,ie=A+ee*-F,fe=E+ee*-Y,pe=I+ee*X,{distanceToCenter:de,clampedElevation:ye}=this._distanceToCenterFromAltElevationPitch(pe/d,n,R),Ae=de*d,ge=new c.a9((ie+F*Ae)*u,(fe+Y*Ae)*u,0).toLngLat(),Se=c.as(1,ge.lat),Me=c.at(this.height/2/Math.tan(this.fovInRadians/2)/de/Se/this.tileSize);this._elevation=ye,this._center=ge,this.setZoom(Me)}_distanceToCenterFromAltElevationPitch(n,u,d){const v=-Math.cos(c.ap(d)),A=n-u;let E,I=u;return v*A>=0||Math.abs(v)<.1?(E=1e4,I=n+E*v):E=-A/v,{distanceToCenter:E,clampedElevation:I}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Ve(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const u=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/u,n.canonical.y/u,1/u/c.a5,1/u/c.a5]}}class Da{constructor(n,u){this.min=n,this.max=u,this.center=c.a$([],c.b0([],this.min,this.max),.5)}quadrant(n){const u=[n%2==0,n<2],d=c.b1(this.min),v=c.b1(this.max);for(let A=0;A<u.length;A++)d[A]=u[A]?this.min[A]:this.center[A],v[A]=u[A]?this.center[A]:this.max[A];return v[2]=this.max[2],new Da(d,v)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let u=!0;for(let d=0;d<n.planes.length;d++){const v=this.intersectsPlane(n.planes[d]);if(v===0)return 0;v===1&&(u=!1)}return u?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let u=n[3],d=n[3];for(let v=0;v<3;v++)n[v]>0?(u+=n[v]*this.min[v],d+=n[v]*this.max[v]):(d+=n[v]*this.min[v],u+=n[v]*this.max[v]);return u>=0?2:d<0?0:1}}class ql{distanceToTile2d(n,u,d,v){const A=v.distanceX([n,u]),E=v.distanceY([n,u]);return Math.hypot(A,E)}getWrap(n,u,d){return d}getTileBoundingVolume(n,u,d,v){var A,E;let I=0,R=0;if(v?.terrain){const F=new c.a2(n.z,u,n.z,n.x,n.y),Y=v.terrain.getMinMaxElevation(F);I=(A=Y.minElevation)!==null&&A!==void 0?A:Math.min(0,d),R=(E=Y.maxElevation)!==null&&E!==void 0?E:Math.max(0,d)}const j=1<<n.z;return new Da([u+n.x/j,n.y/j,I],[u+(n.x+1)/j,(n.y+1)/j,R])}allowVariableZoom(n,u){const d=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,v=c.an(78.5-d/2,0,60);return!!u.terrain||n.pitch>v}allowWorldCopies(){return!0}prepareNextFrame(){}}class Ki{constructor(n,u,d){this.points=n,this.planes=u,this.aabb=d}static fromInvProjectionMatrix(n,u=1,d=0,v,A){const E=A?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,d),R=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((X=>(function(ee,ie,fe,pe){const de=c.aH([],ee,ie),ye=1/de[3]/fe*pe;return c.b6(de,de,[ye,ye,1/de[3],ye])})(X,n,u,I)));v&&(function(X,ee,ie,fe){const pe=fe?4:0,de=fe?0:4;let ye=0;const Ae=[],ge=[];for(let _e=0;_e<4;_e++){const Re=c.b2([],X[_e+de],X[_e+pe]),Ye=c.b7(Re);c.a$(Re,Re,1/Ye),Ae.push(Ye),ge.push(Re)}for(let _e=0;_e<4;_e++){const Re=c.b8(X[_e+pe],ge[_e],ie);ye=Re!==null&&Re>=0?Math.max(ye,Re):Math.max(ye,Ae[_e])}const Se=(function(_e,Re){const Ye=c.b2([],_e[Re[0]],_e[Re[1]]),Ge=c.b2([],_e[Re[2]],_e[Re[1]]),$e=[0,0,0,0];return c.b3($e,c.b4([],Ye,Ge)),$e[3]=-c.b5($e,_e[Re[0]]),$e})(X,ee),Me=(function(_e,Re){const Ye=c.b9(_e),Ge=c.ba([],_e,1/Ye),$e=c.b2([],Re,c.a$([],Ge,c.b5(Re,Ge))),Xe=c.b9($e);if(Xe>0){const St=Math.sqrt(1-Ge[3]*Ge[3]),At=c.a$([],Ge,-Ge[3]),ft=c.b0([],At,c.a$([],$e,St/Xe));return c.bb(Re,ft)}return null})(ie,Se);if(Me!==null){const _e=Me/c.b5(ge[0],Se);ye=Math.min(ye,_e)}for(let _e=0;_e<4;_e++){const Re=Math.min(ye,Ae[_e]);X[_e+de]=[X[_e+pe][0]+ge[_e][0]*Re,X[_e+pe][1]+ge[_e][1]*Re,X[_e+pe][2]+ge[_e][2]*Re,1]}})(R,E[0],v,A);const j=E.map((X=>{const ee=c.b2([],R[X[0]],R[X[1]]),ie=c.b2([],R[X[2]],R[X[1]]),fe=c.b3([],c.b4([],ee,ie)),pe=-c.b5(fe,R[X[1]]);return fe.concat(pe)})),F=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Y=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const X of R)for(let ee=0;ee<3;ee++)F[ee]=Math.min(F[ee],X[ee]),Y[ee]=Math.max(Y[ee],X[ee]);return new Ki(R,j,new Da(F,Y))}}class ti{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,d=!0){this._helper.resize(n,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,u){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(u,d)=>{d=c.an(+d,this.minZoom,this.maxZoom);const v={center:new c.V(u.lng,u.lat),zoom:d};let A=this._helper._lngRange;if(!this._helper._renderWorldCopies&&A===null){const ge=179.9999999999;A=[-ge,ge]}const E=this.tileSize*c.aq(v.zoom);let I=0,R=E,j=0,F=E,Y=0,X=0;const{x:ee,y:ie}=this.size;if(this._helper._latRange){const ge=this._helper._latRange;I=c.X(ge[1])*E,R=c.X(ge[0])*E,R-I<ie&&(Y=ie/(R-I))}A&&(j=c.W(c.Y(A[0])*E,0,E),F=c.W(c.Y(A[1])*E,0,E),F<j&&(F+=E),F-j<ee&&(X=ee/(F-j)));const{x:fe,y:pe}=Vt(E,u);let de,ye;const Ae=Math.max(X||0,Y||0);if(Ae){const ge=new c.P(X?(F+j)/2:fe,Y?(R+I)/2:pe);return v.center=rr(E,ge).wrap(),v.zoom+=c.at(Ae),v}if(this._helper._latRange){const ge=ie/2;pe-ge<I&&(ye=I+ge),pe+ge>R&&(ye=R-ge)}if(A){const ge=(j+F)/2;let Se=fe;this._helper._renderWorldCopies&&(Se=c.W(fe,ge-E/2,ge+E/2));const Me=ee/2;Se-Me<j&&(de=j+Me),Se+Me>F&&(de=F-Me)}if(de!==void 0||ye!==void 0){const ge=new c.P(de??fe,ye??pe);v.center=rr(E,ge).wrap()}return v},this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new rl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._coveringTilesDetailsProvider=new ql}clone(){const n=new ti;return n.apply(this),n}apply(n,u,d){this._helper.apply(n,u,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const u=[new c.bc(0,n)];if(this._helper._renderWorldCopies){const d=this.screenPointToMercatorCoordinate(new c.P(0,0)),v=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,0)),A=this.screenPointToMercatorCoordinate(new c.P(this._helper._width,this._helper._height)),E=this.screenPointToMercatorCoordinate(new c.P(0,this._helper._height)),I=Math.floor(Math.min(d.x,v.x,A.x,E.x)),R=Math.floor(Math.max(d.x,v.x,A.x,E.x)),j=1;for(let F=I-j;F<=R+j;F++)F!==0&&u.push(new c.bc(F,n))}return u}getCameraFrustum(){return Ki.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const u=this.screenPointToLocation(this.centerPoint,n),d=n?n.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(n,u){const d=c.as(this.elevation,this.center.lat),v=this.screenPointToMercatorCoordinateAtZ(u,d),A=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),E=c.a9.fromLngLat(n),I=new c.a9(E.x-(v.x-A.x),E.y-(v.y-A.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,u){return u?this.coordinatePoint(c.a9.fromLngLat(n),u.getElevationForLngLat(n,this),this._pixelMatrix3D):this.coordinatePoint(c.a9.fromLngLat(n))}screenPointToLocation(n,u){var d;return(d=this.screenPointToMercatorCoordinate(n,u))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(n,u){if(u){const d=u.pointCoordinate(n);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,u){const d=u||0,v=[n.x,n.y,0,1],A=[n.x,n.y,1,1];c.aH(v,v,this._pixelMatrixInverse),c.aH(A,A,this._pixelMatrixInverse);const E=v[3],I=A[3],R=v[1]/E,j=A[1]/I,F=v[2]/E,Y=A[2]/I,X=F===Y?0:(d-F)/(Y-F);return new c.a9(c.G.number(v[0]/E,A[0]/I,X)/this.worldSize,c.G.number(R,j,X)/this.worldSize,d)}coordinatePoint(n,u=0,d=this._pixelMatrix){const v=[n.x*this.worldSize,n.y*this.worldSize,u,1];return c.aH(v,v,d),new c.P(v[0]/v[3],v[1]/v[3])}getBounds(){const n=Math.max(0,this._helper._height/2-kr(this));return new Br().extend(this.screenPointToLocation(new c.P(0,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,n))).extend(this.screenPointToLocation(new c.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new c.P(0,this._helper._height)))}isPointOnMapSurface(n,u){return u?u.pointCoordinate(n)!=null:n.y>this.height/2-kr(this)}calculatePosMatrix(n,u=!1,d){var v;const A=(v=n.key)!==null&&v!==void 0?v:c.bd(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),E=u?this._alignedPosMatrixCache:this._posMatrixCache;if(E.has(A)){const j=E.get(A);return d?j.f32:j.f64}const I=wr(n,this.worldSize);c.S(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const R={f64:I,f32:new Float32Array(I)};return E.set(A,R),d?R.f32:R.f64}calculateFogMatrix(n){const u=n.key,d=this._fogMatrixCacheF32;if(d.has(u))return d.get(u);const v=wr(n,this.worldSize);return c.S(v,this._fogMatrix,v),d.set(u,new Float32Array(v)),d.get(u)}calculateCenterFromCameraLngLatAlt(n,u,d,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,v)}_calculateNearFarZIfNeeded(n,u,d){if(!this._helper.autoCalculateNearFarZ)return;const v=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),A=n-v*this._helper._pixelPerMeter/Math.cos(u),E=v<0?A:n,I=Math.PI/2+this.pitchInRadians,R=c.ap(this.fov)*(Math.abs(Math.cos(c.ap(this.roll)))*this.height+Math.abs(Math.sin(c.ap(this.roll)))*this.width)/this.height*(.5+d.y/this.height),j=Math.sin(R)*E/Math.sin(c.an(Math.PI-I-R,.01,Math.PI-.01)),F=kr(this),Y=Math.atan(F/this._helper.cameraToCenterDistance),X=c.ap(.75),ee=Y>X?2*Y*(.5+d.y/(2*F)):X,ie=Math.sin(ee)*E/Math.sin(c.an(Math.PI-I-ee,.01,Math.PI-.01)),fe=Math.min(j,ie);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*fe+E),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,u=Vt(this.worldSize,this.center),d=u.x,v=u.y;this._helper._pixelPerMeter=c.as(1,this.center.lat)*this.worldSize;const A=c.ap(Math.min(this.pitch,Lt)),E=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(A));let I;this._calculateNearFarZIfNeeded(E,A,n),I=new Float64Array(16),c.be(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),c.aB(this._invProjMatrix,I),I[8]=2*-n.x/this._helper._width,I[9]=2*n.y/this._helper._height,this._projectionMatrix=c.bf(I),c.Q(I,I,[1,-1,1]),c.O(I,I,[0,0,-this._helper.cameraToCenterDistance]),c.bg(I,I,-this.rollInRadians),c.bh(I,I,this.pitchInRadians),c.bg(I,I,-this.bearingInRadians),c.O(I,I,[-d,-v,0]),this._mercatorMatrix=c.Q([],I,[this.worldSize,this.worldSize,this.worldSize]),c.Q(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),c.O(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=c.aB([],I);const R=[0,0,-1,1];c.aH(R,R,this._invViewProjMatrix),this._cameraPosition=[R[0]/R[3],R[1]/R[3],R[2]/R[3]],this._fogMatrix=new Float64Array(16),c.be(this._fogMatrix,this.fovInRadians,this.width/this.height,E,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,c.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),c.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),c.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),c.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),c.O(this._fogMatrix,this._fogMatrix,[-d,-v,0]),c.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),c.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=c.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const j=this._helper._width%2/2,F=this._helper._height%2/2,Y=Math.cos(this.bearingInRadians),X=Math.sin(-this.bearingInRadians),ee=d-Math.round(d)+Y*j+X*F,ie=v-Math.round(v)+Y*F+X*j,fe=new Float64Array(I);if(c.O(fe,fe,[ee>.5?ee-1:ee,ie>.5?ie-1:ie,0]),this._alignedProjMatrix=fe,I=c.aB(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new c.P(0,0)),u=[n.x*this.worldSize,n.y*this.worldSize,0,1];return c.aH(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=c.as(1,this.center.lat)*this.worldSize;return Ve(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,u){const d=c.a9.fromLngLat(n),v=[d.x*this.worldSize,d.y*this.worldSize,u,1];return c.aH(v,v,this._viewProjMatrix),v[2]/v[3]}getProjectionData(n){const{overscaledTileID:u,aligned:d,applyTerrainMatrix:v}=n,A=this._helper.getMercatorTileCoordinates(u),E=u?this.calculatePosMatrix(u,d,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&v?u.terrainRttPosMatrix32f:E||c.bi(),{mainMatrix:I,tileMercatorCoords:A,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,u,d){return 1}transformLightDirection(n){return c.b1(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,u,d,v){const A=this.calculatePosMatrix(d);let E;v?(E=[n,u,v(n,u),1],c.aH(E,E,A)):(E=[n,u,0,1],Ya(E,E,A));const I=E[3];return{point:new c.P(E[0]/I,E[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(n){for(const u of n)this.calculatePosMatrix(u)}getMatrixForModel(n,u){const d=c.a9.fromLngLat(n,u),v=d.meterInMercatorCoordinateUnits(),A=c.bj();return c.O(A,A,[d.x,d.y,d.z]),c.bg(A,A,Math.PI),c.bh(A,A,Math.PI/2),c.Q(A,A,[-v,v,v]),A}getProjectionDataForCustomLayer(n=!0){const u=new c.a2(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:n}),v=wr(u,this.worldSize);c.S(v,this._viewProjMatrix,v),d.tileMercatorCoords=[0,0,1,1];const A=[c.a5,c.a5,this.worldSize/this._helper.pixelsPerMeter],E=c.bk();return c.Q(E,v,A),d.fallbackMatrix=E,d.mainMatrix=E,d}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Qi(){c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Fc(w){if(w.useSlerp)if(w.k<1){const n=c.bl(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),u=c.bl(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),d=new Float64Array(4);c.bm(d,n,u,w.k);const v=c.bn(d);w.tr.setRoll(v.roll),w.tr.setPitch(v.pitch),w.tr.setBearing(v.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(c.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(c.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(c.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function Hl(w,n,u,d,v){const A=v.padding,E=Vt(v.worldSize,u.getNorthWest()),I=Vt(v.worldSize,u.getNorthEast()),R=Vt(v.worldSize,u.getSouthEast()),j=Vt(v.worldSize,u.getSouthWest()),F=c.ap(-d),Y=E.rotate(F),X=I.rotate(F),ee=R.rotate(F),ie=j.rotate(F),fe=new c.P(Math.max(Y.x,X.x,ie.x,ee.x),Math.max(Y.y,X.y,ie.y,ee.y)),pe=new c.P(Math.min(Y.x,X.x,ie.x,ee.x),Math.min(Y.y,X.y,ie.y,ee.y)),de=fe.sub(pe),ye=(v.width-(A.left+A.right+n.left+n.right))/de.x,Ae=(v.height-(A.top+A.bottom+n.top+n.bottom))/de.y;if(Ae<0||ye<0)return void Qi();const ge=Math.min(c.at(v.scale*Math.min(ye,Ae)),w.maxZoom),Se=c.P.convert(w.offset),Me=new c.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(c.ap(d)),_e=Se.add(Me).mult(v.scale/c.aq(ge));return{center:rr(v.worldSize,E.add(R).div(2).sub(_e)),zoom:ge,bearing:d}}class Zl{get useGlobeControls(){return!1}handlePanInertia(n,u){const d=n.mag(),v=Math.abs(kr(u));return{easingOffset:n.mult(Math.min(.75*v/d,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(n,u){n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta),n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta)}handleMapControlsPan(n,u,d){n.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(d,n.around)}cameraForBoxAndBearing(n,u,d,v,A){return Hl(n,u,d,v,A)}handleJumpToCenterZoom(n,u){n.zoom!==(u.zoom!==void 0?+u.zoom:n.zoom)&&n.setZoom(+u.zoom),u.center!==void 0&&n.setCenter(c.V.convert(u.center))}handleEaseTo(n,u){const d=n.zoom,v=n.padding,A={roll:n.roll,pitch:n.pitch,bearing:n.bearing},E={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},I=u.zoom!==void 0,R=!n.isPaddingEqual(u.padding);let j=!1;const F=I?+u.zoom:n.zoom;let Y=n.centerPoint.add(u.offsetAsPoint);const X=n.screenPointToLocation(Y),{center:ee,zoom:ie}=n.applyConstrain(c.V.convert(u.center||X),F??d);Wo(n,ee);const fe=Vt(n.worldSize,X),pe=Vt(n.worldSize,ee).sub(fe),de=c.aq(ie-d);return j=ie!==d,{easeFunc:ye=>{if(j&&n.setZoom(c.G.number(d,ie,ye)),c.bo(A,E)||Fc({startEulerAngles:A,endEulerAngles:E,tr:n,k:ye,useSlerp:A.roll!=E.roll}),R&&(n.interpolatePadding(v,u.padding,ye),Y=n.centerPoint.add(u.offsetAsPoint)),u.around)n.setLocationAtPoint(u.around,u.aroundPoint);else{const Ae=c.aq(n.zoom-d),ge=ie>d?Math.min(2,de):Math.max(.5,de),Se=Math.pow(ge,1-ye),Me=rr(n.worldSize,fe.add(pe.mult(ye*Se)).mult(Ae));n.setLocationAtPoint(n.renderWorldCopies?Me.wrap():Me,Y)}},isZooming:j,elevationCenter:ee}}handleFlyTo(n,u){const d=u.zoom!==void 0,v=n.zoom,A=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),d?+u.zoom:v),E=A.center,I=A.zoom;Wo(n,E);const R=Vt(n.worldSize,u.locationAtOffset),j=Vt(n.worldSize,E).sub(R),F=j.mag(),Y=c.aq(I-v);let X;if(u.minZoom!==void 0){const ee=Math.min(+u.minZoom,v,I),ie=n.applyConstrain(E,ee).zoom;X=c.aq(ie-v)}return{easeFunc:(ee,ie,fe,pe)=>{n.setZoom(ee===1?I:v+c.at(ie));const de=ee===1?E:rr(n.worldSize,R.add(j.mult(fe)).mult(ie));n.setLocationAtPoint(n.renderWorldCopies?de.wrap():de,pe)},scaleOfZoom:Y,targetCenter:E,scaleOfMinZoom:X,pixelPathLength:F}}}class qr{constructor(n,u,d){this.blendFunction=n,this.blendColor=u,this.mask=d}}qr.Replace=[1,0],qr.disabled=new qr(qr.Replace,c.bp.transparent,[!1,!1,!1,!1]),qr.unblended=new qr(qr.Replace,c.bp.transparent,[!0,!0,!0,!0]),qr.alphaBlended=new qr([1,771],c.bp.transparent,[!0,!0,!0,!0]);const nl=2305;class yr{constructor(n,u,d){this.enable=n,this.mode=u,this.frontFace=d}}yr.disabled=new yr(!1,1029,nl),yr.backCCW=new yr(!0,1029,nl),yr.frontCCW=new yr(!0,1028,nl);class cr{constructor(n,u,d){this.func=n,this.mask=u,this.range=d}}cr.ReadOnly=!1,cr.ReadWrite=!0,cr.disabled=new cr(519,cr.ReadOnly,[0,1]);const $l=7680;class Ar{constructor(n,u,d,v,A,E){this.test=n,this.ref=u,this.mask=d,this.fail=v,this.depthFail=A,this.pass=E}}Ar.disabled=new Ar({func:519,mask:0},0,0,$l,$l,$l);const Uc=new WeakMap;function Ka(w){var n;if(Uc.has(w))return Uc.get(w);{const u=(n=w.getParameter(w.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Uc.set(w,u),u}}class il{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const u=n.context,d=u.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;const v=new c.aW;v.emplaceBack(-1,-1),v.emplaceBack(2,-1),v.emplaceBack(-1,2);const A=new c.aY;A.emplaceBack(0,1,2),this._fullscreenTriangle=new Wr(u.createVertexBuffer(v,Wa.members),u.createIndexBuffer(A),c.aX.simpleSegment(0,0,v.length,A.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(d.TEXTURE1);const E=d.createTexture();d.bindTexture(d.TEXTURE_2D,E),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(E),Ka(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,u){const d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,u=n.gl;n.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,u){const d=this._cachedRenderContext.context,v=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:c.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,v.TRIANGLES,cr.disabled,Ar.disabled,qr.unblended,yr.disabled,((A,E)=>({u_input:A,u_output_expected:E}))(n,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ka(v)){v.bindBuffer(v.PIXEL_PACK_BUFFER,this._pbo),v.readBuffer(v.COLOR_ATTACHMENT0),v.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),v.bindBuffer(v.PIXEL_PACK_BUFFER,null);const A=v.fenceSync(v.SYNC_GPU_COMMANDS_COMPLETE,0);v.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:A}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ka(n)){const u=n.clientWaitSync(this._readbackQueue.sync,0,0);if(u===n.WAIT_FAILED)return c.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=il._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let u=0;return u+=n[0]/256,u+=n[1]/65536,u+=n[2]/16777216,n[3]<127&&(u=-u),u/128}}const al=c.a5/128;function Qp(w,n){const u=w.granularity!==void 0?Math.max(w.granularity,1):1,d=u+(w.generateBorders?2:0),v=u+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),A=d+1,E=v+1,I=w.generateBorders?-1:0,R=w.generateBorders||w.extendToNorthPole?-1:0,j=u+(w.generateBorders?1:0),F=u+(w.generateBorders||w.extendToSouthPole?1:0),Y=A*E,X=d*v*6,ee=A*E>65536;if(ee&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ie=ee||n==="32bit",fe=new Int16Array(2*Y);let pe=0;for(let Ae=R;Ae<=F;Ae++)for(let ge=I;ge<=j;ge++){let Se=ge/u*c.a5;ge===-1&&(Se=-al),ge===u+1&&(Se=c.a5+al);let Me=Ae/u*c.a5;Ae===-1&&(Me=w.extendToNorthPole?c.br:-al),Ae===u+1&&(Me=w.extendToSouthPole?c.bs:c.a5+al),fe[pe++]=Se,fe[pe++]=Me}const de=ie?new Uint32Array(X):new Uint16Array(X);let ye=0;for(let Ae=0;Ae<v;Ae++)for(let ge=0;ge<d;ge++){const Se=ge+1+Ae*A,Me=ge+(Ae+1)*A,_e=ge+1+(Ae+1)*A;de[ye++]=ge+Ae*A,de[ye++]=Me,de[ye++]=Se,de[ye++]=Se,de[ye++]=Me,de[ye++]=_e}return{vertices:fe.buffer.slice(0),indices:de.buffer.slice(0),uses32bitIndices:ie}}const Vc=new c.aV({fill:new c.bt(128,2),line:new c.bt(512,0),tile:new c.bt(128,32),stencil:new c.bt(128,1),circle:3});class yd{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return pn.projectionGlobe}get vertexShaderPreludeCode(){return pn.projectionMercator.vertexSource}get subdivisionGranularity(){return Vc}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new il(n));const u=c.X(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,v=this._errorMeasurement.updateErrorLoop(u,d),A=Z();v!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=v,this._errorMeasurementLastChangeTime=A);const E=Math.min(Math.max((A-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=c.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,c.bv(E))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,u,d,v,A){const E=(A==="stencil"?Vc.stencil:Vc.tile).getGranularityForZoomLevel(u.z);return this._getMesh(n,{granularity:E,generateBorders:d,extendToNorthPole:u.y===0&&v,extendToSouthPole:u.y===(1<<u.z)-1&&v})}_getMesh(n,u){const d=this._getMeshKey(u);if(d in this._tileMeshCache)return this._tileMeshCache[d];const v=(function(A,E){const I=Qp(E,"16bit"),R=c.aW.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),j=c.aY.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new Wr(A.createVertexBuffer(R,Wa.members),A.createIndexBuffer(j),c.aX.simpleSegment(0,0,R.length,j.length))})(n,u);return this._tileMeshCache[d]=v,v}recalculate(n){}hasTransition(){const n=Z();let u=!1;return u=u||(n-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const qg=new c.t({type:new c.D(c.u.projection.type)});class vd extends c.E{constructor(n){super(),this._transitionable=new c.x(qg,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new c.H(0)),this._mercatorProjection=new ci,this._verticalPerspectiveProjection=new yd}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof c.bw){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,u,d,v,A){return this.currentProjection.getMeshFromTileID(n,u,d,v,A)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Ji(w){const n=Xl(w.worldSize,w.center.lat);return 2*Math.PI*n}function Ko(w,n,u,d,v){const A=1/(1<<v),E=n/c.a5*A+d*A,I=c.by((w/c.a5*A+u*A)*Math.PI*2+Math.PI,2*Math.PI),R=2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI,j=Math.cos(R),F=new Float64Array(3);return F[0]=Math.sin(I)*j,F[1]=Math.sin(R),F[2]=Math.cos(I)*j,F}function gn(w){return(function(n,u){const d=Math.cos(u),v=new Float64Array(3);return v[0]=Math.sin(n)*d,v[1]=Math.sin(u),v[2]=Math.cos(n)*d,v})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Xl(w,n){return w/(2*Math.PI)/Math.cos(n*Math.PI/180)}function Gc(w){const n=Math.asin(w[1])/Math.PI*180,u=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(u>1e-6){const d=w[0]/u,v=Math.acos(w[2]/u),A=(d>0?v:-v)/Math.PI*180;return new c.V(c.W(A,-180,180),n)}return new c.V(0,n)}function qc(w){return Math.cos(w*Math.PI/180)}function Dn(w,n){const u=qc(w),d=qc(n);return c.at(d/u)}function Jp(w,n){const u=w.rotate(n.bearingInRadians),d=n.zoom+Dn(n.center.lat,0),v=c.bu(1/qc(n.center.lat),1/qc(Math.min(Math.abs(n.center.lat),60)),c.bx(d,7,3,0,1)),A=360/Ji({worldSize:n.worldSize,center:{lat:n.center.lat}});return new c.V(n.center.lng-u.x*A*v,c.an(n.center.lat+u.y*A,-c.ao,c.ao))}function sf(w){const n=.5*w,u=Math.sin(n),d=Math.cos(n);return Math.log(u+d)-Math.log(d-u)}function em(w,n,u,d){const v=w.lat+u*d;if(Math.abs(u)>1){const A=(Math.sign(w.lat+u)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,E=Math.abs(w.lat+u)*Math.PI/180,I=sf(A+d*(E-A)),R=sf(A),j=sf(E);return new c.V(w.lng+n*((I-R)/(j-R)),v)}return new c.V(w.lng+n*d,v)}class Hg{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,u,d,v){const A=`${n.z}_${n.x}_${n.y}_${v?.terrain?"t":""}`,E=this._cache.get(A);if(E)return E;const I=this._cachePrevious.get(A);if(I)return this._cache.set(A,I),I;const R=this._boundingVolumeFactory(n,u,d,v);return this._cache.set(A,R),this._hadAnyChanges=!0,R}}class Zu{constructor(n,u,d,v){this.min=d,this.max=v,this.points=n,this.planes=u}static fromAabb(n,u){const d=[];for(let v=0;v<8;v++)d.push([1&~v?n[0]:u[0],(v>>1&1)==1?u[1]:n[1],(v>>2&1)==1?u[2]:n[2]]);return new Zu(d,[[-1,0,0,u[0]],[1,0,0,-n[0]],[0,-1,0,u[1]],[0,1,0,-n[1]],[0,0,-1,u[2]],[0,0,1,-n[2]]],n,u)}static fromCenterSizeAngles(n,u,d){const v=c.bB([],d[0],d[1],d[2]),A=c.bC([],[u[0],0,0],v),E=c.bC([],[0,u[1],0],v),I=c.bC([],[0,0,u[2]],v),R=[...n],j=[...n];for(let Y=0;Y<8;Y++)for(let X=0;X<3;X++){const ee=n[X]+A[X]*(1&~Y?-1:1)+E[X]*((Y>>1&1)==1?1:-1)+I[X]*((Y>>2&1)==1?1:-1);R[X]=Math.min(R[X],ee),j[X]=Math.max(j[X],ee)}const F=[];for(let Y=0;Y<8;Y++){const X=[...n];c.b0(X,X,c.a$([],A,1&~Y?-1:1)),c.b0(X,X,c.a$([],E,(Y>>1&1)==1?1:-1)),c.b0(X,X,c.a$([],I,(Y>>2&1)==1?1:-1)),F.push(X)}return new Zu(F,[[...A,-c.b5(A,F[0])],[...E,-c.b5(E,F[0])],[...I,-c.b5(I,F[0])],[-A[0],-A[1],-A[2],-c.b5(A,F[7])],[-E[0],-E[1],-E[2],-c.b5(E,F[7])],[-I[0],-I[1],-I[2],-c.b5(I,F[7])]],R,j)}intersectsFrustum(n){let u=!0;const d=this.points.length,v=this.planes.length,A=n.planes.length,E=n.points.length;for(let I=0;I<A;I++){const R=n.planes[I];let j=0;for(let F=0;F<d;F++){const Y=this.points[F];R[0]*Y[0]+R[1]*Y[1]+R[2]*Y[2]+R[3]>=0&&j++}if(j===0)return 0;j<d&&(u=!1)}if(u)return 2;for(let I=0;I<v;I++){const R=this.planes[I];let j=0;for(let F=0;F<E;F++){const Y=n.points[F];R[0]*Y[0]+R[1]*Y[1]+R[2]*Y[2]+R[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(n){const u=this.points.length;let d=0;for(let v=0;v<u;v++){const A=this.points[v];n[0]*A[0]+n[1]*A[1]+n[2]*A[2]+n[3]>=0&&d++}return d===u?2:d===0?0:1}}function lf(w,n,u){const d=w-n;return d<0?-d:Math.max(0,d-u)}function $u(w,n,u,d,v){const A=w-u;let E;return E=A<0?Math.min(-A,1+A-v):A>1?Math.min(Math.max(A-v,0),1-A):0,Math.max(E,lf(n,d,v))}class _d{constructor(){this._boundingVolumeCache=new Hg(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,u,d,v){const A=1<<d.z,E=1/A,I=d.x/A,R=d.y/A;let j=2;return j=Math.min(j,$u(n,u,I,R,E)),j=Math.min(j,$u(n,u,I+.5,-R-E,E)),j=Math.min(j,$u(n,u,I+.5,2-R-E,E)),j}getWrap(n,u,d){const v=1<<u.z,A=1/v,E=u.x/v,I=lf(n.x,E,A),R=lf(n.x,E-1,A),j=lf(n.x,E+1,A),F=Math.min(I,R,j);return F===j?1:F===R?-1:0}allowVariableZoom(n,u){return Gr(n,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,u,d,v){return this._boundingVolumeCache.getTileBoundingVolume(n,u,d,v)}_computeTileBoundingVolume(n,u,d,v){var A,E;let I=0,R=0;if(v?.terrain){const j=new c.a2(n.z,u,n.z,n.x,n.y),F=v.terrain.getMinMaxElevation(j);I=(A=F.minElevation)!==null&&A!==void 0?A:Math.min(0,d),R=(E=F.maxElevation)!==null&&E!==void 0?E:Math.max(0,d)}if(I/=c.bE,R/=c.bE,I+=1,R+=1,n.z<=0)return Zu.fromAabb([-R,-R,-R],[R,R,R]);if(n.z===1)return Zu.fromAabb([n.x===0?-R:0,n.y===0?0:-R,-R],[n.x===0?0:R,n.y===0?R:0,R]);{const j=[Ko(0,0,n.x,n.y,n.z),Ko(c.a5,0,n.x,n.y,n.z),Ko(c.a5,c.a5,n.x,n.y,n.z),Ko(0,c.a5,n.x,n.y,n.z)],F=[];for(const $e of j)F.push(c.a$([],$e,R));if(R!==I)for(const $e of j)F.push(c.a$([],$e,I));n.y===0&&F.push([0,1,0]),n.y===(1<<n.z)-1&&F.push([0,-1,0]);const Y=[1,1,1],X=[-1,-1,-1];for(const $e of F)for(let Xe=0;Xe<3;Xe++)Y[Xe]=Math.min(Y[Xe],$e[Xe]),X[Xe]=Math.max(X[Xe],$e[Xe]);const ee=Ko(c.a5/2,c.a5/2,n.x,n.y,n.z),ie=c.b4([],[0,1,0],ee);c.b3(ie,ie);const fe=c.b4([],ee,ie);c.b3(fe,fe);const pe=c.b4([],j[2],j[1]);c.b3(pe,pe);const de=c.b4([],j[0],j[3]);c.b3(de,de),F.push(c.a$([],ee,R)),n.y>=(1<<n.z)/2&&F.push(c.a$([],Ko(c.a5/2,0,n.x,n.y,n.z),R)),n.y<(1<<n.z)/2&&F.push(c.a$([],Ko(c.a5/2,c.a5,n.x,n.y,n.z),R));const ye=Hc(ee,F),Ae=Hc(fe,F),ge=[-ee[0],-ee[1],-ee[2],ye.max],Se=[ee[0],ee[1],ee[2],-ye.min],Me=[-fe[0],-fe[1],-fe[2],Ae.max],_e=[fe[0],fe[1],fe[2],-Ae.min],Re=[...pe,0],Ye=[...de,0],Ge=[];return n.y===0?Ge.push(c.bD(Ye,Re,ge),c.bD(Ye,Re,Se)):Ge.push(c.bD(Me,Re,ge),c.bD(Me,Re,Se),c.bD(Me,Ye,ge),c.bD(Me,Ye,Se)),n.y===(1<<n.z)-1?Ge.push(c.bD(Ye,Re,ge),c.bD(Ye,Re,Se)):Ge.push(c.bD(_e,Re,ge),c.bD(_e,Re,Se),c.bD(_e,Ye,ge),c.bD(_e,Ye,Se)),new Zu(Ge,[ge,Se,Me,_e,Re,Ye],Y,X)}}}function Hc(w,n){let u=1/0,d=-1/0;for(const v of n){const A=c.b5(w,v);u=Math.min(u,A),d=Math.max(d,A)}return{min:u,max:d}}class Xu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u){this._helper.resize(n,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=c.bF(),this._projectionMatrix=c.bj(),this._globeViewProjMatrix32f=c.bi(),this._globeViewProjMatrixNoCorrection=c.bj(),this._globeViewProjMatrixNoCorrectionInverted=c.bj(),this._globeProjMatrixInverted=c.bj(),this._cameraPosition=c.bz(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(u,d)=>{const v=c.an(u.lat,-c.ao,c.ao),A=c.an(+d,this.minZoom+Dn(0,v),this.maxZoom);return{center:new c.V(u.lng,v),zoom:A}},this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new rl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._coveringTilesDetailsProvider=new _d}clone(){const n=new Xu;return n.apply(this),n}apply(n,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=c.bz();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:u,applyGlobeMatrix:d}=n,v=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:v,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const u=this.pitchInRadians,d=this.cameraToCenterDistance/n,v=Math.sin(u)*d,A=Math.cos(u)*d+1,E=1/Math.sqrt(v*v+A*A)*1;let I=-v,R=A;const j=Math.sqrt(I*I+R*R);I/=j,R/=j;const F=[0,I,R];c.bG(F,F,[0,0,0],-this.bearingInRadians),c.bH(F,F,[0,0,0],-1*this.center.lat*Math.PI/180),c.bI(F,F,[0,0,0],this.center.lng*Math.PI/180);const Y=1/c.b7(F);return c.a$(F,F,Y),[...F,-E*Y]}isLocationOccluded(n){return!this.isSurfacePointVisible(gn(n))}transformLightDirection(n){const u=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,v=Math.cos(d),A=[Math.sin(u)*v,Math.sin(d),Math.cos(u)*v],E=[A[2],0,-A[0]],I=[0,0,0];c.b4(I,E,A),c.b3(E,E),c.b3(I,I);const R=[0,0,0];return c.b3(R,[E[0]*n[0]+I[0]*n[1]+A[0]*n[2],E[1]*n[0]+I[1]*n[1]+A[1]*n[2],E[2]*n[0]+I[2]*n[1]+A[2]*n[2]]),R}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,u,d){const v=(function(I,R,j){const F=1/(1<<j.z);return new c.a9(I/c.a5*F+j.x*F,R/c.a5*F+j.y*F)})(n,u,d.canonical),A=(E=v.y,[c.by(v.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI]);var E;return this.getCircleRadiusCorrection()/Math.cos(A[1])}projectTileCoordinates(n,u,d,v){const A=d.canonical,E=Ko(n,u,A.x,A.y,A.z),I=1+(v?v(n,u):0)/c.bE,R=[E[0]*I,E[1]*I,E[2]*I,1];c.aH(R,R,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,F=j[0]*E[0]+j[1]*E[1]+j[2]*E[2]+j[3]<0;return{point:new c.P(R[0]/R[3],R[1]/R[3]),signedDistanceFromCamera:R[3],isOccluded:F}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Xl(this.worldSize,this.center.lat),u=c.bk(),d=c.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),c.be(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const v=this.centerOffset;u[8]=2*-v.x/this._helper._width,u[9]=2*v.y/this._helper._height,this._projectionMatrix=c.bf(u),this._globeProjMatrixInverted=c.bk(),c.aB(this._globeProjMatrixInverted,u),c.O(u,u,[0,0,-this.cameraToCenterDistance]),c.bg(u,u,this.rollInRadians),c.bh(u,u,-this.pitchInRadians),c.bg(u,u,this.bearingInRadians),c.O(u,u,[0,0,-n]);const A=c.bz();A[0]=n,A[1]=n,A[2]=n,c.bh(d,u,this.center.lat*Math.PI/180),c.bJ(d,d,-this.center.lng*Math.PI/180),c.Q(d,d,A),this._globeViewProjMatrixNoCorrection=d,c.bh(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),c.bJ(u,u,-this.center.lng*Math.PI/180),c.Q(u,u,A),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=c.bk(),c.aB(this._globeViewProjMatrixNoCorrectionInverted,d);const E=c.bz();this._cameraPosition=c.bz(),this._cameraPosition[2]=this.cameraToCenterDistance/n,c.bG(this._cameraPosition,this._cameraPosition,E,-this.rollInRadians),c.bH(this._cameraPosition,this._cameraPosition,E,this.pitchInRadians),c.bG(this._cameraPosition,this._cameraPosition,E,-this.bearingInRadians),c.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),c.bH(this._cameraPosition,this._cameraPosition,E,-this.center.lat*Math.PI/180),c.bI(this._cameraPosition,this._cameraPosition,E,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const I=c.bf(this._globeViewProjMatrixNoCorrectionInverted);c.Q(I,I,[1,1,-1]),this._cachedFrustum=Ki.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){c.w("calculateFogMatrix is not supported on globe projection.");const u=c.bk();return c.ar(u),u}getVisibleUnwrappedCoordinates(n){return[new c.bc(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&c.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const d=gn(n);c.a$(d,d,1+u/c.bE);const v=c.bF();return c.aH(v,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),v[2]/v[3]}populateCache(n){}getBounds(){const n=.5*this.width,u=.5*this.height,d=[new c.P(0,0),new c.P(n,0),new c.P(this.width,0),new c.P(this.width,u),new c.P(this.width,this.height),new c.P(n,this.height),new c.P(0,this.height),new c.P(0,u)],v=[];for(const Y of d)v.push(this.unprojectScreenPoint(Y));let A=0,E=0,I=0,R=0;const j=this.center;for(const Y of v){const X=c.bK(j.lng,Y.lng),ee=c.bK(j.lat,Y.lat);X<E&&(E=X),X>A&&(A=X),ee<R&&(R=ee),ee>I&&(I=ee)}const F=[j.lng+E,j.lat+R,j.lng+A,j.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(F[3]=90,F[0]=-180,F[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(F[1]=-90,F[0]=-180,F[2]=180),new Br(F)}calculateCenterFromCameraLngLatAlt(n,u,d,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,v)}setLocationAtPoint(n,u){const d=gn(this.unprojectScreenPoint(u)),v=gn(n),A=c.bz();c.bL(A);const E=c.bz();c.bI(E,d,A,-this.center.lng*Math.PI/180),c.bH(E,E,A,this.center.lat*Math.PI/180);const I=v[0]*v[0]+v[2]*v[2],R=E[0]*E[0];if(I<R)return;const j=Math.sqrt(I-R),F=-j,Y=c.bM(v[0],v[2],E[0],j),X=c.bM(v[0],v[2],E[0],F),ee=c.bz();c.bI(ee,v,A,-Y);const ie=c.bM(ee[1],ee[2],E[1],E[2]),fe=c.bz();c.bI(fe,v,A,-X);const pe=c.bM(fe[1],fe[2],E[1],E[2]),de=.5*Math.PI,ye=ie>=-de&&ie<=de,Ae=pe>=-de&&pe<=de;let ge,Se;if(ye&&Ae){const Ye=this.center.lng*Math.PI/180,Ge=this.center.lat*Math.PI/180;c.bN(Y,Ye)+c.bN(ie,Ge)<c.bN(X,Ye)+c.bN(pe,Ge)?(ge=Y,Se=ie):(ge=X,Se=pe)}else if(ye)ge=Y,Se=ie;else{if(!Ae)return;ge=X,Se=pe}const Me=ge/Math.PI*180,_e=Se/Math.PI*180,Re=this.center.lat;this.setCenter(new c.V(Me,c.an(_e,-90,90))),this.setZoom(this.zoom+Dn(Re,this.center.lat))}locationToScreenPoint(n,u){const d=gn(n);if(u){const v=u.getElevationForLngLatZoom(n,this._helper._tileZoom);c.a$(d,d,1+v/c.bE)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(n){const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new c.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,u){if(u){const d=u.pointCoordinate(n);if(d)return d}return c.a9.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,u){var d;return(d=this.screenPointToMercatorCoordinate(n,u))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(n,u){const d=this._cameraPosition,v=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(d,v)}getRayDirectionFromPixel(n){const u=c.bF();u[0]=n.x/this.width*2-1,u[1]=-1*(n.y/this.height*2-1),u[2]=1,u[3]=1,c.aH(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const d=c.bz();d[0]=u[0]-this._cameraPosition[0],d[1]=u[1]-this._cameraPosition[1],d[2]=u[2]-this._cameraPosition[2];const v=c.bz();return c.b3(v,d),v}isSurfacePointVisible(n){const u=this._cachedClippingPlane;return u[0]*n[0]+u[1]*n[1]+u[2]*n[2]+u[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const u=c.bF();return c.aH(u,[...n,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(n,u){const d=c.b5(n,u),v=c.bz(),A=c.bz();c.a$(A,u,d),c.b2(v,n,A);const E=1-c.b5(v,v);if(E<0)return null;const I=c.b5(n,n)-1,R=-d+(d<0?1:-1)*Math.sqrt(E),j=I/R,F=R;return{tMin:Math.min(j,F),tMax:Math.max(j,F)}}unprojectScreenPoint(n){const u=this._cameraPosition,d=this.getRayDirectionFromPixel(n),v=this.rayPlanetIntersection(u,d);if(v){const F=c.bz();c.b0(F,u,[d[0]*v.tMin,d[1]*v.tMin,d[2]*v.tMin]);const Y=c.bz();return c.b3(Y,F),Gc(Y)}const A=this._cachedClippingPlane,E=A[0]*d[0]+A[1]*d[1]+A[2]*d[2],I=-c.bb(A,u)/E,R=c.bz();if(I>0)c.b0(R,u,[d[0]*I,d[1]*I,d[2]*I]);else{const F=c.bz();c.b0(F,u,[2*d[0],2*d[1],2*d[2]]);const Y=c.bb(this._cachedClippingPlane,F);c.b2(R,F,[this._cachedClippingPlane[0]*Y,this._cachedClippingPlane[1]*Y,this._cachedClippingPlane[2]*Y])}const j=(function(F){const Y=c.bz();return Y[0]=F[0]*-F[3],Y[1]=F[1]*-F[3],Y[2]=F[2]*-F[3],{center:Y,radius:Math.sqrt(1-F[3]*F[3])}})(A);return Gc((function(F,Y,X){const ee=c.bz();c.b2(ee,X,F);const ie=c.bz();return c.bA(ie,F,ee,Y/c.b9(ee)),ie})(j.center,j.radius,R))}getMatrixForModel(n,u){const d=c.V.convert(n),v=1/c.bE,A=c.bj();return c.bJ(A,A,d.lng/180*Math.PI),c.bh(A,A,-d.lat/180*Math.PI),c.O(A,A,[0,0,1+u/c.bE]),c.bh(A,A,.5*Math.PI),c.Q(A,A,[v,v,v]),A}getProjectionDataForCustomLayer(n=!0){const u=this.getProjectionData({overscaledTileID:new c.a2(0,0,0,0,0),applyGlobeMatrix:n});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(n){}}class Yu{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,u,d){return this._helper.interpolatePadding(n,u,d)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,u,d=!0){this._helper.resize(n,u,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,u){this._helper.overrideNearFarZ(n,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,u){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(u,d)=>this.currentTransform.defaultConstrain(u,d),this.applyConstrain=(u,d)=>this._helper.applyConstrain(u,d),this._helper=new rl({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,d)=>this.defaultConstrain(u,d)},n),this._globeness=1,this._mercatorTransform=new ti,this._verticalPerspectiveTransform=new Xu}clone(){const n=new Yu;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const u=this._mercatorTransform.getProjectionData(n),d=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:u.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return c.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return c.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,u,d){const v=this._mercatorTransform.getPitchedTextCorrection(n,u,d),A=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,u,d);return c.bu(v,A,this._globeness)}projectTileCoordinates(n,u,d,v){return this.currentTransform.projectTileCoordinates(n,u,d,v)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,u){return this.currentTransform.lngLatToCameraDepth(n,u)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,u,d,v){return this._helper.calculateCenterFromCameraLngLatAlt(n,u,d,v)}setLocationAtPoint(n,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,u){return this.currentTransform.locationToScreenPoint(n,u)}screenPointToMercatorCoordinate(n,u){return this.currentTransform.screenPointToMercatorCoordinate(n,u)}screenPointToLocation(n,u){return this.currentTransform.screenPointToLocation(n,u)}isPointOnMapSurface(n,u){return this.currentTransform.isPointOnMapSurface(n,u)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,u){return this.currentTransform.getMatrixForModel(n,u)}getProjectionDataForCustomLayer(n=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return u;const d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return d.fallbackMatrix=u.mainMatrix,d}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Nn{get useGlobeControls(){return!0}handlePanInertia(n,u){const d=Jp(n,u);return Math.abs(d.lng-u.center.lng)>180&&(d.lng=u.center.lng+179.5*Math.sign(d.lng-u.center.lng)),{easingCenter:d,easingOffset:new c.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,u){const d=n.around,v=u.screenPointToLocation(d);n.bearingDelta&&u.setBearing(u.bearing+n.bearingDelta),n.pitchDelta&&u.setPitch(u.pitch+n.pitchDelta),n.rollDelta&&u.setRoll(u.roll+n.rollDelta);const A=u.zoom;n.zoomDelta&&u.setZoom(u.zoom+n.zoomDelta);const E=u.zoom-A;if(E===0)return;const I=c.bK(u.center.lng,v.lng),R=I/(Math.abs(I/180)+1),j=c.bK(u.center.lat,v.lat),F=u.getRayDirectionFromPixel(d),Y=u.cameraPosition,X=-1*c.b5(Y,F),ee=c.bz();c.b0(ee,Y,[F[0]*X,F[1]*X,F[2]*X]);const ie=c.b7(ee)-1,fe=Math.exp(.5*-Math.max(ie-.3,0)),pe=Xl(u.worldSize,u.center.lat)/Math.min(u.width,u.height),de=c.bx(pe,.9,.5,1,.25),ye=(1-c.aq(-E))*Math.min(fe,de),Ae=u.center.lat,ge=u.zoom,Se=new c.V(u.center.lng+R*ye,c.an(u.center.lat+j*ye,-c.ao,c.ao));u.setLocationAtPoint(v,d);const Me=u.center,_e=c.bx(Math.abs(I),45,85,0,1),Re=c.bx(pe,.75,.35,0,1),Ye=Math.pow(Math.max(_e,Re),.25),Ge=c.bK(Me.lng,Se.lng),$e=c.bK(Me.lat,Se.lat);u.setCenter(new c.V(Me.lng+Ge*Ye,Me.lat+$e*Ye).wrap()),u.setZoom(ge+Dn(Ae,u.center.lat))}handleMapControlsPan(n,u,d){if(!n.panDelta)return;const v=u.center.lat,A=u.zoom;u.setCenter(Jp(n.panDelta,u).wrap()),u.setZoom(A+Dn(v,u.center.lat))}cameraForBoxAndBearing(n,u,d,v,A){const E=Hl(n,u,d,v,A),I=u.left/A.width*2-1,R=(A.width-u.right)/A.width*2-1,j=u.top/A.height*-2+1,F=(A.height-u.bottom)/A.height*-2+1,Y=c.bK(d.getWest(),d.getEast())<0,X=Y?d.getEast():d.getWest(),ee=Y?d.getWest():d.getEast(),ie=Math.max(d.getNorth(),d.getSouth()),fe=Math.min(d.getNorth(),d.getSouth()),pe=X+.5*c.bK(X,ee),de=ie+.5*c.bK(ie,fe),ye=A.clone();ye.setCenter(E.center),ye.setBearing(E.bearing),ye.setPitch(0),ye.setRoll(0),ye.setZoom(E.zoom);const Ae=ye.modelViewProjectionMatrix,ge=[gn(d.getNorthWest()),gn(d.getNorthEast()),gn(d.getSouthWest()),gn(d.getSouthEast()),gn(new c.V(ee,de)),gn(new c.V(X,de)),gn(new c.V(pe,ie)),gn(new c.V(pe,fe))],Se=gn(E.center);let Me=Number.POSITIVE_INFINITY;for(const _e of ge)I<0&&(Me=Nn.getLesserNonNegativeNonNull(Me,Nn.solveVectorScale(_e,Se,Ae,"x",I))),R>0&&(Me=Nn.getLesserNonNegativeNonNull(Me,Nn.solveVectorScale(_e,Se,Ae,"x",R))),j>0&&(Me=Nn.getLesserNonNegativeNonNull(Me,Nn.solveVectorScale(_e,Se,Ae,"y",j))),F<0&&(Me=Nn.getLesserNonNegativeNonNull(Me,Nn.solveVectorScale(_e,Se,Ae,"y",F)));if(Number.isFinite(Me)&&Me!==0)return E.zoom=ye.zoom+c.at(Me),E;Qi()}handleJumpToCenterZoom(n,u){const d=n.center.lat,v=n.applyConstrain(u.center?c.V.convert(u.center):n.center,n.zoom).center;n.setCenter(v.wrap());const A=u.zoom!==void 0?+u.zoom:n.zoom+Dn(d,v.lat);n.zoom!==A&&n.setZoom(A)}handleEaseTo(n,u){const d=n.zoom,v=n.center,A=n.padding,E={roll:n.roll,pitch:n.pitch,bearing:n.bearing},I={roll:u.roll===void 0?n.roll:u.roll,pitch:u.pitch===void 0?n.pitch:u.pitch,bearing:u.bearing===void 0?n.bearing:u.bearing},R=u.zoom!==void 0,j=!n.isPaddingEqual(u.padding);let F=!1;const Y=u.center?c.V.convert(u.center):v,X=n.applyConstrain(Y,d).center;Wo(n,X);const ee=n.clone();ee.setCenter(X),ee.setZoom(R?+u.zoom:d+Dn(v.lat,Y.lat)),ee.setBearing(u.bearing);const ie=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));ee.setLocationAtPoint(X,ie);const fe=(u.offset&&u.offsetAsPoint.mag())>0?ee.center:X,pe=R?+u.zoom:d+Dn(v.lat,fe.lat),de=d+Dn(v.lat,0),ye=pe+Dn(fe.lat,0),Ae=c.bK(v.lng,fe.lng),ge=c.bK(v.lat,fe.lat),Se=c.aq(ye-de);return F=pe!==d,{easeFunc:Me=>{if(c.bo(E,I)||Fc({startEulerAngles:E,endEulerAngles:I,tr:n,k:Me,useSlerp:E.roll!=I.roll}),j&&n.interpolatePadding(A,u.padding,Me),u.around)c.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(u.around,u.aroundPoint);else{const _e=ye>de?Math.min(2,Se):Math.max(.5,Se),Re=Math.pow(_e,1-Me),Ye=em(v,Ae,ge,Me*Re);n.setCenter(Ye.wrap())}if(F){const _e=c.G.number(de,ye,Me)+Dn(0,n.center.lat);n.setZoom(_e)}},isZooming:F,elevationCenter:fe}}handleFlyTo(n,u){const d=u.zoom!==void 0,v=n.center,A=n.zoom,E=n.padding,I=!n.isPaddingEqual(u.padding),R=n.applyConstrain(c.V.convert(u.center||u.locationAtOffset),A).center,j=d?+u.zoom:n.zoom+Dn(n.center.lat,R.lat),F=n.clone();F.setCenter(R),F.setZoom(j),F.setBearing(u.bearing);const Y=new c.P(c.an(n.centerPoint.x+u.offsetAsPoint.x,0,n.width),c.an(n.centerPoint.y+u.offsetAsPoint.y,0,n.height));F.setLocationAtPoint(R,Y);const X=F.center;Wo(n,X);const ee=(function(ge,Se,Me){const _e=gn(Se),Re=gn(Me),Ye=c.b5(_e,Re),Ge=Math.acos(Ye),$e=Ji(ge);return Ge/(2*Math.PI)*$e})(n,v,X),ie=A+Dn(v.lat,0),fe=j+Dn(X.lat,0),pe=c.aq(fe-ie);let de;if(typeof u.minZoom=="number"){const ge=+u.minZoom+Dn(X.lat,0),Se=Math.min(ge,ie,fe)+Dn(0,X.lat),Me=n.applyConstrain(X,Se).zoom+Dn(X.lat,0);de=c.aq(Me-ie)}const ye=c.bK(v.lng,X.lng),Ae=c.bK(v.lat,X.lat);return{easeFunc:(ge,Se,Me,_e)=>{const Re=em(v,ye,Ae,Me);I&&n.interpolatePadding(E,u.padding,ge);const Ye=ge===1?X:Re;n.setCenter(Ye.wrap());const Ge=ie+c.at(Se);n.setZoom(ge===1?j:Ge+Dn(0,Ye.lat))},scaleOfZoom:pe,targetCenter:X,scaleOfMinZoom:de,pixelPathLength:ee}}static solveVectorScale(n,u,d,v,A){const E=v==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],I=[d[3],d[7],d[11],d[15]],R=n[0]*E[0]+n[1]*E[1]+n[2]*E[2],j=n[0]*I[0]+n[1]*I[1]+n[2]*I[2],F=u[0]*E[0]+u[1]*E[1]+u[2]*E[2],Y=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return F+A*j===R+A*Y||I[3]*(R-F)+E[3]*(Y-j)+R*Y==F*j?null:(F+E[3]-A*Y-A*I[3])/(F-R-A*Y+A*j)}static getLesserNonNegativeNonNull(n,u){return u!==null&&u>=0&&u<n?u:n}}class Wu{constructor(n){this._globe=n,this._mercatorCameraHelper=new Zl,this._verticalPerspectiveCameraHelper=new Nn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,u){return this.currentHelper.handlePanInertia(n,u)}handleMapControlsRollPitchBearingZoom(n,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,u)}handleMapControlsPan(n,u,d){this.currentHelper.handleMapControlsPan(n,u,d)}cameraForBoxAndBearing(n,u,d,v,A){return this.currentHelper.cameraForBoxAndBearing(n,u,d,v,A)}handleJumpToCenterZoom(n,u){this.currentHelper.handleJumpToCenterZoom(n,u)}handleEaseTo(n,u){return this.currentHelper.handleEaseTo(n,u)}handleFlyTo(n,u){return this.currentHelper.handleFlyTo(n,u)}}const Ku=(w,n)=>c.B(w,n&&n.filter((u=>u.identifier!=="source.canvas"))),Qu=c.bO();class ol extends c.E{constructor(n,u={}){var d,v;super(),this._rtlPluginLoaded=()=>{for(const E in this.tileManagers){const I=this.tileManagers[E].getSource().type;I!=="vector"&&I!=="geojson"||this.tileManagers[E].reload()}},this.map=n,this.dispatcher=new tr(ct(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((E,I)=>this.getGlyphs(E,I))),this.dispatcher.registerMessageHandler("GI",((E,I)=>this.getImages(E,I))),this.dispatcher.registerMessageHandler("GDA",((E,I)=>this.getDashes(E,I))),this.imageManager=new De,this.imageManager.setEventedParent(this);const A=((d=n._container)===null||d===void 0?void 0:d.lang)||typeof document<"u"&&((v=document.documentElement)===null||v===void 0?void 0:v.lang)||void 0;this.glyphManager=new We(n._requestManager,u.localIdeographFontFamily,A),this.lineAtlas=new Dt(256,512),this.crossTileSymbolIndex=new ui,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",c.bP()),Ne().on(Ee,this._rtlPluginLoaded),this.on("data",(E=>{if(E.dataType!=="source"||E.sourceDataType!=="metadata")return;const I=this.tileManagers[E.sourceId];if(!I)return;const R=I.getSource();if(R&&R.vectorLayerIds)for(const j in this._layers){const F=this._layers[j];F.source===R.id&&this._validateLayer(F)}}))}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new c.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,u){var d,v,A;this._checkLoaded();const E=u===null?(A=(v=(d=this.stylesheet.state)===null||d===void 0?void 0:d[n])===null||v===void 0?void 0:v.default)!==null&&A!==void 0?A:null:u;if(c.bR(E,this._globalState[n]))return this;this._globalState[n]=E,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const u=[];for(const d in n)!c.bR(this._globalState[d],n[d].default)&&(u.push(d),this._globalState[d]=n[d].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(n){if(n.length===0)return;const u=new Set,d={};for(const v of n){d[v]=this._globalState[v];for(const A in this._layers){const E=this._layers[A],I=E.getLayoutAffectingGlobalStateRefs(),R=E.getPaintAffectingGlobalStateRefs(),j=E.getVisibilityAffectingGlobalStateRefs();if(I.has(v)&&u.add(E.source),R.has(v))for(const{name:F,value:Y}of R.get(v))this._updatePaintProperty(E,F,Y);j?.has(v)&&(E.recalculateVisibility(),this._updateLayer(E))}}this.dispatcher.broadcast("UGS",d);for(const v in this.tileManagers)u.has(v)&&(this._reloadSource(v),this._changed=!0)}loadURL(n,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const v=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const A=this._loadStyleRequest;c.j(v,this._loadStyleRequest).then((E=>{this._loadStyleRequest=null,this._load(E.data,u,d)})).catch((E=>{this._loadStyleRequest=null,E&&!A.signal.aborted&&this.fire(new c.k(E))}))}loadJSON(n,u={},d){this.fire(new c.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,V.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(n,u,d)})).catch((()=>{}))}loadEmpty(){this.fire(new c.l("dataloading",{dataType:"style"})),this._load(Qu,{validate:!1})}_load(n,u,d){var v,A;let E=u.transformStyle?u.transformStyle(d,n):n;if(!u.validate||!Ku(this,c.C(E))){E=Object.assign({},E),this._loaded=!0,this.stylesheet=E;for(const I in E.sources)this.addSource(I,E.sources[I],{validate:!1});E.sprite?this._loadSprite(E.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(E.glyphs),this._createLayers(),this.light=new Kt(this.stylesheet.light),this._setProjectionInternal(((v=this.stylesheet.projection)===null||v===void 0?void 0:v.type)||"mercator"),this.sky=new ot(this.stylesheet.sky),this.map.setTerrain((A=this.stylesheet.terrain)!==null&&A!==void 0?A:null),this.fire(new c.l("data",{dataType:"style"})),this.fire(new c.l("style.load"))}}_createLayers(){var n,u,d;const v=c.bS(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",v),this._order=v.map((A=>A.id)),this._layers={},this._serializedLayers=null;for(const A of v){const E=c.bT(A,this._globalState);if(E.setEventedParent(this,{layer:{id:A.id}}),this._layers[A.id]=E,c.bU(E)&&this.tileManagers[E.source]){const I=(d=(u=A.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&d!==void 0?d:E.paint.get("raster-fade-duration");this.tileManagers[E.source].setRasterFadeDuration(I)}}}_loadSprite(n,u=!1,d=void 0){this.imageManager.setLoaded(!1);const v=new AbortController;let A;this._spriteRequest=v,(function(E,I,R,j){return c._(this,void 0,void 0,(function*(){const F=bt(E),Y=R>1?"@2x":"",X={},ee={};for(const{id:ie,url:fe}of F){const pe=I.transformRequest(It(fe,Y,".json"),"SpriteJSON");X[ie]=c.j(pe,j);const de=I.transformRequest(It(fe,Y,".png"),"SpriteImage");ee[ie]=je.getImage(de,j)}return yield Promise.all([...Object.values(X),...Object.values(ee)]),(function(ie,fe){return c._(this,void 0,void 0,(function*(){const pe={};for(const de in ie){pe[de]={};const ye=V.getImageCanvasContext((yield fe[de]).data),Ae=(yield ie[de]).data;for(const ge in Ae){const{width:Se,height:Me,x:_e,y:Re,sdf:Ye,pixelRatio:Ge,stretchX:$e,stretchY:Xe,content:St,textFitWidth:At,textFitHeight:ft}=Ae[ge];pe[de][ge]={data:null,pixelRatio:Ge,sdf:Ye,stretchX:$e,stretchY:Xe,content:St,textFitWidth:At,textFitHeight:ft,spriteData:{width:Se,height:Me,x:_e,y:Re,context:ye}}}}return pe}))})(X,ee)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((E=>{if(this._spriteRequest=null,E)for(const I in E){this._spritesImagesIds[I]=[];const R=this._spritesImagesIds[I]?this._spritesImagesIds[I].filter((j=>!(j in E))):[];for(const j of R)this.imageManager.removeImage(j),this._changedImages[j]=!0;for(const j in E[I]){const F=I==="default"?j:`${I}:${j}`;this._spritesImagesIds[I].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,E[I][j],!1):this.imageManager.addImage(F,E[I][j]),u&&(this._changedImages[F]=!0)}}})).catch((E=>{this._spriteRequest=null,A=E,v.signal.aborted||this.fire(new c.k(A))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"})),d&&d(A)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}_validateLayer(n){const u=this.tileManagers[n.source];if(!u)return;const d=n.sourceLayer;if(!d)return;const v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.k(new Error(`Source layer "${d}" does not exist on source "${v.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,u=!1){const d=this._serializedAllLayers();if(!n||n.length===0)return Object.values(u?c.bV(d):d);const v=[];for(const A of n)if(d[A]){const E=u?c.bV(d[A]):d[A];v.push(E)}return v}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const u=Object.keys(this._layers);for(const d of u){const v=this._layers[d];v.type!=="custom"&&(n[d]=v.serialize())}return n}hasTransitions(){var n,u,d;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(const v in this.tileManagers)if(this.tileManagers[v].hasTransition())return!0;for(const v in this._layers)if(this._layers[v].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const u=this._changed;if(u){const v=Object.keys(this._updatedLayers),A=Object.keys(this._removedLayers);(v.length||A.length)&&this._updateWorkerLayers(v,A);for(const E in this._updatedSources){const I=this._updatedSources[E];if(I==="reload")this._reloadSource(E);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const d={};for(const v in this.tileManagers){const A=this.tileManagers[v];d[v]=A.used,A.used=!1}for(const v of this._order){const A=this._layers[v];A.recalculate(n,this._availableImages),!A.isHidden(n.zoom)&&A.source&&(this.tileManagers[A.source].used=!0)}for(const v in d){const A=this.tileManagers[v];!!d[v]!=!!A.used&&A.fire(new c.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,u&&this.fire(new c.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,u={}){var d;this._checkLoaded();const v=this.serialize();if(n=u.transformStyle?u.transformStyle(v,n):n,((d=u.validate)===null||d===void 0||d)&&Ku(this,c.C(n)))return!1;(n=c.bV(n)).layers=c.bS(n.layers);const A=c.bW(v,n),E=this._getOperationsToPerform(A);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(E.operations.length===0)return!1;for(const I of E.operations)I();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const u=[],d=[];for(const v of n)switch(v.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,v.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,v.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,v.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,v.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,v.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,v.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,v.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,v.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,v.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,v.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,v.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,v.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,v.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,v.args)));break;case"setProjection":this.setProjection.apply(this,v.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,v.args)));break;case"setTransition":u.push((()=>{}));break;default:d.push(v.command)}return{operations:u,unimplemented:d}}addImage(n,u){if(this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,u),this._afterImageUpdated(n)}updateImage(n,u){this.imageManager.updateImage(n,u)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new c.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,u,d={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(c.C.source,`sources.${n}`,u,null,d))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=this.tileManagers[n]=new nn(n,u,this.dispatcher);v.style=this,v.setEventedParent(this,(()=>({isSourceLoaded:v.loaded(),source:v.serialize(),sourceId:n}))),v.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===n)return this.fire(new c.k(new Error(`Source "${n}" cannot be removed while layer "${d}" is using it.`)));const u=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],u.fire(new c.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,u){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const d=this.tileManagers[n].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(u),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,u,d={}){this._checkLoaded();const v=n.id;if(this.getLayer(v))return void this.fire(new c.k(new Error(`Layer "${v}" already exists on this map.`)));let A;if(n.type==="custom"){if(Ku(this,c.bX(n)))return;A=c.bT(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(v,n.source),n=c.bV(n),n=c.e(n,{source:v})),this._validate(c.C.layer,`layers.${v}`,n,{arrayIndex:-1},d))return;A=c.bT(n,this._globalState),this._validateLayer(A),A.setEventedParent(this,{layer:{id:v}})}const E=u?this._order.indexOf(u):this._order.length;if(u&&E===-1)this.fire(new c.k(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(E,0,v),this._layerOrderChanged=!0,this._layers[v]=A,this._removedLayers[v]&&A.source&&A.type!=="custom"){const I=this._removedLayers[v];delete this._removedLayers[v],I.type!==A.type?this._updatedSources[A.source]="clear":(this._updatedSources[A.source]="reload",this.tileManagers[A.source].pause())}this._updateLayer(A),A.onAdd&&A.onAdd(this.map)}}moveLayer(n,u){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new c.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===u)return;const d=this._order.indexOf(n);this._order.splice(d,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new c.k(new Error(`Cannot move layer "${n}" before non-existing layer "${u}".`))):(this._order.splice(v,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const u=this._layers[n];if(!u)return void this.fire(new c.k(new Error(`Cannot remove non-existing layer "${n}".`)));u.setEventedParent(null);const d=this._order.indexOf(n);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=u,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],u.onRemove&&u.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,u,d){this._checkLoaded();const v=this.getLayer(n);v?v.minzoom===u&&v.maxzoom===d||(u!=null&&(v.minzoom=u),d!=null&&(v.maxzoom=d),this._updateLayer(v)):this.fire(new c.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,u,d={}){this._checkLoaded();const v=this.getLayer(n);if(v){if(!c.bR(v.filter,u))return u==null?(v.setFilter(void 0),void this._updateLayer(v)):void(this._validate(c.C.filter,`layers.${v.id}.filter`,u,null,d)||(v.setFilter(c.bV(u)),this._updateLayer(v)))}else this.fire(new c.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return c.bV(this.getLayer(n).filter)}setLayoutProperty(n,u,d,v={}){this._checkLoaded();const A=this.getLayer(n);A?c.bR(A.getLayoutProperty(u),d)||(A.setLayoutProperty(u,d,v),this._updateLayer(A)):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,u){const d=this.getLayer(n);if(d)return d.getLayoutProperty(u);this.fire(new c.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,u,d,v={}){this._checkLoaded();const A=this.getLayer(n);A?c.bR(A.getPaintProperty(u),d)||this._updatePaintProperty(A,u,d,v):this.fire(new c.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,u,d,v={}){n.setPaintProperty(u,d,v)&&this._updateLayer(n),c.bU(n)&&u==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(d),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,u){return this.getLayer(n).getPaintProperty(u)}setFeatureState(n,u){this._checkLoaded();const d=n.source,v=n.sourceLayer,A=this.tileManagers[d];if(A===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const E=A.getSource().type;E==="geojson"&&v?this.fire(new c.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):E!=="vector"||v?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),A.setFeatureState(v,n.id,u)):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,u){this._checkLoaded();const d=n.source,v=this.tileManagers[d];if(v===void 0)return void this.fire(new c.k(new Error(`The source '${d}' does not exist in the map's style.`)));const A=v.getSource().type,E=A==="vector"?n.sourceLayer:void 0;A!=="vector"||E?u&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new c.k(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(E,n.id,u):this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const u=n.source,d=n.sourceLayer,v=this.tileManagers[u];if(v!==void 0)return v.getSource().type!=="vector"||d?(n.id===void 0&&this.fire(new c.k(new Error("The feature id parameter must be provided."))),v.getFeatureState(d,n.id)):void this.fire(new c.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=c.bY(this.tileManagers,(A=>A.serialize())),u=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,v=this.stylesheet;return c.bZ({version:v.version,name:v.name,metadata:v.metadata,light:v.light,sky:v.sky,center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch,sprite:v.sprite,glyphs:v.glyphs,transition:v.transition,projection:v.projection,sources:n,layers:u,terrain:d},(A=>A!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const u=E=>this._layers[E].type==="fill-extrusion",d={},v=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I)){d[I]=E;for(const R of n){const j=R[I];if(j)for(const F of j)v.push(F)}}}v.sort(((E,I)=>I.intersectionZ-E.intersectionZ));const A=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I))for(let R=v.length-1;R>=0;R--){const j=v[R].feature;if(d[j.layer.id]<E)break;A.push(j),v.pop()}else for(const R of n){const j=R[I];if(j)for(const F of j)A.push(F.feature)}}return A}queryRenderedFeatures(n,u,d){u&&u.filter&&this._validate(c.C.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new c.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of u.layers){const F=this._layers[j];if(!F)return this.fire(new c.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];v[F.source]=!0}}const A=[];u.availableImages=this._availableImages;const E=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,R=Object.assign(Object.assign({},u),{layers:I,globalState:this._globalState});for(const j in this.tileManagers)u.layers&&!v[j]||A.push(Hn(this.tileManagers[j],this._layers,E,n,R,d,this.map.terrain?(F,Y,X)=>this.map.terrain.getElevation(F,Y,X):void 0));return this.placement&&A.push((function(j,F,Y,X,ee,ie,fe){const pe={},de=ie.queryRenderedSymbols(X),ye=[];for(const Ae of Object.keys(de).map(Number))ye.push(fe[Ae]);ye.sort(ar);for(const Ae of ye){const ge=Ae.featureIndex.lookupSymbolFeatures(de[Ae.bucketInstanceId],F,Ae.bucketIndex,Ae.sourceLayerIndex,{filterSpec:ee.filter,globalState:ee.globalState},ee.layers,ee.availableImages,j);for(const Se in ge){const Me=pe[Se]=pe[Se]||[],_e=ge[Se];_e.sort(((Re,Ye)=>{const Ge=Ae.featureSortOrder;if(Ge){const $e=Ge.indexOf(Re.featureIndex);return Ge.indexOf(Ye.featureIndex)-$e}return Ye.featureIndex-Re.featureIndex}));for(const Re of _e)Me.push(Re)}}return(function(Ae,ge,Se){for(const Me in Ae)for(const _e of Ae[Me])rn(_e,Se[ge[Me].source]);return Ae})(pe,j,Y)})(this._layers,E,this.tileManagers,n,R,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(A)}querySourceFeatures(n,u){u?.filter&&this._validate(c.C.filter,"querySourceFeatures.filter",u.filter,null,u);const d=this.tileManagers[n];return d?(function(v,A){const E=v.getRenderableIds().map((j=>v.getTileByID(j))),I=[],R={};for(let j=0;j<E.length;j++){const F=E[j],Y=F.tileID.canonical.key;R[Y]||(R[Y]=!0,F.querySourceFeatures(I,A))}return I})(d,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,u={}){this._checkLoaded();const d=this.light.getLight();let v=!1;for(const E in n)if(!c.bR(n[E],d[E])){v=!0;break}if(!v)return;const A={now:Z(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,u),this.light.updateTransitions(A)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,u={}){this._checkLoaded();const d=this.getSky();let v=!1;if(!n&&!d)return;if(n&&!d)v=!0;else if(!n&&d)v=!0;else for(const E in n)if(!c.bR(n[E],d[E])){v=!0;break}if(!v)return;const A={now:Z(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,u),this.sky.updateTransitions(A)}_setProjectionInternal(n){const u=(function(d,v){const A={constrainOverride:v};if(Array.isArray(d)){const E=new vd({type:d});return{projection:E,transform:new Yu(A),cameraHelper:new Wu(E)}}switch(d){case"mercator":return{projection:new ci,transform:new ti(A),cameraHelper:new Zl};case"globe":{const E=new vd({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:E,transform:new Yu(A),cameraHelper:new Wu(E)}}case"vertical-perspective":return{projection:new yd,transform:new Xu(A),cameraHelper:new Nn};default:return c.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new ci,transform:new ti(A),cameraHelper:new Zl}}})(n,this.map.transformConstrain);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const d in this.tileManagers)this.tileManagers[d].reload()}_validate(n,u,d,v,A={}){return(!A||A.validate!==!1)&&Ku(this,n.call(c.C,c.e({key:u,style:this.serialize(),value:d,styleSpec:c.u},v)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ne().off(Ee,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.tileManagers){const d=this.tileManagers[u];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const u in this.tileManagers)this.tileManagers[u].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,u,d,v,A=!1){let E=!1,I=!1;const R={};for(const j of this._order){const F=this._layers[j];if(F.type!=="symbol")continue;if(!R[F.source]){const X=this.tileManagers[F.source];R[F.source]=X.getRenderableIds(!0).map((ee=>X.getTileByID(ee))).sort(((ee,ie)=>ie.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ie.tileID)?-1:1)))}const Y=this.crossTileSymbolIndex.addLayer(F,R[F.source],n.center.lng);E=E||Y}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((A=A||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Z(),n.zoom))&&(this.pauseablePlacement=new Hu(n,this.map.terrain,this._order,A,u,d,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Z()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(const j of this._order){const F=this._layers[j];F.type==="symbol"&&this.placement.updateLayerOpacities(F,R[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Z())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,u){return c._(this,void 0,void 0,(function*(){const d=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const v=this.tileManagers[u.source];return v&&v.setDependencies(u.tileID.key,u.type,u.icons),d}))}getGlyphs(n,u){return c._(this,void 0,void 0,(function*(){const d=yield this.glyphManager.getGlyphs(u.stacks),v=this.tileManagers[u.source];return v&&v.setDependencies(u.tileID.key,u.type,[""]),d}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,u={}){this._checkLoaded(),n&&this._validate(c.C.glyphs,"glyphs",n,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,u){return c._(this,void 0,void 0,(function*(){const d={};for(const[v,A]of Object.entries(u.dashes))d[v]=this.lineAtlas.getDash(A.dasharray,A.round);return d}))}addSprite(n,u,d={},v){this._checkLoaded();const A=[{id:n,url:u}],E=[...bt(this.stylesheet.sprite),...A];this._validate(c.C.sprite,"sprite",E,null,d)||(this.stylesheet.sprite=E,this._loadSprite(A,!0,v))}removeSprite(n){this._checkLoaded();const u=bt(this.stylesheet.sprite);if(u.find((d=>d.id===n))){if(this._spritesImagesIds[n])for(const d of this._spritesImagesIds[n])this.imageManager.removeImage(d),this._changedImages[d]=!0;u.splice(u.findIndex((d=>d.id===n)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.l("data",{dataType:"style"}))}else this.fire(new c.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return bt(this.stylesheet.sprite)}setSprite(n,u={},d){this._checkLoaded(),n&&this._validate(c.C.sprite,"sprite",n,null,u)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,d):(this._unloadSprite(),d&&d(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const u=this.tileManagers[n];u.setEventedParent(null),u.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const u=this._layers[n];u.setEventedParent(null),u.onRemove&&u.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var tm=c.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Zc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,u,d,v,A,E,I,R,j){this.context=n;let F=this.boundPaintVertexBuffers.length!==v.length;for(let Y=0;!F&&Y<v.length;Y++)this.boundPaintVertexBuffers[Y]!==v[Y]&&(F=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==d||F||this.boundIndexBuffer!==A||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==j?this.freshBind(u,d,v,A,E,I,R,j):(n.bindVertexArray.set(this.vao),I&&I.bind(),A&&A.dynamicDraw&&A.bind(),R&&R.bind(),j&&j.bind())}freshBind(n,u,d,v,A,E,I,R){const j=n.numAttributes,F=this.context,Y=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=v,this.boundVertexOffset=A,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=R,u.enableAttributes(Y,n);for(const X of d)X.enableAttributes(Y,n);E&&E.enableAttributes(Y,n),I&&I.enableAttributes(Y,n),R&&R.enableAttributes(Y,n),u.bind(),u.setVertexAttribPointers(Y,n,A);for(const X of d)X.bind(),X.setVertexAttribPointers(Y,n,A);E&&(E.bind(),E.setVertexAttribPointers(Y,n,A)),v&&v.bind(),I&&(I.bind(),I.setVertexAttribPointers(Y,n,A)),R&&(R.bind(),R.setVertexAttribPointers(Y,n,A)),F.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rm=(w,n,u,d,v)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:n,u_fog_color:u?u.properties.get("fog-color"):c.bp.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?0:u?u.calculateFogBlendOpacity(d):0,u_horizon_color:u?u.properties.get("horizon-color"):c.bp.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:v?1:0}),So={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function uf(w){const n=[];for(let u=0;u<w.length;u++){if(w[u]===null)continue;const d=w[u].split(" ");n.push(d.pop())}return n}class nm{constructor(n,u,d,v,A,E,I,R,j=[]){const F=n.gl;this.program=F.createProgram();const Y=uf(u.staticAttributes),X=d?d.getBinderAttributes():[],ee=Y.concat(X),ie=pn.prelude.staticUniforms?uf(pn.prelude.staticUniforms):[],fe=I.staticUniforms?uf(I.staticUniforms):[],pe=u.staticUniforms?uf(u.staticUniforms):[],de=d?d.getBinderUniforms():[],ye=ie.concat(fe).concat(pe).concat(de),Ae=[];for(const Ge of ye)Ae.indexOf(Ge)<0&&Ae.push(Ge);const ge=d?d.defines():[];Ka(F)&&ge.unshift("#version 300 es"),A&&ge.push("#define OVERDRAW_INSPECTOR;"),E&&ge.push("#define TERRAIN3D;"),R&&ge.push(R),j&&ge.push(...j);let Se=ge.concat(pn.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join(`
`),Me=ge.concat(pn.prelude.vertexSource,I.vertexSource,u.vertexSource).join(`
`);Ka(F)||(Se=(function(Ge){return Ge.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Se),Me=(function(Ge){return Ge.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Me));const _e=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);if(F.shaderSource(_e,Se),F.compileShader(_e),!F.getShaderParameter(_e,F.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${F.getShaderInfoLog(_e)}`);F.attachShader(this.program,_e);const Re=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);if(F.shaderSource(Re,Me),F.compileShader(Re),!F.getShaderParameter(Re,F.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${F.getShaderInfoLog(Re)}`);F.attachShader(this.program,Re),this.attributes={};const Ye={};this.numAttributes=ee.length;for(let Ge=0;Ge<this.numAttributes;Ge++)ee[Ge]&&(F.bindAttribLocation(this.program,Ge,ee[Ge]),this.attributes[ee[Ge]]=Ge);if(F.linkProgram(this.program),!F.getProgramParameter(this.program,F.LINK_STATUS))throw new Error(`Program failed to link: ${F.getProgramInfoLog(this.program)}`);F.deleteShader(Re),F.deleteShader(_e);for(let Ge=0;Ge<Ae.length;Ge++){const $e=Ae[Ge];if($e&&!Ye[$e]){const Xe=F.getUniformLocation(this.program,$e);Xe&&(Ye[$e]=Xe)}}this.fixedUniforms=v(n,Ye),this.terrainUniforms=((Ge,$e)=>({u_depth:new c.b_(Ge,$e.u_depth),u_terrain:new c.b_(Ge,$e.u_terrain),u_terrain_dim:new c.bq(Ge,$e.u_terrain_dim),u_terrain_matrix:new c.c0(Ge,$e.u_terrain_matrix),u_terrain_unpack:new c.c1(Ge,$e.u_terrain_unpack),u_terrain_exaggeration:new c.bq(Ge,$e.u_terrain_exaggeration)}))(n,Ye),this.projectionUniforms=((Ge,$e)=>({u_projection_matrix:new c.c0(Ge,$e.u_projection_matrix),u_projection_tile_mercator_coords:new c.c1(Ge,$e.u_projection_tile_mercator_coords),u_projection_clipping_plane:new c.c1(Ge,$e.u_projection_clipping_plane),u_projection_transition:new c.bq(Ge,$e.u_projection_transition),u_projection_fallback_matrix:new c.c0(Ge,$e.u_projection_fallback_matrix)}))(n,Ye),this.binderUniforms=d?d.getUniforms(n,Ye):[]}draw(n,u,d,v,A,E,I,R,j,F,Y,X,ee,ie,fe,pe,de,ye,Ae){const ge=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(d),n.setStencilMode(v),n.setColorMode(A),n.setCullFace(E),R){n.activeTexture.set(ge.TEXTURE2),ge.bindTexture(ge.TEXTURE_2D,R.depthTexture),n.activeTexture.set(ge.TEXTURE3),ge.bindTexture(ge.TEXTURE_2D,R.texture);for(const Me in this.terrainUniforms)this.terrainUniforms[Me].set(R[Me])}if(j)for(const Me in j)this.projectionUniforms[So[Me]].set(j[Me]);if(I)for(const Me in this.fixedUniforms)this.fixedUniforms[Me].set(I[Me]);pe&&pe.setUniforms(n,this.binderUniforms,ie,{zoom:fe});let Se=0;switch(u){case ge.LINES:Se=2;break;case ge.TRIANGLES:Se=3;break;case ge.LINE_STRIP:Se=1}for(const Me of ee.get()){const _e=Me.vaos||(Me.vaos={});(_e[F]||(_e[F]=new Zc)).bind(n,this,Y,pe?pe.getPaintVertexBuffers():[],X,Me.vertexOffset,de,ye,Ae),ge.drawElements(u,Me.primitiveLength*Se,ge.UNSIGNED_SHORT,Me.primitiveOffset*Se*2)}}}function im(w,n,u){const d=1/c.aN(u,1,n.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),A=u.tileSize*Math.pow(2,n.transform.tileZoom)/v,E=A*(u.tileID.canonical.x+u.tileID.wrap*v),I=A*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[d,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}const cf=(w,n,u,d)=>{const v=w.style.light,A=v.properties.get("position"),E=[A.x,A.y,A.z],I=c.c4();v.properties.get("anchor")==="viewport"&&c.c5(I,w.transform.bearingInRadians),c.c6(E,E,I);const R=w.transform.transformLightDirection(E),j=v.properties.get("color");return{u_lightpos:E,u_lightpos_globe:R,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+n,u_opacity:u,u_fill_translate:d}},hf=(w,n,u,d,v,A,E)=>c.e(cf(w,n,u,d),im(A,w,E),{u_height_factor:-Math.pow(2,v.overscaledZ)/E.tileSize/8}),Yl=(w,n,u,d)=>c.e(im(n,w,u),{u_fill_translate:d}),Ju=(w,n)=>({u_world:w,u_fill_translate:n}),am=(w,n,u,d,v)=>c.e(Yl(w,n,u,v),{u_world:d}),$c=(w,n,u,d,v)=>{const A=w.transform;let E,I,R=0;if(u.paint.get("circle-pitch-alignment")==="map"){const j=c.aN(n,1,A.zoom);E=!0,I=[j,j],R=j/(c.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*v}else E=!1,I=A.pixelsToGLUnits;return{u_camera_to_center_distance:A.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+E,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:R,u_translate:d}},sl=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),xd=w=>({u_viewport_size:[w.width,w.height]}),Xc=(w,n=1)=>({u_color:w,u_overlay:0,u_overlay_scale:n}),ll=(w,n,u,d)=>{const v=c.aN(w,1,n)/(c.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:c.aN(w,1,n),u_intensity:u,u_globe_extrude_scale:v}},bd=(w,n,u,d)=>{const v=c.N();c.c7(v,0,w.width,w.height,0,0,1);const A=w.context.gl;return{u_matrix:v,u_world:[A.drawingBufferWidth,A.drawingBufferHeight],u_image:u,u_color_ramp:d,u_opacity:n.paint.get("heatmap-opacity")}},Yc=(w,n,u)=>{const d=u.paint.get("hillshade-accent-color");let v;switch(u.paint.get("hillshade-method")){case"basic":v=4;break;case"combined":v=1;break;case"igor":v=2;break;case"multidirectional":v=3;break;default:v=0}const A=u.getIlluminationProperties();for(let E=0;E<A.directionRadians.length;E++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(A.directionRadians[E]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:Zg(0,n.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:A.altitudeRadians,u_azimuths:A.directionRadians,u_accent:d,u_method:v,u_highlights:A.highlightColor,u_shadows:A.shadowColor}},om=(w,n)=>{const u=n.stride,d=c.N();return c.c7(d,0,c.a5,-c.a5,0,0,1),c.O(d,d,[0,-c.a5,0]),{u_matrix:d,u_image:1,u_dimension:[u,u],u_zoom:w.overscaledZ,u_unpack:n.getUnpackVector()}};function Zg(w,n){const u=Math.pow(2,n.canonical.z),d=n.canonical.y;return[new c.a9(0,d/u).toLngLat().lat,new c.a9(0,(d+1)/u).toLngLat().lat]}const sm=(w,n,u=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:w.paint.get("color-relief-opacity")}),Wc=(w,n,u,d)=>{const v=w.transform;return{u_translation:Kc(w,n,u),u_ratio:d/c.aN(n,1,v.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},lm=(w,n,u,d,v)=>c.e(Wc(w,n,u,d),{u_image:0,u_image_height:v}),wd=(w,n,u,d,v)=>{const A=w.transform,E=Qa(n,A);return{u_translation:Kc(w,n,u),u_texsize:n.imageAtlasTexture.size,u_ratio:d/c.aN(n,1,A.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[E,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/A.pixelsToGLUnits[0],1/A.pixelsToGLUnits[1]]}},ua=(w,n,u,d,v)=>{const A=Qa(n,w.transform);return c.e(Wc(w,n,u,d),{u_tileratio:A,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image:0,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},ul=(w,n,u,d,v,A)=>{const E=Qa(n,w.transform);return c.e(Wc(w,n,u,d),{u_image:0,u_image_height:A,u_tileratio:E,u_crossfade_from:v.fromScale,u_crossfade_to:v.toScale,u_image_dash:1,u_mix:v.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function Qa(w,n){return 1/c.aN(w,1,n.tileZoom)}function Kc(w,n,u){return c.aO(w.transform,n,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ff=(w,n,u,d,v)=>{return{u_tl_parent:w,u_scale_parent:n,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(E=d.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(A=d.paint.get("raster-contrast"),A>0?1/(1-A):1+A),u_spin_weights:df(d.paint.get("raster-hue-rotate")),u_coords_top:[v[0].x,v[0].y,v[1].x,v[1].y],u_coords_bottom:[v[3].x,v[3].y,v[2].x,v[2].y]};var A,E};function df(w){w*=Math.PI/180;const n=Math.sin(w),u=Math.cos(w);return[(2*u+1)/3,(-Math.sqrt(3)*n-u+1)/3,(Math.sqrt(3)*n-u+1)/3]}const Qc=(w,n,u,d,v,A,E,I,R,j,F,Y,X)=>{const ee=E.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ee.width/ee.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:R,u_is_text:+F,u_pitch_with_map:+d,u_is_along_line:v,u_is_variable_anchor:A,u_texsize:Y,u_texture:0,u_translation:j,u_pitched_scale:X}},pf=(w,n,u,d,v,A,E,I,R,j,F,Y,X,ee)=>{const ie=E.transform;return c.e(Qc(w,n,u,d,v,A,E,I,R,j,F,Y,ee),{u_gamma_scale:d?Math.cos(ie.pitch*Math.PI/180)*ie.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},Ja=(w,n,u,d,v,A,E,I,R,j,F,Y,X)=>c.e(pf(w,n,u,d,v,A,E,I,R,j,!0,F,0,X),{u_texsize_icon:Y,u_texture_icon:1}),Jc=(w,n)=>({u_opacity:w,u_color:n}),eh=(w,n,u,d,v)=>c.e((function(A,E,I,R){const j=I.imageManager.getPattern(A.from.toString()),F=I.imageManager.getPattern(A.to.toString()),{width:Y,height:X}=I.imageManager.getPixelSize(),ee=Math.pow(2,R.tileID.overscaledZ),ie=R.tileSize*Math.pow(2,I.transform.tileZoom)/ee,fe=ie*(R.tileID.canonical.x+R.tileID.wrap*ee),pe=ie*R.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[Y,X],u_mix:E.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/c.aN(R,1,I.transform.tileZoom),u_pixel_coord_upper:[fe>>16,pe>>16],u_pixel_coord_lower:[65535&fe,65535&pe]}})(u,v,n,d),{u_opacity:w}),mf=(w,n)=>{},um={fillExtrusion:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillExtrusionPattern:(w,n)=>({u_lightpos:new c.c2(w,n.u_lightpos),u_lightpos_globe:new c.c2(w,n.u_lightpos_globe),u_lightintensity:new c.bq(w,n.u_lightintensity),u_lightcolor:new c.c2(w,n.u_lightcolor),u_vertical_gradient:new c.bq(w,n.u_vertical_gradient),u_height_factor:new c.bq(w,n.u_height_factor),u_opacity:new c.bq(w,n.u_opacity),u_fill_translate:new c.c3(w,n.u_fill_translate),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),fill:(w,n)=>({u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillPattern:(w,n)=>({u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutline:(w,n)=>({u_world:new c.c3(w,n.u_world),u_fill_translate:new c.c3(w,n.u_fill_translate)}),fillOutlinePattern:(w,n)=>({u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_texsize:new c.c3(w,n.u_texsize),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade),u_fill_translate:new c.c3(w,n.u_fill_translate)}),circle:(w,n)=>({u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_scale_with_map:new c.b_(w,n.u_scale_with_map),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_extrude_scale:new c.c3(w,n.u_extrude_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale),u_translate:new c.c3(w,n.u_translate)}),collisionBox:(w,n)=>({u_pixel_extrude_scale:new c.c3(w,n.u_pixel_extrude_scale)}),collisionCircle:(w,n)=>({u_viewport_size:new c.c3(w,n.u_viewport_size)}),debug:(w,n)=>({u_color:new c.b$(w,n.u_color),u_overlay:new c.b_(w,n.u_overlay),u_overlay_scale:new c.bq(w,n.u_overlay_scale)}),depth:mf,clippingMask:mf,heatmap:(w,n)=>({u_extrude_scale:new c.bq(w,n.u_extrude_scale),u_intensity:new c.bq(w,n.u_intensity),u_globe_extrude_scale:new c.bq(w,n.u_globe_extrude_scale)}),heatmapTexture:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_world:new c.c3(w,n.u_world),u_image:new c.b_(w,n.u_image),u_color_ramp:new c.b_(w,n.u_color_ramp),u_opacity:new c.bq(w,n.u_opacity)}),hillshade:(w,n)=>({u_image:new c.b_(w,n.u_image),u_latrange:new c.c3(w,n.u_latrange),u_exaggeration:new c.bq(w,n.u_exaggeration),u_altitudes:new c.c9(w,n.u_altitudes),u_azimuths:new c.c9(w,n.u_azimuths),u_accent:new c.b$(w,n.u_accent),u_method:new c.b_(w,n.u_method),u_shadows:new c.c8(w,n.u_shadows),u_highlights:new c.c8(w,n.u_highlights)}),hillshadePrepare:(w,n)=>({u_matrix:new c.c0(w,n.u_matrix),u_image:new c.b_(w,n.u_image),u_dimension:new c.c3(w,n.u_dimension),u_zoom:new c.bq(w,n.u_zoom),u_unpack:new c.c1(w,n.u_unpack)}),colorRelief:(w,n)=>({u_image:new c.b_(w,n.u_image),u_unpack:new c.c1(w,n.u_unpack),u_dimension:new c.c3(w,n.u_dimension),u_elevation_stops:new c.b_(w,n.u_elevation_stops),u_color_stops:new c.b_(w,n.u_color_stops),u_color_ramp_size:new c.b_(w,n.u_color_ramp_size),u_opacity:new c.bq(w,n.u_opacity)}),line:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels)}),lineGradient:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height)}),linePattern:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_texsize:new c.c3(w,n.u_texsize),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_image:new c.b_(w,n.u_image),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_scale:new c.c2(w,n.u_scale),u_fade:new c.bq(w,n.u_fade)}),lineSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_mix:new c.bq(w,n.u_mix),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),lineGradientSDF:(w,n)=>({u_translation:new c.c3(w,n.u_translation),u_ratio:new c.bq(w,n.u_ratio),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_units_to_pixels:new c.c3(w,n.u_units_to_pixels),u_image:new c.b_(w,n.u_image),u_image_height:new c.bq(w,n.u_image_height),u_tileratio:new c.bq(w,n.u_tileratio),u_crossfade_from:new c.bq(w,n.u_crossfade_from),u_crossfade_to:new c.bq(w,n.u_crossfade_to),u_image_dash:new c.b_(w,n.u_image_dash),u_mix:new c.bq(w,n.u_mix),u_lineatlas_width:new c.bq(w,n.u_lineatlas_width),u_lineatlas_height:new c.bq(w,n.u_lineatlas_height)}),raster:(w,n)=>({u_tl_parent:new c.c3(w,n.u_tl_parent),u_scale_parent:new c.bq(w,n.u_scale_parent),u_buffer_scale:new c.bq(w,n.u_buffer_scale),u_fade_t:new c.bq(w,n.u_fade_t),u_opacity:new c.bq(w,n.u_opacity),u_image0:new c.b_(w,n.u_image0),u_image1:new c.b_(w,n.u_image1),u_brightness_low:new c.bq(w,n.u_brightness_low),u_brightness_high:new c.bq(w,n.u_brightness_high),u_saturation_factor:new c.bq(w,n.u_saturation_factor),u_contrast_factor:new c.bq(w,n.u_contrast_factor),u_spin_weights:new c.c2(w,n.u_spin_weights),u_coords_top:new c.c1(w,n.u_coords_top),u_coords_bottom:new c.c1(w,n.u_coords_bottom)}),symbolIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolSDF:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texture:new c.b_(w,n.u_texture),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),symbolTextAndIcon:(w,n)=>({u_is_size_zoom_constant:new c.b_(w,n.u_is_size_zoom_constant),u_is_size_feature_constant:new c.b_(w,n.u_is_size_feature_constant),u_size_t:new c.bq(w,n.u_size_t),u_size:new c.bq(w,n.u_size),u_camera_to_center_distance:new c.bq(w,n.u_camera_to_center_distance),u_pitch:new c.bq(w,n.u_pitch),u_rotate_symbol:new c.b_(w,n.u_rotate_symbol),u_aspect_ratio:new c.bq(w,n.u_aspect_ratio),u_fade_change:new c.bq(w,n.u_fade_change),u_label_plane_matrix:new c.c0(w,n.u_label_plane_matrix),u_coord_matrix:new c.c0(w,n.u_coord_matrix),u_is_text:new c.b_(w,n.u_is_text),u_pitch_with_map:new c.b_(w,n.u_pitch_with_map),u_is_along_line:new c.b_(w,n.u_is_along_line),u_is_variable_anchor:new c.b_(w,n.u_is_variable_anchor),u_texsize:new c.c3(w,n.u_texsize),u_texsize_icon:new c.c3(w,n.u_texsize_icon),u_texture:new c.b_(w,n.u_texture),u_texture_icon:new c.b_(w,n.u_texture_icon),u_gamma_scale:new c.bq(w,n.u_gamma_scale),u_device_pixel_ratio:new c.bq(w,n.u_device_pixel_ratio),u_is_halo:new c.b_(w,n.u_is_halo),u_translation:new c.c3(w,n.u_translation),u_pitched_scale:new c.bq(w,n.u_pitched_scale)}),background:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_color:new c.b$(w,n.u_color)}),backgroundPattern:(w,n)=>({u_opacity:new c.bq(w,n.u_opacity),u_image:new c.b_(w,n.u_image),u_pattern_tl_a:new c.c3(w,n.u_pattern_tl_a),u_pattern_br_a:new c.c3(w,n.u_pattern_br_a),u_pattern_tl_b:new c.c3(w,n.u_pattern_tl_b),u_pattern_br_b:new c.c3(w,n.u_pattern_br_b),u_texsize:new c.c3(w,n.u_texsize),u_mix:new c.bq(w,n.u_mix),u_pattern_size_a:new c.c3(w,n.u_pattern_size_a),u_pattern_size_b:new c.c3(w,n.u_pattern_size_b),u_scale_a:new c.bq(w,n.u_scale_a),u_scale_b:new c.bq(w,n.u_scale_b),u_pixel_coord_upper:new c.c3(w,n.u_pixel_coord_upper),u_pixel_coord_lower:new c.c3(w,n.u_pixel_coord_lower),u_tile_units_to_pixels:new c.bq(w,n.u_tile_units_to_pixels)}),terrain:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_ele_delta:new c.bq(w,n.u_ele_delta),u_fog_matrix:new c.c0(w,n.u_fog_matrix),u_fog_color:new c.b$(w,n.u_fog_color),u_fog_ground_blend:new c.bq(w,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new c.bq(w,n.u_fog_ground_blend_opacity),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon_fog_blend:new c.bq(w,n.u_horizon_fog_blend),u_is_globe_mode:new c.bq(w,n.u_is_globe_mode)}),terrainDepth:(w,n)=>({u_ele_delta:new c.bq(w,n.u_ele_delta)}),terrainCoords:(w,n)=>({u_texture:new c.b_(w,n.u_texture),u_terrain_coords_id:new c.bq(w,n.u_terrain_coords_id),u_ele_delta:new c.bq(w,n.u_ele_delta)}),projectionErrorMeasurement:(w,n)=>({u_input:new c.bq(w,n.u_input),u_output_expected:new c.bq(w,n.u_output_expected)}),atmosphere:(w,n)=>({u_sun_pos:new c.c2(w,n.u_sun_pos),u_atmosphere_blend:new c.bq(w,n.u_atmosphere_blend),u_globe_position:new c.c2(w,n.u_globe_position),u_globe_radius:new c.bq(w,n.u_globe_radius),u_inv_proj_matrix:new c.c0(w,n.u_inv_proj_matrix)}),sky:(w,n)=>({u_sky_color:new c.b$(w,n.u_sky_color),u_horizon_color:new c.b$(w,n.u_horizon_color),u_horizon:new c.c3(w,n.u_horizon),u_horizon_normal:new c.c3(w,n.u_horizon_normal),u_sky_horizon_blend:new c.bq(w,n.u_sky_horizon_blend),u_sky_blend:new c.bq(w,n.u_sky_blend)})};class Wl{constructor(n,u,d){this.context=n;const v=n.gl;this.buffer=v.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kl={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Sd{constructor(n,u,d,v){this.length=u.length,this.attributes=d,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=n;const A=n.gl;this.buffer=A.createBuffer(),n.bindVertexBuffer.set(this.buffer),A.bufferData(A.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?A.DYNAMIC_DRAW:A.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,u){for(let d=0;d<this.attributes.length;d++){const v=u.attributes[this.attributes[d].name];v!==void 0&&n.enableVertexAttribArray(v)}}setVertexAttribPointers(n,u,d){for(let v=0;v<this.attributes.length;v++){const A=this.attributes[v],E=u.attributes[A.name];E!==void 0&&n.vertexAttribPointer(E,A.components,n[Kl[A.type]],!1,this.itemSize,A.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dr{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qo extends Dr{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class th extends Dr{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class rh extends Dr{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class gf extends Dr{getDefault(){return[!0,!0,!0,!0]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ql extends Dr{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class nh extends Dr{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class ec extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const u=this.current;(n.func!==u.func||n.ref!==u.ref||n.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Ia extends Dr{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Ad extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=n,this.dirty=!1}}class yf extends Dr{getDefault(){return[0,1]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class Oa extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=n,this.dirty=!1}}class Jo extends Dr{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class ea extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.BLEND):u.disable(u.BLEND),this.current=n,this.dirty=!1}}class Es extends Dr{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class Jl extends Dr{getDefault(){return c.bp.transparent}set(n){const u=this.current;(n.r!==u.r||n.g!==u.g||n.b!==u.b||n.a!==u.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class eu extends Dr{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class ih extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;n?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=n,this.dirty=!1}}class cl extends Dr{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class eo extends Dr{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class Td extends Dr{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class tc extends Dr{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class hr extends Dr{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const u=this.current;(n[0]!==u[0]||n[1]!==u[1]||n[2]!==u[2]||n[3]!==u[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class vf extends Dr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class za extends Dr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class _f extends Dr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class ka extends Dr{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class cm extends Dr{getDefault(){return null}set(n){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class xf extends Dr{getDefault(){return null}set(n){var u;if(n===this.current&&!this.dirty)return;const d=this.gl;Ka(d)?d.bindVertexArray(n):(u=d.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class hl extends Dr{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Ed extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class bf extends Dr{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class fl extends Dr{constructor(n,u){super(n),this.context=n,this.parent=u}getDefault(){return null}}class rc extends fl{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class ta extends fl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class dl extends fl{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const pl="Framebuffer is not complete";class tu{constructor(n,u,d,v,A){this.context=n,this.width=u,this.height=d;const E=n.gl,I=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new rc(n,I),v)this.depthAttachment=A?new dl(n,I):new ta(n,I);else if(A)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error(pl)}destroy(){const n=this.context.gl,u=this.colorAttachment.get();if(u&&n.deleteTexture(u),this.depthAttachment){const d=this.depthAttachment.get();d&&n.deleteRenderbuffer(d)}n.deleteFramebuffer(this.framebuffer)}}class ml{constructor(n){var u,d;if(this.gl=n,this.clearColor=new Qo(this),this.clearDepth=new th(this),this.clearStencil=new rh(this),this.colorMask=new gf(this),this.depthMask=new Ql(this),this.stencilMask=new nh(this),this.stencilFunc=new ec(this),this.stencilOp=new Ia(this),this.stencilTest=new Ad(this),this.depthRange=new yf(this),this.depthTest=new Oa(this),this.depthFunc=new Jo(this),this.blend=new ea(this),this.blendFunc=new Es(this),this.blendColor=new Jl(this),this.blendEquation=new eu(this),this.cullFace=new ih(this),this.cullFaceSide=new cl(this),this.frontFace=new eo(this),this.program=new Td(this),this.activeTexture=new tc(this),this.viewport=new hr(this),this.bindFramebuffer=new vf(this),this.bindRenderbuffer=new za(this),this.bindTexture=new _f(this),this.bindVertexBuffer=new ka(this),this.bindElementBuffer=new cm(this),this.bindVertexArray=new xf(this),this.pixelStoreUnpack=new hl(this),this.pixelStoreUnpackPremultiplyAlpha=new Ed(this),this.pixelStoreUnpackFlipY=new bf(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ka(n)){this.HALF_FLOAT=n.HALF_FLOAT;const v=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=n.RGBA16F)!==null&&u!==void 0?u:v?.RGBA16F_EXT,this.RGB16F=(d=n.RGB16F)!==null&&d!==void 0?d:v?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const v=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=v?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,u){return new Wl(this,n,u)}createVertexBuffer(n,u,d){return new Sd(this,n,u,d)}createRenderbuffer(n,u,d){const v=this.gl,A=v.createRenderbuffer();return this.bindRenderbuffer.set(A),v.renderbufferStorage(v.RENDERBUFFER,n,u,d),this.bindRenderbuffer.set(null),A}createFramebuffer(n,u,d,v){return new tu(this,n,u,d,v)}clear({color:n,depth:u,stencil:d}){const v=this.gl;let A=0;n&&(A|=v.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(A|=v.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),d!==void 0&&(A|=v.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),v.clear(A)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){c.bR(n.blendFunction,qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ka(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var u;return Ka(this.gl)?this.gl.deleteVertexArray(n):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let hi;function yi(w,n,u,d,v){const A=w.context,E=w.transform,I=A.gl,R=w.useProgram("collisionBox"),j=[];let F=0,Y=0;for(let de=0;de<d.length;de++){const ye=d[de],Ae=n.getTile(ye).getBucket(u);if(!Ae)continue;const ge=v?Ae.textCollisionBox:Ae.iconCollisionBox,Se=Ae.collisionCircleArray;Se.length>0&&(j.push({circleArray:Se,circleOffset:Y,coord:ye}),F+=Se.length/4,Y=F),ge&&R.draw(A,I.LINES,cr.disabled,Ar.disabled,w.colorModeForRenderPass(),yr.disabled,sl(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(ye),E.getProjectionData({overscaledTileID:ye,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,null,w.transform.zoom,null,null,ge.collisionVertexBuffer)}if(!v||!j.length)return;const X=w.useProgram("collisionCircle"),ee=new c.ca;ee.resize(4*F),ee._trim();let ie=0;for(const de of j)for(let ye=0;ye<de.circleArray.length/4;ye++){const Ae=4*ye,ge=de.circleArray[Ae+0],Se=de.circleArray[Ae+1],Me=de.circleArray[Ae+2],_e=de.circleArray[Ae+3];ee.emplace(ie++,ge,Se,Me,_e,0),ee.emplace(ie++,ge,Se,Me,_e,1),ee.emplace(ie++,ge,Se,Me,_e,2),ee.emplace(ie++,ge,Se,Me,_e,3)}(!hi||hi.length<2*F)&&(hi=(function(de){const ye=2*de,Ae=new c.cc;Ae.resize(ye),Ae._trim();for(let ge=0;ge<ye;ge++){const Se=6*ge;Ae.uint16[Se+0]=4*ge+0,Ae.uint16[Se+1]=4*ge+1,Ae.uint16[Se+2]=4*ge+2,Ae.uint16[Se+3]=4*ge+2,Ae.uint16[Se+4]=4*ge+3,Ae.uint16[Se+5]=4*ge+0}return Ae})(F));const fe=A.createIndexBuffer(hi,!0),pe=A.createVertexBuffer(ee,c.cb.members,!0);for(const de of j){const ye=xd(w.transform);X.draw(A,I.TRIANGLES,cr.disabled,Ar.disabled,w.colorModeForRenderPass(),yr.disabled,ye,w.style.map.terrain&&w.style.map.terrain.getTerrainData(de.coord),null,u.id,pe,fe,c.aX.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,w.transform.zoom,null,null,null)}pe.destroy(),fe.destroy()}const es=c.ar(new Float32Array(16));function ts(w,n,u,d,v,A){const{horizontalAlign:E,verticalAlign:I}=c.aS(w);return new c.P((-(E-.5)*n/v+d[0])*A,(-(I-.5)*u/v+d[1])*A)}function ca(w,n,u,d,v,A){const E=n.tileAnchorPoint.add(new c.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let I=d.mult(A);u||(I=I.rotate(-v));const R=E.add(I);return lr(R.x,R.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(u){const I=Sr(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(w),R=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return w.add(d.rotate(R))}return w.add(d)}function Ms(w,n,u,d,v,A,E,I,R,j,F,Y){const X=w.text.placedSymbolArray,ee=w.text.dynamicLayoutVertexArray,ie=w.icon.dynamicLayoutVertexArray,fe={};ee.clear();for(let pe=0;pe<X.length;pe++){const de=X.get(pe),ye=de.hidden||!de.crossTileID||w.allowVerticalPlacement&&!de.placedOrientation?null:d[de.crossTileID];if(ye){const Ae=new c.P(de.anchorX,de.anchorY),ge={getElevation:Y,width:v.width,height:v.height,pitchedLabelPlaneMatrix:A,pitchWithMap:u,transform:v,tileAnchorPoint:Ae,translation:j,unwrappedTileID:F},Se=u?Vu(Ae.x,Ae.y,ge):Sr(Ae.x,Ae.y,ge),Me=Fl(v.cameraToCenterDistance,Se.signedDistanceFromCamera);let _e=c.aA(w.textSizeData,I,de)*Me/c.aM;u&&(_e*=w.tilePixelRatio/E);const{width:Re,height:Ye,anchor:Ge,textOffset:$e,textBoxScale:Xe}=ye,St=ts(Ge,Re,Ye,$e,Xe,_e),At=v.getPitchedTextCorrection(Ae.x+j[0],Ae.y+j[1],F),ft=ca(Se.point,ge,n,St,-v.bearingInRadians,At),Mt=w.allowVerticalPlacement&&de.placedOrientation===c.az.vertical?Math.PI/2:0;for(let or=0;or<de.numGlyphs;or++)c.aG(ee,ft,Mt);R&&de.associatedIconIndex>=0&&(fe[de.associatedIconIndex]={shiftedAnchor:ft,angle:Mt})}else Yo(de.numGlyphs,ee)}if(R){ie.clear();const pe=w.icon.placedSymbolArray;for(let de=0;de<pe.length;de++){const ye=pe.get(de);if(ye.hidden)Yo(ye.numGlyphs,ie);else{const Ae=fe[de];if(Ae)for(let ge=0;ge<ye.numGlyphs;ge++)c.aG(ie,Ae.shiftedAnchor,Ae.angle);else Yo(ye.numGlyphs,ie)}}w.icon.dynamicLayoutVertexBuffer.updateData(ie)}w.text.dynamicLayoutVertexBuffer.updateData(ee)}function Md(w,n,u){return u.iconsInText&&n?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function ru(w,n,u,d,v,A,E,I,R,j,F,Y,X){const ee=w.context,ie=ee.gl,fe=w.transform,pe=I==="map",de=R==="map",ye=I!=="viewport"&&u.layout.get("symbol-placement")!=="point",Ae=pe&&!de&&!ye,ge=!u.layout.get("symbol-sort-key").isConstant();let Se=!1;const Me=w.getDepthModeForSublayer(0,cr.ReadOnly),_e=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Re=[],Ye=fe.getCircleRadiusCorrection();for(const Ge of d){const $e=n.getTile(Ge),Xe=$e.getBucket(u);if(!Xe)continue;const St=v?Xe.text:Xe.icon;if(!St||!St.segments.get().length||!St.hasVisibleVertices)continue;const At=St.programConfigurations.get(u.id),ft=v||Xe.sdfIcons,Mt=v?Xe.textSizeData:Xe.iconSizeData,or=de||fe.pitch!==0,Lr=w.useProgram(Md(ft,v,Xe),At),an=c.ay(Mt,fe.zoom),Qr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ge);let fn,Hr,An,dn,_i=[0,0],On=null;if(v)Hr=$e.glyphAtlasTexture,An=ie.LINEAR,fn=$e.glyphAtlasTexture.size,Xe.iconsInText&&(_i=$e.imageAtlasTexture.size,On=$e.imageAtlasTexture,dn=or||w.options.rotating||w.options.zooming||Mt.kind==="composite"||Mt.kind==="camera"?ie.LINEAR:ie.NEAREST);else{const Ur=u.layout.get("icon-size").constantOr(0)!==1||Xe.iconsNeedLinear;Hr=$e.imageAtlasTexture,An=ft||w.options.rotating||w.options.zooming||Ur||or?ie.LINEAR:ie.NEAREST,fn=$e.imageAtlasTexture.size}const zn=c.aN($e,1,w.transform.zoom),xi=Pa(pe,w.transform,zn),ps=c.N();c.aB(ps,xi);const ms=nf(de,pe,w.transform,zn),Do=c.aO(fe,$e,A,E),pa=fe.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!X,applyTerrainMatrix:!0}),hu=_e&&Xe.hasTextData(),fc=u.layout.get("icon-text-fit")!=="none"&&hu&&Xe.hasIconData();if(ye){const Ur=w.style.map.terrain?(Wn,ri)=>w.style.map.terrain.getElevation(Ge,Wn,ri):null,Jr=u.layout.get("text-rotation-alignment")==="map";Ss(Xe,w,v,xi,ps,de,j,Jr,Ge.toUnwrapped(),fe.width,fe.height,Do,Ur)}const Io=v&&_e||fc,ma=ye||Io?es:de?xi:w.transform.clipSpaceToPixelsMatrix,Na=ft&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oo;oo=ft?Xe.iconsInText?Ja(Mt.kind,an,Ae,de,ye,Io,w,ma,ms,Do,fn,_i,Ye):pf(Mt.kind,an,Ae,de,ye,Io,w,ma,ms,Do,v,fn,0,Ye):Qc(Mt.kind,an,Ae,de,ye,Io,w,ma,ms,Do,v,fn,Ye);const so={program:Lr,buffers:St,uniformValues:oo,projectionData:pa,atlasTexture:Hr,atlasTextureIcon:On,atlasInterpolation:An,atlasInterpolationIcon:dn,isSDF:ft,hasHalo:Na};if(ge&&Xe.canOverlap){Se=!0;const Ur=St.segments.get();for(const Jr of Ur)Re.push({segments:new c.aX([Jr]),sortKey:Jr.sortKey,state:so,terrainData:Qr})}else Re.push({segments:St.segments,sortKey:0,state:so,terrainData:Qr})}Se&&Re.sort(((Ge,$e)=>Ge.sortKey-$e.sortKey));for(const Ge of Re){const $e=Ge.state;if(ee.activeTexture.set(ie.TEXTURE0),$e.atlasTexture.bind($e.atlasInterpolation,ie.CLAMP_TO_EDGE),$e.atlasTextureIcon&&(ee.activeTexture.set(ie.TEXTURE1),$e.atlasTextureIcon&&$e.atlasTextureIcon.bind($e.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),$e.isSDF){const Xe=$e.uniformValues;$e.hasHalo&&(Xe.u_is_halo=1,nc($e.buffers,Ge.segments,u,w,$e.program,Me,F,Y,Xe,$e.projectionData,Ge.terrainData)),Xe.u_is_halo=0}nc($e.buffers,Ge.segments,u,w,$e.program,Me,F,Y,$e.uniformValues,$e.projectionData,Ge.terrainData)}}function nc(w,n,u,d,v,A,E,I,R,j,F){const Y=d.context;v.draw(Y,Y.gl.TRIANGLES,A,E,I,yr.backCCW,R,F,j,u.id,w.layoutVertexBuffer,w.indexBuffer,n,u.paint,d.transform.zoom,w.programConfigurations.get(u.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Pd(w,n,u,d,v){const A=w.context,E=A.gl,I=Ar.disabled,R=new qr([E.ONE,E.ONE],c.bp.transparent,[!0,!0,!0,!0]),j=n.getBucket(u);if(!j)return;const F=d.key;let Y=u.heatmapFbos.get(F);Y||(Y=Kr(A,n.tileSize,n.tileSize),u.heatmapFbos.set(F,Y)),A.bindFramebuffer.set(Y.framebuffer),A.viewport.set([0,0,n.tileSize,n.tileSize]),A.clear({color:c.bp.transparent});const X=j.programConfigurations.get(u.id),ee=w.useProgram("heatmap",X,!v),ie=w.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),fe=w.style.map.terrain.getTerrainData(d);ee.draw(A,E.TRIANGLES,cr.disabled,I,R,yr.disabled,ll(n,w.transform.zoom,u.paint.get("heatmap-intensity"),1),fe,ie,u.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,u.paint,w.transform.zoom,X)}function vi(w,n,u,d,v){const A=w.context,E=A.gl,I=w.transform;A.setColorMode(w.colorModeForRenderPass());const R=br(A,n),j=u.key,F=n.heatmapFbos.get(j);if(!F)return;A.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,F.colorAttachment.get()),A.activeTexture.set(E.TEXTURE1),R.bind(E.LINEAR,E.CLAMP_TO_EDGE);const Y=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:v,applyGlobeMatrix:!d});w.useProgram("heatmapTexture").draw(A,E.TRIANGLES,cr.disabled,Ar.disabled,w.colorModeForRenderPass(),yr.disabled,bd(w,n,0,1),null,Y,n.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,n.paint,I.zoom),F.destroy(),n.heatmapFbos.delete(j)}function Kr(w,n,u){var d,v;const A=w.gl,E=A.createTexture();A.bindTexture(A.TEXTURE_2D,E),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.LINEAR),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.LINEAR);const I=(d=w.HALF_FLOAT)!==null&&d!==void 0?d:A.UNSIGNED_BYTE,R=(v=w.RGBA16F)!==null&&v!==void 0?v:A.RGBA;A.texImage2D(A.TEXTURE_2D,0,R,n,u,0,A.RGBA,I,null);const j=w.createFramebuffer(n,u,!1,!1);return j.colorAttachment.set(E),j}function br(w,n){return n.colorRampTexture||(n.colorRampTexture=new c.T(w,n.colorRamp,w.gl.RGBA)),n.colorRampTexture}function Ps(w,n,u,d,v,A,E,I){let R=256;if(v.stepInterpolant){const j=n.getSource().maxzoom,F=E.canonical.z===j?Math.ceil(1<<w.transform.maxZoom-E.canonical.z):1;R=c.an(c.ce(A.maxLineLength/c.a5*1024*F),256,u.maxTextureSize)}return I.gradient=c.cf({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:R,image:I.gradient||void 0,clips:A.lineClipsArray}),I.texture?I.texture.update(I.gradient):I.texture=new c.T(u,I.gradient,d.RGBA),I.version=v.gradientVersion,I.texture}function Ra(w,n,u,d,v){w.activeTexture.set(n.TEXTURE0),u.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),d.updatePaintBuffers(v)}function wn(w,n,u,d,v,A){(v||w.lineAtlas.dirty)&&(n.activeTexture.set(u.TEXTURE0),w.lineAtlas.bind(n)),d.updatePaintBuffers(A)}function ha(w,n,u,d,v,A,E){const I=A.gradients[v.id];let R=I.texture;v.gradientVersion!==I.version&&(R=Ps(w,n,u,d,v,A,E,I)),u.activeTexture.set(d.TEXTURE0),R.bind(v.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE)}function fa(w,n,u,d,v,A,E,I,R){const j=A.gradients[v.id];let F=j.texture;v.gradientVersion!==j.version&&(F=Ps(w,n,u,d,v,A,E,j)),u.activeTexture.set(d.TEXTURE0),F.bind(v.stepInterpolant?d.NEAREST:d.LINEAR,d.CLAMP_TO_EDGE),u.activeTexture.set(d.TEXTURE1),w.lineAtlas.bind(u),I.updatePaintBuffers(R)}function ah(w,n,u,d,v){if(!u||!d||!d.imageAtlas)return;const A=d.imageAtlas.patternPositions;let E=A[u.to.toString()],I=A[u.from.toString()];if(!E&&I&&(E=I),!I&&E&&(I=E),!E||!I){const R=v.getPaintProperty(n);E=A[R],I=A[R]}E&&I&&w.setConstantPatternPositions(E,I)}function rs(w,n,u,d,v,A,E,I){const R=w.context.gl,j="fill-pattern",F=u.paint.get(j),Y=F&&F.constantOr(1),X=u.getCrossfadeParameters();let ee,ie,fe,pe,de;const ye=w.transform,Ae=u.paint.get("fill-translate"),ge=u.paint.get("fill-translate-anchor");E?(ie=Y&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=R.LINES):(ie=Y?"fillPattern":"fill",ee=R.TRIANGLES);const Se=F.constantOr(null);for(const Me of d){const _e=n.getTile(Me);if(Y&&!_e.patternsLoaded())continue;const Re=_e.getBucket(u);if(!Re)continue;const Ye=Re.programConfigurations.get(u.id),Ge=w.useProgram(ie,Ye),$e=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me);Y&&(w.context.activeTexture.set(R.TEXTURE0),_e.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),Ye.updatePaintBuffers(X)),ah(Ye,j,Se,_e,u);const Xe=ye.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),St=c.aO(ye,_e,Ae,ge);if(E){pe=Re.indexBuffer2,de=Re.segments2;const ft=[R.drawingBufferWidth,R.drawingBufferHeight];fe=ie==="fillOutlinePattern"&&Y?am(w,X,_e,ft,St):Ju(ft,St)}else pe=Re.indexBuffer,de=Re.segments,fe=Y?Yl(w,X,_e,St):{u_fill_translate:St};const At=w.stencilModeForClipping(Me);Ge.draw(w.context,ee,v,At,A,yr.backCCW,fe,$e,Xe,u.id,Re.layoutVertexBuffer,pe,de,u.paint,w.transform.zoom,Ye)}}function ns(w,n,u,d,v,A,E,I){const R=w.context,j=R.gl,F="fill-extrusion-pattern",Y=u.paint.get(F),X=Y.constantOr(1),ee=u.getCrossfadeParameters(),ie=u.paint.get("fill-extrusion-opacity"),fe=Y.constantOr(null),pe=w.transform;for(const de of d){const ye=n.getTile(de),Ae=ye.getBucket(u);if(!Ae)continue;const ge=w.style.map.terrain&&w.style.map.terrain.getTerrainData(de),Se=Ae.programConfigurations.get(u.id),Me=w.useProgram(X?"fillExtrusionPattern":"fillExtrusion",Se);X&&(w.context.activeTexture.set(j.TEXTURE0),ye.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),Se.updatePaintBuffers(ee));const _e=pe.getProjectionData({overscaledTileID:de,applyGlobeMatrix:!I,applyTerrainMatrix:!0});ah(Se,F,fe,ye,u);const Re=c.aO(pe,ye,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Ye=u.paint.get("fill-extrusion-vertical-gradient"),Ge=X?hf(w,Ye,ie,Re,de,ee,ye):cf(w,Ye,ie,Re);Me.draw(R,R.gl.TRIANGLES,v,A,E,yr.backCCW,Ge,ge,_e,u.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,u.paint,w.transform.zoom,Se,w.style.map.terrain&&Ae.centroidVertexBuffer)}}function is(w,n,u,d,v,A,E,I,R){var j;const F=w.style.projection,Y=w.context,X=w.transform,ee=Y.gl,ie=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],fe=w.useProgram("hillshade",null,!1,ie),pe=!w.options.moving;for(const de of d){const ye=n.getTile(de),Ae=ye.fbo;if(!Ae)continue;const ge=F.getMeshFromTileID(Y,de.canonical,I,!0,"raster"),Se=(j=w.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(de);Y.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,Ae.colorAttachment.get());const Me=X.getProjectionData({overscaledTileID:de,aligned:pe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});fe.draw(Y,ee.TRIANGLES,A,v[de.overscaledZ],E,yr.backCCW,Yc(w,ye,u),Se,Me,u.id,ge.vertexBuffer,ge.indexBuffer,ge.segments)}}function Cs(w,n,u,d,v,A,E,I,R){var j;const F=w.style.projection,Y=w.context,X=w.transform,ee=Y.gl,ie=w.useProgram("colorRelief"),fe=!w.options.moving;let pe=!0,de=0;for(const ye of d){const Ae=n.getTile(ye),ge=Ae.dem;if(pe){const Ge=ee.getParameter(ee.MAX_TEXTURE_SIZE),{elevationTexture:$e,colorTexture:Xe}=u.getColorRampTextures(Y,Ge,ge.getUnpackVector());Y.activeTexture.set(ee.TEXTURE1),$e.bind(ee.NEAREST,ee.CLAMP_TO_EDGE),Y.activeTexture.set(ee.TEXTURE4),Xe.bind(ee.LINEAR,ee.CLAMP_TO_EDGE),pe=!1,de=$e.size[0]}if(!ge||!ge.data)continue;const Se=ge.stride,Me=ge.getPixels();if(Y.activeTexture.set(ee.TEXTURE0),Y.pixelStoreUnpackPremultiplyAlpha.set(!1),Ae.demTexture=Ae.demTexture||w.getTileTexture(Se),Ae.demTexture){const Ge=Ae.demTexture;Ge.update(Me,{premultiply:!1}),Ge.bind(ee.LINEAR,ee.CLAMP_TO_EDGE)}else Ae.demTexture=new c.T(Y,Me,ee.RGBA,{premultiply:!1}),Ae.demTexture.bind(ee.LINEAR,ee.CLAMP_TO_EDGE);const _e=F.getMeshFromTileID(Y,ye.canonical,I,!0,"raster"),Re=(j=w.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(ye),Ye=X.getProjectionData({overscaledTileID:ye,aligned:fe,applyGlobeMatrix:!R,applyTerrainMatrix:!0});ie.draw(Y,ee.TRIANGLES,A,v[ye.overscaledZ],E,yr.backCCW,sm(u,Ae.dem,de),Re,Ye,u.id,_e.vertexBuffer,_e.indexBuffer,_e.segments)}}const Ds=[new c.P(0,0),new c.P(c.a5,0),new c.P(c.a5,c.a5),new c.P(0,c.a5)];function to(w,n,u,d,v,A,E,I,R=!1,j=!1){const F=d[d.length-1].overscaledZ,Y=w.context,X=Y.gl,ee=w.useProgram("raster"),ie=w.transform,fe=w.style.projection,pe=w.colorModeForRenderPass(),de=!w.options.moving,ye=u.paint.get("raster-opacity"),Ae=u.paint.get("raster-resampling"),ge=u.paint.get("raster-fade-duration"),Se=!!w.style.map.terrain;for(const Me of d){const _e=w.getDepthModeForSublayer(Me.overscaledZ-F,ye===1?cr.ReadWrite:cr.ReadOnly,X.LESS),Re=n.getTile(Me),Ye=Ae==="nearest"?X.NEAREST:X.LINEAR;Y.activeTexture.set(X.TEXTURE0),Re.texture.bind(Ye,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),Y.activeTexture.set(X.TEXTURE1);const{parentTile:Ge,parentScaleBy:$e,parentTopLeft:Xe,fadeValues:St}=as(Re,n,ge,Se);Re.fadeOpacity=St.tileOpacity,Ge?(Ge.fadeOpacity=St.parentTileOpacity,Ge.texture.bind(Ye,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST)):Re.texture.bind(Ye,X.CLAMP_TO_EDGE,X.LINEAR_MIPMAP_NEAREST),Re.texture.useMipmap&&Y.extTextureFilterAnisotropic&&w.transform.pitch>20&&X.texParameterf(X.TEXTURE_2D,Y.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Y.extTextureFilterAnisotropicMax);const At=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me),ft=ie.getProjectionData({overscaledTileID:Me,aligned:de,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Mt=ff(Xe,$e,St.fadeMix,u,I),or=fe.getMeshFromTileID(Y,Me.canonical,A,E,"raster");ee.draw(Y,X.TRIANGLES,_e,v?v[Me.overscaledZ]:Ar.disabled,pe,R?yr.frontCCW:yr.backCCW,Mt,At,ft,u.id,or.vertexBuffer,or.indexBuffer,or.segments)}}function as(w,n,u,d){const v={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||d)return v;if(w.fadingParentID){const A=n.getLoadedTile(w.fadingParentID);if(!A)return v;const E=Math.pow(2,A.tileID.overscaledZ-w.tileID.overscaledZ),I=[w.tileID.canonical.x*E%1,w.tileID.canonical.y*E%1],R=(function(j,F,Y){const X=Z(),ee=(X-F.timeAdded)/Y,ie=j.fadingDirection===Ze.Incoming,fe=c.an((X-j.timeAdded)/Y,0,1),pe=c.an(1-ee,0,1),de=ie?fe:pe;return{tileOpacity:de,parentTileOpacity:ie?pe:fe,fadeMix:{opacity:1,mix:1-de}}})(w,A,u);return{parentTile:A,parentScaleBy:E,parentTopLeft:I,fadeValues:R}}if(w.selfFading){const A=(function(E,I){const R=(Z()-E.timeAdded)/I,j=c.an(R,0,1);return{tileOpacity:j,fadeMix:{opacity:j,mix:0}}})(w,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:A}}return v}const Is=new c.bp(1,0,0,1),os=new c.bp(0,1,0,1),wf=new c.bp(0,0,1,1),Sf=new c.bp(1,0,1,1),La=new c.bp(0,1,1,1);function ic(w,n,u,d){Yn(w,0,n+u/2,w.transform.width,u,d)}function Os(w,n,u,d){Yn(w,n-u/2,0,u,w.transform.height,d)}function Yn(w,n,u,d,v,A){const E=w.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(n*w.pixelRatio,u*w.pixelRatio,d*w.pixelRatio,v*w.pixelRatio),E.clear({color:A}),I.disable(I.SCISSOR_TEST)}function oh(w,n,u){const d=w.context,v=d.gl,A=w.useProgram("debug"),E=cr.disabled,I=Ar.disabled,R=w.colorModeForRenderPass(),j="$debug",F=w.style.map.terrain&&w.style.map.terrain.getTerrainData(u);d.activeTexture.set(v.TEXTURE0);const Y=n.getTileByID(u.key).latestRawTileData,X=Math.floor((Y&&Y.byteLength||0)/1024),ee=n.getTile(u).tileSize,ie=512/Math.min(ee,512)*(u.overscaledZ/w.transform.zoom)*.5;let fe=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(fe+=` => ${u.overscaledZ}`),(function(de,ye){de.initDebugOverlayCanvas();const Ae=de.debugOverlayCanvas,ge=de.context.gl,Se=de.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,Ae.width,Ae.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(ye,5,5),Se.strokeText(ye,5,5),de.debugOverlayTexture.update(Ae),de.debugOverlayTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)})(w,`${fe} ${X}kB`);const pe=w.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(d,v.TRIANGLES,E,I,qr.alphaBlended,yr.disabled,Xc(c.bp.transparent,ie),null,pe,j,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),A.draw(d,v.LINE_STRIP,E,I,R,yr.disabled,Xc(c.bp.red),F,pe,j,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Af(w,n,u,d){const{isRenderingGlobe:v}=d,A=w.context,E=A.gl,I=w.transform,R=w.colorModeForRenderPass(),j=w.getDepthModeFor3D(),F=w.useProgram("terrain");A.bindFramebuffer.set(null),A.viewport.set([0,0,w.width,w.height]);for(const Y of u){const X=n.getTerrainMesh(Y.tileID),ee=w.renderToTexture.getTexture(Y),ie=n.getTerrainData(Y.tileID);A.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,ee.texture);const fe=n.getMeshFrameDelta(I.zoom),pe=I.calculateFogMatrix(Y.tileID.toUnwrapped()),de=rm(fe,pe,w.style.sky,I.pitch,v),ye=I.getProjectionData({overscaledTileID:Y.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});F.draw(A,E.TRIANGLES,j,Ar.disabled,R,yr.backCCW,de,ie,ye,"terrain",X.vertexBuffer,X.indexBuffer,X.segments)}}function Cd(w,n){if(!n.mesh){const u=new c.aW;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const d=new c.aY;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),n.mesh=new Wr(w.createVertexBuffer(u,Wa.members),w.createIndexBuffer(d),c.aX.simpleSegment(0,0,u.length,d.length))}return n.mesh}class hm{constructor(n,u){this.context=new ml(n),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=nn.maxOverzooming+nn.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ui}resize(n,u,d){if(this.width=Math.floor(n*d),this.height=Math.floor(u*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const n=this.context,u=new c.aW;u.emplaceBack(0,0),u.emplaceBack(c.a5,0),u.emplaceBack(0,c.a5),u.emplaceBack(c.a5,c.a5),this.tileExtentBuffer=n.createVertexBuffer(u,Wa.members),this.tileExtentSegments=c.aX.simpleSegment(0,0,4,2);const d=new c.aW;d.emplaceBack(0,0),d.emplaceBack(c.a5,0),d.emplaceBack(0,c.a5),d.emplaceBack(c.a5,c.a5),this.debugBuffer=n.createVertexBuffer(d,Wa.members),this.debugSegments=c.aX.simpleSegment(0,0,4,5);const v=new c.ch;v.emplaceBack(0,0,0,0),v.emplaceBack(c.a5,0,c.a5,0),v.emplaceBack(0,c.a5,0,c.a5),v.emplaceBack(c.a5,c.a5,c.a5,c.a5),this.rasterBoundsBuffer=n.createVertexBuffer(v,tm.members),this.rasterBoundsSegments=c.aX.simpleSegment(0,0,4,2);const A=new c.aW;A.emplaceBack(0,0),A.emplaceBack(c.a5,0),A.emplaceBack(0,c.a5),A.emplaceBack(c.a5,c.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(A,Wa.members),this.rasterBoundsSegmentsPosOnly=c.aX.simpleSegment(0,0,4,5);const E=new c.aW;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(E,Wa.members),this.viewportSegments=c.aX.simpleSegment(0,0,4,2);const I=new c.ci;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(I);const R=new c.aY;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(R);const j=this.context.gl;this.stencilClearMode=new Ar({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new Wr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,u=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.N();c.c7(d,0,this.width,this.height,0,0,1),c.Q(d,d,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const v={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(n,u.TRIANGLES,cr.disabled,this.stencilClearMode,qr.disabled,yr.disabled,null,null,v,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,u,d){if(this.currentStencilSource===n.source||!n.isTileClipped()||!u||!u.length)return;this.currentStencilSource=n.source,this.nextStencilID+u.length>256&&this.clearStencil();const v=this.context;v.setColorMode(qr.disabled),v.setDepthMode(cr.disabled);const A={};for(const E of u)A[E.key]=this.nextStencilID++;this._renderTileMasks(A,u,d,!0),this._renderTileMasks(A,u,d,!1),this._tileClippingMaskIDs=A}_renderTileMasks(n,u,d,v){const A=this.context,E=A.gl,I=this.style.projection,R=this.transform,j=this.useProgram("clippingMask");for(const F of u){const Y=n[F.key],X=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F),ee=I.getMeshFromTileID(this.context,F.canonical,v,!0,"stencil"),ie=R.getProjectionData({overscaledTileID:F,applyGlobeMatrix:!d,applyTerrainMatrix:!0});j.draw(A,E.TRIANGLES,cr.disabled,new Ar({func:E.ALWAYS,mask:0},Y,255,E.KEEP,E.KEEP,E.REPLACE),qr.disabled,d?yr.disabled:yr.backCCW,null,X,ie,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){const n=this.context,u=n.gl,d=this.style.projection,v=this.transform,A=this.useProgram("depth"),E=this.getDepthModeFor3D(),I=Mn(v,{tileSize:v.tileSize});for(const R of I){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),F=d.getMeshFromTileID(this.context,R.canonical,!0,!0,"raster"),Y=v.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!0,applyTerrainMatrix:!0});A.draw(n,u.TRIANGLES,E,Ar.disabled,qr.disabled,yr.backCCW,null,j,Y,"$clipping",F.vertexBuffer,F.indexBuffer,F.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,u=this.context.gl;return new Ar({func:u.NOTEQUAL,mask:255},n,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(n){const u=this.context.gl;return new Ar({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const u=this.context.gl,d=n.sort(((E,I)=>I.overscaledZ-E.overscaledZ)),v=d[d.length-1].overscaledZ,A=d[0].overscaledZ-v+1;if(A>1){this.currentStencilSource=void 0,this.nextStencilID+A>256&&this.clearStencil();const E={};for(let I=0;I<A;I++)E[I+v]=new Ar({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=A,[E,d]}return[{[v]:Ar.disabled},d]}stencilConfigForOverlapTwoPass(n){const u=this.context.gl,d=n.sort(((E,I)=>I.overscaledZ-E.overscaledZ)),v=d[d.length-1].overscaledZ,A=d[0].overscaledZ-v+1;if(this.clearStencil(),A>1){const E={},I={};for(let R=0;R<A;R++)E[R+v]=new Ar({func:u.GREATER,mask:255},A+1+R,255,u.KEEP,u.KEEP,u.REPLACE),I[R+v]=new Ar({func:u.GREATER,mask:255},1+R,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*A+1,[E,I,d]}return this.nextStencilID=3,[{[v]:new Ar({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[v]:new Ar({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},d]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new qr([n.CONSTANT_COLOR,n.ONE],new c.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?qr.unblended:qr.alphaBlended}getDepthModeForSublayer(n,u,d){if(!this.opaquePassEnabledForLayer())return cr.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new cr(d||this.context.gl.LEQUAL,u,[v,v])}getDepthModeFor3D(){return new cr(this.context.gl.LEQUAL,cr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,u){var d,v;this.style=n,this.options=u,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(Z()),this.imageManager.beginFrame();const A=this.style._order,E=this.style.tileManagers,I={},R={},j={},F={isRenderingToTexture:!1,isRenderingGlobe:((d=n.projection)===null||d===void 0?void 0:d.transitionState)>0};for(const X in E){const ee=E[X];ee.used&&ee.prepare(this.context),I[X]=ee.getVisibleCoordinates(!1),R[X]=I[X].slice().reverse(),j[X]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let X=0;X<A.length;X++)if(this.style._layers[A[X]].is3D()){this.opaquePassCutoff=X;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const X of A){const ee=this.style._layers[X];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const ie=R[ee.source];(ee.type==="custom"||ie.length)&&this.renderLayer(this,E[ee.source],ee,ie,F)}if((v=this.style.projection)===null||v===void 0||v.updateGPUdependent({context:this.context,useProgram:X=>this.useProgram(X)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?c.bp.black:c.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(X,ee){const ie=X.context,fe=ie.gl,pe=((Me,_e,Re)=>{const Ye=Math.cos(_e.rollInRadians),Ge=Math.sin(_e.rollInRadians),$e=kr(_e),Xe=_e.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Me.properties.get("sky-color"),u_horizon_color:Me.properties.get("horizon-color"),u_horizon:[(_e.width/2-$e*Ge)*Re,(_e.height/2+$e*Ye)*Re],u_horizon_normal:[-Ge,Ye],u_sky_horizon_blend:Me.properties.get("sky-horizon-blend")*_e.height/2*Re,u_sky_blend:Xe}})(ee,X.style.map.transform,X.pixelRatio),de=new cr(fe.LEQUAL,cr.ReadWrite,[0,1]),ye=Ar.disabled,Ae=X.colorModeForRenderPass(),ge=X.useProgram("sky"),Se=Cd(ie,ee);ge.draw(ie,fe.TRIANGLES,de,ye,Ae,yr.disabled,pe,null,void 0,"sky",Se.vertexBuffer,Se.indexBuffer,Se.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=A.length-1;this.currentLayer>=0;this.currentLayer--){const X=this.style._layers[A[this.currentLayer]],ee=E[X.source],ie=I[X.source];this._renderTileClippingMasks(X,ie,!1),this.renderLayer(this,ee,X,ie,F)}this.renderPass="translucent";let Y=!1;for(this.currentLayer=0;this.currentLayer<A.length;this.currentLayer++){const X=this.style._layers[A[this.currentLayer]],ee=E[X.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(X,F))continue;this.opaquePassEnabledForLayer()||Y||(Y=!0,F.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ie=(X.type==="symbol"?j:R)[X.source];this._renderTileClippingMasks(X,I[X.source],!!this.renderToTexture),this.renderLayer(this,ee,X,ie,F)}if(F.isRenderingGlobe&&(function(X,ee,ie){const fe=X.context,pe=fe.gl,de=X.useProgram("atmosphere"),ye=new cr(pe.LEQUAL,cr.ReadOnly,[0,1]),Ae=X.transform,ge=(function(Xe,St){const At=Xe.properties.get("position"),ft=[-At.x,-At.y,-At.z],Mt=c.ar(new Float64Array(16));return Xe.properties.get("anchor")==="map"&&(c.bg(Mt,Mt,St.rollInRadians),c.bh(Mt,Mt,-St.pitchInRadians),c.bg(Mt,Mt,St.bearingInRadians),c.bh(Mt,Mt,St.center.lat*Math.PI/180),c.bJ(Mt,Mt,-St.center.lng*Math.PI/180)),c.cg(ft,ft,Mt),ft})(ie,X.transform),Se=Ae.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Me=ee.properties.get("atmosphere-blend")*Se.projectionTransition;if(Me===0)return;const _e=Xl(Ae.worldSize,Ae.center.lat),Re=Ae.inverseProjectionMatrix,Ye=new Float64Array(4);Ye[3]=1,c.aH(Ye,Ye,Ae.modelViewProjectionMatrix),Ye[0]/=Ye[3],Ye[1]/=Ye[3],Ye[2]/=Ye[3],Ye[3]=1,c.aH(Ye,Ye,Re),Ye[0]/=Ye[3],Ye[1]/=Ye[3],Ye[2]/=Ye[3],Ye[3]=1;const Ge=((Xe,St,At,ft,Mt)=>({u_sun_pos:Xe,u_atmosphere_blend:St,u_globe_position:At,u_globe_radius:ft,u_inv_proj_matrix:Mt}))(ge,Me,[Ye[0],Ye[1],Ye[2]],_e,Re),$e=Cd(fe,ee);de.draw(fe,pe.TRIANGLES,ye,Ar.disabled,qr.alphaBlended,yr.disabled,Ge,null,null,"atmosphere",$e.vertexBuffer,$e.indexBuffer,$e.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const X=(function(ee,ie){let fe=null;const pe=Object.values(ee._layers).flatMap((ge=>ge.source&&!ge.isHidden(ie)?[ee.tileManagers[ge.source]]:[])),de=pe.filter((ge=>ge.getSource().type==="vector")),ye=pe.filter((ge=>ge.getSource().type!=="vector")),Ae=ge=>{(!fe||fe.getSource().maxzoom<ge.getSource().maxzoom)&&(fe=ge)};return de.forEach((ge=>Ae(ge))),fe||ye.forEach((ge=>Ae(ge))),fe})(this.style,this.transform.zoom);X&&(function(ee,ie,fe){for(let pe=0;pe<fe.length;pe++)oh(ee,ie,fe[pe])})(this,X,X.getVisibleCoordinates())}this.options.showPadding&&(function(X){const ee=X.transform.padding;ic(X,X.transform.height-(ee.top||0),3,Is),ic(X,ee.bottom||0,3,os),Os(X,ee.left||0,3,wf),Os(X,X.transform.width-(ee.right||0),3,Sf);const ie=X.transform.centerPoint;(function(fe,pe,de,ye){Yn(fe,pe-1,de-10,2,20,ye),Yn(fe,pe-10,de-1,20,2,ye)})(X,ie.x,X.transform.height-ie.y,La)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let v=this.terrainFacilitator.dirty;v||(v=n?!c.cj(u,d):!c.ck(u,d)),v||(v=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),v&&(c.cl(u,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(A,E){const I=A.context,R=I.gl,j=A.transform,F=qr.unblended,Y=new cr(R.LEQUAL,cr.ReadWrite,[0,1]),X=E.tileManager.getRenderableTiles(),ee=A.useProgram("terrainDepth");I.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1});for(const ie of X){const fe=E.getTerrainMesh(ie.tileID),pe=E.getTerrainData(ie.tileID),de=j.getProjectionData({overscaledTileID:ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ye={u_ele_delta:E.getMeshFrameDelta(j.zoom)};ee.draw(I,R.TRIANGLES,Y,Ar.disabled,F,yr.backCCW,ye,pe,de,"terrain",fe.vertexBuffer,fe.indexBuffer,fe.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain),(function(A,E){const I=A.context,R=I.gl,j=A.transform,F=qr.unblended,Y=new cr(R.LEQUAL,cr.ReadWrite,[0,1]),X=E.getCoordsTexture(),ee=E.tileManager.getRenderableTiles(),ie=A.useProgram("terrainCoords");I.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,A.width/devicePixelRatio,A.height/devicePixelRatio]),I.clear({color:c.bp.transparent,depth:1}),E.coordsIndex=[];for(const fe of ee){const pe=E.getTerrainMesh(fe.tileID),de=E.getTerrainData(fe.tileID);I.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,X.texture);const ye={u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(j.zoom)},Ae=j.getProjectionData({overscaledTileID:fe.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ie.draw(I,R.TRIANGLES,Y,Ar.disabled,F,yr.backCCW,ye,de,Ae,"terrain",pe.vertexBuffer,pe.indexBuffer,pe.segments),E.coordsIndex.push(fe.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,A.width,A.height])})(this,this.style.map.terrain))}renderLayer(n,u,d,v,A){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(v||[]).length)&&(this.id=d.id,c.cm(d)?(function(E,I,R,j,F,Y){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:X}=Y,ee=Ar.disabled,ie=E.colorModeForRenderPass();(R._unevaluatedLayout.hasValue("text-variable-anchor")||R._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(fe,pe,de,ye,Ae,ge,Se,Me,_e){const Re=pe.transform,Ye=pe.style.map.terrain,Ge=Ae==="map",$e=ge==="map";for(const Xe of fe){const St=ye.getTile(Xe),At=St.getBucket(de);if(!At||!At.text||!At.text.segments.get().length)continue;const ft=c.ay(At.textSizeData,Re.zoom),Mt=c.aN(St,1,pe.transform.zoom),or=Pa(Ge,pe.transform,Mt),Lr=de.layout.get("icon-text-fit")!=="none"&&At.hasIconData();if(ft){const an=Math.pow(2,Re.zoom-St.tileID.overscaledZ),Qr=Ye?(fn,Hr)=>Ye.getElevation(Xe,fn,Hr):null;Ms(At,Ge,$e,_e,Re,or,an,ft,Lr,c.aO(Re,St,Se,Me),Xe.toUnwrapped(),Qr)}}})(j,E,R,I,R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),F),R.paint.get("icon-opacity").constantOr(1)!==0&&ru(E,I,R,j,!1,R.paint.get("icon-translate"),R.paint.get("icon-translate-anchor"),R.layout.get("icon-rotation-alignment"),R.layout.get("icon-pitch-alignment"),R.layout.get("icon-keep-upright"),ee,ie,X),R.paint.get("text-opacity").constantOr(1)!==0&&ru(E,I,R,j,!0,R.paint.get("text-translate"),R.paint.get("text-translate-anchor"),R.layout.get("text-rotation-alignment"),R.layout.get("text-pitch-alignment"),R.layout.get("text-keep-upright"),ee,ie,X),I.map.showCollisionBoxes&&(yi(E,I,R,j,!0),yi(E,I,R,j,!1))})(n,u,d,v,this.style.placement.variableOffsets,A):c.cn(d)?(function(E,I,R,j,F){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=F,X=R.paint.get("circle-opacity"),ee=R.paint.get("circle-stroke-width"),ie=R.paint.get("circle-stroke-opacity"),fe=!R.layout.get("circle-sort-key").isConstant();if(X.constantOr(1)===0&&(ee.constantOr(1)===0||ie.constantOr(1)===0))return;const pe=E.context,de=pe.gl,ye=E.transform,Ae=E.getDepthModeForSublayer(0,cr.ReadOnly),ge=Ar.disabled,Se=E.colorModeForRenderPass(),Me=[],_e=ye.getCircleRadiusCorrection();for(let Re=0;Re<j.length;Re++){const Ye=j[Re],Ge=I.getTile(Ye),$e=Ge.getBucket(R);if(!$e)continue;const Xe=R.paint.get("circle-translate"),St=R.paint.get("circle-translate-anchor"),At=c.aO(ye,Ge,Xe,St),ft=$e.programConfigurations.get(R.id),Mt=E.useProgram("circle",ft),or=$e.layoutVertexBuffer,Lr=$e.indexBuffer,an=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ye),Qr={programConfiguration:ft,program:Mt,layoutVertexBuffer:or,indexBuffer:Lr,uniformValues:$c(E,Ge,R,At,_e),terrainData:an,projectionData:ye.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!Y,applyTerrainMatrix:!0})};if(fe){const fn=$e.segments.get();for(const Hr of fn)Me.push({segments:new c.aX([Hr]),sortKey:Hr.sortKey,state:Qr})}else Me.push({segments:$e.segments,sortKey:0,state:Qr})}fe&&Me.sort(((Re,Ye)=>Re.sortKey-Ye.sortKey));for(const Re of Me){const{programConfiguration:Ye,program:Ge,layoutVertexBuffer:$e,indexBuffer:Xe,uniformValues:St,terrainData:At,projectionData:ft}=Re.state;Ge.draw(pe,de.TRIANGLES,Ae,ge,Se,yr.backCCW,St,At,ft,R.id,$e,Xe,Re.segments,R.paint,E.transform.zoom,Ye)}})(n,u,d,v,A):c.co(d)?(function(E,I,R,j,F){if(R.paint.get("heatmap-opacity")===0)return;const Y=E.context,{isRenderingToTexture:X,isRenderingGlobe:ee}=F;if(E.style.map.terrain){for(const ie of j){const fe=I.getTile(ie);I.hasRenderableParent(ie)||(E.renderPass==="offscreen"?Pd(E,fe,R,ie,ee):E.renderPass==="translucent"&&vi(E,R,ie,X,ee))}Y.viewport.set([0,0,E.width,E.height])}else E.renderPass==="offscreen"?(function(ie,fe,pe,de){const ye=ie.context,Ae=ye.gl,ge=ie.transform,Se=Ar.disabled,Me=new qr([Ae.ONE,Ae.ONE],c.bp.transparent,[!0,!0,!0,!0]);(function(_e,Re,Ye){const Ge=_e.gl;_e.activeTexture.set(Ge.TEXTURE1),_e.viewport.set([0,0,Re.width/4,Re.height/4]);let $e=Ye.heatmapFbos.get(c.cd);$e?(Ge.bindTexture(Ge.TEXTURE_2D,$e.colorAttachment.get()),_e.bindFramebuffer.set($e.framebuffer)):($e=Kr(_e,Re.width/4,Re.height/4),Ye.heatmapFbos.set(c.cd,$e))})(ye,ie,pe),ye.clear({color:c.bp.transparent});for(let _e=0;_e<de.length;_e++){const Re=de[_e];if(fe.hasRenderableParent(Re))continue;const Ye=fe.getTile(Re),Ge=Ye.getBucket(pe);if(!Ge)continue;const $e=Ge.programConfigurations.get(pe.id),Xe=ie.useProgram("heatmap",$e),St=ge.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),At=ge.getCircleRadiusCorrection();Xe.draw(ye,Ae.TRIANGLES,cr.disabled,Se,Me,yr.backCCW,ll(Ye,ge.zoom,pe.paint.get("heatmap-intensity"),At),null,St,pe.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,pe.paint,ge.zoom,$e)}ye.viewport.set([0,0,ie.width,ie.height])})(E,I,R,j):E.renderPass==="translucent"&&(function(ie,fe){const pe=ie.context,de=pe.gl;pe.setColorMode(ie.colorModeForRenderPass());const ye=fe.heatmapFbos.get(c.cd);ye&&(pe.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,ye.colorAttachment.get()),pe.activeTexture.set(de.TEXTURE1),br(pe,fe).bind(de.LINEAR,de.CLAMP_TO_EDGE),ie.useProgram("heatmapTexture").draw(pe,de.TRIANGLES,cr.disabled,Ar.disabled,ie.colorModeForRenderPass(),yr.disabled,bd(ie,fe,0,1),null,null,fe.id,ie.viewportBuffer,ie.quadTriangleIndexBuffer,ie.viewportSegments,fe.paint,ie.transform.zoom))})(E,R)})(n,u,d,v,A):c.cp(d)?(function(E,I,R,j,F){if(E.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=F,X=R.paint.get("line-opacity"),ee=R.paint.get("line-width");if(X.constantOr(1)===0||ee.constantOr(1)===0)return;const ie=E.getDepthModeForSublayer(0,cr.ReadOnly),fe=E.colorModeForRenderPass(),pe=R.paint.get("line-dasharray"),de=pe.constantOr(1),ye=R.paint.get("line-pattern"),Ae=ye.constantOr(1),ge=R.paint.get("line-gradient"),Se=R.getCrossfadeParameters();let Me;Me=Ae?"linePattern":de&&ge?"lineGradientSDF":de?"lineSDF":ge?"lineGradient":"line";const _e=E.context,Re=_e.gl,Ye=E.transform;let Ge=!0;for(const $e of j){const Xe=I.getTile($e);if(Ae&&!Xe.patternsLoaded())continue;const St=Xe.getBucket(R);if(!St)continue;const At=St.programConfigurations.get(R.id),ft=E.context.program.get(),Mt=E.useProgram(Me,At),or=Ge||Mt.program!==ft,Lr=E.style.map.terrain&&E.style.map.terrain.getTerrainData($e),an=ye.constantOr(null),Qr=pe&&pe.constantOr(null);if(an&&Xe.imageAtlas){const _i=Xe.imageAtlas,On=_i.patternPositions[an.to.toString()],zn=_i.patternPositions[an.from.toString()];On&&zn&&At.setConstantPatternPositions(On,zn)}else if(Qr){const _i=R.layout.get("line-cap")==="round",On=E.lineAtlas.getDash(Qr.to,_i),zn=E.lineAtlas.getDash(Qr.from,_i);At.setConstantDashPositions(On,zn)}const fn=Ye.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Hr=Ye.getPixelScale();let An;Ae?(An=wd(E,Xe,R,Hr,Se),Ra(_e,Re,Xe,At,Se)):de&&ge?(An=ul(E,Xe,R,Hr,Se,St.lineClipsArray.length),fa(E,I,_e,Re,R,St,$e,At,Se)):de?(An=ua(E,Xe,R,Hr,Se),wn(E,_e,Re,At,or,Se)):ge?(An=lm(E,Xe,R,Hr,St.lineClipsArray.length),ha(E,I,_e,Re,R,St,$e)):An=Wc(E,Xe,R,Hr);const dn=E.stencilModeForClipping($e);Mt.draw(_e,Re.TRIANGLES,ie,dn,fe,yr.disabled,An,Lr,fn,R.id,St.layoutVertexBuffer,St.indexBuffer,St.segments,R.paint,E.transform.zoom,At,St.layoutVertexBuffer2),Ge=!1}})(n,u,d,v,A):c.cq(d)?(function(E,I,R,j,F){const Y=R.paint.get("fill-color"),X=R.paint.get("fill-opacity");if(X.constantOr(1)===0)return;const{isRenderingToTexture:ee}=F,ie=E.colorModeForRenderPass(),fe=R.paint.get("fill-pattern"),pe=E.opaquePassEnabledForLayer()&&!fe.constantOr(1)&&Y.constantOr(c.bp.transparent).a===1&&X.constantOr(0)===1?"opaque":"translucent";if(E.renderPass===pe){const de=E.getDepthModeForSublayer(1,E.renderPass==="opaque"?cr.ReadWrite:cr.ReadOnly);rs(E,I,R,j,de,ie,!1,ee)}if(E.renderPass==="translucent"&&R.paint.get("fill-antialias")){const de=E.getDepthModeForSublayer(R.getPaintProperty("fill-outline-color")?2:0,cr.ReadOnly);rs(E,I,R,j,de,ie,!0,ee)}})(n,u,d,v,A):c.cr(d)?(function(E,I,R,j,F){const Y=R.paint.get("fill-extrusion-opacity");if(Y===0)return;const{isRenderingToTexture:X}=F;if(E.renderPass==="translucent"){const ee=new cr(E.context.gl.LEQUAL,cr.ReadWrite,E.depthRangeFor3D);if(Y!==1||R.paint.get("fill-extrusion-pattern").constantOr(1))ns(E,I,R,j,ee,Ar.disabled,qr.disabled,X),ns(E,I,R,j,ee,E.stencilModeFor3D(),E.colorModeForRenderPass(),X);else{const ie=E.colorModeForRenderPass();ns(E,I,R,j,ee,Ar.disabled,ie,X)}}})(n,u,d,v,A):c.cs(d)?(function(E,I,R,j,F){if(E.renderPass!=="offscreen"&&E.renderPass!=="translucent")return;const{isRenderingToTexture:Y}=F,X=E.context,ee=E.style.projection.useSubdivision,ie=E.getDepthModeForSublayer(0,cr.ReadOnly),fe=E.colorModeForRenderPass();if(E.renderPass==="offscreen")(function(pe,de,ye,Ae,ge,Se,Me){const _e=pe.context,Re=_e.gl;for(const Ye of ye){const Ge=de.getTile(Ye),$e=Ge.dem;if(!$e||!$e.data||!Ge.needsHillshadePrepare)continue;const Xe=$e.dim,St=$e.stride,At=$e.getPixels();if(_e.activeTexture.set(Re.TEXTURE1),_e.pixelStoreUnpackPremultiplyAlpha.set(!1),Ge.demTexture=Ge.demTexture||pe.getTileTexture(St),Ge.demTexture){const Mt=Ge.demTexture;Mt.update(At,{premultiply:!1}),Mt.bind(Re.NEAREST,Re.CLAMP_TO_EDGE)}else Ge.demTexture=new c.T(_e,At,Re.RGBA,{premultiply:!1}),Ge.demTexture.bind(Re.NEAREST,Re.CLAMP_TO_EDGE);_e.activeTexture.set(Re.TEXTURE0);let ft=Ge.fbo;if(!ft){const Mt=new c.T(_e,{width:Xe,height:Xe,data:null},Re.RGBA);Mt.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),ft=Ge.fbo=_e.createFramebuffer(Xe,Xe,!0,!1),ft.colorAttachment.set(Mt.texture)}_e.bindFramebuffer.set(ft.framebuffer),_e.viewport.set([0,0,Xe,Xe]),pe.useProgram("hillshadePrepare").draw(_e,Re.TRIANGLES,ge,Se,Me,yr.disabled,om(Ge.tileID,$e),null,null,Ae.id,pe.rasterBoundsBuffer,pe.quadTriangleIndexBuffer,pe.rasterBoundsSegments),Ge.needsHillshadePrepare=!1}})(E,I,j,R,ie,Ar.disabled,fe),X.viewport.set([0,0,E.width,E.height]);else if(E.renderPass==="translucent")if(ee){const[pe,de,ye]=E.stencilConfigForOverlapTwoPass(j);is(E,I,R,ye,pe,ie,fe,!1,Y),is(E,I,R,ye,de,ie,fe,!0,Y)}else{const[pe,de]=E.getStencilConfigForOverlapAndUpdateStencilID(j);is(E,I,R,de,pe,ie,fe,!1,Y)}})(n,u,d,v,A):c.ct(d)?(function(E,I,R,j,F){if(E.renderPass!=="translucent"||!j.length)return;const{isRenderingToTexture:Y}=F,X=E.style.projection.useSubdivision,ee=E.getDepthModeForSublayer(0,cr.ReadOnly),ie=E.colorModeForRenderPass();if(X){const[fe,pe,de]=E.stencilConfigForOverlapTwoPass(j);Cs(E,I,R,de,fe,ee,ie,!1,Y),Cs(E,I,R,de,pe,ee,ie,!0,Y)}else{const[fe,pe]=E.getStencilConfigForOverlapAndUpdateStencilID(j);Cs(E,I,R,pe,fe,ee,ie,!1,Y)}})(n,u,d,v,A):c.bU(d)?(function(E,I,R,j,F){if(E.renderPass!=="translucent"||R.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:Y}=F,X=I.getSource(),ee=E.style.projection.useSubdivision;if(X instanceof la)to(E,I,R,j,null,!1,!1,X.tileCoords,X.flippedWindingOrder,Y);else if(ee){const[ie,fe,pe]=E.stencilConfigForOverlapTwoPass(j);to(E,I,R,pe,ie,!1,!0,Ds,!1,Y),to(E,I,R,pe,fe,!0,!0,Ds,!1,Y)}else{const[ie,fe]=E.getStencilConfigForOverlapAndUpdateStencilID(j);to(E,I,R,fe,ie,!1,!0,Ds,!1,Y)}})(n,u,d,v,A):c.cu(d)?(function(E,I,R,j,F){const Y=R.paint.get("background-color"),X=R.paint.get("background-opacity");if(X===0)return;const{isRenderingToTexture:ee}=F,ie=E.context,fe=ie.gl,pe=E.style.projection,de=E.transform,ye=de.tileSize,Ae=R.paint.get("background-pattern");if(E.isPatternMissing(Ae))return;const ge=!Ae&&Y.a===1&&X===1&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==ge)return;const Se=Ar.disabled,Me=E.getDepthModeForSublayer(0,ge==="opaque"?cr.ReadWrite:cr.ReadOnly),_e=E.colorModeForRenderPass(),Re=E.useProgram(Ae?"backgroundPattern":"background"),Ye=j||Mn(de,{tileSize:ye,terrain:E.style.map.terrain});Ae&&(ie.activeTexture.set(fe.TEXTURE0),E.imageManager.bind(E.context));const Ge=R.getCrossfadeParameters();for(const $e of Ye){const Xe=de.getProjectionData({overscaledTileID:$e,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),St=Ae?eh(X,E,Ae,{tileID:$e,tileSize:ye},Ge):Jc(X,Y),At=E.style.map.terrain&&E.style.map.terrain.getTerrainData($e),ft=pe.getMeshFromTileID(ie,$e.canonical,!1,!0,"raster");Re.draw(ie,fe.TRIANGLES,Me,Se,_e,yr.backCCW,St,At,Xe,R.id,ft.vertexBuffer,ft.indexBuffer,ft.segments)}})(n,0,d,v,A):c.cv(d)&&(function(E,I,R,j){const{isRenderingGlobe:F}=j,Y=E.context,X=R.implementation,ee=E.style.projection,ie=E.transform,fe=ie.getProjectionDataForCustomLayer(F),pe={farZ:ie.farZ,nearZ:ie.nearZ,fov:ie.fov*Math.PI/180,modelViewProjectionMatrix:ie.modelViewProjectionMatrix,projectionMatrix:ie.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:fe},de=X.renderingMode?X.renderingMode:"2d";if(E.renderPass==="offscreen"){const ye=X.prerender;ye&&(E.setCustomLayerDefaults(),Y.setColorMode(E.colorModeForRenderPass()),ye.call(X,Y.gl,pe),Y.setDirty(),E.setBaseState())}else if(E.renderPass==="translucent"){E.setCustomLayerDefaults(),Y.setColorMode(E.colorModeForRenderPass()),Y.setStencilMode(Ar.disabled);const ye=de==="3d"?E.getDepthModeFor3D():E.getDepthModeForSublayer(0,cr.ReadOnly);Y.setDepthMode(ye),X.render(Y.gl,pe),Y.setDirty(),E.setBaseState(),Y.bindFramebuffer.set(null)}})(n,0,d,A))}saveTileTexture(n){const u=this._tileTextures[n.size[0]];u?u.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const u=this._tileTextures[n];return u&&u.length>0?u.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const u=this.imageManager.getPattern(n.from.toString()),d=this.imageManager.getPattern(n.to.toString());return!u||!d}useProgram(n,u,d=!1,v=[]){this.cache=this.cache||{};const A=!!this.style.map.terrain,E=this.style.projection,I=d?pn.projectionMercator:E.shaderPreludeCode,R=d?Cn:E.shaderDefine,j=n+(u?u.cacheKey:"")+`/${d?Wi:E.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(A?"/terrain":"")+(v?`/${v.join("/")}`:"");return this.cache[j]||(this.cache[j]=new nm(this.context,pn[n],u,um[n],this._showOverdrawInspector,A,I,R,v)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new c.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,u;if(this._tileTextures){for(const d in this._tileTextures){const v=this._tileTextures[d];if(v)for(const A of v)A.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((u=this.tileExtentMesh.indexBuffer)===null||u===void 0||u.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const d in this.cache){const v=this.cache[d];v&&v.program&&this.context.gl.deleteProgram(v.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:u}=this.context.gl;return this.width!==n||this.height!==u}}function Dd(w,n){let u,d=!1,v=null,A=null;const E=()=>{v=null,d&&(w.apply(A,u),v=setTimeout(E,n),d=!1)};return(...I)=>(d=!0,A=this,u=I,v||E(),v)}class Fn{constructor(n){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let d;return u.split("&").map((v=>v.split("="))).forEach((v=>{v[0]===this._hashName&&(d=v)})),(d&&d[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:d,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const d=u.join("/");let v=d;v.split("&").length>0&&(v=v.split("&")[0]),this._hashName&&(v=`${this._hashName}=${d}`);let A=window.location.hash.replace(v,"");A.startsWith("#&")?A=A.slice(0,1)+A.slice(2):A==="#"&&(A="");let E=window.location.href.replace(/(#.+)?$/,A);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=Dd(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const u=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,v=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),A=Math.pow(10,v),E=Math.round(u.lng*A)/A,I=Math.round(u.lat*A)/A,R=this._map.getBearing(),j=this._map.getPitch();let F="";if(F+=n?`/${E}/${I}/${d}`:`${d}/${I}/${E}`,(R||j)&&(F+="/"+Math.round(10*R)/10),j&&(F+=`/${Math.round(j)}`),this._hashName){const Y=this._hashName;let X=!1;const ee=window.location.hash.slice(1).split("&").map((ie=>{const fe=ie.split("=")[0];return fe===Y?(X=!0,`${fe}=${F}`):ie})).filter((ie=>ie));return X||ee.push(`${Y}=${F}`),`#${ee.join("&")}`}return`#${F}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new c.V(+n[2],+n[1])}catch{return!1}const u=+n[0],d=+(n[3]||0),v=+(n[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&d>=-180&&d<=180&&v>=this._map.getMinPitch()&&v<=this._map.getMaxPitch()}}const ss={linearity:.3,easing:c.cw(0,0,.3,1)},ac=c.e({deceleration:2500,maxSpeed:1400},ss),Fi=c.e({deceleration:20,maxSpeed:1400},ss),Ba=c.e({deceleration:1e3,maxSpeed:360},ss),nu=c.e({deceleration:1e3,maxSpeed:90},ss),Ui=c.e({deceleration:1e3,maxSpeed:360},ss);class $g{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Z(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,u=Z();for(;n.length>0&&u-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:A}of this._inertiaBuffer)u.zoom+=A.zoomDelta||0,u.bearing+=A.bearingDelta||0,u.pitch+=A.pitchDelta||0,u.roll+=A.rollDelta||0,A.panDelta&&u.pan._add(A.panDelta),A.around&&(u.around=A.around),A.pinchAround&&(u.pinchAround=A.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const A=sh(u.pan.mag(),d,c.e({},ac,n||{})),E=u.pan.mult(A.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(E,this._map.transform);v.center=I.easingCenter,v.offset=I.easingOffset,oc(v,A)}if(u.zoom){const A=sh(u.zoom,d,Fi);v.zoom=this._map.transform.zoom+A.amount,oc(v,A)}if(u.bearing){const A=sh(u.bearing,d,Ba);v.bearing=this._map.transform.bearing+c.an(A.amount,-179,179),oc(v,A)}if(u.pitch){const A=sh(u.pitch,d,nu);v.pitch=this._map.transform.pitch+A.amount,oc(v,A)}if(u.roll){const A=sh(u.roll,d,Ui);v.roll=this._map.transform.roll+c.an(A.amount,-179,179),oc(v,A)}if(v.zoom||v.bearing){const A=u.pinchAround===void 0?u.around:u.pinchAround;v.around=A?this._map.unproject(A):this._map.getCenter()}return this.clear(),c.e(v,{noMoveStart:!0})}}function oc(w,n){(!w.duration||w.duration<n.duration)&&(w.duration=n.duration,w.easing=n.easing)}function sh(w,n,u){const{maxSpeed:d,linearity:v,deceleration:A}=u,E=c.an(w*v/(n/1e3),-d,d),I=Math.abs(E)/(A*v);return{easing:u.easing,duration:1e3*I,amount:E*(I/2)}}class fi extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d,v={}){d=d instanceof MouseEvent?d:new MouseEvent(n,d);const A=G.mousePos(u.getCanvas(),d),E=u.unproject(A);super(n,c.e({point:A,lngLat:E,originalEvent:d},v)),this._defaultPrevented=!1,this.target=u}}class Ao extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){const v=n==="touchend"?d.changedTouches:d.touches,A=G.touchPos(u.getCanvasContainer(),v),E=A.map((R=>u.unproject(R))),I=A.reduce(((R,j,F,Y)=>R.add(j.div(Y.length))),new c.P(0,0));super(n,{points:A,point:I,lngLats:E,lngLat:u.unproject(I),originalEvent:d}),this._defaultPrevented=!1}}class Tf extends c.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,u,d){super(n,{originalEvent:d}),this._defaultPrevented=!1}}class Ef{constructor(n,u){this._map=n,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Tf(n.type,this._map,n))}mousedown(n,u){return this._mousedownPos=u,this._firePreventable(new fi(n.type,this._map,n))}mouseup(n){this._map.fire(new fi(n.type,this._map,n))}click(n,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new fi(n.type,this._map,n))}dblclick(n){return this._firePreventable(new fi(n.type,this._map,n))}mouseover(n){this._map.fire(new fi(n.type,this._map,n))}mouseout(n){this._map.fire(new fi(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Ao(n.type,this._map,n))}touchmove(n){this._map.fire(new Ao(n.type,this._map,n))}touchend(n){this._map.fire(new Ao(n.type,this._map,n))}touchcancel(n){this._map.fire(new Ao(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fm{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new fi(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new fi(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class To{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(c.P.convert(n),this._map.terrain)}}class gl{constructor(n,u){this._map=n,this._tr=new To(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,u){this.isEnabled()&&n.shiftKey&&n.button===0&&(G.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(n,u){if(!this._active)return;const d=u;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=d,this._box||(this._box=G.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const A=Math.min(v.x,d.x),E=Math.max(v.x,d.x),I=Math.min(v.y,d.y),R=Math.max(v.y,d.y);G.setTransform(this._box,`translate(${A}px,${I}px)`),this._box.style.width=E-A+"px",this._box.style.height=R-I+"px"}mouseupWindow(n,u){if(!this._active||n.button!==0)return;const d=this._startPos,v=u;if(this.reset(),G.suppressClick(),d.x!==v.x||d.y!==v.y)return this._map.fire(new c.l("boxzoomend",{originalEvent:n})),{cameraAnimation:A=>A.fitScreenCoordinates(d,v,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(G.remove(this._box),this._box=null),G.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,u){return this._map.fire(new c.l(n,{originalEvent:u}))}}function da(w,n){if(w.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${n.length}`);const u={};for(let d=0;d<w.length;d++)u[w[d].identifier]=n[d];return u}class zt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,u,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),d.length===this.numTouches&&(this.centroid=(function(v){const A=new c.P(0,0);for(const E of v)A._add(E);return A.div(v.length)})(u),this.touches=da(d,u)))}touchmove(n,u,d){if(this.aborted||!this.centroid)return;const v=da(d,u);for(const A in this.touches){const E=v[A];(!E||E.dist(this.touches[A])>30)&&(this.aborted=!0)}}touchend(n,u,d){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class lh{constructor(n){this.singleTap=new zt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,u,d){this.singleTap.touchstart(n,u,d)}touchmove(n,u,d){this.singleTap.touchmove(n,u,d)}touchend(n,u,d){const v=this.singleTap.touchend(n,u,d);if(v){const A=n.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(v)<30;if(A&&E||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Mf{constructor(n){this._tr=new To(n),this._zoomIn=new lh({numTouches:1,numTaps:2}),this._zoomOut=new lh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,u,d){this._zoomIn.touchstart(n,u,d),this._zoomOut.touchstart(n,u,d)}touchmove(n,u,d){this._zoomIn.touchmove(n,u,d),this._zoomOut.touchmove(n,u,d)}touchend(n,u,d){const v=this._zoomIn.touchend(n,u,d),A=this._zoomOut.touchend(n,u,d),E=this._tr;return v?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(v)},{originalEvent:n})}):A?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(A)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ro{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const u=this._moveFunction(...n);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(n,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,u){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const v=Array.isArray(u)?u[0]:u;return!this._moved&&v.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=v,this._move(d,v))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&G.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Eo=0,sc=2,Pf={[Eo]:1,[sc]:2};class ls{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const u=G.mouseButton(n);this._eventButton=u}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(u,d){const v=Pf[d];return u.buttons===void 0||(u.buttons&v)!==v})(n,this._eventButton)}isValidEndEvent(n){return G.mouseButton(n)===this._eventButton}}class iu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class uh{constructor(n=new ls({checkCorrectEvent:()=>!0}),u=new iu){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(n,u,d){return n instanceof MouseEvent?u(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?d(n):void 0}startMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(n){this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const us=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=n=>{n.preventDefault()}};class Cf{constructor(n,u){this._clickTolerance=n.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,u,d){return this._calculateTransform(n,u,d)}touchmove(n,u,d){if(this._active){if(!this._shouldBePrevented(d.length))return n.preventDefault(),this._calculateTransform(n,u,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,u,d){this._calculateTransform(n,u,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,u,d){d.length>0&&(this._active=!0);const v=da(d,u),A=new c.P(0,0),E=new c.P(0,0);let I=0;for(const j in v){const F=v[j],Y=this._touches[j];Y&&(A._add(F),E._add(F.sub(Y)),I++,v[j]=F)}if(this._touches=v,this._shouldBePrevented(I)||!E.mag())return;const R=E.div(I);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:A.div(I),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ch{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,u,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([u[0],u[1]]))}touchmove(n,u,d){if(!this._firstTwoTouches)return;n.preventDefault();const[v,A]=this._firstTwoTouches,E=cs(d,u,v),I=cs(d,u,A);if(!E||!I)return;const R=this._aroundCenter?null:E.add(I).div(2);return this._move([E,I],R,n)}touchend(n,u,d){if(!this._firstTwoTouches)return;const[v,A]=this._firstTwoTouches,E=cs(d,u,v),I=cs(d,u,A);E&&I||(this._active&&G.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function cs(w,n,u){for(let d=0;d<w.length;d++)if(w[d].identifier===u)return n[d]}function Id(w,n){return Math.log(w/n)/Math.LN2}class hs extends ch{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,u){const d=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Id(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Id(this._distance,d),pinchAround:u}}}function Df(w,n){return 180*w.angleWith(n)/Math.PI}class hh extends ch{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,u,d){const v=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Df(this._vector,v),pinchAround:u}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const u=25/(Math.PI*this._minDiameter)*360,d=Df(n,this._startVector);return Math.abs(d)<u}}function fs(w){return Math.abs(w.y)>Math.abs(w.x)}class zs extends ch{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,u,d){super.touchstart(n,u,d),this._currentTouchCount=d.length}_start(n){this._lastPoints=n,fs(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,u,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const v=n[0].sub(this._lastPoints[0]),A=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,A,d.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(v.y+A.y)/2*-.5}):void 0}gestureBeginsVertically(n,u,d){if(this._valid!==void 0)return this._valid;const v=n.mag()>=2,A=u.mag()>=2;if(!v&&!A)return;if(!v||!A)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const E=n.y>0==u.y>0;return fs(n)&&fs(u)&&E}}const no={panStep:100,bearingStep:15,pitchStep:10};class Fr{constructor(n){this._tr=new To(n);const u=no;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let u=0,d=0,v=0,A=0,E=0;switch(n.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:n.shiftKey?d=-1:(n.preventDefault(),A=-1);break;case 39:n.shiftKey?d=1:(n.preventDefault(),A=1);break;case 38:n.shiftKey?v=1:(n.preventDefault(),E=-1);break;case 40:n.shiftKey?v=-1:(n.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(d=0,v=0),{cameraAnimation:I=>{const R=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:Od,zoom:u?Math.round(R.zoom)+u*(n.shiftKey?2:1):R.zoom,bearing:R.bearing+d*this._bearingStep,pitch:R.pitch+v*this._pitchStep,offset:[-A*this._panStep,-E*this._panStep],center:R.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Od(w){return w*(2-w)}const ks=4.000244140625,yl=1/450;class fh{constructor(n,u){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=n,this._tr=new To(n),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=yl}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let u=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const d=Z(),v=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,u!==0&&u%ks==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),n.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=n,this._delta-=u,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=G.mousePos(this._map.getCanvas(),n),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(c.V.convert(d.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const I=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=I),typeof this._targetZoom=="number"&&(this._targetZoom+=I)}if(this._delta!==0){const I=this._type==="wheel"&&Math.abs(this._delta)>ks?this._wheelZoomRate:this._defaultZoomRate;let R=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&R!==0&&(R=1/R);const j=typeof this._targetZoom!="number"?n.scale:c.aq(this._targetZoom);this._targetZoom=n.applyConstrain(n.getCameraLngLat(),c.at(j*R)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,d=this._startZoom,v=this._easing;let A,E=!1;if(this._type==="wheel"&&d&&v){const I=Z()-this._lastWheelEventTime,R=Math.min((I+5)/200,1),j=v(R);A=c.G.number(d,u,j),R<1?this._frameId||(this._frameId=!0):E=!0}else A=u,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=A,{noInertia:!0,needsRenderFrame:!E,zoomDelta:A-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let u=c.cy;if(this._prevEase){const d=this._prevEase,v=(Z()-d.start)/d.duration,A=d.easing(v+.01)-d.easing(v),E=.27/Math.sqrt(A*A+1e-4)*.01,I=Math.sqrt(.0729-E*E);u=c.cw(E,I,.25,1)}return this._prevEase={start:Z(),duration:n,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class If{constructor(n,u){this._clickZoom=n,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class au{constructor(n){this._tr=new To(n),this.reset()}reset(){this._active=!1}dblclick(n,u){return n.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dh{constructor(){this._tap=new lh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,u,d){if(!this._swipePoint)if(this._tapTime){const v=u[0],A=n.timeStamp-this._tapTime<500,E=this._tapPoint.dist(v)<30;A&&E?d.length>0&&(this._swipePoint=v,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(n,u,d)}touchmove(n,u,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const v=u[0],A=v.y-this._swipePoint.y;return this._swipePoint=v,n.preventDefault(),this._active=!0,{zoomDelta:A/128}}}else this._tap.touchmove(n,u,d)}touchend(n,u,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const v=this._tap.touchend(n,u,d);v&&(this._tapTime=n.timeStamp,this._tapPoint=v)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zd{constructor(n,u,d){this._el=n,this._mousePan=u,this._touchPan=d}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ja{constructor(n,u,d,v){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=u,this._mousePitch=d,this._mouseRoll=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class ou{constructor(n,u,d,v){this._el=n,this._touchZoom=u,this._touchRotate=d,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Bt{constructor(n,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=G.create("div","maplibregl-cooperative-gesture-screen",n);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),v=document.createElement("div");v.className="maplibregl-desktop-message",v.textContent=u,this._container.appendChild(v);const A=document.createElement("div");A.className="maplibregl-mobile-message",A.textContent=d,this._container.appendChild(A),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(G.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,u){this._enabled&&(this._map.fire(new c.l("cooperativegestureprevented",{gestureType:n,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ut=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class io extends c.l{}function lc(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class ph{constructor(n,u){this.handleWindowEvent=v=>{this.handleEvent(v,`${v.type}Window`)},this.handleEvent=(v,A)=>{if(v.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const E=v.type==="renderFrame"?void 0:v,I={needsRenderFrame:!1},R={},j={};for(const{handlerName:X,handler:ee,allowed:ie}of this._handlers){if(!ee.isEnabled())continue;let fe;if(this._blockedByActive(j,ie,X))ee.reset();else if(ee[A||v.type]){if(c.cz(v,A||v.type)){const pe=G.mousePos(this._map.getCanvas(),v);fe=ee[A||v.type](v,pe)}else if(c.cA(v,A||v.type)){const pe=this._getMapTouches(v.touches),de=G.touchPos(this._map.getCanvas(),pe);fe=ee[A||v.type](v,de,pe)}else c.cB(A||v.type)||(fe=ee[A||v.type](v));this.mergeHandlerResult(I,R,fe,X,E),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()}(fe||ee.isActive())&&(j[X]=ee)}const F={};for(const X in this._previousActiveHandlers)j[X]||(F[X]=E);this._previousActiveHandlers=j,(Object.keys(F).length||lc(I))&&(this._changes.push([I,R,F]),this._triggerRenderFrame()),(Object.keys(j).length||lc(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Y}=I;Y&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Y(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $g(n),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,A,E]of this._listeners)G.addEventListener(v,A,v===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[n,u,d]of this._listeners)G.removeEventListener(n,u,n===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(n){const u=this._map,d=u.getCanvasContainer();this._add("mapEvent",new Ef(u,n));const v=u.boxZoom=new gl(u,n);this._add("boxZoom",v),n.interactive&&n.boxZoom&&v.enable();const A=u.cooperativeGestures=new Bt(u,n.cooperativeGestures);this._add("cooperativeGestures",A),n.cooperativeGestures&&A.enable();const E=new Mf(u),I=new au(u);u.doubleClickZoom=new If(I,E),this._add("tapZoom",E),this._add("clickZoom",I),n.interactive&&n.doubleClickZoom&&u.doubleClickZoom.enable();const R=new dh;this._add("tapDragZoom",R);const j=u.touchPitch=new zs(u);this._add("touchPitch",j),n.interactive&&n.touchPitch&&u.touchPitch.enable(n.touchPitch);const F=()=>u.project(u.getCenter()),Y=(function({enable:ge,clickTolerance:Se,aroundCenter:Me=!0,minPixelCenterThreshold:_e=100,rotateDegreesPerPixelMoved:Re=.8},Ye){const Ge=new ls({checkCorrectEvent:$e=>G.mouseButton($e)===0&&$e.ctrlKey||G.mouseButton($e)===2&&!$e.ctrlKey});return new ro({clickTolerance:Se,move:($e,Xe)=>{const St=Ye();if(Me&&Math.abs(St.y-$e.y)>_e)return{bearingDelta:c.cx(new c.P($e.x,Xe.y),Xe,St)};let At=(Xe.x-$e.x)*Re;return Me&&Xe.y<St.y&&(At=-At),{bearingDelta:At}},moveStateManager:Ge,enable:ge,assignEvents:us})})(n,F),X=(function({enable:ge,clickTolerance:Se,pitchDegreesPerPixelMoved:Me=-.5}){const _e=new ls({checkCorrectEvent:Re=>G.mouseButton(Re)===0&&Re.ctrlKey||G.mouseButton(Re)===2});return new ro({clickTolerance:Se,move:(Re,Ye)=>({pitchDelta:(Ye.y-Re.y)*Me}),moveStateManager:_e,enable:ge,assignEvents:us})})(n),ee=(function({enable:ge,clickTolerance:Se,rollDegreesPerPixelMoved:Me=.3},_e){const Re=new ls({checkCorrectEvent:Ye=>G.mouseButton(Ye)===2&&Ye.ctrlKey});return new ro({clickTolerance:Se,move:(Ye,Ge)=>{const $e=_e();let Xe=(Ge.x-Ye.x)*Me;return Ge.y<$e.y&&(Xe=-Xe),{rollDelta:Xe}},moveStateManager:Re,enable:ge,assignEvents:us})})(n,F);u.dragRotate=new ja(n,Y,X,ee),this._add("mouseRotate",Y,["mousePitch"]),this._add("mousePitch",X,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),n.interactive&&n.dragRotate&&u.dragRotate.enable();const ie=(function({enable:ge,clickTolerance:Se}){const Me=new ls({checkCorrectEvent:_e=>G.mouseButton(_e)===0&&!_e.ctrlKey});return new ro({clickTolerance:Se,move:(_e,Re)=>({around:Re,panDelta:Re.sub(_e)}),activateOnStart:!0,moveStateManager:Me,enable:ge,assignEvents:us})})(n),fe=new Cf(n,u);u.dragPan=new zd(d,ie,fe),this._add("mousePan",ie),this._add("touchPan",fe,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&u.dragPan.enable(n.dragPan);const pe=new hh,de=new hs;u.touchZoomRotate=new ou(d,de,pe,R),this._add("touchRotate",pe,["touchPan","touchZoom"]),this._add("touchZoom",de,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&u.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new fm(u));const ye=u.scrollZoom=new fh(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ye,["mousePan"]),n.interactive&&n.scrollZoom&&u.scrollZoom.enable(n.scrollZoom);const Ae=u.keyboard=new Fr(u);this._add("keyboard",Ae),n.interactive&&n.keyboard&&u.keyboard.enable()}_add(n,u,d){this._handlers.push({handlerName:n,handler:u,allowed:d}),this._handlersById[n]=u}stop(n){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ut(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,u,d){for(const v in n)if(v!==d&&(!u||u.indexOf(v)<0))return!0;return!1}_getMapTouches(n){const u=[];for(const d of n)this._el.contains(d.target)&&u.push(d);return u}mergeHandlerResult(n,u,d,v,A){if(!d)return;c.e(n,d);const E={handlerName:v,originalEvent:d.originalEvent||A};d.zoomDelta!==void 0&&(u.zoom=E),d.panDelta!==void 0&&(u.drag=E),d.rollDelta!==void 0&&(u.roll=E),d.pitchDelta!==void 0&&(u.pitch=E),d.bearingDelta!==void 0&&(u.rotate=E)}_applyChanges(){const n={},u={},d={};for(const[v,A,E]of this._changes)v.panDelta&&(n.panDelta=(n.panDelta||new c.P(0,0))._add(v.panDelta)),v.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+v.pitchDelta),v.rollDelta&&(n.rollDelta=(n.rollDelta||0)+v.rollDelta),v.around!==void 0&&(n.around=v.around),v.pinchAround!==void 0&&(n.pinchAround=v.pinchAround),v.noInertia&&(n.noInertia=v.noInertia),c.e(u,A),c.e(d,E);this._updateMapTransform(n,u,d),this._changes=[]}_updateMapTransform(n,u,d){const v=this._map,A=v._getTransformForUpdate(),E=v.terrain;if(!(lc(n)||E&&this._terrainMovement))return this._fireEvents(u,d,!0);v._stop(!0);let{panDelta:I,zoomDelta:R,bearingDelta:j,pitchDelta:F,rollDelta:Y,around:X,pinchAround:ee}=n;ee!==void 0&&(X=ee),X=X||v.transform.centerPoint,E&&!A.isPointOnMapSurface(X)&&(X=A.centerPoint);const ie={panDelta:I,zoomDelta:R,rollDelta:Y,pitchDelta:F,bearingDelta:j,around:X};this._map.cameraHelper.useGlobeControls&&!A.isPointOnMapSurface(X)&&(X=A.centerPoint);const fe=X.distSqr(A.centerPoint)<.01?A.center:A.screenPointToLocation(I?X.sub(I):X);this._handleMapControls({terrain:E,tr:A,deltasForHelper:ie,preZoomAroundLoc:fe,combinedEventsInProgress:u,panDelta:I}),v._applyUpdatedTransform(A),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(u,d,!0)}_handleMapControls({terrain:n,tr:u,deltasForHelper:d,preZoomAroundLoc:v,combinedEventsInProgress:A,panDelta:E}){const I=this._map.cameraHelper;if(I.handleMapControlsRollPitchBearingZoom(d,u),n)return I.useGlobeControls?(this._terrainMovement||!A.drag&&!A.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void I.handleMapControlsPan(d,u,v)):this._terrainMovement||!A.drag&&!A.zoom?void(A.drag&&this._terrainMovement&&E?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(E))):I.handleMapControlsPan(d,u,v)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void I.handleMapControlsPan(d,u,v));I.handleMapControlsPan(d,u,v)}_fireEvents(n,u,d){const v=Ut(this._eventsInProgress),A=Ut(n),E={};for(const Y in n){const{originalEvent:X}=n[Y];this._eventsInProgress[Y]||(E[`${Y}start`]=X),this._eventsInProgress[Y]=n[Y]}!v&&A&&this._fireEvent("movestart",A.originalEvent);for(const Y in E)this._fireEvent(Y,E[Y]);A&&this._fireEvent("move",A.originalEvent);for(const Y in n){const{originalEvent:X}=n[Y];this._fireEvent(Y,X)}const I={};let R;for(const Y in this._eventsInProgress){const{handlerName:X,originalEvent:ee}=this._eventsInProgress[Y];this._handlersById[X].isActive()||(delete this._eventsInProgress[Y],R=u[X]||ee,I[`${Y}end`]=R)}for(const Y in I)this._fireEvent(Y,I[Y]);const j=Ut(this._eventsInProgress),F=(v||A)&&!j;if(F&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Y=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Y.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Y)}if(d&&F){this._updatingCamera=!0;const Y=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!Y||!Y.essential&&V.prefersReducedMotion?(this._map.fire(new c.l("moveend",{originalEvent:R})),X(this._map.getBearing())&&this._map.resetNorth()):(X(Y.bearing||this._map.getBearing())&&(Y.bearing=0),Y.freezeElevation=!0,this._map.easeTo(Y,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(n,u){this._map.fire(new c.l(n,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new io("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Un extends c.E{constructor(n,u,d){super(),this._renderFrameCallback=()=>{const v=Math.min((Z()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=d.bearingSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,u){n.apply(this.transform),this.transform=n,this.cameraHelper=u}getCenter(){return new c.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,u){return this.jumpTo({center:n},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,u){return this.jumpTo({elevation:n},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,u,d){return n=c.P.convert(n).mult(-1),this.panTo(this.transform.center,c.e({offset:n},u),d)}panTo(n,u,d){return this.easeTo(c.e({center:n},u),d)}getZoom(){return this.transform.zoom}setZoom(n,u){return this.jumpTo({zoom:n},u),this}zoomTo(n,u,d){return this.easeTo(c.e({zoom:n},u),d)}zoomIn(n,u){return this.zoomTo(this.getZoom()+1,n,u),this}zoomOut(n,u){return this.zoomTo(this.getZoom()-1,n,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,u){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)).fire(new c.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(n,u){return this.jumpTo({bearing:n},u),this}getPadding(){return this.transform.padding}setPadding(n,u){return this.jumpTo({padding:n},u),this}rotateTo(n,u,d){return this.easeTo(c.e({bearing:n},u),d)}resetNorth(n,u){return this.rotateTo(0,c.e({duration:1e3},n),u),this}resetNorthPitch(n,u){return this.easeTo(c.e({bearing:0,pitch:0,roll:0,duration:1e3},n),u),this}snapToNorth(n,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,u):this}getPitch(){return this.transform.pitch}setPitch(n,u){return this.jumpTo({pitch:n},u),this}getRoll(){return this.transform.roll}setRoll(n,u){return this.jumpTo({roll:n},u),this}cameraForBounds(n,u){n=Br.convert(n).adjustAntiMeridian();const d=u&&u.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),d,u)}_cameraForBoxAndBearing(n,u,d,v){const A={top:0,bottom:0,right:0,left:0};if(typeof(v=c.e({padding:A,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const j=v.padding;v.padding={top:j,bottom:j,right:j,left:j}}const E=c.e(A,v.padding);v.padding=E;const I=this.transform,R=new Br(n,u);return this.cameraHelper.cameraForBoxAndBearing(v,E,R,d,I)}fitBounds(n,u,d){return this._fitInternal(this.cameraForBounds(n,u),u,d)}fitScreenCoordinates(n,u,d,v,A){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(c.P.convert(n)),this.transform.screenPointToLocation(c.P.convert(u)),d,v),v,A)}_fitInternal(n,u,d){return n?(delete(u=c.e(n,u)).padding,u.linear?this.easeTo(u,d):this.flyTo(u,d)):this}jumpTo(n,u){this.stop();const d=this._getTransformForUpdate();let v=!1,A=!1,E=!1;const I=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,n);const R=d.zoom!==I;return"elevation"in n&&d.elevation!==+n.elevation&&d.setElevation(+n.elevation),"bearing"in n&&d.bearing!==+n.bearing&&(v=!0,d.setBearing(+n.bearing)),"pitch"in n&&d.pitch!==+n.pitch&&(A=!0,d.setPitch(+n.pitch)),"roll"in n&&d.roll!==+n.roll&&(E=!0,d.setRoll(+n.roll)),n.padding==null||d.isPaddingEqual(n.padding)||d.setPadding(n.padding),this._applyUpdatedTransform(d),this.fire(new c.l("movestart",u)).fire(new c.l("move",u)),R&&this.fire(new c.l("zoomstart",u)).fire(new c.l("zoom",u)).fire(new c.l("zoomend",u)),v&&this.fire(new c.l("rotatestart",u)).fire(new c.l("rotate",u)).fire(new c.l("rotateend",u)),A&&this.fire(new c.l("pitchstart",u)).fire(new c.l("pitch",u)).fire(new c.l("pitchend",u)),E&&this.fire(new c.l("rollstart",u)).fire(new c.l("roll",u)).fire(new c.l("rollend",u)),this.fire(new c.l("moveend",u))}calculateCameraOptionsFromTo(n,u,d,v=0){const A=c.a9.fromLngLat(n,u),E=c.a9.fromLngLat(d,v),I=E.x-A.x,R=E.y-A.y,j=E.z-A.z,F=Math.hypot(I,R,j);if(F===0)throw new Error("Can't calculate camera options with same From and To");const Y=Math.hypot(I,R),X=c.at(this.transform.cameraToCenterDistance/F/this.transform.tileSize),ee=180*Math.atan2(I,-R)/Math.PI;let ie=180*Math.acos(Y/F)/Math.PI;return ie=j<0?90-ie:90+ie,{center:E.toLngLat(),elevation:v,zoom:X,pitch:ie,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(n,u,d,v,A){const E=this.transform.calculateCenterFromCameraLngLatAlt(n,u,d,v);return{center:E.center,elevation:E.elevation,zoom:E.zoom,bearing:d,pitch:v,roll:A}}easeTo(n,u){this._stop(!1,n.easeId),((n=c.e({offset:[0,0],duration:500,easing:c.cy},n)).animate===!1||!n.essential&&V.prefersReducedMotion)&&(n.duration=0);const d=this._getTransformForUpdate(),v=this.getBearing(),A=d.pitch,E=d.roll,I="bearing"in n?this._normalizeBearing(n.bearing,v):v,R="pitch"in n?+n.pitch:A,j="roll"in n?this._normalizeBearing(n.roll,E):E,F="padding"in n?n.padding:d.padding,Y=c.P.convert(n.offset);let X,ee;n.around&&(X=c.V.convert(n.around),ee=d.locationToScreenPoint(X));const ie={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},fe=this.cameraHelper.handleEaseTo(d,{bearing:I,pitch:R,roll:j,padding:F,around:X,aroundPoint:ee,offsetAsPoint:Y,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||v!==I,this._pitching=this._pitching||R!==A,this._rolling=this._rolling||j!==E,this._padding=!d.isPaddingEqual(F),this._zooming=this._zooming||fe.isZooming,this._easeId=n.easeId,this._prepareEase(u,n.noMoveStart,ie),this.terrain&&this._prepareElevation(fe.elevationCenter),this._ease((pe=>{fe.easeFunc(pe),this.terrain&&!n.freezeElevation&&this._updateElevation(pe),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(pe=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u,pe)}),n),this}_prepareEase(n,u,d={}){this._moving=!0,u||d.moving||this.fire(new c.l("movestart",n)),this._zooming&&!d.zooming&&this.fire(new c.l("zoomstart",n)),this._rotating&&!d.rotating&&this.fire(new c.l("rotatestart",n)),this._pitching&&!d.pitching&&this.fire(new c.l("pitchstart",n)),this._rolling&&!d.rolling&&this.fire(new c.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&u!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(d-(u-(d*n+this._elevationStart))/(1-n)),this._elevationTarget=u}this.transform.setElevation(c.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const u=n.getCameraLngLat(),d=n.getCameraAltitude(),v=this.terrain?this.terrain.getElevationForLngLatZoom(u,n.zoom):0;if(d<v){const A=this.calculateCameraOptionsFromTo(u,v,n.center,n.elevation);return{pitch:A.pitch,zoom:A.zoom}}return{}}_applyUpdatedTransform(n){const u=[];if(u.push((v=>this._elevateCameraIfInsideTerrain(v))),this.transformCameraUpdate&&u.push((v=>this.transformCameraUpdate(v))),!u.length)return;const d=n.clone();for(const v of u){const A=d.clone(),{center:E,zoom:I,roll:R,pitch:j,bearing:F,elevation:Y}=v(A);E&&A.setCenter(E),Y!==void 0&&A.setElevation(Y),I!==void 0&&A.setZoom(I),R!==void 0&&A.setRoll(R),j!==void 0&&A.setPitch(j),F!==void 0&&A.setBearing(F),d.apply(A)}this.transform.apply(d)}_fireMoveEvents(n){this.fire(new c.l("move",n)),this._zooming&&this.fire(new c.l("zoom",n)),this._rotating&&this.fire(new c.l("rotate",n)),this._pitching&&this.fire(new c.l("pitch",n)),this._rolling&&this.fire(new c.l("roll",n))}_afterEase(n,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const d=this._zooming,v=this._rotating,A=this._pitching,E=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new c.l("zoomend",n)),v&&this.fire(new c.l("rotateend",n)),A&&this.fire(new c.l("pitchend",n)),E&&this.fire(new c.l("rollend",n)),this.fire(new c.l("moveend",n))}flyTo(n,u){if(!n.essential&&V.prefersReducedMotion){const Xe=c.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Xe,u)}this.stop(),n=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.cy},n);const d=this._getTransformForUpdate(),v=d.bearing,A=d.pitch,E=d.roll,I=d.padding,R="bearing"in n?this._normalizeBearing(n.bearing,v):v,j="pitch"in n?+n.pitch:A,F="roll"in n?this._normalizeBearing(n.roll,E):E,Y="padding"in n?n.padding:d.padding,X=c.P.convert(n.offset);let ee=d.centerPoint.add(X);const ie=d.screenPointToLocation(ee),fe=this.cameraHelper.handleFlyTo(d,{bearing:R,pitch:j,roll:F,padding:Y,locationAtOffset:ie,offsetAsPoint:X,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let pe=n.curve;const de=Math.max(d.width,d.height),ye=de/fe.scaleOfZoom,Ae=fe.pixelPathLength;typeof fe.scaleOfMinZoom=="number"&&(pe=Math.sqrt(de/fe.scaleOfMinZoom/Ae*2));const ge=pe*pe;function Se(Xe){const St=(ye*ye-de*de+(Xe?-1:1)*ge*ge*Ae*Ae)/(2*(Xe?ye:de)*ge*Ae);return Math.log(Math.sqrt(St*St+1)-St)}function Me(Xe){return(Math.exp(Xe)-Math.exp(-Xe))/2}function _e(Xe){return(Math.exp(Xe)+Math.exp(-Xe))/2}const Re=Se(!1);let Ye=function(Xe){return _e(Re)/_e(Re+pe*Xe)},Ge=function(Xe){return de*((_e(Re)*(Me(St=Re+pe*Xe)/_e(St))-Me(Re))/ge)/Ae;var St},$e=(Se(!0)-Re)/pe;if(Math.abs(Ae)<2e-6||!isFinite($e)){if(Math.abs(de-ye)<1e-6)return this.easeTo(n,u);const Xe=ye<de?-1:1;$e=Math.abs(Math.log(ye/de))/pe,Ge=()=>0,Ye=St=>Math.exp(Xe*pe*St)}return n.duration="duration"in n?+n.duration:1e3*$e/("screenSpeed"in n?+n.screenSpeed/pe:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=v!==R,this._pitching=j!==A,this._rolling=F!==E,this._padding=!d.isPaddingEqual(Y),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(fe.targetCenter),this._ease((Xe=>{const St=Xe*$e,At=1/Ye(St),ft=Ge(St);this._rotating&&d.setBearing(c.G.number(v,R,Xe)),this._pitching&&d.setPitch(c.G.number(A,j,Xe)),this._rolling&&d.setRoll(c.G.number(E,F,Xe)),this._padding&&(d.interpolatePadding(I,Y,Xe),ee=d.centerPoint.add(X)),fe.easeFunc(Xe,At,ft,ee),this.terrain&&!n.freezeElevation&&this._updateElevation(Xe),this._applyUpdatedTransform(d),this._fireMoveEvents(u)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,u){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const v=this._onEaseEnd;delete this._onEaseEnd,v.call(this,u)}return n||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(n,u,d){d.animate===!1||d.duration===0?(n(1),u()):(this._easeStart=Z(),this._easeOptions=d,this._onEaseFrame=n,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,u){n=c.W(n,-180,180);const d=Math.abs(n-u);return Math.abs(n-360-u)<d&&(n-=360),Math.abs(n+360-u)<d&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(c.V.convert(n),this.transform):null}}const Sn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class In{constructor(n=Sn){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=G.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=G.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=G.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){G.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,u){const d=this._map._getUIString(`AttributionControl.${u}`);n.title=d,n.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((v=>typeof v!="string"?"":v))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style.tileManagers;for(const v in u){const A=u[v];if(A.used||A.usedForTerrain){const E=A.getSource();E.attribution&&n.indexOf(E.attribution)<0&&n.push(E.attribution)}}n=n.filter((v=>String(v).trim())),n.sort(((v,A)=>v.length-A.length)),n=n.filter(((v,A)=>{for(let E=A+1;E<n.length;E++)if(n[E].indexOf(v)>=0)return!1;return!0}));const d=n.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,n.length?(this._innerContainer.innerHTML=G.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class mh{constructor(n={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const d=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=G.create("div","maplibregl-ctrl");const u=G.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){G.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Rs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const u=++this._id;return this._queue.push({callback:n,id:u,cancelled:!1}),u}remove(n){const u=this._currentlyRunning,d=u?this._queue.concat(u):this._queue;for(const v of d)if(v.id===n)return void(v.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const d of u)if(!d.cancelled&&(d.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var mr=c.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Rr extends c.E{constructor(n){super(),this._lastTilesetChange=Z(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,u){this.tileManager.update(n,u),this._renderableTilesKeys=[];const d={};for(const v of Mn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.tileManager._source.calculateTileZoom}))d[v.key]=!0,this._renderableTilesKeys.push(v.key),this._tiles[v.key]||(v.terrainRttPosMatrix32f=new Float64Array(16),c.c7(v.terrainRttPosMatrix32f,0,c.a5,c.a5,0,0,1),this._tiles[v.key]=new lt(v,this.tileSize),this._lastTilesetChange=Z());for(const v in this._tiles)d[v]||delete this._tiles[v]}freeRtt(n){for(const u in this._tiles){const d=this._tiles[u];(!n||d.tileID.equals(n)||d.tileID.isChildOf(n)||n.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,u){return u?this._getTerrainCoordsForTileRanges(n,u):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const u={};for(const d of this._renderableTilesKeys){const v=this._tiles[d].tileID,A=n.clone(),E=c.bk();if(v.canonical.equals(n.canonical))c.c7(E,0,c.a5,c.a5,0,0,1);else if(v.canonical.isChildOf(n.canonical)){const I=v.canonical.z-n.canonical.z,R=v.canonical.x-(v.canonical.x>>I<<I),j=v.canonical.y-(v.canonical.y>>I<<I),F=c.a5>>I;c.c7(E,0,F,F,0,0,1),c.O(E,E,[-R*F,-j*F,0])}else{if(!n.canonical.isChildOf(v.canonical))continue;{const I=n.canonical.z-v.canonical.z,R=n.canonical.x-(n.canonical.x>>I<<I),j=n.canonical.y-(n.canonical.y>>I<<I),F=c.a5>>I;c.c7(E,0,c.a5,c.a5,0,0,1),c.O(E,E,[R*F,j*F,0]),c.Q(E,E,[1/2**I,1/2**I,0])}}A.terrainRttPosMatrix32f=new Float32Array(E),u[d]=A}return u}_getTerrainCoordsForTileRanges(n,u){const d={};for(const v of this._renderableTilesKeys){const A=this._tiles[v].tileID;if(!this._isWithinTileRanges(A,u))continue;const E=n.clone(),I=c.bk();if(A.canonical.z===n.canonical.z){const R=n.canonical.x-A.canonical.x,j=n.canonical.y-A.canonical.y;c.c7(I,0,c.a5,c.a5,0,0,1),c.O(I,I,[R*c.a5,j*c.a5,0])}else if(A.canonical.z>n.canonical.z){const R=A.canonical.z-n.canonical.z,j=A.canonical.x-(A.canonical.x>>R<<R),F=A.canonical.y-(A.canonical.y>>R<<R),Y=n.canonical.x-(A.canonical.x>>R),X=n.canonical.y-(A.canonical.y>>R),ee=c.a5>>R;c.c7(I,0,ee,ee,0,0,1),c.O(I,I,[-j*ee+Y*c.a5,-F*ee+X*c.a5,0])}else{const R=n.canonical.z-A.canonical.z,j=n.canonical.x-(n.canonical.x>>R<<R),F=n.canonical.y-(n.canonical.y>>R<<R),Y=(n.canonical.x>>R)-A.canonical.x,X=(n.canonical.y>>R)-A.canonical.y,ee=c.a5<<R;c.c7(I,0,ee,ee,0,0,1),c.O(I,I,[j*c.a5+Y*ee,F*c.a5+X*ee,0])}E.terrainRttPosMatrix32f=new Float32Array(I),d[v]=E}return d}getSourceTile(n,u){const d=this.tileManager._source;let v=n.overscaledZ-this.deltaZoom;if(v>d.maxzoom&&(v=d.maxzoom),v<d.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(v).key);let A=this.findTileInCaches(this._sourceTileCache[n.key]);if(!A?.dem&&u)for(;v>=d.minzoom&&!A?.dem;)A=this.findTileInCaches(n.scaledTo(v--).key);return A}findTileInCaches(n){let u=this.tileManager.getTileByID(n);return u||(u=this.tileManager._outOfViewCache.getByKey(n),u)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,u){return u[n.canonical.z]&&n.canonical.x>=u[n.canonical.z].minTileX&&n.canonical.x<=u[n.canonical.z].maxTileX&&n.canonical.y>=u[n.canonical.z].minTileY&&n.canonical.y<=u[n.canonical.z].maxTileY}}class pr{constructor(n,u,d){this._meshCache={},this.painter=n,this.tileManager=new Rr(u),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,u,d,v=c.a5){var A;if(!(u>=0&&u<v&&d>=0&&d<v))return 0;const E=this.getTerrainData(n),I=(A=E.tile)===null||A===void 0?void 0:A.dem;if(!I)return 0;const R=c.cC([],[u/v*c.a5,d/v*c.a5],E.u_terrain_matrix),j=[R[0]*I.dim,R[1]*I.dim],F=Math.floor(j[0]),Y=Math.floor(j[1]),X=j[0]-F,ee=j[1]-Y;return I.get(F,Y)*(1-X)*(1-ee)+I.get(F+1,Y)*X*(1-ee)+I.get(F,Y+1)*(1-X)*ee+I.get(F+1,Y+1)*X*ee}getElevationForLngLatZoom(n,u){if(!c.cD(u,n.wrap()))return 0;const{tileID:d,mercatorX:v,mercatorY:A}=this._getOverscaledTileIDFromLngLatZoom(n,u);return this.getElevation(d,v%c.a5,A%c.a5,c.a5)}getElevationForLngLat(n,u){const d=Mn(u,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let v=0;for(const A of d)A.canonical.z>v&&(v=Math.min(A.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(n,v)}getElevation(n,u,d,v=c.a5){return this.getDEMElevation(n,u,d,v)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const v=this.painter.context,A=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new c.T(v,A,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new c.T(v,new c.R({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.ar([])}const u=this.tileManager.getSourceTile(n,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const v=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new c.T(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const d=u&&u.toString()+u.tileID.key+n.key;if(d&&!this._demMatrixCache[d]){const v=this.tileManager.getSource().maxzoom;let A=n.canonical.z-u.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=v?A=n.canonical.z-v:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=n.canonical.x-(n.canonical.x>>A<<A),I=n.canonical.y-(n.canonical.y>>A<<A),R=c.cE(new Float64Array(16),[1/(c.a5<<A),1/(c.a5<<A),0]);c.O(R,R,[E*c.a5,I*c.a5,0]),this._demMatrixCache[n.key]={matrix:R,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(n){const u=this.painter,d=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new c.T(u.context,{width:d,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new c.T(u.context,{width:d,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(d,v,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,d,v))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let A=0,E=0;A<this._coordsTextureSize;A++)for(let I=0;I<this._coordsTextureSize;I++,E+=4)u[E+0]=255&I,u[E+1]=255&A,u[E+2]=I>>8<<4|A>>8,u[E+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new c.T(n,d,n.gl.RGBA,{premultiply:!1});return v.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),d=this.painter.context,v=d.gl,A=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(A,I-E-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null);const R=u[0]+(u[2]>>4<<8),j=u[1]+((15&u[2])<<8),F=this.coordsIndex[255-u[3]],Y=F&&this.tileManager.getTileByID(F);if(!Y)return null;const X=this._coordsTextureSize,ee=(1<<Y.tileID.canonical.z)*X;return new c.a9((Y.tileID.canonical.x*X+R)/ee+Y.tileID.wrap,(Y.tileID.canonical.y*X+j)/ee,this.getElevation(Y.tileID,R,j,X))}depthAtPoint(n){const u=new Uint8Array(4),d=this.painter.context,v=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),v.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),d.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(n){var u;const d=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,v=d&&n.canonical.y===0,A=d&&n.canonical.y===(1<<n.canonical.z)-1,E=`m_${v?"n":""}_${A?"s":""}`;if(this._meshCache[E])return this._meshCache[E];const I=this.painter.context,R=new c.cF,j=new c.aY,F=this.meshSize,Y=c.a5/F,X=F*F;for(let _e=0;_e<=F;_e++)for(let Re=0;Re<=F;Re++)R.emplaceBack(Re*Y,_e*Y,0);for(let _e=0;_e<X;_e+=F+1)for(let Re=0;Re<F;Re++)j.emplaceBack(Re+_e,F+Re+_e+1,F+Re+_e+2),j.emplaceBack(Re+_e,F+Re+_e+2,Re+_e+1);const ee=R.length,ie=ee+(F+1),fe=(F+1)*F,pe=v?c.br:0,de=v?0:1,ye=A?c.bs:c.a5,Ae=A?0:1;for(let _e=0;_e<=F;_e++)R.emplaceBack(_e*Y,pe,de);for(let _e=0;_e<=F;_e++)R.emplaceBack(_e*Y,ye,Ae);for(let _e=0;_e<F;_e++)j.emplaceBack(fe+_e,ie+_e,ie+_e+1),j.emplaceBack(fe+_e,ie+_e+1,fe+_e+1),j.emplaceBack(0+_e,ee+_e+1,ee+_e),j.emplaceBack(0+_e,0+_e+1,ee+_e+1);const ge=R.length,Se=ge+2*(F+1);for(const _e of[0,1])for(let Re=0;Re<=F;Re++)for(const Ye of[0,1])R.emplaceBack(_e*c.a5,Re*Y,Ye);for(let _e=0;_e<2*F;_e+=2)j.emplaceBack(ge+_e,ge+_e+1,ge+_e+3),j.emplaceBack(ge+_e,ge+_e+3,ge+_e+2),j.emplaceBack(Se+_e,Se+_e+3,Se+_e+1),j.emplaceBack(Se+_e,Se+_e+2,Se+_e+3);const Me=new Wr(I.createVertexBuffer(R,mr.members),I.createIndexBuffer(j),c.aX.simpleSegment(0,0,R.length,j.length));return this._meshCache[E]=Me,Me}getMeshFrameDelta(n){return 2*Math.PI*c.bE/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,u){var d;if(!c.cD(u,n.wrap()))return 0;const{tileID:v}=this._getOverscaledTileIDFromLngLatZoom(n,u);return(d=this.getMinMaxElevation(v).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(n){const u=this.getTerrainData(n).tile,d={minElevation:null,maxElevation:null};return u&&u.dem&&(d.minElevation=u.dem.min*this.exaggeration,d.maxElevation=u.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(n,u){const d=c.a9.fromLngLat(n.wrap()),v=(1<<u)*c.a5,A=d.x*v,E=d.y*v,I=Math.floor(A/c.a5),R=Math.floor(E/c.a5);return{tileID:new c.a2(u,0,u,I,R),mercatorX:A,mercatorY:E}}}class yn{constructor(n,u,d){this._context=n,this._size=u,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new c.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(d.texture),{id:n,fbo:u,texture:d,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>n.id!==u)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const ao={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Mo{constructor(n,u){this.painter=n,this.terrain=u,this.pool=new yn(n.context,30,u.tileManager.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter((d=>!n._layers[d].isHidden(u))),this._coordsAscending={};for(const d in n.tileManagers){this._coordsAscending[d]={};const v=n.tileManagers[d].getVisibleCoordinates(),A=n.tileManagers[d].getSource(),E=A instanceof la?A.terrainTileRanges:null;for(const I of v){const R=this.terrain.tileManager.getTerrainCoords(I,E);for(const j in R)this._coordsAscending[d][j]||(this._coordsAscending[d][j]=[]),this._coordsAscending[d][j].push(R[j])}}this._coordsAscendingStr={};for(const d of n._order){const v=n._layers[d],A=v.source;if(ao[v.type]&&!this._coordsAscendingStr[A]){this._coordsAscendingStr[A]={};for(const E in this._coordsAscending[A])this._coordsAscendingStr[A][E]=this._coordsAscending[A][E].map((I=>I.key)).sort().join()}}for(const d of this._renderableTiles)for(const v in this._coordsAscendingStr){const A=this._coordsAscendingStr[v][d.tileID.key];A&&A!==d.rttCoords[v]&&(d.rtt=[])}}renderLayer(n,u){if(n.isHidden(this.painter.transform.zoom))return!1;const d=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),v=n.type,A=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(ao[v]&&(this._prevType&&ao[this._prevType]||this._stacks.push([]),this._prevType=v,this._stacks[this._stacks.length-1].push(n.id),!E))return!0;if(ao[this._prevType]||ao[v]&&E){this._prevType=v;const I=this._stacks.length-1,R=this._stacks[I]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(Af(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[I]){const Y=this.pool.getObjectForId(j.rtt[I].id);if(Y.stamp===j.rtt[I].stamp){this.pool.useObject(Y);continue}}const F=this.pool.getOrCreateFreeObject();this.pool.useObject(F),this.pool.stampObject(F),j.rtt[I]={id:F.id,stamp:F.stamp},A.context.bindFramebuffer.set(F.fbo.framebuffer),A.context.clear({color:c.bp.transparent,stencil:0}),A.currentStencilSource=void 0;for(let Y=0;Y<R.length;Y++){const X=A.style._layers[R[Y]],ee=X.source?this._coordsAscending[X.source][j.tileID.key]:[j.tileID];A.context.viewport.set([0,0,F.fbo.width,F.fbo.height]),A._renderTileClippingMasks(X,ee,!0),A.renderLayer(A,A.style.tileManagers[X.source],X,ee,d),X.source&&(j.rttCoords[X.source]=this._coordsAscendingStr[X.source][j.tileID.key])}}return Af(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),ao[v]}return!1}}const su={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},lu=P,Ls={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Sn,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},kd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class hn{constructor(n,u,d=!1){this.mousedown=A=>{this.startMove(A,G.mousePos(this.element,A)),G.addEventListener(window,"mousemove",this.mousemove),G.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=A=>{this.move(A,G.mousePos(this.element,A))},this.mouseup=A=>{this._rotatePitchHandler.dragEnd(A),this.offTemp()},this.touchstart=A=>{A.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=G.touchPos(this.element,A.targetTouches)[0],this.startMove(A,this._startPos),G.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.addEventListener(window,"touchend",this.touchend))},this.touchmove=A=>{A.targetTouches.length!==1?this.reset():(this._lastPos=G.touchPos(this.element,A.targetTouches)[0],this.move(A,this._lastPos))},this.touchend=A=>{A.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const v=new uh;this._rotatePitchHandler=new ro({clickTolerance:3,move:(A,E)=>{const I=u.getBoundingClientRect(),R=new c.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:c.cx(new c.P(A.x,E.y),E,R),pitchDelta:d?-.5*(E.y-A.y):void 0}},moveStateManager:v,enable:!0,assignEvents:()=>{}}),this.map=n,G.addEventListener(u,"mousedown",this.mousedown),G.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),G.addEventListener(u,"touchcancel",this.reset)}startMove(n,u){this._rotatePitchHandler.dragStart(n,u),G.disableDrag()}move(n,u){const d=this.map,{bearingDelta:v,pitchDelta:A}=this._rotatePitchHandler.dragMove(n,u)||{};v&&d.setBearing(d.getBearing()+v),A&&d.setPitch(d.getPitch()+A)}off(){const n=this.element;G.removeEventListener(n,"mousedown",this.mousedown),G.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),G.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.removeEventListener(window,"touchend",this.touchend),G.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){G.enableDrag(),G.removeEventListener(window,"mousemove",this.mousemove),G.removeEventListener(window,"mouseup",this.mouseup),G.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),G.removeEventListener(window,"touchend",this.touchend)}}let Po;function uc(w,n,u,d=!1){if(d||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const v=new c.V(w.lng,w.lat);if(w=new c.V(w.lng,w.lat),n){const A=new c.V(w.lng-360,w.lat),E=new c.V(w.lng+360,w.lat),I=u.locationToScreenPoint(w).distSqr(n);u.locationToScreenPoint(A).distSqr(n)<I?w=A:u.locationToScreenPoint(E).distSqr(n)<I&&(w=E)}for(;Math.abs(w.lng-u.center.lng)>180;){const A=u.locationToScreenPoint(w);if(A.x>=0&&A.y>=0&&A.x<=u.width&&A.y<=u.height)break;w.lng>u.center.lng?w.lng-=360:w.lng+=360}return w.lng!==v.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(w))?w:v}const cc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gh(w,n,u){const d=w.classList;for(const v in cc)d.remove(`maplibregl-${u}-anchor-${v}`);d.add(`maplibregl-${u}-anchor-${n}`)}class yh extends c.E{constructor(n){if(super(),this._onKeyPress=u=>{const d=u.code,v=u.charCode||u.keyCode;d!=="Space"&&d!=="Enter"&&v!==32&&v!==13||this.togglePopup()},this._onMapClick=u=>{const d=u.originalEvent.target,v=this._element;this._popup&&(d===v||v.contains(d))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const d=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=uc(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let A="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?A="rotateX(0deg)":this._pitchAlignment==="map"&&(A=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),G.setTransform(this._element,`${cc[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${A} ${v}`),V.frameAsync(new AbortController).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.l("dragstart"))),this.fire(new c.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=c.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=G.create("div");const u=G.createNS("http://www.w3.org/2000/svg","svg"),d=41,v=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${d}px`),u.setAttributeNS(null,"width",`${v}px`),u.setAttributeNS(null,"viewBox",`0 0 ${v} ${d}`);const A=G.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"stroke","none"),A.setAttributeNS(null,"stroke-width","1"),A.setAttributeNS(null,"fill","none"),A.setAttributeNS(null,"fill-rule","evenodd");const E=G.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const I=G.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const de of R){const ye=G.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",de.rx),ye.setAttributeNS(null,"ry",de.ry),I.appendChild(ye)}const j=G.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const F=G.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(F);const Y=G.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"opacity","0.25"),Y.setAttributeNS(null,"fill","#000000");const X=G.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Y.appendChild(X);const ee=G.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ie=G.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const fe=G.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#000000"),fe.setAttributeNS(null,"opacity","0.25"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962");const pe=G.createNS("http://www.w3.org/2000/svg","circle");pe.setAttributeNS(null,"fill","#FFFFFF"),pe.setAttributeNS(null,"cx","5.5"),pe.setAttributeNS(null,"cy","5.5"),pe.setAttributeNS(null,"r","5.4999962"),ie.appendChild(fe),ie.appendChild(pe),E.appendChild(I),E.appendChild(j),E.appendChild(Y),E.appendChild(ee),E.appendChild(ie),u.appendChild(E),u.setAttributeNS(null,"height",d*this._scale+"px"),u.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(u),this._offset=c.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),gh(this._element,this._anchor,"marker"),n&&n.className)for(const u of n.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),G.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=c.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const v=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var u,d;const v=(u=this._map)===null||u===void 0?void 0:u.terrain,A=this._map.transform.isLocationOccluded(this._lngLat);if(!v||A){const ee=A?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ee&&(this._element.style.opacity=ee))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const E=this._map,I=E.terrain.depthAtPoint(this._pos),R=E.terrain.getElevationForLngLat(this._lngLat,E.transform);if(E.transform.lngLatToCameraDepth(this._lngLat,R)-I<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/E.transform.pixelsPerMeter,F=Math.sin(E.getPitch()*Math.PI/180)*j,Y=E.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),X=E.transform.lngLatToCameraDepth(this._lngLat,R+F)-Y>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&X&&this._popup.remove(),this._element.style.opacity=X?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=c.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,u){return(this._opacity===void 0||n===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const vh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let vl=0,Bs=!1;const Ii={maxWidth:100,unit:"metric"};function vn(w,n,u){const d=u&&u.maxWidth||100,v=w._container.clientHeight/2,A=w._container.clientWidth/2,E=w.unproject([A-d/2,v]),I=w.unproject([A+d/2,v]),R=Math.round(w.project(I).x-w.project(E).x),j=Math.min(d,R,w._container.clientWidth),F=E.distanceTo(I);if(u&&u.unit==="imperial"){const Y=3.2808*F;Y>5280?ds(n,j,Y/5280,w._getUIString("ScaleControl.Miles")):ds(n,j,Y,w._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?ds(n,j,F/1852,w._getUIString("ScaleControl.NauticalMiles")):F>=1e3?ds(n,j,F/1e3,w._getUIString("ScaleControl.Kilometers")):ds(n,j,F,w._getUIString("ScaleControl.Meters"))}function ds(w,n,u,d){const v=(function(A){const E=Math.pow(10,`${Math.floor(A)}`.length-1);let I=A/E;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:(function(R){const j=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*j)/j})(I),E*I})(u);w.style.width=n*(v/u)+"px",w.innerHTML=`${v}&nbsp;${d}`}const uu={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},cu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function hc(w){if(w){if(typeof w=="number"){const n=Math.round(Math.abs(w)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,w),"top-left":new c.P(n,n),"top-right":new c.P(-n,n),bottom:new c.P(0,-w),"bottom-left":new c.P(n,-n),"bottom-right":new c.P(-n,-n),left:new c.P(w,0),right:new c.P(-w,0)}}if(w instanceof c.P||Array.isArray(w)){const n=c.P.convert(w);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:c.P.convert(w.center||[0,0]),top:c.P.convert(w.top||[0,0]),"top-left":c.P.convert(w["top-left"]||[0,0]),"top-right":c.P.convert(w["top-right"]||[0,0]),bottom:c.P.convert(w.bottom||[0,0]),"bottom-left":c.P.convert(w["bottom-left"]||[0,0]),"bottom-right":c.P.convert(w["bottom-right"]||[0,0]),left:c.P.convert(w.left||[0,0]),right:c.P.convert(w.right||[0,0])}}return hc(new c.P(0,0))}const Co=P;_.AJAXError=c.cI,_.Event=c.l,_.Evented=c.E,_.LngLat=c.V,_.MercatorCoordinate=c.a9,_.Point=c.P,_.addProtocol=c.cJ,_.config=c.c,_.removeProtocol=c.cK,_.AttributionControl=In,_.BoxZoomHandler=gl,_.CanvasSource=ne,_.CooperativeGesturesHandler=Bt,_.DoubleClickZoomHandler=If,_.DragPanHandler=zd,_.DragRotateHandler=ja,_.EdgeInsets=Ca,_.FullscreenControl=class extends c.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var n;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=u?.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){G.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=G.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);G.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},_.GeoJSONSource=gi,_.GeolocateControl=class extends c.E{constructor(w){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new c.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const u=new c.V(n.coords.longitude,n.coords.latitude),d=n.coords.accuracy,v=this._map.getBearing(),A=c.e({bearing:v},this.options.fitBoundsOptions),E=Br.fromLngLat(u,d);this._map.fitBounds(E,A,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const u=new c.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Bs)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=G.create("button","maplibregl-ctrl-geolocate",this._container),G.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=G.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new yh({element:this._dotElement}),this._circleElement=G.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new yh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const d=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.l("trackuserlocationend")),this.fire(new c.l("userlocationlostfocus")))}))}},this.options=c.e({},vh,w)}onAdd(w){return this._map=w,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return c._(this,arguments,void 0,(function*(n=!1){if(Po!==void 0&&!n)return Po;if(window.navigator.permissions===void 0)return Po=!!window.navigator.geolocation,Po;try{Po=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Po=!!window.navigator.geolocation}return Po}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),G.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,vl=0,Bs=!1}_isOutOfMapMaxBounds(w){const n=this._map.getMaxBounds(),u=w.coords;return n&&(u.longitude<n.getWest()||u.longitude>n.getEast()||u.latitude<n.getSouth()||u.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const n=this._map.project(w),u=this._map.unproject([n.x+100,n.y]),d=w.distanceTo(u)/100,v=2*this._accuracy/d;this._circleElement.style.width=`${v.toFixed(2)}px`,this._circleElement.style.height=`${v.toFixed(2)}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vl--,Bs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.l("trackuserlocationstart")),this.fire(new c.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vl++,vl>1?(w={maximumAge:6e5,timeout:0},Bs=!0):(w=this.options.positionOptions,Bs=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},_.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const n=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=G.create("button","maplibregl-ctrl-globe",this._container),G.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){G.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},_.Hash=Fn,_.ImageSource=la,_.KeyboardHandler=Fr,_.LngLatBounds=Br,_.LogoControl=mh,_.Map=class extends Un{constructor(w){var n,u;c.cG.mark(c.cH.create);const d=Object.assign(Object.assign(Object.assign({},Ls),w),{canvasContextAttributes:Object.assign(Object.assign({},Ls.canvasContextAttributes),w.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const v=new ti,A=new Zl;if(d.minZoom!==void 0&&v.setMinZoom(d.minZoom),d.maxZoom!==void 0&&v.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&v.setMinPitch(d.minPitch),d.maxPitch!==void 0&&v.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&v.setRenderWorldCopies(d.renderWorldCopies),d.transformConstrain!==null&&v.setConstrainOverride(d.transformConstrain),super(v,A,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Rs,this._controls=[],this._mapId=c.af(),this._lostContextStyle={style:null,images:null},this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const R of Object.values(this.style._layers))if(R.type==="custom"&&console.warn(`Custom layer with id '${R.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),R._listeners)for(const[j]of Object.entries(R._listeners))console.warn(`Custom layer with id '${R.id}' had event listeners for event '${j}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new c.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new c.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},su),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this._zoomLevelsToOverscale=d.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=d.transformCameraUpdate,this.transformConstrain=d.transformConstrain,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,d.reduceMotion!==void 0&&(V.prefersReducedMotion=d.reduceMotion),this._imageQueueHandle=je.addThrottleControl((()=>this.isMoving())),this._requestManager=new gt(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const R=Dd((j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())}),50);this._resizeObserver=new ResizeObserver((j=>{I?R(j):I=!0})),this._resizeObserver.observe(this._container)}this.handlers=new ph(this,d),this._hash=d.hash&&new Fn(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,c.e({},d.fitBoundsOptions,{duration:0}))));const E=typeof d.style=="string"||((u=(n=d.style)===null||n===void 0?void 0:n.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,E),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new In(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new mh,d.logoPosition),this.on("style.load",(()=>{if(E||this._resizeTransform(),this.transform.unmodified){const I=c.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}})),this.on("data",(I=>{this._update(I.dataType==="style"),this.fire(new c.l(`${I.dataType}data`,I))})),this.on("dataloading",(I=>{this.fire(new c.l(`${I.dataType}dataloading`,I))})),this.on("dataabort",(I=>{this.fire(new c.l("sourcedataabort",I))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,n){return this.style.setGlobalStateProperty(w,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,n){if(n===void 0&&(n=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new c.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=w.onAdd(this);this._controls.push(w);const d=this._controlPositions[n];return n.indexOf("bottom")!==-1?d.insertBefore(u,d.firstChild):d.appendChild(u),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new c.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(w);return n>-1&&this._controls.splice(n,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return Mn(this.transform,w)}calculateCameraOptionsFromTo(w,n,u,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLat(u,this.transform)),super.calculateCameraOptionsFromTo(w,n,u,d)}resize(w,n=!0){const[u,d]=this._containerDimensions(),v=this._getClampedPixelRatio(u,d);if(this._resizeCanvas(u,d,v),this.painter.resize(u,d,v),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const I=this._getClampedPixelRatio(u,d);this._resizeCanvas(u,d,I),this.painter.resize(u,d,I)}this._resizeTransform(n);const A=!this._moving;return A&&(this.stop(),this.fire(new c.l("movestart",w)).fire(new c.l("move",w))),this.fire(new c.l("resize",w)),A&&this.fire(new c.l("moveend",w)),this}_resizeTransform(w=!0){var n;const[u,d]=this._containerDimensions();this.transform.resize(u,d,w),(n=this._requestedCameraState)===null||n===void 0||n.resize(u,d,w)}_getClampedPixelRatio(w,n){const{0:u,1:d}=this._maxCanvasSize,v=this.getPixelRatio(),A=w*v,E=n*v;return Math.min(A>u?u/A:1,E>d?d/E:1)*v}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Br.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom){const n=this._getTransformForUpdate();return n.setMinZoom(w),this._applyUpdatedTransform(n),this._update(),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom){const n=this._getTransformForUpdate();return n.setMaxZoom(w),this._applyUpdatedTransform(n),this._update(),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(c.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(c.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,n,u){if(w==="mouseenter"||w==="mouseover"){let d=!1;return{layers:n,listener:u,delegates:{mousemove:A=>{const E=n.filter((R=>this.getLayer(R))),I=E.length!==0?this.queryRenderedFeatures(A.point,{layers:E}):[];I.length?d||(d=!0,u.call(this,new fi(w,this,A.originalEvent,{features:I}))):d=!1},mouseout:()=>{d=!1}}}}if(w==="mouseleave"||w==="mouseout"){let d=!1;return{layers:n,listener:u,delegates:{mousemove:E=>{const I=n.filter((R=>this.getLayer(R)));(I.length!==0?this.queryRenderedFeatures(E.point,{layers:I}):[]).length?d=!0:d&&(d=!1,u.call(this,new fi(w,this,E.originalEvent)))},mouseout:E=>{d&&(d=!1,u.call(this,new fi(w,this,E.originalEvent)))}}}}{const d=v=>{const A=n.filter((I=>this.getLayer(I))),E=A.length!==0?this.queryRenderedFeatures(v.point,{layers:A}):[];E.length&&(v.features=E,u.call(this,v),delete v.features)};return{layers:n,listener:u,delegates:{[w]:d}}}}_saveDelegatedListener(w,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(n)}_removeDelegatedListener(w,n,u){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const d=this._delegatedListeners[w];for(let v=0;v<d.length;v++){const A=d[v];if(A.listener===u&&A.layers.length===n.length&&A.layers.every((E=>n.includes(E)))){for(const E in A.delegates)this.off(E,A.delegates[E]);return void d.splice(v,1)}}}on(w,n,u){if(u===void 0)return super.on(w,n);const d=typeof n=="string"?[n]:n,v=this._createDelegatedListener(w,d,u);this._saveDelegatedListener(w,v);for(const A in v.delegates)this.on(A,v.delegates[A]);return{unsubscribe:()=>{this._removeDelegatedListener(w,d,u)}}}once(w,n,u){if(u===void 0)return super.once(w,n);const d=typeof n=="string"?[n]:n,v=this._createDelegatedListener(w,d,u);for(const A in v.delegates){const E=v.delegates[A];v.delegates[A]=(...I)=>{this._removeDelegatedListener(w,d,u),E(...I)}}this._saveDelegatedListener(w,v);for(const A in v.delegates)this.once(A,v.delegates[A]);return this}off(w,n,u){return u===void 0?super.off(w,n):(this._removeDelegatedListener(w,typeof n=="string"?[n]:n,u),this)}queryRenderedFeatures(w,n){if(!this.style)return[];let u;const d=w instanceof c.P||Array.isArray(w),v=d?w:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(d?{}:w)||{},v instanceof c.P||typeof v[0]=="number")u=[c.P.convert(v)];else{const A=c.P.convert(v[0]),E=c.P.convert(v[1]);u=[A,new c.P(E.x,A.y),E,new c.P(A.x,E.y),A]}return this.style.queryRenderedFeatures(u,n,this.transform)}querySourceFeatures(w,n){return this.style.querySourceFeatures(w,n)}setStyle(w,n){return(n=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(w,n))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const n=this._locale[w];if(n==null)throw new Error(`Missing UI string '${w}'`);return n}_updateStyle(w,n){var u,d;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,n)));const v=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new ol(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,n,v):this.style.loadJSON(w,n,v),this):((d=(u=this.style)===null||u===void 0?void 0:u.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ol(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,n){if(typeof w=="string"){const u=this._requestManager.transformRequest(w,"Style");c.j(u,new AbortController).then((d=>{this._updateDiff(d.data,n)})).catch((d=>{d&&this.fire(new c.k(d))}))}else typeof w=="object"&&this._updateDiff(w,n)}_updateDiff(w,n){try{this.style.setState(w,n)&&this._update(!0)}catch(u){c.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(w,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(w,n){return this._lazyInitEmptyStyle(),this.style.addSource(w,n),this._update(!0)}isSourceLoaded(w){const n=this.style&&this.style.tileManagers[w];if(n!==void 0)return n.loaded();this.fire(new c.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const n=this.style.tileManagers[w.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&n.reload();for(const u in this.style._layers){const d=this.style._layers[u];d.type==="hillshade"&&d.source===w.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===w.source&&c.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new pr(this.painter,n,w),this.painter.renderToTexture=new Mo(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var d;u.dataType==="style"?this.terrain.tileManager.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=u.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new c.l("terrain",{terrain:w})),this}getTerrain(){var w,n;return(n=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const n of Object.values(w))if(!n.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,n,u){if(u){const d=this.getSource(u);if(!d)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);d.calculateTileZoom=Nr(Math.max(1,w),Math.max(1,n))}else for(const d in this.style.tileManagers)this.style.tileManagers[d].getSource().calculateTileZoom=Nr(Math.max(1,w),Math.max(1,n));return this._update(!0),this}refreshTiles(w,n){const u=this.style.tileManagers[w];if(!u)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);n===void 0?u.reload(!0):u.refreshTiles(n.map((d=>new c.ac(d.z,d.x,d.y))))}addImage(w,n,u={}){const{pixelRatio:d=1,sdf:v=!1,stretchX:A,stretchY:E,content:I,textFitWidth:R,textFitHeight:j}=u;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||c.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:Y,data:X}=n,ee=n;return this.style.addImage(w,{data:new c.R({width:F,height:Y},new Uint8Array(X)),pixelRatio:d,stretchX:A,stretchY:E,content:I,textFitWidth:R,textFitHeight:j,sdf:v,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,w),this}}{const{width:F,height:Y,data:X}=V.getImageData(n);this.style.addImage(w,{data:new c.R({width:F,height:Y},X),pixelRatio:d,stretchX:A,stretchY:E,content:I,textFitWidth:R,textFitHeight:j,sdf:v,version:0})}}updateImage(w,n){const u=this.style.getImage(w);if(!u)return this.fire(new c.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=n instanceof HTMLImageElement||c.b(n)?V.getImageData(n):n,{width:v,height:A,data:E}=d;if(v===void 0||A===void 0)return this.fire(new c.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||A!==u.data.height)return this.fire(new c.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(n instanceof HTMLImageElement||c.b(n));return u.data.replace(E,I),this.style.updateImage(w,u),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new c.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return je.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,n){return this._lazyInitEmptyStyle(),this.style.addLayer(w,n),this._update(!0)}moveLayer(w,n){return this.style.moveLayer(w,n),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,n,u){return this.style.setLayerZoomRange(w,n,u),this._update(!0)}setFilter(w,n,u={}){return this.style.setFilter(w,n,u),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,n,u,d={}){return this.style.setPaintProperty(w,n,u,d),this._update(!0)}getPaintProperty(w,n){return this.style.getPaintProperty(w,n)}setLayoutProperty(w,n,u,d={}){return this.style.setLayoutProperty(w,n,u,d),this._update(!0)}getLayoutProperty(w,n){return this.style.getLayoutProperty(w,n)}setGlyphs(w,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,n,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,n,u,(d=>{d||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,n,(u=>{u||this._update(!0)})),this}setLight(w,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,n){return this.style.setFeatureState(w,n),this._update()}removeFeatureState(w,n){return this.style.removeFeatureState(w,n),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,n=0;return this._container&&(w=this._container.clientWidth||400,n=this._container.clientHeight||300),[w,n]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const n=this._canvasContainer=G.create("div","maplibregl-canvas-container",w);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=G.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),d=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],d);const v=this._controlContainer=G.create("div","maplibregl-control-container",w),A=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((E=>{A[E]=G.create("div",`maplibregl-ctrl-${E} `,v)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,n,u){this._canvas.width=Math.floor(u*w),this._canvas.height=Math.floor(u*n),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(d=>{n={requestedAttributes:w},d&&(n.statusMessage=d.statusMessage,n.type=d.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!u){const d="Failed to initialize WebGL";throw n?(n.message=d,new Error(JSON.stringify(n))):new Error(d)}this.painter=new hm(u,this.transform),oe.testSupport(u)}migrateProjection(w,n){super.migrateProjection(w,n),this.painter.transform=w,this.fire(new c.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var n,u,d,v,A;const E=this._idleTriggered?this._fadeDuration:0,I=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let R=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Y=this.transform.zoom,X=Z();this.style.zoomHistory.update(Y,X);const ee=new c.H(Y,{now:X,fadeDuration:E,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ie=ee.crossFadingFactor();ie===1&&ie===this._crossFadingFactor||(R=!0,this._crossFadingFactor=ie),this.style.update(ee)}const j=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==I;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((v=this.style.projection)===null||v===void 0?void 0:v.transitionState,(A=this.style.projection)===null||A===void 0?void 0:A.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,showPadding:this.showPadding}),this.fire(new c.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.cG.mark(c.cH.load),this.fire(new c.l("load"))),this.style&&(this.style.hasTransitions()||R)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const F=this._sourcesDirty||this._styleDirty||this._placementDirty;return F||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.l("idle")),!this._loaded||this._fullyLoaded||F||(this._fullyLoaded=!0,c.cG.mark(c.cH.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),je.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),G.remove(this._canvasContainer),G.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),c.cG.clearMetrics(),this._removed=!0,this.fire(new c.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,V.frame(this._frameRequest,(w=>{c.cG.frame(w),this._frameRequest=null;try{this._render(w)}catch(n){if(!c.Z(n)&&!(function(u){return u.message===pl})(n))throw n}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return lu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},_.MapMouseEvent=fi,_.MapTouchEvent=Ao,_.MapWheelEvent=Tf,_.Marker=yh,_.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const n=this._map.getZoom(),u=n===this._map.getMaxZoom(),d=n===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,u)=>{const d=this._map._getUIString(`NavigationControl.${u}`);n.title=d,n.setAttribute("aria-label",d)},this.options=c.e({},kd,w),this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),G.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),G.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=G.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new hn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){G.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,n){const u=G.create("button",w,this._container);return u.type="button",u.addEventListener("click",n),u}},_.Popup=class extends c.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&G.remove(this._content),this._container&&(G.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=G.create("div","maplibregl-popup",this._map.getContainer()),this._tip=G.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=uc(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const u=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor;const v=hc(this.options.offset);if(!d){const E=this._container.offsetWidth,I=this._container.offsetHeight;let R;R=u.y+v.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<E/2?R.push("left"):u.x>this._map.transform.width-E/2&&R.push("right"),d=R.length===0?"bottom":R.join("-")}let A=u.add(v[d]);this.options.subpixelPositioning||(A=A.round()),G.setTransform(this._container,`${cc[d]} translate(${A.x}px,${A.y}px)`),gh(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(uu),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=c.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const n=document.createDocumentFragment(),u=document.createElement("body");let d;for(u.innerHTML=w;d=u.firstChild,d;)n.appendChild(d);return this.setDOMContent(n)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=G.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=G.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(cu);w&&w.focus()}},_.RasterDEMTileSource=qo,_.RasterTileSource=Qs,_.ScaleControl=class{constructor(w){this._onMove=()=>{vn(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,vn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ii),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){G.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},_.ScrollZoomHandler=fh,_.Style=ol,_.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=G.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=G.create("button","maplibregl-ctrl-terrain",this._container),G.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){G.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},_.TwoFingersTouchPitchHandler=zs,_.TwoFingersTouchRotateHandler=hh,_.TwoFingersTouchZoomHandler=hs,_.TwoFingersTouchZoomRotateHandler=ou,_.VectorTileSource=ws,_.VideoSource=Ue,_.addSourceType=(w,n)=>c._(void 0,void 0,void 0,(function*(){if(ue(w))throw new Error(`A source type called "${w}" already exists.`);((u,d)=>{re[u]=d})(w,n)})),_.clearPrewarmedResources=function(){const w=Jt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Rt),Jt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_.createTileMesh=Qp,_.getMaxParallelImageRequests=function(){return c.c.MAX_PARALLEL_IMAGE_REQUESTS},_.getRTLTextPluginStatus=function(){return Ne().getRTLTextPluginStatus()},_.getVersion=function(){return Co},_.getWorkerCount=function(){return Gt.workerCount},_.getWorkerUrl=function(){return c.c.WORKER_URL},_.importScriptInWorkers=function(w){return gr().broadcast("IS",w)},_.isTimeFrozen=function(){return Q.isFrozen()},_.now=Z,_.prewarm=function(){ct().acquire(Rt)},_.restoreNow=function(){Q.restoreNow()},_.setMaxParallelImageRequests=function(w){c.c.MAX_PARALLEL_IMAGE_REQUESTS=w},_.setNow=function(w){Q.setNow(w)},_.setRTLTextPlugin=function(w,n){return Ne().setRTLTextPlugin(w,n)},_.setWorkerCount=function(w){Gt.workerCount=w},_.setWorkerUrl=function(w){c.c.WORKER_URL=w}}));var y=i;return y}))})(g0)),g0.exports}var X3=$3();const TA=Xh(X3);function Ap({value:e=16,title:t="  ",theme:i="dark"}){const[s,m]=H.useState(0);return H.useEffect(()=>{if(e===0){m(0);return}const y=Math.min(2e3,e*10),_=Math.min(e,100),c=e/_,P=y/_;let C=0,D=0;const k=setInterval(()=>{D++,C=Math.min(Math.round(c*D),e),m(C),C>=e&&clearInterval(k)},P);return()=>clearInterval(k)},[e]),we.jsxs("div",{style:{backgroundColor:"var(--bg-primary)",borderRadius:"8px",padding:"12px 8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",minHeight:"100px",gap:"8px"},children:[we.jsx("h3",{style:{color:"var(--text-primary)",fontSize:"clamp(12px, 1.2vw, 14px)",fontWeight:"600",textAlign:"center",direction:"rtl",margin:0,lineHeight:"1.3"},children:t}),we.jsx("div",{style:{fontSize:"clamp(32px, 5vw, 48px)",fontWeight:"bold",color:"rgba(212, 175, 55, 0.8)",textShadow:i==="dark"?"0 0 15px rgba(212, 175, 55, 0.6), 0 0 30px rgba(212, 175, 55, 0.4)":"0 0 12px rgba(212, 175, 55, 0.5), 0 0 20px rgba(212, 175, 55, 0.3)",fontFamily:"monospace",letterSpacing:"2px"},children:s})]})}function Y3({theme:e}){const[t,i]=H.useState({fullyExecutedStations:0,partiallyExecutedStations:0,structuralMeasurements:0,dipDirectionPoints:0,rockSamples:0,hazardLocations:0,fieldPhotos:0});return H.useEffect(()=>{(async()=>{try{const _=await fetch("https://docs.google.com/spreadsheets/d/1_2Hiy8llH0mwVXmCbDXGYQ0goP_FnU5JRn412QFd2G0/export?format=csv");if(!_.ok)throw new Error(`HTTP error: ${_.status}`);const C=(await _.text()).trim().split(/\r?\n/).map(k=>k.split(",").map(U=>U.trim())).slice(1),D={fullyExecutedStations:0,partiallyExecutedStations:0,structuralMeasurements:0,dipDirectionPoints:0,rockSamples:0,hazardLocations:0,fieldPhotos:0};console.log("Data rows:",C),C.forEach(k=>{const U=k[0],V=Number(k[1])||0;console.log(`Label: "${U}", Value: ${V}`),U.includes(" ")?D.fullyExecutedStations=V:U.includes(" ")||U.includes(" ")?D.partiallyExecutedStations=V:U.includes(" ")?D.structuralMeasurements=V:U.includes("Dip")?D.dipDirectionPoints=V:U.includes(" ")?D.rockSamples=V:U.includes(" ")?D.hazardLocations=V:U.includes(" ")&&(D.fieldPhotos=V)}),console.log("Final result:",D),i(D)}catch(m){console.error("Error fetching Google Sheets data:",m)}})()},[]),we.jsxs("div",{style:{height:"100%",padding:"4px",backgroundColor:"var(--bg-secondary)",color:"var(--text-primary)",display:"flex",flexDirection:"column",gap:"6px",overflow:"auto"},children:[we.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"6px",minHeight:"120px"},children:[we.jsx(Ap,{value:t.fullyExecutedStations,title:"   ",theme:e}),we.jsx(Ap,{value:t.partiallyExecutedStations,title:"   ",theme:e}),we.jsx(Ap,{value:t.structuralMeasurements,title:"   ",theme:e})]}),we.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px",minHeight:"120px"},children:[we.jsx(Ap,{value:t.dipDirectionPoints,title:"  Dip/Dip Direction",theme:e}),we.jsx(Ap,{value:t.rockSamples,title:"   ",theme:e})]}),we.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"6px",minHeight:"120px"},children:[we.jsx(Ap,{value:t.hazardLocations,title:"   ",theme:e}),we.jsx(Ap,{value:t.fieldPhotos,title:"   ",theme:e})]})]})}const W3=H.forwardRef(function({theme:t,onStationSelect:i},s){const m=H.useRef(null),y=H.useRef(null),_=H.useRef(null),[c,P]=H.useState({area:!0,roads:!0,boundary:!0,hillshade:!0,newPoints:!0,allStations:!0}),[C,D]=H.useState("default"),[k,U]=H.useState(""),[V,Q]=H.useState(null),Z=(De,Tt,Ct)=>{if(!De){console.warn("bindStationPopupEvents: Map is required");return}console.log("Binding popup events to available layers"),De.getLayer("all-stations-layer")&&De.off("click","all-stations-layer"),De.getLayer("stations-layer")&&De.off("click","stations-layer");const Ft=Le=>{if(!Le.features||Le.features.length===0)return;const We=Le.features[0].geometry.coordinates.slice(),_t=Le.features[0].properties;for(console.log("Station clicked:",_t),console.log("Layer ID:",Le.features[0].layer?.id);Math.abs(Le.lngLat.lng-We[0])>180;)We[0]+=Le.lngLat.lng>We[0]?360:-360;if(yt({..._t,X:We[0],Y:We[1],icon:null},We,De),Le.features[0].layer&&Le.features[0].layer.id==="all-stations-layer"){console.log(" Updating charts for All Stations layer"),console.log("Props:",_t);const at={name:_t.NAME||_t.Name,elevation:_t.Elevation,slope:_t.Slope};console.log("Setting selectedStationData:",at),Q(at),i&&i(at)}else console.log(" Not from all-stations-layer, layer ID:",Le.features[0].layer?.id)};if(De.getLayer("all-stations-layer")&&(console.log("Binding events to all-stations-layer"),De.on("click","all-stations-layer",Ft),De.on("mouseenter","all-stations-layer",()=>{De.getCanvas().style.cursor="pointer"}),De.on("mouseleave","all-stations-layer",()=>{De.getCanvas().style.cursor=""})),De.getLayer("stations-layer")&&(console.log("Binding events to stations-layer"),De.on("click","stations-layer",Ft),De.on("mouseenter","stations-layer",()=>{De.getCanvas().style.cursor="pointer"}),De.on("mouseleave","stations-layer",()=>{De.getCanvas().style.cursor=""})),De.getLayer("new-points-layer")){console.log("Binding events to new-points-layer");const Le=We=>{if(!We.features||We.features.length===0)return;const _t=We.features[0].geometry.coordinates.slice(),at=We.features[0].properties;if(console.log("New point clicked:",at),console.log("Code value:",at.Code),console.log("Full image path:",at.Code?`/data/images/samples/${at.Code}`:"No Code found"),at.Code){const Oe=new Image;Oe.onload=()=>console.log(` Image found: /data/images/samples/${at.Code}`),Oe.onerror=()=>console.log(` Image NOT found: /data/images/samples/${at.Code}`),Oe.src=`/data/images/samples/${at.Code}`}for(;Math.abs(We.lngLat.lng-_t[0])>180;)_t[0]+=We.lngLat.lng>_t[0]?360:-360;const Kt=at.Code?`/data/images/samples/${at.Code}`:null;console.log("Using image path:",Kt),yt({Name:at.Discription||at.Description||"  ",Location:at.Location||" ",X:_t[0],Y:_t[1],icon:Kt,Description:at.Discription||at.Description},_t,De)};De.on("click","new-points-layer",Le),De.on("mouseenter","new-points-layer",()=>{De.getCanvas().style.cursor="pointer"}),De.on("mouseleave","new-points-layer",()=>{De.getCanvas().style.cursor=""})}},G={default:"https://demotiles.maplibre.org/style.json",dark:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",imagery:"https://api.maptiler.com/maps/satellite/style.json?key=oh2RuUJTGdHt3cFgDcV7"},[oe,he]=H.useState(null),[me,Ce]=H.useState(null),[be,ke]=H.useState(null),[je,gt]=H.useState(null),bt=De=>{D(De);const Tt=y.current;Tt&&(Tt.setStyle(G[De]),Tt.once("style.load",()=>{It(Tt,De,be),Z(Tt)}))},It=(De,Tt=C,Ct=null)=>{if(De.getSource("terrain")||De.addSource("terrain",{type:"raster-dem",tiles:["https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png"],tileSize:256,encoding:"terrarium",maxzoom:11}),De.getLayer("hillshade")||(De.setTerrain({source:"terrain",exaggeration:1.5}),De.addLayer({id:"hillshade",type:"hillshade",source:"terrain"})),Tt==="dark"&&!De.getSource("hillshade-image")&&(De.addSource("hillshade-image",{type:"image",url:"/data/Hillshade_NoData_1.png",coordinates:[[39.854,21.46],[40.015,21.46],[40.015,21.326],[39.854,21.326]]}),De.addLayer({id:"hillshade-image-layer",type:"raster",source:"hillshade-image",paint:{"raster-opacity":.7}})),De.getSource("my-geojson")||(De.addSource("my-geojson",{type:"geojson",data:"/data/layer.geojson"}),De.addLayer({id:"geojson-fill",type:"fill",source:"my-geojson",paint:{"fill-color":"#000000","fill-opacity":0}}),De.addLayer({id:"geojson-outline",type:"line",source:"my-geojson",paint:{"line-color":"#000000","line-width":6}})),oe&&!De.getSource("stations")){De.addSource("stations",{type:"geojson",data:oe}),De.addLayer({id:"stations-layer",type:"circle",source:"stations",paint:{"circle-radius":["case",["==",["get","Type"],"Sample"],18,16],"circle-color":["case",["==",["get","Type"],"Sample"],"#ff0000","#007bff"],"circle-stroke-color":"#000000","circle-stroke-width":1}}),De.getLayer("stations-labels")||De.addLayer({id:"stations-labels",type:"symbol",source:"stations",layout:{"text-field":["get","Name"],"text-size":12,"text-offset":[0,1.5],"text-anchor":"top"},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1}});const Ft=oe.features.filter(We=>We.properties&&We.properties._sym==="S"&&We.geometry&&We.geometry.coordinates);let Le=null;if(Ft.length>=2){const We=Ft.map(Oe=>Oe.geometry.coordinates),_t=We[0],at=We[1];Le={type:"Feature",geometry:{type:"Point",coordinates:[(_t[0]+at[0])/2,(_t[1]+at[1])/2]},properties:{label:" "}}}Le&&!De.getSource("s1-station-label")&&(De.addSource("s1-station-label",{type:"geojson",data:{type:"FeatureCollection",features:[Le]}}),De.addLayer({id:"s1-station-label-layer",type:"symbol",source:"s1-station-label",layout:{"text-field":["get","label"],"text-size":10,"text-offset":[0,-1.5]},paint:{"text-color":"#000000"}}))}De.getSource("area")||(De.addSource("area",{type:"geojson",data:"/data/area.geojson"}),De.addLayer({id:"area-fill",type:"fill",source:"area",paint:{"fill-color":"#ff0000","fill-opacity":.3}}),De.addLayer({id:"area-outline",type:"line",source:"area",paint:{"line-color":"#ff0000","line-width":2}})),De.getSource("roads")||(De.addSource("roads",{type:"geojson",data:"/data/roads.geojson"}),De.addLayer({id:"roads-line",type:"line",source:"roads",paint:{"line-color":"#0000ff","line-width":3}})),De.getSource("boundary")||(De.addSource("boundary",{type:"geojson",data:"/data/boundary.geojson"}),De.addLayer({id:"boundary-fill",type:"fill",source:"boundary",paint:{"fill-color":"#ffd000ff","fill-opacity":.2}}),De.addLayer({id:"boundary-outline",type:"line",source:"boundary",paint:{"line-color":"#ff9100ff","line-width":2}})),Ct&&!De.getSource("new-points")&&(De.addSource("new-points",{type:"geojson",data:Ct}),De.addLayer({id:"new-points-layer",type:"circle",source:"new-points",paint:{"circle-radius":12,"circle-color":["case",["==",["get","Discription"],"Rock fall"],"#ff0000",["==",["get","Discription"],"Transition zone"],"#00aa00",["==",["get","Discription"],"Water channel"],"#0000ff",["==",["get","Discription"],"Geological phenomena"],"#ffd700",["==",["get","Discription"],"  "],"#888888","#000000"],"circle-stroke-color":"#ffffff","circle-stroke-width":2}})),De.getSource("all-stations")||(De.addSource("all-stations",{type:"geojson",data:"/data/AllStations.geojson.json"}),De.addLayer({id:"all-stations-layer",type:"circle",source:"all-stations",paint:{"circle-radius":10,"circle-color":["case",["in",["get","NAME"],["literal",["End point","Start point"]]],"#007bff",["in",["get","NAME"],["literal",["N1","N2","N3","N4"]]],"#ffff00","#ff0000"],"circle-stroke-color":"#000000","circle-stroke-width":1,"circle-opacity":.8}}),De.addLayer({id:"all-stations-labels",type:"symbol",source:"all-stations",layout:{"text-field":["get","NAME"],"text-size":10,"text-offset":[0,1.2],"text-anchor":"top"},paint:{"text-color":"#000000","text-halo-color":"#ffffff","text-halo-width":1}}))};H.useEffect(()=>{if(y.current)return;const De=new TA.Map({container:m.current,style:G[C],center:[39.9422281607,21.4310162095],zoom:12,pitch:75,bearing:-45,antialias:!0});return y.current=De,De.once("load",()=>{Promise.all([fetch("/data/stations.geojson").then(Tt=>Tt.json()),fetch("/data/_FeaturesToJSO.geojson").then(Tt=>Tt.json()).catch(()=>null)]).then(([Tt,Ct])=>{_.current=Tt,he(Tt),Ce(Ct);const Ft=Ct?{...Ct,features:Ct.features.filter(Le=>Le.geometry&&Le.geometry.coordinates).map(Le=>({...Le,properties:{...Le.properties,icon:Le.properties.Code?`/data/images/samples/${Le.properties.Code}`:null}}))}:null;ke(Ft),It(De,C,Ft),Z(De)})}),()=>{De.remove(),y.current=null}},[]),H.useImperativeHandle(s,()=>({zoomToFeatureByName(De){const Tt=y.current,Ct=_.current;if(!Tt||!Ct||!De)return;const Ft=Ct.features.find(Le=>Le?.properties?.Name===De);Ft?.geometry?.coordinates&&Tt.flyTo({center:Ft.geometry.coordinates,zoom:18,duration:1500,essential:!0})},zoomToRockyZone(De){const Tt=y.current;if(!Tt||!be||!De)return;console.log(" Zooming to rocky zone:",De),console.log(" Available newPointsGeoJSON:",be),console.log(" Total features in newPointsGeoJSON:",be.features?.length);const Ct=be.features?.map(Le=>Le?.properties?.Discription||Le?.properties?.Description).filter(Boolean);console.log(" All available descriptions:",[...new Set(Ct)]);const Ft=be.features.filter(Le=>{const We=Le?.properties?.Discription,_t=Le?.properties?.Description;return console.log(` Checking feature: Discription="${We}", Description="${_t}" vs zone="${De}"`),We===De||_t===De});if(console.log(" Found matching features:",Ft.length),console.log(" Matching features data:",Ft),Ft.length===0){console.log(" No matching features found for zone:",De);return}if(Ft.length===1){const Le=Ft[0].geometry.coordinates;console.log(" Zooming to single point:",Le),Tt.flyTo({center:Le,zoom:18,duration:1500,essential:!0})}else{const Le=Ft.map(We=>We?.geometry?.coordinates).filter(Boolean);if(Le.length>0){console.log(" Fitting bounds for multiple points:",Le);const We=Le.map(at=>at[0]),_t=Le.map(at=>at[1]);Tt.fitBounds([[Math.min(...We),Math.min(..._t)],[Math.max(...We),Math.max(..._t)]],{padding:60,duration:1500})}}},fitToAll(){const De=y.current,Tt=_.current;if(!De||!Tt?.features?.length)return;const Ct=Tt.features.map(We=>We?.geometry?.coordinates).filter(Boolean);if(!Ct.length)return;const Ft=Ct.map(We=>We[0]),Le=Ct.map(We=>We[1]);De.fitBounds([[Math.min(...Ft),Math.min(...Le)],[Math.max(...Ft),Math.max(...Le)]],{padding:40,duration:1200})},toggleLayer(De){const Tt=y.current;if(!Tt||!c)return;const Ct=!c[De];P(Ft=>({...Ft,[De]:Ct})),De==="area"?(Tt.setLayoutProperty("area-fill","visibility",Ct?"visible":"none"),Tt.setLayoutProperty("area-outline","visibility",Ct?"visible":"none")):De==="roads"?Tt.setLayoutProperty("roads-line","visibility",Ct?"visible":"none"):De==="boundary"?(Tt.setLayoutProperty("boundary-fill","visibility",Ct?"visible":"none"),Tt.setLayoutProperty("boundary-outline","visibility",Ct?"visible":"none")):De==="hillshade"?Tt.setLayoutProperty("hillshade-image-layer","visibility",Ct?"visible":"none"):De==="newPoints"?Tt.setLayoutProperty("new-points-layer","visibility",Ct?"visible":"none"):De==="allStations"&&(Tt.setLayoutProperty("all-stations-layer","visibility",Ct?"visible":"none"),Tt.setLayoutProperty("all-stations-labels","visibility",Ct?"visible":"none"))}}));const yt=(De,Tt,Ct)=>{const Ft=`
      <div style="
        min-width: 350px;
        max-width: 500px;
        padding: 20px;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: ${t==="dark"?"linear-gradient(135deg, #2d3748 0%, #1a202c 100%)":"linear-gradient(135deg, #ffffff 0%, #f7fafc 100%)"};
        color: ${t==="dark"?"#ffffff":"#2d3748"};
        border-radius: 15px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        border: 1px solid ${t==="dark"?"rgba(212, 175, 55, 0.3)":"rgba(212, 175, 55, 0.2)"};
      ">
        <!-- Header -->
        <div style="
          display: flex;
          align-items: center;
          margin-bottom: 20px;
          border-bottom: 2px solid rgba(212, 175, 55, 0.8);
          padding-bottom: 15px;
        ">
          <h3 style="
            margin: 0;
            color: #d4af37;
            font-size: 20px;
            font-weight: 600;
            text-align: center;
            width: 100%;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
          ">${De.Name||De.NAME||De.StationNam||"  "}</h3>
        </div>

        <!-- Image Section -->
        ${De.icon?`
          <div style="
            text-align: center;
            margin-bottom: 20px;
            position: relative;
          ">
            <img
              src="${De.icon.includes(".")?De.icon:De.icon+".JPG"}"
              alt="${De.Name||"Station Image"}"
              style="
                max-width: 100%;
                height: auto;
                max-height: 250px;
                border-radius: 12px;
                box-shadow: 0 8px 25px rgba(0,0,0,0.2);
                object-fit: cover;
                transition: transform 0.3s ease;
                cursor: pointer;
              "
              onclick="window.open(this.src, '_blank')"
              onmouseover="this.style.transform='scale(1.02)'"
              onmouseout="this.style.transform='scale(1)'"
              onload="console.log('Image loaded successfully:', this.src)"
              onerror="console.log('Image failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='block';"
            >
            <div style="
              display: none;
              color: #999;
              font-style: italic;
              margin-top: 10px;
              padding: 20px;
              background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"};
              border-radius: 8px;
            ">   </div>
          </div>
        `:""}

        <!-- Station Details -->
        <div style="
          display: grid;
          grid-template-columns: 1fr;
          gap: 12px;
          margin-bottom: 15px;
        ">          
          ${De.PairNum?`
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}; border-radius: 8px;">
              <strong style="color: #d4af37; font-size: 14px;"> :</strong>
              <span style="color: ${t==="dark"?"#e2e8f0":"#4a5568"}; font-size: 14px;">${De.PairNum}</span>
            </div>
          `:""}
          
          ${De.Code?`
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}; border-radius: 8px;">
              <strong style="color: #d4af37; font-size: 14px;">:</strong>
              <span style="color: ${t==="dark"?"#e2e8f0":"#4a5568"}; font-size: 14px;">${De.Code}</span>
            </div>
          `:""}
          
          ${De.Date?`
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}; border-radius: 8px;">
              <strong style="color: #d4af37; font-size: 14px;">:</strong>
              <span style="color: ${t==="dark"?"#e2e8f0":"#4a5568"}; font-size: 14px;">${De.Date}</span>
            </div>
          `:""}
          
          ${De.Elevation?`
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}; border-radius: 8px;">
              <strong style="color: #d4af37; font-size: 14px;">:</strong>
              <span style="color: ${t==="dark"?"#e2e8f0":"#4a5568"}; font-size: 14px;">${De.Elevation} </span>
            </div>
          `:""}
          
          ${De.Slope?`
            <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 12px; background: ${t==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"}; border-radius: 8px;">
              <strong style="color: #d4af37; font-size: 14px;">:</strong>
              <span style="color: ${t==="dark"?"#e2e8f0":"#4a5568"}; font-size: 14px;">${De.Slope.toFixed(4)}</span>
            </div>
          `:""}
        </div>
        
        <!-- Coordinates -->
        ${De.X&&De.Y?`
          <div style="
            margin-top: 15px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1) 0%, rgba(212, 175, 55, 0.05) 100%);
            border-radius: 10px;
            border-left: 4px solid #d4af37;
          ">
            <strong style="color: #d4af37; font-size: 14px; display: block; margin-bottom: 8px;">:</strong>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 13px;">
              <div><span style="color: ${t==="dark"?"#a0aec0":"#718096"};">X:</span> <strong style="color: ${t==="dark"?"#e2e8f0":"#2d3748"};">${De.X.toFixed(6)}</strong></div>
              <div><span style="color: ${t==="dark"?"#a0aec0":"#718096"};">Y:</span> <strong style="color: ${t==="dark"?"#e2e8f0":"#2d3748"};">${De.Y.toFixed(6)}</strong></div>
            </div>
          </div>
        `:""}
        
        <!-- Footer -->
        ${De.icon?`
          <div style="
            margin-top: 20px;
            text-align: center;
            padding: 10px;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
            color: ${t==="dark"?"#a0aec0":"#718096"};
            font-size: 12px;
          ">    </div>
        `:""}
      </div>
    `,Le=new TA.Popup({closeButton:!0,closeOnClick:!0,maxWidth:"600px",className:"enhanced-popup",offset:[0,-15]}).setLngLat(Tt).setHTML(Ft).addTo(Ct);return Le.on("close",()=>{Q(null),i&&i(null)}),Le};return we.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column"},children:[we.jsxs("div",{style:{display:"flex",height:"55%",position:"relative"},children:[we.jsx("div",{ref:m,style:{width:"100%",height:"100%",position:"relative",zIndex:1}}),we.jsxs("div",{style:{position:"absolute",top:15,left:12,width:200,padding:12,zIndex:9,backgroundColor:t==="dark"?"rgba(20,25,30,0.95)":"#f7f7f7",color:t==="dark"?"#fff":"#000",borderRadius:10,boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[we.jsx("div",{style:{fontWeight:600,marginBottom:6,display:"flex",alignItems:"center",gap:8},children:" Base Map"}),we.jsxs("select",{value:C,onChange:De=>bt(De.target.value),style:{width:"100%",padding:"4px",borderRadius:"4px",backgroundColor:t==="dark"?"#333":"#fff",color:t==="dark"?"#fff":"#000",border:"1px solid #ccc"},children:[we.jsx("option",{value:"default",children:" Default"}),we.jsx("option",{value:"dark",children:" Dark"}),we.jsx("option",{value:"imagery",children:" Imagery"})]})]})]}),we.jsx("div",{style:{height:"45%"},children:we.jsx(Y3,{theme:t})})]})});function OC(e){var t,i,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var m=e.length;for(t=0;t<m;t++)e[t]&&(i=OC(e[t]))&&(s&&(s+=" "),s+=i)}else for(i in e)e[i]&&(s&&(s+=" "),s+=i);return s}function jn(){for(var e,t,i=0,s="",m=arguments.length;i<m;i++)(e=arguments[i])&&(t=OC(e))&&(s&&(s+=" "),s+=t);return s}var K3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function b2(e){if(typeof e!="string")return!1;var t=K3;return t.includes(e)}var Q3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],J3=new Set(Q3);function zC(e){return typeof e!="string"?!1:J3.has(e)}function kC(e){return typeof e=="string"&&e.startsWith("data-")}function ku(e){if(typeof e!="object"||e===null)return{};var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(zC(i)||kC(i))&&(t[i]=e[i]);return t}function Iv(e){if(e==null)return null;if(H.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return ku(t)}return typeof e=="object"&&!Array.isArray(e)?ku(e):null}function Fo(e){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(zC(i)||kC(i)||b2(i))&&(t[i]=e[i]);return t}function eL(e){return e==null?null:H.isValidElement(e)?Fo(e.props):typeof e=="object"&&!Array.isArray(e)?Fo(e):null}var tL=["children","width","height","viewBox","className","style","title","desc"];function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},pw.apply(null,arguments)}function rL(e,t){if(e==null)return{};var i,s,m=nL(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function nL(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var RC=H.forwardRef((e,t)=>{var{children:i,width:s,height:m,viewBox:y,className:_,style:c,title:P,desc:C}=e,D=rL(e,tL),k=y||{width:s,height:m,x:0,y:0},U=jn("recharts-surface",_);return H.createElement("svg",pw({},Fo(D),{className:U,width:s,height:m,style:c,viewBox:"".concat(k.x," ").concat(k.y," ").concat(k.width," ").concat(k.height),ref:t}),H.createElement("title",null,P),H.createElement("desc",null,C),i)}),iL=["children","className"];function mw(){return mw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},mw.apply(null,arguments)}function aL(e,t){if(e==null)return{};var i,s,m=oL(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function oL(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var zl=H.forwardRef((e,t)=>{var{children:i,className:s}=e,m=aL(e,iL),y=jn("recharts-layer",s);return H.createElement("g",mw({className:y},Fo(m),{ref:t}),i)}),sL=H.createContext(null);function qn(e){return function(){return e}}const LC=Math.cos,S0=Math.sin,ju=Math.sqrt,A0=Math.PI,gx=2*A0,gw=Math.PI,yw=2*gw,Tp=1e-6,lL=yw-Tp;function BC(e){this._+=e[0];for(let t=1,i=e.length;t<i;++t)this._+=arguments[t]+e[t]}function uL(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BC;const i=10**t;return function(s){this._+=s[0];for(let m=1,y=s.length;m<y;++m)this._+=Math.round(arguments[m]*i)/i+s[m]}}class cL{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BC:uL(t)}moveTo(t,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,i){this._append`L${this._x1=+t},${this._y1=+i}`}quadraticCurveTo(t,i,s,m){this._append`Q${+t},${+i},${this._x1=+s},${this._y1=+m}`}bezierCurveTo(t,i,s,m,y,_){this._append`C${+t},${+i},${+s},${+m},${this._x1=+y},${this._y1=+_}`}arcTo(t,i,s,m,y){if(t=+t,i=+i,s=+s,m=+m,y=+y,y<0)throw new Error(`negative radius: ${y}`);let _=this._x1,c=this._y1,P=s-t,C=m-i,D=_-t,k=c-i,U=D*D+k*k;if(this._x1===null)this._append`M${this._x1=t},${this._y1=i}`;else if(U>Tp)if(!(Math.abs(k*P-C*D)>Tp)||!y)this._append`L${this._x1=t},${this._y1=i}`;else{let V=s-_,Q=m-c,Z=P*P+C*C,G=V*V+Q*Q,oe=Math.sqrt(Z),he=Math.sqrt(U),me=y*Math.tan((gw-Math.acos((Z+U-G)/(2*oe*he)))/2),Ce=me/he,be=me/oe;Math.abs(Ce-1)>Tp&&this._append`L${t+Ce*D},${i+Ce*k}`,this._append`A${y},${y},0,0,${+(k*V>D*Q)},${this._x1=t+be*P},${this._y1=i+be*C}`}}arc(t,i,s,m,y,_){if(t=+t,i=+i,s=+s,_=!!_,s<0)throw new Error(`negative radius: ${s}`);let c=s*Math.cos(m),P=s*Math.sin(m),C=t+c,D=i+P,k=1^_,U=_?m-y:y-m;this._x1===null?this._append`M${C},${D}`:(Math.abs(this._x1-C)>Tp||Math.abs(this._y1-D)>Tp)&&this._append`L${C},${D}`,s&&(U<0&&(U=U%yw+yw),U>lL?this._append`A${s},${s},0,1,${k},${t-c},${i-P}A${s},${s},0,1,${k},${this._x1=C},${this._y1=D}`:U>Tp&&this._append`A${s},${s},0,${+(U>=gw)},${k},${this._x1=t+s*Math.cos(y)},${this._y1=i+s*Math.sin(y)}`)}rect(t,i,s,m){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+i}h${s=+s}v${+m}h${-s}Z`}toString(){return this._}}function w2(e){let t=3;return e.digits=function(i){if(!arguments.length)return t;if(i==null)t=null;else{const s=Math.floor(i);if(!(s>=0))throw new RangeError(`invalid digits: ${i}`);t=s}return e},()=>new cL(t)}function S2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jC(e){this._context=e}jC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function yx(e){return new jC(e)}function NC(e){return e[0]}function FC(e){return e[1]}function UC(e,t){var i=qn(!0),s=null,m=yx,y=null,_=w2(c);e=typeof e=="function"?e:e===void 0?NC:qn(e),t=typeof t=="function"?t:t===void 0?FC:qn(t);function c(P){var C,D=(P=S2(P)).length,k,U=!1,V;for(s==null&&(y=m(V=_())),C=0;C<=D;++C)!(C<D&&i(k=P[C],C,P))===U&&((U=!U)?y.lineStart():y.lineEnd()),U&&y.point(+e(k,C,P),+t(k,C,P));if(V)return y=null,V+""||null}return c.x=function(P){return arguments.length?(e=typeof P=="function"?P:qn(+P),c):e},c.y=function(P){return arguments.length?(t=typeof P=="function"?P:qn(+P),c):t},c.defined=function(P){return arguments.length?(i=typeof P=="function"?P:qn(!!P),c):i},c.curve=function(P){return arguments.length?(m=P,s!=null&&(y=m(s)),c):m},c.context=function(P){return arguments.length?(P==null?s=y=null:y=m(s=P),c):s},c}function K_(e,t,i){var s=null,m=qn(!0),y=null,_=yx,c=null,P=w2(C);e=typeof e=="function"?e:e===void 0?NC:qn(+e),t=typeof t=="function"?t:qn(t===void 0?0:+t),i=typeof i=="function"?i:i===void 0?FC:qn(+i);function C(k){var U,V,Q,Z=(k=S2(k)).length,G,oe=!1,he,me=new Array(Z),Ce=new Array(Z);for(y==null&&(c=_(he=P())),U=0;U<=Z;++U){if(!(U<Z&&m(G=k[U],U,k))===oe)if(oe=!oe)V=U,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),Q=U-1;Q>=V;--Q)c.point(me[Q],Ce[Q]);c.lineEnd(),c.areaEnd()}oe&&(me[U]=+e(G,U,k),Ce[U]=+t(G,U,k),c.point(s?+s(G,U,k):me[U],i?+i(G,U,k):Ce[U]))}if(he)return c=null,he+""||null}function D(){return UC().defined(m).curve(_).context(y)}return C.x=function(k){return arguments.length?(e=typeof k=="function"?k:qn(+k),s=null,C):e},C.x0=function(k){return arguments.length?(e=typeof k=="function"?k:qn(+k),C):e},C.x1=function(k){return arguments.length?(s=k==null?null:typeof k=="function"?k:qn(+k),C):s},C.y=function(k){return arguments.length?(t=typeof k=="function"?k:qn(+k),i=null,C):t},C.y0=function(k){return arguments.length?(t=typeof k=="function"?k:qn(+k),C):t},C.y1=function(k){return arguments.length?(i=k==null?null:typeof k=="function"?k:qn(+k),C):i},C.lineX0=C.lineY0=function(){return D().x(e).y(t)},C.lineY1=function(){return D().x(e).y(i)},C.lineX1=function(){return D().x(s).y(t)},C.defined=function(k){return arguments.length?(m=typeof k=="function"?k:qn(!!k),C):m},C.curve=function(k){return arguments.length?(_=k,y!=null&&(c=_(y)),C):_},C.context=function(k){return arguments.length?(k==null?y=c=null:c=_(y=k),C):y},C}class VC{constructor(t,i){this._context=t,this._x=i}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,i){switch(t=+t,i=+i,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,i,t,i):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+i)/2,t,this._y0,t,i);break}}this._x0=t,this._y0=i}}function hL(e){return new VC(e,!0)}function fL(e){return new VC(e,!1)}const A2={draw(e,t){const i=ju(t/A0);e.moveTo(i,0),e.arc(0,0,i,0,gx)}},dL={draw(e,t){const i=ju(t/5)/2;e.moveTo(-3*i,-i),e.lineTo(-i,-i),e.lineTo(-i,-3*i),e.lineTo(i,-3*i),e.lineTo(i,-i),e.lineTo(3*i,-i),e.lineTo(3*i,i),e.lineTo(i,i),e.lineTo(i,3*i),e.lineTo(-i,3*i),e.lineTo(-i,i),e.lineTo(-3*i,i),e.closePath()}},GC=ju(1/3),pL=GC*2,mL={draw(e,t){const i=ju(t/pL),s=i*GC;e.moveTo(0,-i),e.lineTo(s,0),e.lineTo(0,i),e.lineTo(-s,0),e.closePath()}},gL={draw(e,t){const i=ju(t),s=-i/2;e.rect(s,s,i,i)}},yL=.8908130915292852,qC=S0(A0/10)/S0(7*A0/10),vL=S0(gx/10)*qC,_L=-LC(gx/10)*qC,xL={draw(e,t){const i=ju(t*yL),s=vL*i,m=_L*i;e.moveTo(0,-i),e.lineTo(s,m);for(let y=1;y<5;++y){const _=gx*y/5,c=LC(_),P=S0(_);e.lineTo(P*i,-c*i),e.lineTo(c*s-P*m,P*s+c*m)}e.closePath()}},kb=ju(3),bL={draw(e,t){const i=-ju(t/(kb*3));e.moveTo(0,i*2),e.lineTo(-kb*i,-i),e.lineTo(kb*i,-i),e.closePath()}},Pl=-.5,Cl=ju(3)/2,vw=1/ju(12),wL=(vw/2+1)*3,SL={draw(e,t){const i=ju(t/wL),s=i/2,m=i*vw,y=s,_=i*vw+i,c=-y,P=_;e.moveTo(s,m),e.lineTo(y,_),e.lineTo(c,P),e.lineTo(Pl*s-Cl*m,Cl*s+Pl*m),e.lineTo(Pl*y-Cl*_,Cl*y+Pl*_),e.lineTo(Pl*c-Cl*P,Cl*c+Pl*P),e.lineTo(Pl*s+Cl*m,Pl*m-Cl*s),e.lineTo(Pl*y+Cl*_,Pl*_-Cl*y),e.lineTo(Pl*c+Cl*P,Pl*P-Cl*c),e.closePath()}};function AL(e,t){let i=null,s=w2(m);e=typeof e=="function"?e:qn(e||A2),t=typeof t=="function"?t:qn(t===void 0?64:+t);function m(){let y;if(i||(i=y=s()),e.apply(this,arguments).draw(i,+t.apply(this,arguments)),y)return i=null,y+""||null}return m.type=function(y){return arguments.length?(e=typeof y=="function"?y:qn(y),m):e},m.size=function(y){return arguments.length?(t=typeof y=="function"?y:qn(+y),m):t},m.context=function(y){return arguments.length?(i=y??null,m):i},m}function T0(){}function E0(e,t,i){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+i)/6)}function HC(e){this._context=e}HC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:E0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:E0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function TL(e){return new HC(e)}function ZC(e){this._context=e}ZC.prototype={areaStart:T0,areaEnd:T0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:E0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function EL(e){return new ZC(e)}function $C(e){this._context=e}$C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 3:this._point=4;default:E0(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ML(e){return new $C(e)}function XC(e){this._context=e}XC.prototype={areaStart:T0,areaEnd:T0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function PL(e){return new XC(e)}function EA(e){return e<0?-1:1}function MA(e,t,i){var s=e._x1-e._x0,m=t-e._x1,y=(e._y1-e._y0)/(s||m<0&&-0),_=(i-e._y1)/(m||s<0&&-0),c=(y*m+_*s)/(s+m);return(EA(y)+EA(_))*Math.min(Math.abs(y),Math.abs(_),.5*Math.abs(c))||0}function PA(e,t){var i=e._x1-e._x0;return i?(3*(e._y1-e._y0)/i-t)/2:t}function Rb(e,t,i){var s=e._x0,m=e._y0,y=e._x1,_=e._y1,c=(y-s)/3;e._context.bezierCurveTo(s+c,m+c*t,y-c,_-c*i,y,_)}function M0(e){this._context=e}M0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rb(this,this._t0,PA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var i=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rb(this,PA(this,i=MA(this,e,t)),i);break;default:Rb(this,this._t0,i=MA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=i}}};function YC(e){this._context=new WC(e)}(YC.prototype=Object.create(M0.prototype)).point=function(e,t){M0.prototype.point.call(this,t,e)};function WC(e){this._context=e}WC.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,i,s,m,y){this._context.bezierCurveTo(t,e,s,i,y,m)}};function CL(e){return new M0(e)}function DL(e){return new YC(e)}function KC(e){this._context=e}KC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,i=e.length;if(i)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),i===2)this._context.lineTo(e[1],t[1]);else for(var s=CA(e),m=CA(t),y=0,_=1;_<i;++y,++_)this._context.bezierCurveTo(s[0][y],m[0][y],s[1][y],m[1][y],e[_],t[_]);(this._line||this._line!==0&&i===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function CA(e){var t,i=e.length-1,s,m=new Array(i),y=new Array(i),_=new Array(i);for(m[0]=0,y[0]=2,_[0]=e[0]+2*e[1],t=1;t<i-1;++t)m[t]=1,y[t]=4,_[t]=4*e[t]+2*e[t+1];for(m[i-1]=2,y[i-1]=7,_[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)s=m[t]/y[t-1],y[t]-=s,_[t]-=s*_[t-1];for(m[i-1]=_[i-1]/y[i-1],t=i-2;t>=0;--t)m[t]=(_[t]-m[t+1])/y[t];for(y[i-1]=(e[i]+m[i-1])/2,t=0;t<i-1;++t)y[t]=2*e[t+1]-m[t+1];return[m,y]}function IL(e){return new KC(e)}function vx(e,t){this._context=e,this._t=t}vx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var i=this._x*(1-this._t)+e*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,t)}break}}this._x=e,this._y=t}};function OL(e){return new vx(e,.5)}function zL(e){return new vx(e,0)}function kL(e){return new vx(e,1)}function Rp(e,t){if((_=e.length)>1)for(var i=1,s,m,y=e[t[0]],_,c=y.length;i<_;++i)for(m=y,y=e[t[i]],s=0;s<c;++s)y[s][1]+=y[s][0]=isNaN(m[s][1])?m[s][0]:m[s][1]}function _w(e){for(var t=e.length,i=new Array(t);--t>=0;)i[t]=t;return i}function RL(e,t){return e[t]}function LL(e){const t=[];return t.key=e,t}function BL(){var e=qn([]),t=_w,i=Rp,s=RL;function m(y){var _=Array.from(e.apply(this,arguments),LL),c,P=_.length,C=-1,D;for(const k of y)for(c=0,++C;c<P;++c)(_[c][C]=[0,+s(k,_[c].key,C,y)]).data=k;for(c=0,D=S2(t(_));c<P;++c)_[D[c]].index=c;return i(_,D),_}return m.keys=function(y){return arguments.length?(e=typeof y=="function"?y:qn(Array.from(y)),m):e},m.value=function(y){return arguments.length?(s=typeof y=="function"?y:qn(+y),m):s},m.order=function(y){return arguments.length?(t=y==null?_w:typeof y=="function"?y:qn(Array.from(y)),m):t},m.offset=function(y){return arguments.length?(i=y??Rp,m):i},m}function jL(e,t){if((s=e.length)>0){for(var i,s,m=0,y=e[0].length,_;m<y;++m){for(_=i=0;i<s;++i)_+=e[i][m][1]||0;if(_)for(i=0;i<s;++i)e[i][m][1]/=_}Rp(e,t)}}function NL(e,t){if((m=e.length)>0){for(var i=0,s=e[t[0]],m,y=s.length;i<y;++i){for(var _=0,c=0;_<m;++_)c+=e[_][i][1]||0;s[i][1]+=s[i][0]=-c/2}Rp(e,t)}}function FL(e,t){if(!(!((_=e.length)>0)||!((y=(m=e[t[0]]).length)>0))){for(var i=0,s=1,m,y,_;s<y;++s){for(var c=0,P=0,C=0;c<_;++c){for(var D=e[t[c]],k=D[s][1]||0,U=D[s-1][1]||0,V=(k-U)/2,Q=0;Q<c;++Q){var Z=e[t[Q]],G=Z[s][1]||0,oe=Z[s-1][1]||0;V+=G-oe}P+=k,C+=V*k}m[s-1][1]+=m[s-1][0]=i,P&&(i-=C/P)}m[s-1][1]+=m[s-1][0]=i,Rp(e,t)}}var Lb={},Bb={},DA;function UL(){return DA||(DA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==="__proto__"}e.isUnsafeProperty=t})(Bb)),Bb}var jb={},IA;function QC(){return IA||(IA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){switch(typeof i){case"number":case"symbol":return!1;case"string":return i.includes(".")||i.includes("[")||i.includes("]")}}e.isDeepKey=t})(jb)),jb}var Nb={},OA;function T2(){return OA||(OA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="string"||typeof i=="symbol"?i:Object.is(i?.valueOf?.(),-0)?"-0":String(i)}e.toKey=t})(Nb)),Nb}var Fb={},Ub={},zA;function VL(){return zA||(zA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(i==null)return"";if(typeof i=="string")return i;if(Array.isArray(i))return i.map(t).join(",");const s=String(i);return s==="0"&&Object.is(Number(i),-0)?"-0":s}e.toString=t})(Ub)),Ub}var kA;function E2(){return kA||(kA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VL(),i=T2();function s(m){if(Array.isArray(m))return m.map(i.toKey);if(typeof m=="symbol")return[m];m=t.toString(m);const y=[],_=m.length;if(_===0)return y;let c=0,P="",C="",D=!1;for(m.charCodeAt(0)===46&&(y.push(""),c++);c<_;){const k=m[c];C?k==="\\"&&c+1<_?(c++,P+=m[c]):k===C?C="":P+=k:D?k==='"'||k==="'"?C=k:k==="]"?(D=!1,y.push(P),P=""):P+=k:k==="["?(D=!0,P&&(y.push(P),P="")):k==="."?P&&(y.push(P),P=""):P+=k,c++}return P&&y.push(P),y}e.toPath=s})(Fb)),Fb}var RA;function M2(){return RA||(RA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UL(),i=QC(),s=T2(),m=E2();function y(c,P,C){if(c==null)return C;switch(typeof P){case"string":{if(t.isUnsafeProperty(P))return C;const D=c[P];return D===void 0?i.isDeepKey(P)?y(c,m.toPath(P),C):C:D}case"number":case"symbol":{typeof P=="number"&&(P=s.toKey(P));const D=c[P];return D===void 0?C:D}default:{if(Array.isArray(P))return _(c,P,C);if(Object.is(P?.valueOf(),-0)?P="-0":P=String(P),t.isUnsafeProperty(P))return C;const D=c[P];return D===void 0?C:D}}}function _(c,P,C){if(P.length===0)return C;let D=c;for(let k=0;k<P.length;k++){if(D==null||t.isUnsafeProperty(P[k]))return C;D=D[P[k]]}return D===void 0?C:D}e.get=y})(Lb)),Lb}var Vb,LA;function GL(){return LA||(LA=1,Vb=M2().get),Vb}var qL=GL();const Ag=Xh(qL);var HL=4;function od(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:HL,i=10**t,s=Math.round(e*i)/i;return Object.is(s,-0)?0:s}function Ci(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return e.reduce((m,y,_)=>{var c=i[_-1];return typeof c=="string"?m+c+y:c!==void 0?m+od(c)+y:m+y},"")}var _s=e=>e===0?0:e>0?1:-1,Ru=e=>typeof e=="number"&&e!=+e,hv=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Yt=e=>(typeof e=="number"||e instanceof Number)&&!Ru(e),zc=e=>Yt(e)||typeof e=="string",ZL=0,fv=e=>{var t=++ZL;return"".concat(e||"").concat(t)},Lu=function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Yt(t)&&typeof t!="string")return s;var y;if(hv(t)){if(i==null)return s;var _=t.indexOf("%");y=i*parseFloat(t.slice(0,_))/100}else y=+t;return Ru(y)&&(y=s),m&&i!=null&&y>i&&(y=i),y},JC=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,i={},s=0;s<t;s++)if(!i[String(e[s])])i[String(e[s])]=!0;else return!0;return!1};function Di(e,t,i){return Yt(e)&&Yt(t)?od(e+i*(t-e)):t}function eD(e,t,i){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Ag(s,t))===i)}var si=e=>e===null||typeof e>"u",Ov=e=>si(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function $L(e){return e!=null}function _x(){}var XL=["type","size","sizeType"];function xw(){return xw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},xw.apply(null,arguments)}function BA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function jA(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(i),!0).forEach(function(s){YL(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BA(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function YL(e,t,i){return(t=WL(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function WL(e){var t=KL(e,"string");return typeof t=="symbol"?t:t+""}function KL(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QL(e,t){if(e==null)return{};var i,s,m=JL(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function JL(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var tD={symbolCircle:A2,symbolCross:dL,symbolDiamond:mL,symbolSquare:gL,symbolStar:xL,symbolTriangle:bL,symbolWye:SL},eB=Math.PI/180,tB=e=>{var t="symbol".concat(Ov(e));return tD[t]||A2},rB=(e,t,i)=>{if(t==="area")return e;switch(i){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*eB;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},nB=(e,t)=>{tD["symbol".concat(Ov(e))]=t},rD=e=>{var{type:t="circle",size:i=64,sizeType:s="area"}=e,m=QL(e,XL),y=jA(jA({},m),{},{type:t,size:i,sizeType:s}),_="circle";typeof t=="string"&&(_=t);var c=()=>{var U=tB(_),V=AL().type(U).size(rB(i,s,_)),Q=V();if(Q!==null)return Q},{className:P,cx:C,cy:D}=y,k=Fo(y);return Yt(C)&&Yt(D)&&Yt(i)?H.createElement("path",xw({},k,{className:jn("recharts-symbols",P),transform:"translate(".concat(C,", ").concat(D,")"),d:c()})):null};rD.registerSymbol=nB;var nD=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,P2=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(H.isValidElement(e)&&(i=e.props),typeof i!="object"&&typeof i!="function")return null;var s={};return Object.keys(i).forEach(m=>{b2(m)&&(s[m]=(y=>i[m](i,y)))}),s},iB=(e,t,i)=>s=>(e(t,i,s),null),C2=(e,t,i)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(m=>{var y=e[m];b2(m)&&typeof y=="function"&&(s||(s={}),s[m]=iB(y,t,i))}),s};function NA(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function aB(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(i),!0).forEach(function(s){oB(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NA(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function oB(e,t,i){return(t=sB(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function sB(e){var t=lB(e,"string");return typeof t=="symbol"?t:t+""}function lB(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vo(e,t){var i=aB({},e),s=t,m=Object.keys(t),y=m.reduce((_,c)=>(_[c]===void 0&&s[c]!==void 0&&(_[c]=s[c]),_),i);return y}var Gb={},qb={},FA;function uB(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,s){const m=new Map;for(let y=0;y<i.length;y++){const _=i[y],c=s(_);m.has(c)||m.set(c,_)}return Array.from(m.values())}e.uniqBy=t})(qb)),qb}var Hb={},UA;function iD(){return UA||(UA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i}e.identity=t})(Hb)),Hb}var Zb={},$b={},Xb={},VA;function cB(){return VA||(VA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Number.isSafeInteger(i)&&i>=0}e.isLength=t})(Xb)),Xb}var GA;function D2(){return GA||(GA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cB();function i(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=i})($b)),$b}var Yb={},qA;function hB(){return qA||(qA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="object"&&i!==null}e.isObjectLike=t})(Yb)),Yb}var HA;function fB(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D2(),i=hB();function s(m){return i.isObjectLike(m)&&t.isArrayLike(m)}e.isArrayLikeObject=s})(Zb)),Zb}var Wb={},Kb={},ZA;function dB(){return ZA||(ZA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M2();function i(s){return function(m){return t.get(m,s)}}e.property=i})(Kb)),Kb}var Qb={},Jb={},e1={},t1={},$A;function aD(){return $A||($A=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i!==null&&(typeof i=="object"||typeof i=="function")}e.isObject=t})(t1)),t1}var r1={},XA;function oD(){return XA||(XA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null||typeof i!="object"&&typeof i!="function"}e.isPrimitive=t})(r1)),r1}var n1={},YA;function sD(){return YA||(YA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,s){return i===s||Number.isNaN(i)&&Number.isNaN(s)}e.eq=t})(n1)),n1}var WA;function pB(){return WA||(WA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aD(),i=oD(),s=sD();function m(D,k,U){return typeof U!="function"?m(D,k,()=>{}):y(D,k,function V(Q,Z,G,oe,he,me){const Ce=U(Q,Z,G,oe,he,me);return Ce!==void 0?!!Ce:y(Q,Z,V,me)},new Map)}function y(D,k,U,V){if(k===D)return!0;switch(typeof k){case"object":return _(D,k,U,V);case"function":return Object.keys(k).length>0?y(D,{...k},U,V):s.eq(D,k);default:return t.isObject(D)?typeof k=="string"?k==="":!0:s.eq(D,k)}}function _(D,k,U,V){if(k==null)return!0;if(Array.isArray(k))return P(D,k,U,V);if(k instanceof Map)return c(D,k,U,V);if(k instanceof Set)return C(D,k,U,V);const Q=Object.keys(k);if(D==null||i.isPrimitive(D))return Q.length===0;if(Q.length===0)return!0;if(V?.has(k))return V.get(k)===D;V?.set(k,D);try{for(let Z=0;Z<Q.length;Z++){const G=Q[Z];if(!i.isPrimitive(D)&&!(G in D)||k[G]===void 0&&D[G]!==void 0||k[G]===null&&D[G]!==null||!U(D[G],k[G],G,D,k,V))return!1}return!0}finally{V?.delete(k)}}function c(D,k,U,V){if(k.size===0)return!0;if(!(D instanceof Map))return!1;for(const[Q,Z]of k.entries()){const G=D.get(Q);if(U(G,Z,Q,D,k,V)===!1)return!1}return!0}function P(D,k,U,V){if(k.length===0)return!0;if(!Array.isArray(D))return!1;const Q=new Set;for(let Z=0;Z<k.length;Z++){const G=k[Z];let oe=!1;for(let he=0;he<D.length;he++){if(Q.has(he))continue;const me=D[he];let Ce=!1;if(U(me,G,Z,D,k,V)&&(Ce=!0),Ce){Q.add(he),oe=!0;break}}if(!oe)return!1}return!0}function C(D,k,U,V){return k.size===0?!0:D instanceof Set?P([...D],[...k],U,V):!1}e.isMatchWith=m,e.isSetMatch=C})(e1)),e1}var KA;function lD(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pB();function i(s,m){return t.isMatchWith(s,m,()=>{})}e.isMatch=i})(Jb)),Jb}var i1={},a1={},o1={},QA;function mB(){return QA||(QA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Object.getOwnPropertySymbols(i).filter(s=>Object.prototype.propertyIsEnumerable.call(i,s))}e.getSymbols=t})(o1)),o1}var s1={},JA;function uD(){return JA||(JA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}e.getTag=t})(s1)),s1}var l1={},eT;function cD(){return eT||(eT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",i="[object String]",s="[object Number]",m="[object Boolean]",y="[object Arguments]",_="[object Symbol]",c="[object Date]",P="[object Map]",C="[object Set]",D="[object Array]",k="[object Function]",U="[object ArrayBuffer]",V="[object Object]",Q="[object Error]",Z="[object DataView]",G="[object Uint8Array]",oe="[object Uint8ClampedArray]",he="[object Uint16Array]",me="[object Uint32Array]",Ce="[object BigUint64Array]",be="[object Int8Array]",ke="[object Int16Array]",je="[object Int32Array]",gt="[object BigInt64Array]",bt="[object Float32Array]",It="[object Float64Array]";e.argumentsTag=y,e.arrayBufferTag=U,e.arrayTag=D,e.bigInt64ArrayTag=gt,e.bigUint64ArrayTag=Ce,e.booleanTag=m,e.dataViewTag=Z,e.dateTag=c,e.errorTag=Q,e.float32ArrayTag=bt,e.float64ArrayTag=It,e.functionTag=k,e.int16ArrayTag=ke,e.int32ArrayTag=je,e.int8ArrayTag=be,e.mapTag=P,e.numberTag=s,e.objectTag=V,e.regexpTag=t,e.setTag=C,e.stringTag=i,e.symbolTag=_,e.uint16ArrayTag=he,e.uint32ArrayTag=me,e.uint8ArrayTag=G,e.uint8ClampedArrayTag=oe})(l1)),l1}var u1={},tT;function gB(){return tT||(tT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}e.isTypedArray=t})(u1)),u1}var rT;function hD(){return rT||(rT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mB(),i=uD(),s=cD(),m=oD(),y=gB();function _(D,k){return c(D,void 0,D,new Map,k)}function c(D,k,U,V=new Map,Q=void 0){const Z=Q?.(D,k,U,V);if(Z!==void 0)return Z;if(m.isPrimitive(D))return D;if(V.has(D))return V.get(D);if(Array.isArray(D)){const G=new Array(D.length);V.set(D,G);for(let oe=0;oe<D.length;oe++)G[oe]=c(D[oe],oe,U,V,Q);return Object.hasOwn(D,"index")&&(G.index=D.index),Object.hasOwn(D,"input")&&(G.input=D.input),G}if(D instanceof Date)return new Date(D.getTime());if(D instanceof RegExp){const G=new RegExp(D.source,D.flags);return G.lastIndex=D.lastIndex,G}if(D instanceof Map){const G=new Map;V.set(D,G);for(const[oe,he]of D)G.set(oe,c(he,oe,U,V,Q));return G}if(D instanceof Set){const G=new Set;V.set(D,G);for(const oe of D)G.add(c(oe,void 0,U,V,Q));return G}if(typeof Buffer<"u"&&Buffer.isBuffer(D))return D.subarray();if(y.isTypedArray(D)){const G=new(Object.getPrototypeOf(D)).constructor(D.length);V.set(D,G);for(let oe=0;oe<D.length;oe++)G[oe]=c(D[oe],oe,U,V,Q);return G}if(D instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&D instanceof SharedArrayBuffer)return D.slice(0);if(D instanceof DataView){const G=new DataView(D.buffer.slice(0),D.byteOffset,D.byteLength);return V.set(D,G),P(G,D,U,V,Q),G}if(typeof File<"u"&&D instanceof File){const G=new File([D],D.name,{type:D.type});return V.set(D,G),P(G,D,U,V,Q),G}if(typeof Blob<"u"&&D instanceof Blob){const G=new Blob([D],{type:D.type});return V.set(D,G),P(G,D,U,V,Q),G}if(D instanceof Error){const G=new D.constructor;return V.set(D,G),G.message=D.message,G.name=D.name,G.stack=D.stack,G.cause=D.cause,P(G,D,U,V,Q),G}if(D instanceof Boolean){const G=new Boolean(D.valueOf());return V.set(D,G),P(G,D,U,V,Q),G}if(D instanceof Number){const G=new Number(D.valueOf());return V.set(D,G),P(G,D,U,V,Q),G}if(D instanceof String){const G=new String(D.valueOf());return V.set(D,G),P(G,D,U,V,Q),G}if(typeof D=="object"&&C(D)){const G=Object.create(Object.getPrototypeOf(D));return V.set(D,G),P(G,D,U,V,Q),G}return D}function P(D,k,U=D,V,Q){const Z=[...Object.keys(k),...t.getSymbols(k)];for(let G=0;G<Z.length;G++){const oe=Z[G],he=Object.getOwnPropertyDescriptor(D,oe);(he==null||he.writable)&&(D[oe]=c(k[oe],oe,U,V,Q))}}function C(D){switch(i.getTag(D)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=_,e.cloneDeepWithImpl=c,e.copyProperties=P})(a1)),a1}var nT;function yB(){return nT||(nT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hD();function i(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=i})(i1)),i1}var iT;function vB(){return iT||(iT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lD(),i=yB();function s(m){return m=i.cloneDeep(m),y=>t.isMatch(y,m)}e.matches=s})(Qb)),Qb}var c1={},h1={},f1={},aT;function _B(){return aT||(aT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hD(),i=cD();function s(m,y){return t.cloneDeepWith(m,(_,c,P,C)=>{const D=y?.(_,c,P,C);if(D!==void 0)return D;if(typeof m=="object")switch(Object.prototype.toString.call(m)){case i.numberTag:case i.stringTag:case i.booleanTag:{const k=new m.constructor(m?.valueOf());return t.copyProperties(k,m),k}case i.argumentsTag:{const k={};return t.copyProperties(k,m),k.length=m.length,k[Symbol.iterator]=m[Symbol.iterator],k}default:return}})}e.cloneDeepWith=s})(f1)),f1}var oT;function xB(){return oT||(oT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_B();function i(s){return t.cloneDeepWith(s)}e.cloneDeep=i})(h1)),h1}var d1={},p1={},sT;function fD(){return sT||(sT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function i(s,m=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<m;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=i})(p1)),p1}var m1={},lT;function bB(){return lT||(lT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uD();function i(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=i})(m1)),m1}var uT;function wB(){return uT||(uT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QC(),i=fD(),s=bB(),m=E2();function y(_,c){let P;if(Array.isArray(c)?P=c:typeof c=="string"&&t.isDeepKey(c)&&_?.[c]==null?P=m.toPath(c):P=[c],P.length===0)return!1;let C=_;for(let D=0;D<P.length;D++){const k=P[D];if((C==null||!Object.hasOwn(C,k))&&!((Array.isArray(C)||s.isArguments(C))&&i.isIndex(k)&&k<C.length))return!1;C=C[k]}return!0}e.has=y})(d1)),d1}var cT;function SB(){return cT||(cT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lD(),i=T2(),s=xB(),m=M2(),y=wB();function _(c,P){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=i.toKey(c);break}}return P=s.cloneDeep(P),function(C){const D=m.get(C,c);return D===void 0?y.has(C,c):P===void 0?D===void 0:t.isMatch(D,P)}}e.matchesProperty=_})(c1)),c1}var hT;function AB(){return hT||(hT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=iD(),i=dB(),s=vB(),m=SB();function y(_){if(_==null)return t.identity;switch(typeof _){case"function":return _;case"object":return Array.isArray(_)&&_.length===2?m.matchesProperty(_[0],_[1]):s.matches(_);case"string":case"symbol":case"number":return i.property(_)}}e.iteratee=y})(Wb)),Wb}var fT;function TB(){return fT||(fT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uB(),i=iD(),s=fB(),m=AB();function y(_,c=i.identity){return s.isArrayLikeObject(_)?t.uniqBy(Array.from(_),m.iteratee(c)):[]}e.uniqBy=y})(Gb)),Gb}var g1,dT;function EB(){return dT||(dT=1,g1=TB().uniqBy),g1}var MB=EB();const pT=Xh(MB);function PB(e,t,i){return t===!0?pT(e,i):typeof t=="function"?pT(e,t):e}var y1={exports:{}},v1={},_1={exports:{}},x1={};var mT;function CB(){if(mT)return x1;mT=1;var e=Og();function t(k,U){return k===U&&(k!==0||1/k===1/U)||k!==k&&U!==U}var i=typeof Object.is=="function"?Object.is:t,s=e.useState,m=e.useEffect,y=e.useLayoutEffect,_=e.useDebugValue;function c(k,U){var V=U(),Q=s({inst:{value:V,getSnapshot:U}}),Z=Q[0].inst,G=Q[1];return y(function(){Z.value=V,Z.getSnapshot=U,P(Z)&&G({inst:Z})},[k,V,U]),m(function(){return P(Z)&&G({inst:Z}),k(function(){P(Z)&&G({inst:Z})})},[k]),_(V),V}function P(k){var U=k.getSnapshot;k=k.value;try{var V=U();return!i(k,V)}catch{return!0}}function C(k,U){return U()}var D=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?C:c;return x1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:D,x1}var gT;function DB(){return gT||(gT=1,_1.exports=CB()),_1.exports}var yT;function IB(){if(yT)return v1;yT=1;var e=Og(),t=DB();function i(C,D){return C===D&&(C!==0||1/C===1/D)||C!==C&&D!==D}var s=typeof Object.is=="function"?Object.is:i,m=t.useSyncExternalStore,y=e.useRef,_=e.useEffect,c=e.useMemo,P=e.useDebugValue;return v1.useSyncExternalStoreWithSelector=function(C,D,k,U,V){var Q=y(null);if(Q.current===null){var Z={hasValue:!1,value:null};Q.current=Z}else Z=Q.current;Q=c(function(){function oe(ke){if(!he){if(he=!0,me=ke,ke=U(ke),V!==void 0&&Z.hasValue){var je=Z.value;if(V(je,ke))return Ce=je}return Ce=ke}if(je=Ce,s(me,ke))return je;var gt=U(ke);return V!==void 0&&V(je,gt)?(me=ke,je):(me=ke,Ce=gt)}var he=!1,me,Ce,be=k===void 0?null:k;return[function(){return oe(D())},be===null?void 0:function(){return oe(be())}]},[D,k,U,V]);var G=m(C,Q[0],Q[1]);return _(function(){Z.hasValue=!0,Z.value=G},[G]),P(G),G},v1}var vT;function OB(){return vT||(vT=1,y1.exports=IB()),y1.exports}var zB=OB(),I2=H.createContext(null),kB=e=>e,Li=()=>{var e=H.useContext(I2);return e?e.store.dispatch:kB},y0=()=>{},RB=()=>y0,LB=(e,t)=>e===t;function ir(e){var t=H.useContext(I2);return zB.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:RB,t?t.store.getState:y0,t?t.store.getState:y0,t?e:y0,LB)}function BB(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function jB(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function NB(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(i=>typeof i=="function")){const i=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${i}]`)}}var _T=e=>Array.isArray(e)?e:[e];function FB(e){const t=Array.isArray(e[0])?e[0]:e;return NB(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function UB(e,t){const i=[],{length:s}=e;for(let m=0;m<s;m++)i.push(e[m].apply(null,t));return i}var VB=class{constructor(e){this.value=e}deref(){return this.value}},GB=typeof WeakRef<"u"?WeakRef:VB,qB=0,xT=1;function Q_(){return{s:qB,v:void 0,o:null,p:null}}function dD(e,t={}){let i=Q_();const{resultEqualityCheck:s}=t;let m,y=0;function _(){let c=i;const{length:P}=arguments;for(let k=0,U=P;k<U;k++){const V=arguments[k];if(typeof V=="function"||typeof V=="object"&&V!==null){let Q=c.o;Q===null&&(c.o=Q=new WeakMap);const Z=Q.get(V);Z===void 0?(c=Q_(),Q.set(V,c)):c=Z}else{let Q=c.p;Q===null&&(c.p=Q=new Map);const Z=Q.get(V);Z===void 0?(c=Q_(),Q.set(V,c)):c=Z}}const C=c;let D;if(c.s===xT)D=c.v;else if(D=e.apply(null,arguments),y++,s){const k=m?.deref?.()??m;k!=null&&s(k,D)&&(D=k,y!==0&&y--),m=typeof D=="object"&&D!==null||typeof D=="function"?new GB(D):D}return C.s=xT,C.v=D,D}return _.clearCache=()=>{i=Q_(),_.resetResultsCount()},_.resultsCount=()=>y,_.resetResultsCount=()=>{y=0},_}function HB(e,...t){const i=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...m)=>{let y=0,_=0,c,P={},C=m.pop();typeof C=="object"&&(P=C,C=m.pop()),BB(C,`createSelector expects an output function after the inputs, but received: [${typeof C}]`);const D={...i,...P},{memoize:k,memoizeOptions:U=[],argsMemoize:V=dD,argsMemoizeOptions:Q=[]}=D,Z=_T(U),G=_T(Q),oe=FB(m),he=k(function(){return y++,C.apply(null,arguments)},...Z),me=V(function(){_++;const be=UB(oe,arguments);return c=he.apply(null,be),c},...G);return Object.assign(me,{resultFunc:C,memoizedResultFunc:he,dependencies:oe,dependencyRecomputations:()=>_,resetDependencyRecomputations:()=>{_=0},lastResult:()=>c,recomputations:()=>y,resetRecomputations:()=>{y=0},memoize:k,argsMemoize:V})};return Object.assign(s,{withTypes:()=>s}),s}var it=HB(dD),ZB=Object.assign((e,t=it)=>{jB(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const i=Object.keys(e),s=i.map(y=>e[y]);return t(s,(...y)=>y.reduce((_,c,P)=>(_[i[P]]=c,_),{}))},{withTypes:()=>ZB}),b1={},w1={},S1={},bT;function $B(){return bT||(bT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const i=(s,m,y)=>{if(s!==m){const _=t(s),c=t(m);if(_===c&&_===0){if(s<m)return y==="desc"?1:-1;if(s>m)return y==="desc"?-1:1}return y==="desc"?c-_:_-c}return 0};e.compareValues=i})(S1)),S1}var A1={},T1={},wT;function pD(){return wT||(wT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return typeof i=="symbol"||i instanceof Symbol}e.isSymbol=t})(T1)),T1}var ST;function XB(){return ST||(ST=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pD(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function m(y,_){return Array.isArray(y)?!1:typeof y=="number"||typeof y=="boolean"||y==null||t.isSymbol(y)?!0:typeof y=="string"&&(s.test(y)||!i.test(y))||_!=null&&Object.hasOwn(_,y)}e.isKey=m})(A1)),A1}var AT;function YB(){return AT||(AT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$B(),i=XB(),s=E2();function m(y,_,c,P){if(y==null)return[];c=P?void 0:c,Array.isArray(y)||(y=Object.values(y)),Array.isArray(_)||(_=_==null?[null]:[_]),_.length===0&&(_=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(V=>String(V));const C=(V,Q)=>{let Z=V;for(let G=0;G<Q.length&&Z!=null;++G)Z=Z[Q[G]];return Z},D=(V,Q)=>Q==null||V==null?Q:typeof V=="object"&&"key"in V?Object.hasOwn(Q,V.key)?Q[V.key]:C(Q,V.path):typeof V=="function"?V(Q):Array.isArray(V)?C(Q,V):typeof Q=="object"?Q[V]:Q,k=_.map(V=>(Array.isArray(V)&&V.length===1&&(V=V[0]),V==null||typeof V=="function"||Array.isArray(V)||i.isKey(V)?V:{key:V,path:s.toPath(V)}));return y.map(V=>({original:V,criteria:k.map(Q=>D(Q,V))})).slice().sort((V,Q)=>{for(let Z=0;Z<k.length;Z++){const G=t.compareValues(V.criteria[Z],Q.criteria[Z],c[Z]);if(G!==0)return G}return 0}).map(V=>V.original)}e.orderBy=m})(w1)),w1}var E1={},TT;function WB(){return TT||(TT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i,s=1){const m=[],y=Math.floor(s),_=(c,P)=>{for(let C=0;C<c.length;C++){const D=c[C];Array.isArray(D)&&P<y?_(D,P+1):m.push(D)}};return _(i,0),m}e.flatten=t})(E1)),E1}var M1={},ET;function mD(){return ET||(ET=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fD(),i=D2(),s=aD(),m=sD();function y(_,c,P){return s.isObject(P)&&(typeof c=="number"&&i.isArrayLike(P)&&t.isIndex(c)&&c<P.length||typeof c=="string"&&c in P)?m.eq(P[c],_):!1}e.isIterateeCall=y})(M1)),M1}var MT;function KB(){return MT||(MT=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YB(),i=WB(),s=mD();function m(y,..._){const c=_.length;return c>1&&s.isIterateeCall(y,_[0],_[1])?_=[]:c>2&&s.isIterateeCall(_[0],_[1],_[2])&&(_=[_[0]]),t.orderBy(y,i.flatten(_),["asc"])}e.sortBy=m})(b1)),b1}var P1,PT;function QB(){return PT||(PT=1,P1=KB().sortBy),P1}var JB=QB();const xx=Xh(JB);var gD=e=>e.legend.settings,e5=e=>e.legend.size,t5=e=>e.legend.payload;it([t5,gD],(e,t)=>{var{itemSorter:i}=t,s=e.flat(1);return i?xx(s,i):s});var J_=1;function r5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,i]=H.useState({height:0,left:0,top:0,width:0}),s=H.useCallback(m=>{if(m!=null){var y=m.getBoundingClientRect(),_={height:y.height,left:y.left,top:y.top,width:y.width};(Math.abs(_.height-t.height)>J_||Math.abs(_.left-t.left)>J_||Math.abs(_.top-t.top)>J_||Math.abs(_.width-t.width)>J_)&&i({height:_.height,left:_.left,top:_.top,width:_.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Ha(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var n5=typeof Symbol=="function"&&Symbol.observable||"@@observable",CT=n5,C1=()=>Math.random().toString(36).substring(7).split("").join("."),i5={INIT:`@@redux/INIT${C1()}`,REPLACE:`@@redux/REPLACE${C1()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${C1()}`},P0=i5;function O2(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function yD(e,t,i){if(typeof e!="function")throw new Error(Ha(2));if(typeof t=="function"&&typeof i=="function"||typeof i=="function"&&typeof arguments[3]=="function")throw new Error(Ha(0));if(typeof t=="function"&&typeof i>"u"&&(i=t,t=void 0),typeof i<"u"){if(typeof i!="function")throw new Error(Ha(1));return i(yD)(e,t)}let s=e,m=t,y=new Map,_=y,c=0,P=!1;function C(){_===y&&(_=new Map,y.forEach((G,oe)=>{_.set(oe,G)}))}function D(){if(P)throw new Error(Ha(3));return m}function k(G){if(typeof G!="function")throw new Error(Ha(4));if(P)throw new Error(Ha(5));let oe=!0;C();const he=c++;return _.set(he,G),function(){if(oe){if(P)throw new Error(Ha(6));oe=!1,C(),_.delete(he),y=null}}}function U(G){if(!O2(G))throw new Error(Ha(7));if(typeof G.type>"u")throw new Error(Ha(8));if(typeof G.type!="string")throw new Error(Ha(17));if(P)throw new Error(Ha(9));try{P=!0,m=s(m,G)}finally{P=!1}return(y=_).forEach(he=>{he()}),G}function V(G){if(typeof G!="function")throw new Error(Ha(10));s=G,U({type:P0.REPLACE})}function Q(){const G=k;return{subscribe(oe){if(typeof oe!="object"||oe===null)throw new Error(Ha(11));function he(){const Ce=oe;Ce.next&&Ce.next(D())}return he(),{unsubscribe:G(he)}},[CT](){return this}}}return U({type:P0.INIT}),{dispatch:U,subscribe:k,getState:D,replaceReducer:V,[CT]:Q}}function a5(e){Object.keys(e).forEach(t=>{const i=e[t];if(typeof i(void 0,{type:P0.INIT})>"u")throw new Error(Ha(12));if(typeof i(void 0,{type:P0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ha(13))})}function vD(e){const t=Object.keys(e),i={};for(let y=0;y<t.length;y++){const _=t[y];typeof e[_]=="function"&&(i[_]=e[_])}const s=Object.keys(i);let m;try{a5(i)}catch(y){m=y}return function(_={},c){if(m)throw m;let P=!1;const C={};for(let D=0;D<s.length;D++){const k=s[D],U=i[k],V=_[k],Q=U(V,c);if(typeof Q>"u")throw c&&c.type,new Error(Ha(14));C[k]=Q,P=P||Q!==V}return P=P||s.length!==Object.keys(_).length,P?C:_}}function C0(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,i)=>(...s)=>t(i(...s)))}function o5(...e){return t=>(i,s)=>{const m=t(i,s);let y=()=>{throw new Error(Ha(15))};const _={getState:m.getState,dispatch:(P,...C)=>y(P,...C)},c=e.map(P=>P(_));return y=C0(...c)(m.dispatch),{...m,dispatch:y}}}function _D(e){return O2(e)&&"type"in e&&typeof e.type=="string"}var xD=Symbol.for("immer-nothing"),DT=Symbol.for("immer-draftable"),Uo=Symbol.for("immer-state");function Cu(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ys=Object,Tg=Ys.getPrototypeOf,D0="constructor",bx="prototype",bw="configurable",I0="enumerable",v0="writable",dv="value",Vh=e=>!!e&&!!e[Uo];function Bu(e){return e?bD(e)||Sx(e)||!!e[DT]||!!e[D0]?.[DT]||Ax(e)||Tx(e):!1}var s5=Ys[bx][D0].toString(),IT=new WeakMap;function bD(e){if(!e||!z2(e))return!1;const t=Tg(e);if(t===null||t===Ys[bx])return!0;const i=Ys.hasOwnProperty.call(t,D0)&&t[D0];if(i===Object)return!0;if(!vg(i))return!1;let s=IT.get(i);return s===void 0&&(s=Function.toString.call(i),IT.set(i,s)),s===s5}function wx(e,t,i=!0){zv(e)===0?(i?Reflect.ownKeys(e):Ys.keys(e)).forEach(m=>{t(m,e[m],e)}):e.forEach((s,m)=>t(m,s,e))}function zv(e){const t=e[Uo];return t?t.type_:Sx(e)?1:Ax(e)?2:Tx(e)?3:0}var OT=(e,t,i=zv(e))=>i===2?e.has(t):Ys[bx].hasOwnProperty.call(e,t),ww=(e,t,i=zv(e))=>i===2?e.get(t):e[t],O0=(e,t,i,s=zv(e))=>{s===2?e.set(t,i):s===3?e.add(i):e[t]=i};function l5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Sx=Array.isArray,Ax=e=>e instanceof Map,Tx=e=>e instanceof Set,z2=e=>typeof e=="object",vg=e=>typeof e=="function",D1=e=>typeof e=="boolean";function u5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var zh=e=>e.copy_||e.base_,k2=e=>e.modified_?e.copy_:e.base_;function Sw(e,t){if(Ax(e))return new Map(e);if(Tx(e))return new Set(e);if(Sx(e))return Array[bx].slice.call(e);const i=bD(e);if(t===!0||t==="class_only"&&!i){const s=Ys.getOwnPropertyDescriptors(e);delete s[Uo];let m=Reflect.ownKeys(s);for(let y=0;y<m.length;y++){const _=m[y],c=s[_];c[v0]===!1&&(c[v0]=!0,c[bw]=!0),(c.get||c.set)&&(s[_]={[bw]:!0,[v0]:!0,[I0]:c[I0],[dv]:e[_]})}return Ys.create(Tg(e),s)}else{const s=Tg(e);if(s!==null&&i)return{...e};const m=Ys.create(s);return Ys.assign(m,e)}}function R2(e,t=!1){return Ex(e)||Vh(e)||!Bu(e)||(zv(e)>1&&Ys.defineProperties(e,{set:e0,add:e0,clear:e0,delete:e0}),Ys.freeze(e),t&&wx(e,(i,s)=>{R2(s,!0)},!1)),e}function c5(){Cu(2)}var e0={[dv]:c5};function Ex(e){return e===null||!z2(e)?!0:Ys.isFrozen(e)}var z0="MapSet",Aw="Patches",zT="ArrayMethods",wD={};function Lp(e){const t=wD[e];return t||Cu(0,e),t}var kT=e=>!!wD[e],pv,SD=()=>pv,h5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:kT(z0)?Lp(z0):void 0,arrayMethodsPlugin_:kT(zT)?Lp(zT):void 0});function RT(e,t){t&&(e.patchPlugin_=Lp(Aw),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Tw(e){Ew(e),e.drafts_.forEach(f5),e.drafts_=null}function Ew(e){e===pv&&(pv=e.parent_)}var LT=e=>pv=h5(pv,e);function f5(e){const t=e[Uo];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function BT(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];if(e!==void 0&&e!==i){i[Uo].modified_&&(Tw(t),Cu(4)),Bu(e)&&(e=jT(t,e));const{patchPlugin_:m}=t;m&&m.generateReplacementPatches_(i[Uo].base_,e,t)}else e=jT(t,i);return d5(t,e,!0),Tw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==xD?e:void 0}function jT(e,t){if(Ex(t))return t;const i=t[Uo];if(!i)return k0(t,e.handledSet_,e);if(!Mx(i,e))return t;if(!i.modified_)return i.base_;if(!i.finalized_){const{callbacks_:s}=i;if(s)for(;s.length>0;)s.pop()(e);ED(i,e)}return i.copy_}function d5(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&R2(t,i)}function AD(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Mx=(e,t)=>e.scope_===t,p5=[];function TD(e,t,i,s){const m=zh(e),y=e.type_;if(s!==void 0&&ww(m,s,y)===t){O0(m,s,i,y);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;wx(m,(P,C)=>{if(Vh(C)){const D=c.get(C)||[];D.push(P),c.set(C,D)}})}const _=e.draftLocations_.get(t)??p5;for(const c of _)O0(m,c,i,y)}function m5(e,t,i){e.callbacks_.push(function(m){const y=t;if(!y||!Mx(y,m))return;m.mapSetPlugin_?.fixSetContents(y);const _=k2(y);TD(e,y.draft_??y,_,i),ED(y,m)})}function ED(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:s}=t;if(s){const m=s.getPath(e);m&&s.generatePatches_(e,m,t)}AD(e)}}function g5(e,t,i){const{scope_:s}=e;if(Vh(i)){const m=i[Uo];Mx(m,s)&&m.callbacks_.push(function(){_0(e);const _=k2(m);TD(e,i,_,t)})}else Bu(i)&&e.callbacks_.push(function(){const y=zh(e);e.type_===3?y.has(i)&&k0(i,s.handledSet_,s):ww(y,t,e.type_)===i&&s.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&k0(ww(e.copy_,t,e.type_),s.handledSet_,s)})}function k0(e,t,i){return!i.immer_.autoFreeze_&&i.unfinalizedDrafts_<1||Vh(e)||t.has(e)||!Bu(e)||Ex(e)||(t.add(e),wx(e,(s,m)=>{if(Vh(m)){const y=m[Uo];if(Mx(y,i)){const _=k2(y);O0(e,s,_,e.type_),AD(y)}}else Bu(m)&&k0(m,t,i)})),e}function y5(e,t){const i=Sx(e),s={type_:i?1:0,scope_:t?t.scope_:SD(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let m=s,y=R0;i&&(m=[s],y=mv);const{revoke:_,proxy:c}=Proxy.revocable(m,y);return s.draft_=c,s.revoke_=_,[c,s]}var R0={get(e,t){if(t===Uo)return e;let i=e.scope_.arrayMethodsPlugin_;const s=e.type_===1&&typeof t=="string";if(s&&i?.isArrayOperationMethod(t))return i.createMethodInterceptor(e,t);const m=zh(e);if(!OT(m,t,e.type_))return v5(e,m,t);const y=m[t];if(e.finalized_||!Bu(y)||s&&e.operationMethod&&i?.isMutatingArrayMethod(e.operationMethod)&&u5(t))return y;if(y===I1(e.base_,t)){_0(e);const _=e.type_===1?+t:t,c=Pw(e.scope_,y,e,_);return e.copy_[_]=c}return y},has(e,t){return t in zh(e)},ownKeys(e){return Reflect.ownKeys(zh(e))},set(e,t,i){const s=MD(zh(e),t);if(s?.set)return s.set.call(e.draft_,i),!0;if(!e.modified_){const m=I1(zh(e),t),y=m?.[Uo];if(y&&y.base_===i)return e.copy_[t]=i,e.assigned_.set(t,!1),!0;if(l5(i,m)&&(i!==void 0||OT(e.base_,t,e.type_)))return!0;_0(e),Mw(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_.set(t,!0),g5(e,t,i)),!0},deleteProperty(e,t){return _0(e),I1(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Mw(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=zh(e),s=Reflect.getOwnPropertyDescriptor(i,t);return s&&{[v0]:!0,[bw]:e.type_!==1||t!=="length",[I0]:s[I0],[dv]:i[t]}},defineProperty(){Cu(11)},getPrototypeOf(e){return Tg(e.base_)},setPrototypeOf(){Cu(12)}},mv={};for(let e in R0){let t=R0[e];mv[e]=function(){const i=arguments;return i[0]=i[0][0],t.apply(this,i)}}mv.deleteProperty=function(e,t){return mv.set.call(this,e,t,void 0)};mv.set=function(e,t,i){return R0.set.call(this,e[0],t,i,e[0])};function I1(e,t){const i=e[Uo];return(i?zh(i):e)[t]}function v5(e,t,i){const s=MD(t,i);return s?dv in s?s[dv]:s.get?.call(e.draft_):void 0}function MD(e,t){if(!(t in e))return;let i=Tg(e);for(;i;){const s=Object.getOwnPropertyDescriptor(i,t);if(s)return s;i=Tg(i)}}function Mw(e){e.modified_||(e.modified_=!0,e.parent_&&Mw(e.parent_))}function _0(e){e.copy_||(e.assigned_=new Map,e.copy_=Sw(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _5=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(i,s,m)=>{if(vg(i)&&!vg(s)){const _=s;s=i;const c=this;return function(C=_,...D){return c.produce(C,k=>s.call(this,k,...D))}}vg(s)||Cu(6),m!==void 0&&!vg(m)&&Cu(7);let y;if(Bu(i)){const _=LT(this),c=Pw(_,i,void 0);let P=!0;try{y=s(c),P=!1}finally{P?Tw(_):Ew(_)}return RT(_,m),BT(y,_)}else if(!i||!z2(i)){if(y=s(i),y===void 0&&(y=i),y===xD&&(y=void 0),this.autoFreeze_&&R2(y,!0),m){const _=[],c=[];Lp(Aw).generateReplacementPatches_(i,y,{patches_:_,inversePatches_:c}),m(_,c)}return y}else Cu(1,i)},this.produceWithPatches=(i,s)=>{if(vg(i))return(c,...P)=>this.produceWithPatches(c,C=>i(C,...P));let m,y;return[this.produce(i,s,(c,P)=>{m=c,y=P}),m,y]},D1(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),D1(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),D1(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Bu(t)||Cu(8),Vh(t)&&(t=Ou(t));const i=LT(this),s=Pw(i,t,void 0);return s[Uo].isManual_=!0,Ew(i),s}finishDraft(t,i){const s=t&&t[Uo];(!s||!s.isManual_)&&Cu(9);const{scope_:m}=s;return RT(m,i),BT(void 0,m)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,i){let s;for(s=i.length-1;s>=0;s--){const y=i[s];if(y.path.length===0&&y.op==="replace"){t=y.value;break}}s>-1&&(i=i.slice(s+1));const m=Lp(Aw).applyPatches_;return Vh(t)?m(t,i):this.produce(t,y=>m(y,i))}};function Pw(e,t,i,s){const[m,y]=Ax(t)?Lp(z0).proxyMap_(t,i):Tx(t)?Lp(z0).proxySet_(t,i):y5(t,i);return(i?.scope_??SD()).drafts_.push(m),y.callbacks_=i?.callbacks_??[],y.key_=s,i&&s!==void 0?m5(i,y,s):y.callbacks_.push(function(P){P.mapSetPlugin_?.fixSetContents(y);const{patchPlugin_:C}=P;y.modified_&&C&&C.generatePatches_(y,[],P)}),m}function Ou(e){return Vh(e)||Cu(10,e),PD(e)}function PD(e){if(!Bu(e)||Ex(e))return e;const t=e[Uo];let i,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Sw(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else i=Sw(e,!0);return wx(i,(m,y)=>{O0(i,m,PD(y))},s),t&&(t.finalized_=!1),i}var x5=new _5,CD=x5.produce;function DD(e){return({dispatch:i,getState:s})=>m=>y=>typeof y=="function"?y(i,s,e):m(y)}var b5=DD(),w5=DD,S5=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?C0:C0.apply(null,arguments)};function kl(e,t){function i(...s){if(t){let m=t(...s);if(!m)throw new Error(Ws(0));return{type:e,payload:m.payload,..."meta"in m&&{meta:m.meta},..."error"in m&&{error:m.error}}}return{type:e,payload:s[0]}}return i.toString=()=>`${e}`,i.type=e,i.match=s=>_D(s)&&s.type===e,i}var ID=class sv extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,sv.prototype)}static get[Symbol.species](){return sv}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new sv(...t[0].concat(this)):new sv(...t.concat(this))}};function NT(e){return Bu(e)?CD(e,()=>{}):e}function t0(e,t,i){return e.has(t)?e.get(t):e.set(t,i(t)).get(t)}function A5(e){return typeof e=="boolean"}var T5=()=>function(t){const{thunk:i=!0,immutableCheck:s=!0,serializableCheck:m=!0,actionCreatorCheck:y=!0}=t??{};let _=new ID;return i&&(A5(i)?_.push(b5):_.push(w5(i.extraArgument))),_},OD="RTK_autoBatch",ai=()=>e=>({payload:e,meta:{[OD]:!0}}),FT=e=>t=>{setTimeout(t,e)},zD=(e={type:"raf"})=>t=>(...i)=>{const s=t(...i);let m=!0,y=!1,_=!1;const c=new Set,P=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:FT(10):e.type==="callback"?e.queueNotification:FT(e.timeout),C=()=>{_=!1,y&&(y=!1,c.forEach(D=>D()))};return Object.assign({},s,{subscribe(D){const k=()=>m&&D(),U=s.subscribe(k);return c.add(D),()=>{U(),c.delete(D)}},dispatch(D){try{return m=!D?.meta?.[OD],y=!m,y&&(_||(_=!0,P(C))),s.dispatch(D)}finally{m=!0}}})},E5=e=>function(i){const{autoBatch:s=!0}=i??{};let m=new ID(e);return s&&m.push(zD(typeof s=="object"?s:void 0)),m};function M5(e){const t=T5(),{reducer:i=void 0,middleware:s,devTools:m=!0,preloadedState:y=void 0,enhancers:_=void 0}=e||{};let c;if(typeof i=="function")c=i;else if(O2(i))c=vD(i);else throw new Error(Ws(1));let P;typeof s=="function"?P=s(t):P=t();let C=C0;m&&(C=S5({trace:!1,...typeof m=="object"&&m}));const D=o5(...P),k=E5(D);let U=typeof _=="function"?_(k):k();const V=C(...U);return yD(c,y,V)}function kD(e){const t={},i=[];let s;const m={addCase(y,_){const c=typeof y=="string"?y:y.type;if(!c)throw new Error(Ws(28));if(c in t)throw new Error(Ws(29));return t[c]=_,m},addAsyncThunk(y,_){return _.pending&&(t[y.pending.type]=_.pending),_.rejected&&(t[y.rejected.type]=_.rejected),_.fulfilled&&(t[y.fulfilled.type]=_.fulfilled),_.settled&&i.push({matcher:y.settled,reducer:_.settled}),m},addMatcher(y,_){return i.push({matcher:y,reducer:_}),m},addDefaultCase(y){return s=y,m}};return e(m),[t,i,s]}function P5(e){return typeof e=="function"}function C5(e,t){let[i,s,m]=kD(t),y;if(P5(e))y=()=>NT(e());else{const c=NT(e);y=()=>c}function _(c=y(),P){let C=[i[P.type],...s.filter(({matcher:D})=>D(P)).map(({reducer:D})=>D)];return C.filter(D=>!!D).length===0&&(C=[m]),C.reduce((D,k)=>{if(k)if(Vh(D)){const V=k(D,P);return V===void 0?D:V}else{if(Bu(D))return CD(D,U=>k(U,P));{const U=k(D,P);if(U===void 0){if(D===null)return D;throw Error("A case reducer on a non-draftable value must not return undefined")}return U}}return D},c)}return _.getInitialState=y,_}var D5="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I5=(e=21)=>{let t="",i=e;for(;i--;)t+=D5[Math.random()*64|0];return t},O5=Symbol.for("rtk-slice-createasyncthunk");function z5(e,t){return`${e}/${t}`}function k5({creators:e}={}){const t=e?.asyncThunk?.[O5];return function(s){const{name:m,reducerPath:y=m}=s;if(!m)throw new Error(Ws(11));const _=(typeof s.reducers=="function"?s.reducers(L5()):s.reducers)||{},c=Object.keys(_),P={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},C={addCase(me,Ce){const be=typeof me=="string"?me:me.type;if(!be)throw new Error(Ws(12));if(be in P.sliceCaseReducersByType)throw new Error(Ws(13));return P.sliceCaseReducersByType[be]=Ce,C},addMatcher(me,Ce){return P.sliceMatchers.push({matcher:me,reducer:Ce}),C},exposeAction(me,Ce){return P.actionCreators[me]=Ce,C},exposeCaseReducer(me,Ce){return P.sliceCaseReducersByName[me]=Ce,C}};c.forEach(me=>{const Ce=_[me],be={reducerName:me,type:z5(m,me),createNotation:typeof s.reducers=="function"};j5(Ce)?F5(be,Ce,C,t):B5(be,Ce,C)});function D(){const[me={},Ce=[],be=void 0]=typeof s.extraReducers=="function"?kD(s.extraReducers):[s.extraReducers],ke={...me,...P.sliceCaseReducersByType};return C5(s.initialState,je=>{for(let gt in ke)je.addCase(gt,ke[gt]);for(let gt of P.sliceMatchers)je.addMatcher(gt.matcher,gt.reducer);for(let gt of Ce)je.addMatcher(gt.matcher,gt.reducer);be&&je.addDefaultCase(be)})}const k=me=>me,U=new Map,V=new WeakMap;let Q;function Z(me,Ce){return Q||(Q=D()),Q(me,Ce)}function G(){return Q||(Q=D()),Q.getInitialState()}function oe(me,Ce=!1){function be(je){let gt=je[me];return typeof gt>"u"&&Ce&&(gt=t0(V,be,G)),gt}function ke(je=k){const gt=t0(U,Ce,()=>new WeakMap);return t0(gt,je,()=>{const bt={};for(const[It,yt]of Object.entries(s.selectors??{}))bt[It]=R5(yt,je,()=>t0(V,je,G),Ce);return bt})}return{reducerPath:me,getSelectors:ke,get selectors(){return ke(be)},selectSlice:be}}const he={name:m,reducer:Z,actions:P.actionCreators,caseReducers:P.sliceCaseReducersByName,getInitialState:G,...oe(y),injectInto(me,{reducerPath:Ce,...be}={}){const ke=Ce??y;return me.inject({reducerPath:ke,reducer:Z},be),{...he,...oe(ke,!0)}}};return he}}function R5(e,t,i,s){function m(y,..._){let c=t(y);return typeof c>"u"&&s&&(c=i()),e(c,..._)}return m.unwrapped=e,m}var bs=k5();function L5(){function e(t,i){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...i}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...i){return t(...i)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,i){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:i}},asyncThunk:e}}function B5({type:e,reducerName:t,createNotation:i},s,m){let y,_;if("reducer"in s){if(i&&!N5(s))throw new Error(Ws(17));y=s.reducer,_=s.prepare}else y=s;m.addCase(e,y).exposeCaseReducer(t,y).exposeAction(t,_?kl(e,_):kl(e))}function j5(e){return e._reducerDefinitionType==="asyncThunk"}function N5(e){return e._reducerDefinitionType==="reducerWithPrepare"}function F5({type:e,reducerName:t},i,s,m){if(!m)throw new Error(Ws(18));const{payloadCreator:y,fulfilled:_,pending:c,rejected:P,settled:C,options:D}=i,k=m(e,y,D);s.exposeAction(t,k),_&&s.addCase(k.fulfilled,_),c&&s.addCase(k.pending,c),P&&s.addCase(k.rejected,P),C&&s.addMatcher(k.settled,C),s.exposeCaseReducer(t,{fulfilled:_||r0,pending:c||r0,rejected:P||r0,settled:C||r0})}function r0(){}var U5="task",RD="listener",LD="completed",L2="cancelled",V5=`task-${L2}`,G5=`task-${LD}`,Cw=`${RD}-${L2}`,q5=`${RD}-${LD}`,Px=class{constructor(e){this.code=e,this.message=`${U5} ${L2} (reason: ${e})`}name="TaskAbortError";message},B2=(e,t)=>{if(typeof e!="function")throw new TypeError(Ws(32))},L0=()=>{},BD=(e,t=L0)=>(e.catch(t),e),jD=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Op=e=>{if(e.aborted)throw new Px(e.reason)};function ND(e,t){let i=L0;return new Promise((s,m)=>{const y=()=>m(new Px(e.reason));if(e.aborted){y();return}i=jD(e,y),t.finally(()=>i()).then(s,m)}).finally(()=>{i=L0})}var H5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(i){return{status:i instanceof Px?"cancelled":"rejected",error:i}}finally{t?.()}},B0=e=>t=>BD(ND(e,t).then(i=>(Op(e),i))),FD=e=>{const t=B0(e);return i=>t(new Promise(s=>setTimeout(s,i)))},{assign:wg}=Object,UT={},Cx="listenerMiddleware",Z5=(e,t)=>{const i=s=>jD(e,()=>s.abort(e.reason));return(s,m)=>{B2(s);const y=new AbortController;i(y);const _=H5(async()=>{Op(e),Op(y.signal);const c=await s({pause:B0(y.signal),delay:FD(y.signal),signal:y.signal});return Op(y.signal),c},()=>y.abort(G5));return m?.autoJoin&&t.push(_.catch(L0)),{result:B0(e)(_),cancel(){y.abort(V5)}}}},$5=(e,t)=>{const i=async(s,m)=>{Op(t);let y=()=>{};const c=[new Promise((P,C)=>{let D=e({predicate:s,effect:(k,U)=>{U.unsubscribe(),P([k,U.getState(),U.getOriginalState()])}});y=()=>{D(),C()}})];m!=null&&c.push(new Promise(P=>setTimeout(P,m,null)));try{const P=await ND(t,Promise.race(c));return Op(t),P}finally{y()}};return(s,m)=>BD(i(s,m))},UD=e=>{let{type:t,actionCreator:i,matcher:s,predicate:m,effect:y}=e;if(t)m=kl(t).match;else if(i)t=i.type,m=i.match;else if(s)m=s;else if(!m)throw new Error(Ws(21));return B2(y),{predicate:m,type:t,effect:y}},VD=wg(e=>{const{type:t,predicate:i,effect:s}=UD(e);return{id:I5(),effect:s,type:t,predicate:i,pending:new Set,unsubscribe:()=>{throw new Error(Ws(22))}}},{withTypes:()=>VD}),VT=(e,t)=>{const{type:i,effect:s,predicate:m}=UD(t);return Array.from(e.values()).find(y=>(typeof i=="string"?y.type===i:y.predicate===m)&&y.effect===s)},Dw=e=>{e.pending.forEach(t=>{t.abort(Cw)})},X5=(e,t)=>()=>{for(const i of t.keys())Dw(i);e.clear()},GT=(e,t,i)=>{try{e(t,i)}catch(s){setTimeout(()=>{throw s},0)}},GD=wg(kl(`${Cx}/add`),{withTypes:()=>GD}),Y5=kl(`${Cx}/removeAll`),qD=wg(kl(`${Cx}/remove`),{withTypes:()=>qD}),W5=(...e)=>{console.error(`${Cx}/error`,...e)},kv=(e={})=>{const t=new Map,i=new Map,s=V=>{const Q=i.get(V)??0;i.set(V,Q+1)},m=V=>{const Q=i.get(V)??1;Q===1?i.delete(V):i.set(V,Q-1)},{extra:y,onError:_=W5}=e;B2(_);const c=V=>(V.unsubscribe=()=>t.delete(V.id),t.set(V.id,V),Q=>{V.unsubscribe(),Q?.cancelActive&&Dw(V)}),P=V=>{const Q=VT(t,V)??VD(V);return c(Q)};wg(P,{withTypes:()=>P});const C=V=>{const Q=VT(t,V);return Q&&(Q.unsubscribe(),V.cancelActive&&Dw(Q)),!!Q};wg(C,{withTypes:()=>C});const D=async(V,Q,Z,G)=>{const oe=new AbortController,he=$5(P,oe.signal),me=[];try{V.pending.add(oe),s(V),await Promise.resolve(V.effect(Q,wg({},Z,{getOriginalState:G,condition:(Ce,be)=>he(Ce,be).then(Boolean),take:he,delay:FD(oe.signal),pause:B0(oe.signal),extra:y,signal:oe.signal,fork:Z5(oe.signal,me),unsubscribe:V.unsubscribe,subscribe:()=>{t.set(V.id,V)},cancelActiveListeners:()=>{V.pending.forEach((Ce,be,ke)=>{Ce!==oe&&(Ce.abort(Cw),ke.delete(Ce))})},cancel:()=>{oe.abort(Cw),V.pending.delete(oe)},throwIfCancelled:()=>{Op(oe.signal)}})))}catch(Ce){Ce instanceof Px||GT(_,Ce,{raisedBy:"effect"})}finally{await Promise.all(me),oe.abort(q5),m(V),V.pending.delete(oe)}},k=X5(t,i);return{middleware:V=>Q=>Z=>{if(!_D(Z))return Q(Z);if(GD.match(Z))return P(Z.payload);if(Y5.match(Z)){k();return}if(qD.match(Z))return C(Z.payload);let G=V.getState();const oe=()=>{if(G===UT)throw new Error(Ws(23));return G};let he;try{if(he=Q(Z),t.size>0){const me=V.getState(),Ce=Array.from(t.values());for(const be of Ce){let ke=!1;try{ke=be.predicate(Z,me,G)}catch(je){ke=!1,GT(_,je,{raisedBy:"predicate"})}ke&&D(be,Z,V,oe)}}}finally{G=UT}return he},startListening:P,stopListening:C,clearListeners:k}};function Ws(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var K5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},HD=bs({name:"chartLayout",initialState:K5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var i,s,m,y;e.margin.top=(i=t.payload.top)!==null&&i!==void 0?i:0,e.margin.right=(s=t.payload.right)!==null&&s!==void 0?s:0,e.margin.bottom=(m=t.payload.bottom)!==null&&m!==void 0?m:0,e.margin.left=(y=t.payload.left)!==null&&y!==void 0?y:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Q5,setLayout:J5,setChartSize:ej,setScale:tj}=HD.actions,rj=HD.reducer;function ZD(e,t,i){return Array.isArray(e)&&e&&t+i!==0?e.slice(t,i+1):e}function mi(e){return Number.isFinite(e)}function Eg(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function qT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function xg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qT(Object(i),!0).forEach(function(s){nj(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qT(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function nj(e,t,i){return(t=ij(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ij(e){var t=aj(e,"string");return typeof t=="symbol"?t:t+""}function aj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $i(e,t,i){return si(e)||si(t)?i:zc(t)?Ag(e,t,i):typeof t=="function"?t(e):i}var oj=(e,t,i)=>{if(t&&i){var{width:s,height:m}=i,{align:y,verticalAlign:_,layout:c}=t;if((c==="vertical"||c==="horizontal"&&_==="middle")&&y!=="center"&&Yt(e[y]))return xg(xg({},e),{},{[y]:e[y]+(s||0)});if((c==="horizontal"||c==="vertical"&&y==="center")&&_!=="middle"&&Yt(e[_]))return xg(xg({},e),{},{[_]:e[_]+(m||0)})}return e},hd=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",$D=(e,t,i,s)=>{if(s)return e.map(c=>c.coordinate);var m,y,_=e.map(c=>(c.coordinate===t&&(m=!0),c.coordinate===i&&(y=!0),c.coordinate));return m||_.push(t),y||_.push(i),_},XD=(e,t,i)=>{if(!e)return null;var{duplicateDomain:s,type:m,range:y,scale:_,realScaleType:c,isCategorical:P,categoricalDomain:C,tickCount:D,ticks:k,niceTicks:U,axisType:V}=e;if(!_)return null;var Q=c==="scaleBand"&&_.bandwidth?_.bandwidth()/2:2,Z=m==="category"&&_.bandwidth?_.bandwidth()/Q:0;if(Z=V==="angleAxis"&&y&&y.length>=2?_s(y[0]-y[1])*2*Z:Z,k||U){var G=(k||U||[]).map((oe,he)=>{var me=s?s.indexOf(oe):oe;return{coordinate:_(me)+Z,value:oe,offset:Z,index:he}});return G.filter(oe=>!Ru(oe.coordinate))}return P&&C?C.map((oe,he)=>({coordinate:_(oe)+Z,value:oe,index:he,offset:Z})):_.ticks&&D!=null?_.ticks(D).map((oe,he)=>({coordinate:_(oe)+Z,value:oe,offset:Z,index:he})):_.domain().map((oe,he)=>({coordinate:_(oe)+Z,value:s?s[oe]:oe,index:he,offset:Z}))},HT=1e-4,sj=e=>{var t=e.domain();if(!(!t||t.length<=2)){var i=t.length,s=e.range(),m=Math.min(s[0],s[1])-HT,y=Math.max(s[0],s[1])+HT,_=e(t[0]),c=e(t[i-1]);(_<m||_>y||c<m||c>y)&&e.domain([t[0],t[i-1]])}},lj=(e,t)=>{if(!t||t.length!==2||!Yt(t[0])||!Yt(t[1]))return e;var i=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),m=[e[0],e[1]];return(!Yt(e[0])||e[0]<i)&&(m[0]=i),(!Yt(e[1])||e[1]>s)&&(m[1]=s),m[0]>s&&(m[0]=s),m[1]<i&&(m[1]=i),m},uj=e=>{var t,i=e.length;if(!(i<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var m=0;m<s;++m)for(var y=0,_=0,c=0;c<i;++c){var P=e[c],C=P?.[m];if(C!=null){var D=C[1],k=C[0],U=Ru(D)?k:D;U>=0?(C[0]=y,C[1]=y+U,y=D):(C[0]=_,C[1]=_+U,_=D)}}}},cj=e=>{var t,i=e.length;if(!(i<=0)){var s=(t=e[0])===null||t===void 0?void 0:t.length;if(!(s==null||s<=0))for(var m=0;m<s;++m)for(var y=0,_=0;_<i;++_){var c=e[_],P=c?.[m];if(P!=null){var C=Ru(P[1])?P[0]:P[1];C>=0?(P[0]=y,P[1]=y+C,y=P[1]):(P[0]=0,P[1]=0)}}}},hj={sign:uj,expand:jL,none:Rp,silhouette:NL,wiggle:FL,positive:cj},fj=(e,t,i)=>{var s,m=(s=hj[i])!==null&&s!==void 0?s:Rp,y=BL().keys(t).value((c,P)=>Number($i(c,P,0))).order(_w).offset(m),_=y(e);return _.forEach((c,P)=>{c.forEach((C,D)=>{var k=$i(e[D],t[P],0);Array.isArray(k)&&k.length===2&&Yt(k[0])&&Yt(k[1])&&(C[0]=k[0],C[1]=k[1])})}),_};function dj(e){return e==null?void 0:String(e)}function ZT(e){var{axis:t,ticks:i,bandSize:s,entry:m,index:y,dataKey:_}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!si(m[t.dataKey])){var c=eD(i,"value",m[t.dataKey]);if(c)return c.coordinate+s/2}return i[y]?i[y].coordinate+s/2:null}var P=$i(m,si(_)?t.dataKey:_);return si(P)?null:t.scale(P)}var $T=e=>{var{axis:t,ticks:i,offset:s,bandSize:m,entry:y,index:_}=e;if(t.type==="category")return i[_]?i[_].coordinate+s:null;var c=$i(y,t.dataKey,t.scale.domain()[_]);return si(c)?null:t.scale(c)-m/2+s},pj=e=>{var{numericAxis:t}=e,i=t.scale.domain();if(t.type==="number"){var s=Math.min(i[0],i[1]),m=Math.max(i[0],i[1]);return s<=0&&m>=0?0:m<0?m:s}return i[0]},mj=e=>{var t=e.flat(2).filter(Yt);return[Math.min(...t),Math.max(...t)]},gj=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],yj=(e,t,i)=>{if(e!=null)return gj(Object.keys(e).reduce((s,m)=>{var y=e[m];if(!y)return s;var{stackedData:_}=y,c=_.reduce((P,C)=>{var D=ZD(C,t,i),k=mj(D);return!mi(k[0])||!mi(k[1])?P:[Math.min(P[0],k[0]),Math.max(P[1],k[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]))},XT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Mg=(e,t,i)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!i||s>0)return s}if(e&&t&&t.length>=2){for(var m=xx(t,D=>D.coordinate),y=1/0,_=1,c=m.length;_<c;_++){var P=m[_],C=m[_-1];y=Math.min((P?.coordinate||0)-(C?.coordinate||0),y)}return y===1/0?0:y}return i?void 0:0};function WT(e){var{tooltipEntrySettings:t,dataKey:i,payload:s,value:m,name:y}=e;return xg(xg({},t),{},{dataKey:i,payload:s,value:m,name:y})}function Dx(e,t){if(e)return String(e);if(typeof t=="string")return t}var vj=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},_j=(e,t)=>t==="centric"?e.angle:e.radius,Wh=e=>e.layout.width,Kh=e=>e.layout.height,xj=e=>e.layout.scale,YD=e=>e.layout.margin,Ix=it(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Ox=it(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),bj="data-recharts-item-index",wj="data-recharts-item-id",Rv=60;function KT(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function n0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(i),!0).forEach(function(s){Sj(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KT(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Sj(e,t,i){return(t=Aj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Aj(e){var t=Tj(e,"string");return typeof t=="symbol"?t:t+""}function Tj(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ej=e=>e.brush.height;function Mj(e){var t=Ox(e);return t.reduce((i,s)=>{if(s.orientation==="left"&&!s.mirror&&!s.hide){var m=typeof s.width=="number"?s.width:Rv;return i+m}return i},0)}function Pj(e){var t=Ox(e);return t.reduce((i,s)=>{if(s.orientation==="right"&&!s.mirror&&!s.hide){var m=typeof s.width=="number"?s.width:Rv;return i+m}return i},0)}function Cj(e){var t=Ix(e);return t.reduce((i,s)=>s.orientation==="top"&&!s.mirror&&!s.hide?i+s.height:i,0)}function Dj(e){var t=Ix(e);return t.reduce((i,s)=>s.orientation==="bottom"&&!s.mirror&&!s.hide?i+s.height:i,0)}var Ea=it([Wh,Kh,YD,Ej,Mj,Pj,Cj,Dj,gD,e5],(e,t,i,s,m,y,_,c,P,C)=>{var D={left:(i.left||0)+m,right:(i.right||0)+y},k={top:(i.top||0)+_,bottom:(i.bottom||0)+c},U=n0(n0({},k),D),V=U.bottom;U.bottom+=s,U=oj(U,P,C);var Q=e-U.left-U.right,Z=t-U.top-U.bottom;return n0(n0({brushBottom:V},U),{},{width:Math.max(Q,0),height:Math.max(Z,0)})}),Ij=it(Ea,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),j2=it(Wh,Kh,(e,t)=>({x:0,y:0,width:e,height:t})),Oj=H.createContext(null),vo=()=>H.useContext(Oj)!=null,zx=e=>e.brush,kx=it([zx,Ea,YD],(e,t,i)=>({height:e.height,x:Yt(e.x)?e.x:t.left,y:Yt(e.y)?e.y:t.top+t.height+t.brushBottom-(i?.bottom||0),width:Yt(e.width)?e.width:t.width})),QT=function(t,i){for(var s=arguments.length,m=new Array(s>2?s-2:0),y=2;y<s;y++)m[y-2]=arguments[y];if(typeof console<"u"&&console.warn&&(i===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(i===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var _=0;console.warn(i.replace(/%s/g,()=>m[_++]))}},zj=H.createContext({width:-1,height:-1}),WD=()=>H.useContext(zj);function KD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Rx=()=>{var e,t=vo(),i=ir(Ij),s=ir(kx),m=(e=ir(zx))===null||e===void 0?void 0:e.padding;return!t||!s||!m?i:{width:s.width-m.left-m.right,height:s.height-m.top-m.bottom,x:m.left,y:m.top}},kj={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},QD=()=>{var e;return(e=ir(Ea))!==null&&e!==void 0?e:kj},JD=()=>ir(Wh),eI=()=>ir(Kh),un=e=>e.layout.layoutType,Rg=()=>ir(un),Rj=()=>{var e=Rg();return e!==void 0},Lx=e=>{var t=Li(),i=vo(),{width:s,height:m}=e,y=WD(),_=s,c=m;return y&&(_=y.width>0?y.width:s,c=y.height>0?y.height:m),H.useEffect(()=>{!i&&Eg(_)&&Eg(c)&&t(ej({width:_,height:c}))},[t,i,_,c]),null},tI=Symbol.for("immer-nothing"),JT=Symbol.for("immer-draftable"),Ks=Symbol.for("immer-state");function Du(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gv=Object.getPrototypeOf;function Pg(e){return!!e&&!!e[Ks]}function Bp(e){return e?rI(e)||Array.isArray(e)||!!e[JT]||!!e.constructor?.[JT]||Lv(e)||jx(e):!1}var Lj=Object.prototype.constructor.toString(),eE=new WeakMap;function rI(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(i===Object)return!0;if(typeof i!="function")return!1;let s=eE.get(i);return s===void 0&&(s=Function.toString.call(i),eE.set(i,s)),s===Lj}function j0(e,t,i=!0){Bx(e)===0?(i?Reflect.ownKeys(e):Object.keys(e)).forEach(m=>{t(m,e[m],e)}):e.forEach((s,m)=>t(m,s,e))}function Bx(e){const t=e[Ks];return t?t.type_:Array.isArray(e)?1:Lv(e)?2:jx(e)?3:0}function Iw(e,t){return Bx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function nI(e,t,i){const s=Bx(e);s===2?e.set(t,i):s===3?e.add(i):e[t]=i}function Bj(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Lv(e){return e instanceof Map}function jx(e){return e instanceof Set}function Ep(e){return e.copy_||e.base_}function Ow(e,t){if(Lv(e))return new Map(e);if(jx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const i=rI(e);if(t===!0||t==="class_only"&&!i){const s=Object.getOwnPropertyDescriptors(e);delete s[Ks];let m=Reflect.ownKeys(s);for(let y=0;y<m.length;y++){const _=m[y],c=s[_];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(s[_]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[_]})}return Object.create(gv(e),s)}else{const s=gv(e);if(s!==null&&i)return{...e};const m=Object.create(s);return Object.assign(m,e)}}function N2(e,t=!1){return Nx(e)||Pg(e)||!Bp(e)||(Bx(e)>1&&Object.defineProperties(e,{set:i0,add:i0,clear:i0,delete:i0}),Object.freeze(e),t&&Object.values(e).forEach(i=>N2(i,!0))),e}function jj(){Du(2)}var i0={value:jj};function Nx(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Nj={};function jp(e){const t=Nj[e];return t||Du(0,e),t}var yv;function iI(){return yv}function Fj(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function tE(e,t){t&&(jp("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zw(e){kw(e),e.drafts_.forEach(Uj),e.drafts_=null}function kw(e){e===yv&&(yv=e.parent_)}function rE(e){return yv=Fj(yv,e)}function Uj(e){const t=e[Ks];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[Ks].modified_&&(zw(t),Du(4)),Bp(e)&&(e=N0(t,e),t.parent_||F0(t,e)),t.patches_&&jp("Patches").generateReplacementPatches_(i[Ks].base_,e,t.patches_,t.inversePatches_)):e=N0(t,i,[]),zw(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tI?e:void 0}function N0(e,t,i){if(Nx(t))return t;const s=e.immer_.shouldUseStrictIteration(),m=t[Ks];if(!m)return j0(t,(y,_)=>iE(e,m,t,y,_,i),s),t;if(m.scope_!==e)return t;if(!m.modified_)return F0(e,m.base_,!0),m.base_;if(!m.finalized_){m.finalized_=!0,m.scope_.unfinalizedDrafts_--;const y=m.copy_;let _=y,c=!1;m.type_===3&&(_=new Set(y),y.clear(),c=!0),j0(_,(P,C)=>iE(e,m,y,P,C,i,c),s),F0(e,y,!1),i&&e.patches_&&jp("Patches").generatePatches_(m,i,e.patches_,e.inversePatches_)}return m.copy_}function iE(e,t,i,s,m,y,_){if(m==null||typeof m!="object"&&!_)return;const c=Nx(m);if(!(c&&!_)){if(Pg(m)){const P=y&&t&&t.type_!==3&&!Iw(t.assigned_,s)?y.concat(s):void 0,C=N0(e,m,P);if(nI(i,s,C),Pg(C))e.canAutoFreeze_=!1;else return}else _&&i.add(m);if(Bp(m)&&!c){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[s]===m&&c)return;N0(e,m),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Lv(i)?i.has(s):Object.prototype.propertyIsEnumerable.call(i,s))&&F0(e,m)}}}function F0(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&N2(t,i)}function Vj(e,t){const i=Array.isArray(e),s={type_:i?1:0,scope_:t?t.scope_:iI(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let m=s,y=F2;i&&(m=[s],y=vv);const{revoke:_,proxy:c}=Proxy.revocable(m,y);return s.draft_=c,s.revoke_=_,c}var F2={get(e,t){if(t===Ks)return e;const i=Ep(e);if(!Iw(i,t))return Gj(e,i,t);const s=i[t];return e.finalized_||!Bp(s)?s:s===O1(e.base_,t)?(z1(e),e.copy_[t]=Lw(s,e)):s},has(e,t){return t in Ep(e)},ownKeys(e){return Reflect.ownKeys(Ep(e))},set(e,t,i){const s=aI(Ep(e),t);if(s?.set)return s.set.call(e.draft_,i),!0;if(!e.modified_){const m=O1(Ep(e),t),y=m?.[Ks];if(y&&y.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(Bj(i,m)&&(i!==void 0||Iw(e.base_,t)))return!0;z1(e),Rw(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return O1(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,z1(e),Rw(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=Ep(e),s=Reflect.getOwnPropertyDescriptor(i,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:i[t]}},defineProperty(){Du(11)},getPrototypeOf(e){return gv(e.base_)},setPrototypeOf(){Du(12)}},vv={};j0(F2,(e,t)=>{vv[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vv.deleteProperty=function(e,t){return vv.set.call(this,e,t,void 0)};vv.set=function(e,t,i){return F2.set.call(this,e[0],t,i,e[0])};function O1(e,t){const i=e[Ks];return(i?Ep(i):e)[t]}function Gj(e,t,i){const s=aI(t,i);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function aI(e,t){if(!(t in e))return;let i=gv(e);for(;i;){const s=Object.getOwnPropertyDescriptor(i,t);if(s)return s;i=gv(i)}}function Rw(e){e.modified_||(e.modified_=!0,e.parent_&&Rw(e.parent_))}function z1(e){e.copy_||(e.copy_=Ow(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var qj=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,i,s)=>{if(typeof t=="function"&&typeof i!="function"){const y=i;i=t;const _=this;return function(P=y,...C){return _.produce(P,D=>i.call(this,D,...C))}}typeof i!="function"&&Du(6),s!==void 0&&typeof s!="function"&&Du(7);let m;if(Bp(t)){const y=rE(this),_=Lw(t,void 0);let c=!0;try{m=i(_),c=!1}finally{c?zw(y):kw(y)}return tE(y,s),nE(m,y)}else if(!t||typeof t!="object"){if(m=i(t),m===void 0&&(m=t),m===tI&&(m=void 0),this.autoFreeze_&&N2(m,!0),s){const y=[],_=[];jp("Patches").generateReplacementPatches_(t,m,y,_),s(y,_)}return m}else Du(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(_,...c)=>this.produceWithPatches(_,P=>t(P,...c));let s,m;return[this.produce(t,i,(_,c)=>{s=_,m=c}),s,m]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Bp(e)||Du(8),Pg(e)&&(e=Hj(e));const t=rE(this),i=Lw(e,void 0);return i[Ks].isManual_=!0,kw(t),i}finishDraft(e,t){const i=e&&e[Ks];(!i||!i.isManual_)&&Du(9);const{scope_:s}=i;return tE(s,t),nE(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const m=t[i];if(m.path.length===0&&m.op==="replace"){e=m.value;break}}i>-1&&(t=t.slice(i+1));const s=jp("Patches").applyPatches_;return Pg(e)?s(e,t):this.produce(e,m=>s(m,t))}};function Lw(e,t){const i=Lv(e)?jp("MapSet").proxyMap_(e,t):jx(e)?jp("MapSet").proxySet_(e,t):Vj(e,t);return(t?t.scope_:iI()).drafts_.push(i),i}function Hj(e){return Pg(e)||Du(10,e),oI(e)}function oI(e){if(!Bp(e)||Nx(e))return e;const t=e[Ks];let i,s=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Ow(e,t.scope_.immer_.useStrictShallowCopy_),s=t.scope_.immer_.shouldUseStrictIteration()}else i=Ow(e,!0);return j0(i,(m,y)=>{nI(i,m,oI(y))},s),t&&(t.finalized_=!1),i}var Zj=new qj;Zj.produce;var $j={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},sI=bs({name:"legend",initialState:$j,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:ai()},replaceLegendPayload:{reducer(e,t){var{prev:i,next:s}=t.payload,m=Ou(e).payload.indexOf(i);m>-1&&(e.payload[m]=s)},prepare:ai()},removeLegendPayload:{reducer(e,t){var i=Ou(e).payload.indexOf(t.payload);i>-1&&e.payload.splice(i,1)},prepare:ai()}}}),{setLegendSize:yX,setLegendSettings:vX,addLegendPayload:Xj,replaceLegendPayload:Yj,removeLegendPayload:Wj}=sI.actions,Kj=sI.reducer;function Bw(){return Bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Bw.apply(null,arguments)}function aE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function k1(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aE(Object(i),!0).forEach(function(s){Qj(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Qj(e,t,i){return(t=Jj(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Jj(e){var t=e4(e,"string");return typeof t=="symbol"?t:t+""}function e4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t4(e){return Array.isArray(e)&&zc(e[0])&&zc(e[1])?e.join(" ~ "):e}var r4=e=>{var{separator:t=" : ",contentStyle:i={},itemStyle:s={},labelStyle:m={},payload:y,formatter:_,itemSorter:c,wrapperClassName:P,labelClassName:C,label:D,labelFormatter:k,accessibilityLayer:U=!1}=e,V=()=>{if(y&&y.length){var be={padding:0,margin:0},ke=(c?xx(y,c):y).map((je,gt)=>{if(je.type==="none")return null;var bt=je.formatter||_||t4,{value:It,name:yt}=je,De=It,Tt=yt;if(bt){var Ct=bt(It,yt,je,gt,y);if(Array.isArray(Ct))[De,Tt]=Ct;else if(Ct!=null)De=Ct;else return null}var Ft=k1({display:"block",paddingTop:4,paddingBottom:4,color:je.color||"#000"},s);return H.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(gt),style:Ft},zc(Tt)?H.createElement("span",{className:"recharts-tooltip-item-name"},Tt):null,zc(Tt)?H.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,H.createElement("span",{className:"recharts-tooltip-item-value"},De),H.createElement("span",{className:"recharts-tooltip-item-unit"},je.unit||""))});return H.createElement("ul",{className:"recharts-tooltip-item-list",style:be},ke)}return null},Q=k1({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),Z=k1({margin:0},m),G=!si(D),oe=G?D:"",he=jn("recharts-default-tooltip",P),me=jn("recharts-tooltip-label",C);G&&k&&y!==void 0&&y!==null&&(oe=k(D,y));var Ce=U?{role:"status","aria-live":"assertive"}:{};return H.createElement("div",Bw({className:he,style:Q},Ce),H.createElement("p",{className:me,style:Z},H.isValidElement(oe)?oe:"".concat(oe)),V())},Jy="recharts-tooltip-wrapper",n4={visibility:"hidden"};function i4(e){var{coordinate:t,translateX:i,translateY:s}=e;return jn(Jy,{["".concat(Jy,"-right")]:Yt(i)&&t&&Yt(t.x)&&i>=t.x,["".concat(Jy,"-left")]:Yt(i)&&t&&Yt(t.x)&&i<t.x,["".concat(Jy,"-bottom")]:Yt(s)&&t&&Yt(t.y)&&s>=t.y,["".concat(Jy,"-top")]:Yt(s)&&t&&Yt(t.y)&&s<t.y})}function oE(e){var{allowEscapeViewBox:t,coordinate:i,key:s,offsetTopLeft:m,position:y,reverseDirection:_,tooltipDimension:c,viewBox:P,viewBoxDimension:C}=e;if(y&&Yt(y[s]))return y[s];var D=i[s]-c-(m>0?m:0),k=i[s]+m;if(t[s])return _[s]?D:k;var U=P[s];if(U==null)return 0;if(_[s]){var V=D,Q=U;return V<Q?Math.max(k,U):Math.max(D,U)}if(C==null)return 0;var Z=k+c,G=U+C;return Z>G?Math.max(D,U):Math.max(k,U)}function a4(e){var{translateX:t,translateY:i,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(i,"px, 0)"):"translate(".concat(t,"px, ").concat(i,"px)")}}function o4(e){var{allowEscapeViewBox:t,coordinate:i,offsetTopLeft:s,position:m,reverseDirection:y,tooltipBox:_,useTranslate3d:c,viewBox:P}=e,C,D,k;return _.height>0&&_.width>0&&i?(D=oE({allowEscapeViewBox:t,coordinate:i,key:"x",offsetTopLeft:s,position:m,reverseDirection:y,tooltipDimension:_.width,viewBox:P,viewBoxDimension:P.width}),k=oE({allowEscapeViewBox:t,coordinate:i,key:"y",offsetTopLeft:s,position:m,reverseDirection:y,tooltipDimension:_.height,viewBox:P,viewBoxDimension:P.height}),C=a4({translateX:D,translateY:k,useTranslate3d:c})):C=n4,{cssProperties:C,cssClasses:i4({translateX:D,translateY:k,coordinate:i})}}function sE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function a0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?sE(Object(i),!0).forEach(function(s){jw(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):sE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function jw(e,t,i){return(t=s4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s4(e){var t=l4(e,"string");return typeof t=="symbol"?t:t+""}function l4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class u4 extends H.PureComponent{constructor(){super(...arguments),jw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),jw(this,"handleKeyDown",t=>{if(t.key==="Escape"){var i,s,m,y;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&i!==void 0?i:0,y:(m=(y=this.props.coordinate)===null||y===void 0?void 0:y.y)!==null&&m!==void 0?m:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,i;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:i,animationDuration:s,animationEasing:m,children:y,coordinate:_,hasPayload:c,isAnimationActive:P,offset:C,position:D,reverseDirection:k,useTranslate3d:U,viewBox:V,wrapperStyle:Q,lastBoundingBox:Z,innerRef:G,hasPortalFromProps:oe}=this.props,{cssClasses:he,cssProperties:me}=o4({allowEscapeViewBox:i,coordinate:_,offsetTopLeft:C,position:D,reverseDirection:k,tooltipBox:{height:Z.height,width:Z.width},useTranslate3d:U,viewBox:V}),Ce=oe?{}:a0(a0({transition:P&&t?"transform ".concat(s,"ms ").concat(m):void 0},me),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&c?"visible":"hidden",position:"absolute",top:0,left:0}),be=a0(a0({},Ce),{},{visibility:!this.state.dismissed&&t&&c?"visible":"hidden"},Q);return H.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:he,style:be,ref:G},y)}}var lI=()=>{var e;return(e=ir(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Nw(){return Nw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Nw.apply(null,arguments)}function lE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function uE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?lE(Object(i),!0).forEach(function(s){c4(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function c4(e,t,i){return(t=h4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h4(e){var t=f4(e,"string");return typeof t=="symbol"?t:t+""}function f4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cE={curveBasisClosed:EL,curveBasisOpen:ML,curveBasis:TL,curveBumpX:hL,curveBumpY:fL,curveLinearClosed:PL,curveLinear:yx,curveMonotoneX:CL,curveMonotoneY:DL,curveNatural:IL,curveStep:OL,curveStepAfter:kL,curveStepBefore:zL},U0=e=>mi(e.x)&&mi(e.y),hE=e=>e.base!=null&&U0(e.base)&&U0(e),ev=e=>e.x,tv=e=>e.y,d4=(e,t)=>{if(typeof e=="function")return e;var i="curve".concat(Ov(e));return(i==="curveMonotone"||i==="curveBump")&&t?cE["".concat(i).concat(t==="vertical"?"Y":"X")]:cE[i]||yx},p4=e=>{var{type:t="linear",points:i=[],baseLine:s,layout:m,connectNulls:y=!1}=e,_=d4(t,m),c=y?i.filter(U0):i,P;if(Array.isArray(s)){var C=i.map((V,Q)=>uE(uE({},V),{},{base:s[Q]}));m==="vertical"?P=K_().y(tv).x1(ev).x0(V=>V.base.x):P=K_().x(ev).y1(tv).y0(V=>V.base.y);var D=P.defined(hE).curve(_),k=y?C.filter(hE):C;return D(k)}m==="vertical"&&Yt(s)?P=K_().y(tv).x1(ev).x0(s):Yt(s)?P=K_().x(ev).y1(tv).y0(s):P=UC().x(ev).y(tv);var U=P.defined(U0).curve(_);return U(c)},uI=e=>{var{className:t,points:i,path:s,pathRef:m}=e,y=Rg();if((!i||!i.length)&&!s)return null;var _={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||y,connectNulls:e.connectNulls},c=i&&i.length?p4(_):s;return H.createElement("path",Nw({},ku(e),P2(e),{className:jn("recharts-curve",t),d:c===null?void 0:c,ref:m}))},m4=["x","y","top","left","width","height","className"];function Fw(){return Fw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Fw.apply(null,arguments)}function fE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function g4(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?fE(Object(i),!0).forEach(function(s){y4(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function y4(e,t,i){return(t=v4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v4(e){var t=_4(e,"string");return typeof t=="symbol"?t:t+""}function _4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x4(e,t){if(e==null)return{};var i,s,m=b4(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function b4(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var w4=(e,t,i,s,m,y)=>"M".concat(e,",").concat(m,"v").concat(s,"M").concat(y,",").concat(t,"h").concat(i),S4=e=>{var{x:t=0,y:i=0,top:s=0,left:m=0,width:y=0,height:_=0,className:c}=e,P=x4(e,m4),C=g4({x:t,y:i,top:s,left:m,width:y,height:_},P);return!Yt(t)||!Yt(i)||!Yt(y)||!Yt(_)||!Yt(s)||!Yt(m)?null:H.createElement("path",Fw({},Fo(C),{className:jn("recharts-cross",c),d:w4(t,i,y,_,s,m)}))};function A4(e,t,i,s){var m=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-m:i.left+.5,y:e==="horizontal"?i.top+.5:t.y-m,width:e==="horizontal"?s:i.width-1,height:e==="horizontal"?i.height-1:s}}function dE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function pE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?dE(Object(i),!0).forEach(function(s){T4(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):dE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function T4(e,t,i){return(t=E4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function E4(e){var t=M4(e,"string");return typeof t=="symbol"?t:t+""}function M4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P4=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),cI=(e,t,i)=>e.map(s=>"".concat(P4(s)," ").concat(t,"ms ").concat(i)).join(","),C4=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((i,s)=>i.filter(m=>s.includes(m))),_v=(e,t)=>Object.keys(t).reduce((i,s)=>pE(pE({},i),{},{[s]:e(s,t[s])}),{});function mE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function na(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(i),!0).forEach(function(s){D4(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function D4(e,t,i){return(t=I4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I4(e){var t=O4(e,"string");return typeof t=="symbol"?t:t+""}function O4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V0=(e,t,i)=>e+(t-e)*i,Uw=e=>{var{from:t,to:i}=e;return t!==i},hI=(e,t,i)=>{var s=_v((m,y)=>{if(Uw(y)){var[_,c]=e(y.from,y.to,y.velocity);return na(na({},y),{},{from:_,velocity:c})}return y},t);return i<1?_v((m,y)=>Uw(y)&&s[m]!=null?na(na({},y),{},{velocity:V0(y.velocity,s[m].velocity,i),from:V0(y.from,s[m].from,i)}):y,t):hI(e,s,i-1)};function z4(e,t,i,s,m,y){var _,c=s.reduce((U,V)=>na(na({},U),{},{[V]:{from:e[V],velocity:0,to:t[V]}}),{}),P=()=>_v((U,V)=>V.from,c),C=()=>!Object.values(c).filter(Uw).length,D=null,k=U=>{_||(_=U);var V=U-_,Q=V/i.dt;c=hI(i,c,Q),m(na(na(na({},e),t),P())),_=U,C()||(D=y.setTimeout(k))};return()=>(D=y.setTimeout(k),()=>{var U;(U=D)===null||U===void 0||U()})}function k4(e,t,i,s,m,y,_){var c=null,P=m.reduce((k,U)=>{var V=e[U],Q=t[U];return V==null||Q==null?k:na(na({},k),{},{[U]:[V,Q]})},{}),C,D=k=>{C||(C=k);var U=(k-C)/s,V=_v((Z,G)=>V0(...G,i(U)),P);if(y(na(na(na({},e),t),V)),U<1)c=_.setTimeout(D);else{var Q=_v((Z,G)=>V0(...G,i(1)),P);y(na(na(na({},e),t),Q))}};return()=>(c=_.setTimeout(D),()=>{var k;(k=c)===null||k===void 0||k()})}const R4=(e,t,i,s,m,y)=>{var _=C4(e,t);return i==null?()=>(m(na(na({},e),t)),()=>{}):i.isStepper===!0?z4(e,t,i,_,m,y):k4(e,t,i,s,_,m,y)};var G0=1e-4,fI=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],dI=(e,t)=>e.map((i,s)=>i*t**s).reduce((i,s)=>i+s),gE=(e,t)=>i=>{var s=fI(e,t);return dI(s,i)},L4=(e,t)=>i=>{var s=fI(e,t),m=[...s.map((y,_)=>y*_).slice(1),0];return dI(m,i)},B4=e=>{var t,i=e.split("(");if(i.length!==2||i[0]!=="cubic-bezier")return null;var s=(t=i[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(s==null||s.length!==4)return null;var m=s.map(y=>parseFloat(y));return[m[0],m[1],m[2],m[3]]},j4=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];if(i.length===1)switch(i[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var m=B4(i[0]);if(m)return m}}return i.length===4?i:[0,0,1,1]},N4=(e,t,i,s)=>{var m=gE(e,i),y=gE(t,s),_=L4(e,i),c=C=>C>1?1:C<0?0:C,P=C=>{for(var D=C>1?1:C,k=D,U=0;U<8;++U){var V=m(k)-D,Q=_(k);if(Math.abs(V-D)<G0||Q<G0)return y(k);k=c(k-V/Q)}return y(k)};return P.isStepper=!1,P},yE=function(){return N4(...j4(...arguments))},F4=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:i=100,damping:s=8,dt:m=17}=t,y=(_,c,P)=>{var C=-(_-c)*i,D=P*s,k=P+(C-D)*m/1e3,U=P*m/1e3+_;return Math.abs(U-c)<G0&&Math.abs(k)<G0?[c,0]:[U,k]};return y.isStepper=!0,y.dt=m,y},U4=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yE(e);case"spring":return F4();default:if(e.split("(")[0]==="cubic-bezier")return yE(e)}return typeof e=="function"?e:null};function V4(e){var t,i=()=>null,s=!1,m=null,y=_=>{if(!s){if(Array.isArray(_)){if(!_.length)return;var c=_,[P,...C]=c;if(typeof P=="number"){m=e.setTimeout(y.bind(null,C),P);return}y(P),m=e.setTimeout(y.bind(null,C));return}typeof _=="string"&&(t=_,i(t)),typeof _=="object"&&(t=_,i(t)),typeof _=="function"&&_()}};return{stop:()=>{s=!0},start:_=>{s=!1,m&&(m(),m=null),y(_)},subscribe:_=>(i=_,()=>{i=()=>null}),getTimeoutController:()=>e}}class G4{setTimeout(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),m=null,y=_=>{_-s>=i?t(_):typeof requestAnimationFrame=="function"&&(m=requestAnimationFrame(y))};return m=requestAnimationFrame(y),()=>{m!=null&&cancelAnimationFrame(m)}}}function q4(){return V4(new G4)}var H4=H.createContext(q4);function Z4(e,t){var i=H.useContext(H4);return H.useMemo(()=>t??i(e),[e,t,i])}var $4=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Fx={isSsr:$4()},X4={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},vE={t:0},R1={t:1};function Ux(e){var t=Vo(e,X4),{isActive:i,canBegin:s,duration:m,easing:y,begin:_,onAnimationEnd:c,onAnimationStart:P,children:C}=t,D=i==="auto"?!Fx.isSsr:i,k=Z4(t.animationId,t.animationManager),[U,V]=H.useState(D?vE:R1),Q=H.useRef(null);return H.useEffect(()=>{D||V(R1)},[D]),H.useEffect(()=>{if(!D||!s)return _x;var Z=R4(vE,R1,U4(y),m,V,k.getTimeoutController()),G=()=>{Q.current=Z()};return k.start([P,_,G,m,c]),()=>{k.stop(),Q.current&&Q.current(),c()}},[D,s,m,y,_,P,c,k]),C(U.t)}function Vx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",i=H.useRef(fv(t)),s=H.useRef(e);return s.current!==e&&(i.current=fv(t),s.current=e),i.current}var Y4=["radius"],W4=["radius"],_E,xE,bE,wE,SE,AE,TE,EE,ME,PE;function CE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function DE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CE(Object(i),!0).forEach(function(s){K4(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function K4(e,t,i){return(t=Q4(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Q4(e){var t=J4(e,"string");return typeof t=="symbol"?t:t+""}function J4(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},q0.apply(null,arguments)}function IE(e,t){if(e==null)return{};var i,s,m=eN(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function eN(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function Cc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var OE=(e,t,i,s,m)=>{var y=od(i),_=od(s),c=Math.min(Math.abs(y)/2,Math.abs(_)/2),P=_>=0?1:-1,C=y>=0?1:-1,D=_>=0&&y>=0||_<0&&y<0?1:0,k;if(c>0&&m instanceof Array){for(var U=[0,0,0,0],V=0,Q=4;V<Q;V++)U[V]=m[V]>c?c:m[V];k=Ci(_E||(_E=Cc(["M",",",""])),e,t+P*U[0]),U[0]>0&&(k+=Ci(xE||(xE=Cc(["A ",",",",0,0,",",",",",""])),U[0],U[0],D,e+C*U[0],t)),k+=Ci(bE||(bE=Cc(["L ",",",""])),e+i-C*U[1],t),U[1]>0&&(k+=Ci(wE||(wE=Cc(["A ",",",",0,0,",`,
        `,",",""])),U[1],U[1],D,e+i,t+P*U[1])),k+=Ci(SE||(SE=Cc(["L ",",",""])),e+i,t+s-P*U[2]),U[2]>0&&(k+=Ci(AE||(AE=Cc(["A ",",",",0,0,",`,
        `,",",""])),U[2],U[2],D,e+i-C*U[2],t+s)),k+=Ci(TE||(TE=Cc(["L ",",",""])),e+C*U[3],t+s),U[3]>0&&(k+=Ci(EE||(EE=Cc(["A ",",",",0,0,",`,
        `,",",""])),U[3],U[3],D,e,t+s-P*U[3])),k+="Z"}else if(c>0&&m===+m&&m>0){var Z=Math.min(c,m);k=Ci(ME||(ME=Cc(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+P*Z,Z,Z,D,e+C*Z,t,e+i-C*Z,t,Z,Z,D,e+i,t+P*Z,e+i,t+s-P*Z,Z,Z,D,e+i-C*Z,t+s,e+C*Z,t+s,Z,Z,D,e,t+s-P*Z)}else k=Ci(PE||(PE=Cc(["M ",","," h "," v "," h "," Z"])),e,t,i,s,-i);return k},zE={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pI=e=>{var t=Vo(e,zE),i=H.useRef(null),[s,m]=H.useState(-1);H.useEffect(()=>{if(i.current&&i.current.getTotalLength)try{var We=i.current.getTotalLength();We&&m(We)}catch{}},[]);var{x:y,y:_,width:c,height:P,radius:C,className:D}=t,{animationEasing:k,animationDuration:U,animationBegin:V,isAnimationActive:Q,isUpdateAnimationActive:Z}=t,G=H.useRef(c),oe=H.useRef(P),he=H.useRef(y),me=H.useRef(_),Ce=H.useMemo(()=>({x:y,y:_,width:c,height:P,radius:C}),[y,_,c,P,C]),be=Vx(Ce,"rectangle-");if(y!==+y||_!==+_||c!==+c||P!==+P||c===0||P===0)return null;var ke=jn("recharts-rectangle",D);if(!Z){var je=Fo(t),{radius:gt}=je,bt=IE(je,Y4);return H.createElement("path",q0({},bt,{x:od(y),y:od(_),width:od(c),height:od(P),radius:typeof C=="number"?C:void 0,className:ke,d:OE(y,_,c,P,C)}))}var It=G.current,yt=oe.current,De=he.current,Tt=me.current,Ct="0px ".concat(s===-1?1:s,"px"),Ft="".concat(s,"px 0px"),Le=cI(["strokeDasharray"],U,typeof k=="string"?k:zE.animationEasing);return H.createElement(Ux,{animationId:be,key:be,canBegin:s>0,duration:U,easing:k,isActive:Z,begin:V},We=>{var _t=Di(It,c,We),at=Di(yt,P,We),Kt=Di(De,y,We),Oe=Di(Tt,_,We);i.current&&(G.current=_t,oe.current=at,he.current=Kt,me.current=Oe);var ot;Q?We>0?ot={transition:Le,strokeDasharray:Ft}:ot={strokeDasharray:Ct}:ot={strokeDasharray:Ft};var Dt=Fo(t),{radius:Rt}=Dt,Gt=IE(Dt,W4);return H.createElement("path",q0({},Gt,{radius:typeof C=="number"?C:void 0,className:ke,d:OE(Kt,Oe,_t,at,C),ref:i,style:DE(DE({},ot),t.style)}))})};function kE(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function RE(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kE(Object(i),!0).forEach(function(s){tN(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kE(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function tN(e,t,i){return(t=rN(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function rN(e){var t=nN(e,"string");return typeof t=="symbol"?t:t+""}function nN(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H0=Math.PI/180,iN=e=>e*180/Math.PI,$a=(e,t,i,s)=>({x:e+Math.cos(-H0*s)*i,y:t+Math.sin(-H0*s)*i}),aN=function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(i-(s.top||0)-(s.bottom||0)))/2},oN=(e,t)=>{var{x:i,y:s}=e,{x:m,y}=t;return Math.sqrt((i-m)**2+(s-y)**2)},sN=(e,t)=>{var{x:i,y:s}=e,{cx:m,cy:y}=t,_=oN({x:i,y:s},{x:m,y});if(_<=0)return{radius:_,angle:0};var c=(i-m)/_,P=Math.acos(c);return s>y&&(P=2*Math.PI-P),{radius:_,angle:iN(P),angleInRadian:P}},lN=e=>{var{startAngle:t,endAngle:i}=e,s=Math.floor(t/360),m=Math.floor(i/360),y=Math.min(s,m);return{startAngle:t-y*360,endAngle:i-y*360}},uN=(e,t)=>{var{startAngle:i,endAngle:s}=t,m=Math.floor(i/360),y=Math.floor(s/360),_=Math.min(m,y);return e+_*360},cN=(e,t)=>{var{chartX:i,chartY:s}=e,{radius:m,angle:y}=sN({x:i,y:s},t),{innerRadius:_,outerRadius:c}=t;if(m<_||m>c||m===0)return null;var{startAngle:P,endAngle:C}=lN(t),D=y,k;if(P<=C){for(;D>C;)D-=360;for(;D<P;)D+=360;k=D>=P&&D<=C}else{for(;D>P;)D-=360;for(;D<C;)D+=360;k=D>=C&&D<=P}return k?RE(RE({},t),{},{radius:m,angle:uN(D,t)}):null};function mI(e){var{cx:t,cy:i,radius:s,startAngle:m,endAngle:y}=e,_=$a(t,i,s,m),c=$a(t,i,s,y);return{points:[_,c],cx:t,cy:i,radius:s,startAngle:m,endAngle:y}}var LE,BE,jE,NE,FE,UE,VE;function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Vw.apply(null,arguments)}function Pp(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var hN=(e,t)=>{var i=_s(t-e),s=Math.min(Math.abs(t-e),359.999);return i*s},o0=e=>{var{cx:t,cy:i,radius:s,angle:m,sign:y,isExternal:_,cornerRadius:c,cornerIsExternal:P}=e,C=c*(_?1:-1)+s,D=Math.asin(c/C)/H0,k=P?m:m+y*D,U=$a(t,i,C,k),V=$a(t,i,s,k),Q=P?m-y*D:m,Z=$a(t,i,C*Math.cos(D*H0),Q);return{center:U,circleTangency:V,lineTangency:Z,theta:D}},gI=e=>{var{cx:t,cy:i,innerRadius:s,outerRadius:m,startAngle:y,endAngle:_}=e,c=hN(y,_),P=y+c,C=$a(t,i,m,y),D=$a(t,i,m,P),k=Ci(LE||(LE=Pp(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),C.x,C.y,m,m,+(Math.abs(c)>180),+(y>P),D.x,D.y);if(s>0){var U=$a(t,i,s,y),V=$a(t,i,s,P);k+=Ci(BE||(BE=Pp(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),V.x,V.y,s,s,+(Math.abs(c)>180),+(y<=P),U.x,U.y)}else k+=Ci(jE||(jE=Pp(["L ",","," Z"])),t,i);return k},fN=e=>{var{cx:t,cy:i,innerRadius:s,outerRadius:m,cornerRadius:y,forceCornerRadius:_,cornerIsExternal:c,startAngle:P,endAngle:C}=e,D=_s(C-P),{circleTangency:k,lineTangency:U,theta:V}=o0({cx:t,cy:i,radius:m,angle:P,sign:D,cornerRadius:y,cornerIsExternal:c}),{circleTangency:Q,lineTangency:Z,theta:G}=o0({cx:t,cy:i,radius:m,angle:C,sign:-D,cornerRadius:y,cornerIsExternal:c}),oe=c?Math.abs(P-C):Math.abs(P-C)-V-G;if(oe<0)return _?Ci(NE||(NE=Pp(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),U.x,U.y,y,y,y*2,y,y,-y*2):gI({cx:t,cy:i,innerRadius:s,outerRadius:m,startAngle:P,endAngle:C});var he=Ci(FE||(FE=Pp(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),U.x,U.y,y,y,+(D<0),k.x,k.y,m,m,+(oe>180),+(D<0),Q.x,Q.y,y,y,+(D<0),Z.x,Z.y);if(s>0){var{circleTangency:me,lineTangency:Ce,theta:be}=o0({cx:t,cy:i,radius:s,angle:P,sign:D,isExternal:!0,cornerRadius:y,cornerIsExternal:c}),{circleTangency:ke,lineTangency:je,theta:gt}=o0({cx:t,cy:i,radius:s,angle:C,sign:-D,isExternal:!0,cornerRadius:y,cornerIsExternal:c}),bt=c?Math.abs(P-C):Math.abs(P-C)-be-gt;if(bt<0&&y===0)return"".concat(he,"L").concat(t,",").concat(i,"Z");he+=Ci(UE||(UE=Pp(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),je.x,je.y,y,y,+(D<0),ke.x,ke.y,s,s,+(bt>180),+(D>0),me.x,me.y,y,y,+(D<0),Ce.x,Ce.y)}else he+=Ci(VE||(VE=Pp(["L",",","Z"])),t,i);return he},dN={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yI=e=>{var t=Vo(e,dN),{cx:i,cy:s,innerRadius:m,outerRadius:y,cornerRadius:_,forceCornerRadius:c,cornerIsExternal:P,startAngle:C,endAngle:D,className:k}=t;if(y<m||C===D)return null;var U=jn("recharts-sector",k),V=y-m,Q=Lu(_,V,0,!0),Z;return Q>0&&Math.abs(C-D)<360?Z=fN({cx:i,cy:s,innerRadius:m,outerRadius:y,cornerRadius:Math.min(Q,V/2),forceCornerRadius:c,cornerIsExternal:P,startAngle:C,endAngle:D}):Z=gI({cx:i,cy:s,innerRadius:m,outerRadius:y,startAngle:C,endAngle:D}),H.createElement("path",Vw({},Fo(t),{className:U,d:Z}))};function pN(e,t,i){if(e==="horizontal")return[{x:t.x,y:i.top},{x:t.x,y:i.top+i.height}];if(e==="vertical")return[{x:i.left,y:t.y},{x:i.left+i.width,y:t.y}];if(nD(t)){if(e==="centric"){var{cx:s,cy:m,innerRadius:y,outerRadius:_,angle:c}=t,P=$a(s,m,y,c),C=$a(s,m,_,c);return[{x:P.x,y:P.y},{x:C.x,y:C.y}]}return mI(t)}}var L1={},B1={},j1={},GE;function mN(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pD();function i(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=i})(j1)),j1}var qE;function gN(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mN();function i(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=i})(B1)),B1}var HE;function yN(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mD(),i=gN();function s(m,y,_){_&&typeof _!="number"&&t.isIterateeCall(m,y,_)&&(y=_=void 0),m=i.toFinite(m),y===void 0?(y=m,m=0):y=i.toFinite(y),_=_===void 0?m<y?1:-1:i.toFinite(_);const c=Math.max(Math.ceil((y-m)/(_||1)),0),P=new Array(c);for(let C=0;C<c;C++)P[C]=m,m+=_;return P}e.range=s})(L1)),L1}var N1,ZE;function vN(){return ZE||(ZE=1,N1=yN().range),N1}var _N=vN();const vI=Xh(_N);function sd(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xN(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function U2(e){let t,i,s;e.length!==2?(t=sd,i=(c,P)=>sd(e(c),P),s=(c,P)=>e(c)-P):(t=e===sd||e===xN?e:bN,i=e,s=e);function m(c,P,C=0,D=c.length){if(C<D){if(t(P,P)!==0)return D;do{const k=C+D>>>1;i(c[k],P)<0?C=k+1:D=k}while(C<D)}return C}function y(c,P,C=0,D=c.length){if(C<D){if(t(P,P)!==0)return D;do{const k=C+D>>>1;i(c[k],P)<=0?C=k+1:D=k}while(C<D)}return C}function _(c,P,C=0,D=c.length){const k=m(c,P,C,D-1);return k>C&&s(c[k-1],P)>-s(c[k],P)?k-1:k}return{left:m,center:_,right:y}}function bN(){return 0}function _I(e){return e===null?NaN:+e}function*wN(e,t){for(let i of e)i!=null&&(i=+i)>=i&&(yield i)}const SN=U2(sd),Bv=SN.right;U2(_I).center;class $E extends Map{constructor(t,i=EN){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[s,m]of t)this.set(s,m)}get(t){return super.get(XE(this,t))}has(t){return super.has(XE(this,t))}set(t,i){return super.set(AN(this,t),i)}delete(t){return super.delete(TN(this,t))}}function XE({_intern:e,_key:t},i){const s=t(i);return e.has(s)?e.get(s):i}function AN({_intern:e,_key:t},i){const s=t(i);return e.has(s)?e.get(s):(e.set(s,i),i)}function TN({_intern:e,_key:t},i){const s=t(i);return e.has(s)&&(i=e.get(s),e.delete(s)),i}function EN(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MN(e=sd){if(e===sd)return xI;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,i)=>{const s=e(t,i);return s||s===0?s:(e(i,i)===0)-(e(t,t)===0)}}function xI(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PN=Math.sqrt(50),CN=Math.sqrt(10),DN=Math.sqrt(2);function Z0(e,t,i){const s=(t-e)/Math.max(0,i),m=Math.floor(Math.log10(s)),y=s/Math.pow(10,m),_=y>=PN?10:y>=CN?5:y>=DN?2:1;let c,P,C;return m<0?(C=Math.pow(10,-m)/_,c=Math.round(e*C),P=Math.round(t*C),c/C<e&&++c,P/C>t&&--P,C=-C):(C=Math.pow(10,m)*_,c=Math.round(e/C),P=Math.round(t/C),c*C<e&&++c,P*C>t&&--P),P<c&&.5<=i&&i<2?Z0(e,t,i*2):[c,P,C]}function Gw(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const s=t<e,[m,y,_]=s?Z0(t,e,i):Z0(e,t,i);if(!(y>=m))return[];const c=y-m+1,P=new Array(c);if(s)if(_<0)for(let C=0;C<c;++C)P[C]=(y-C)/-_;else for(let C=0;C<c;++C)P[C]=(y-C)*_;else if(_<0)for(let C=0;C<c;++C)P[C]=(m+C)/-_;else for(let C=0;C<c;++C)P[C]=(m+C)*_;return P}function qw(e,t,i){return t=+t,e=+e,i=+i,Z0(e,t,i)[2]}function Hw(e,t,i){t=+t,e=+e,i=+i;const s=t<e,m=s?qw(t,e,i):qw(e,t,i);return(s?-1:1)*(m<0?1/-m:m)}function YE(e,t){let i;for(const s of e)s!=null&&(i<s||i===void 0&&s>=s)&&(i=s);return i}function WE(e,t){let i;for(const s of e)s!=null&&(i>s||i===void 0&&s>=s)&&(i=s);return i}function bI(e,t,i=0,s=1/0,m){if(t=Math.floor(t),i=Math.floor(Math.max(0,i)),s=Math.floor(Math.min(e.length-1,s)),!(i<=t&&t<=s))return e;for(m=m===void 0?xI:MN(m);s>i;){if(s-i>600){const P=s-i+1,C=t-i+1,D=Math.log(P),k=.5*Math.exp(2*D/3),U=.5*Math.sqrt(D*k*(P-k)/P)*(C-P/2<0?-1:1),V=Math.max(i,Math.floor(t-C*k/P+U)),Q=Math.min(s,Math.floor(t+(P-C)*k/P+U));bI(e,t,V,Q,m)}const y=e[t];let _=i,c=s;for(rv(e,i,t),m(e[s],y)>0&&rv(e,i,s);_<c;){for(rv(e,_,c),++_,--c;m(e[_],y)<0;)++_;for(;m(e[c],y)>0;)--c}m(e[i],y)===0?rv(e,i,c):(++c,rv(e,c,s)),c<=t&&(i=c+1),t<=c&&(s=c-1)}return e}function rv(e,t,i){const s=e[t];e[t]=e[i],e[i]=s}function IN(e,t,i){if(e=Float64Array.from(wN(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return WE(e);if(t>=1)return YE(e);var s,m=(s-1)*t,y=Math.floor(m),_=YE(bI(e,y).subarray(0,y+1)),c=WE(e.subarray(y+1));return _+(c-_)*(m-y)}}function ON(e,t,i=_I){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+i(e[0],0,e);if(t>=1)return+i(e[s-1],s-1,e);var s,m=(s-1)*t,y=Math.floor(m),_=+i(e[y],y,e),c=+i(e[y+1],y+1,e);return _+(c-_)*(m-y)}}function zN(e,t,i){e=+e,t=+t,i=(m=arguments.length)<2?(t=e,e=0,1):m<3?1:+i;for(var s=-1,m=Math.max(0,Math.ceil((t-e)/i))|0,y=new Array(m);++s<m;)y[s]=e+s*i;return y}function Bl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Zw=Symbol("implicit");function V2(){var e=new $E,t=[],i=[],s=Zw;function m(y){let _=e.get(y);if(_===void 0){if(s!==Zw)return s;e.set(y,_=t.push(y)-1)}return i[_%i.length]}return m.domain=function(y){if(!arguments.length)return t.slice();t=[],e=new $E;for(const _ of y)e.has(_)||e.set(_,t.push(_)-1);return m},m.range=function(y){return arguments.length?(i=Array.from(y),m):i.slice()},m.unknown=function(y){return arguments.length?(s=y,m):s},m.copy=function(){return V2(t,i).unknown(s)},Bl.apply(m,arguments),m}function G2(){var e=V2().unknown(void 0),t=e.domain,i=e.range,s=0,m=1,y,_,c=!1,P=0,C=0,D=.5;delete e.unknown;function k(){var U=t().length,V=m<s,Q=V?m:s,Z=V?s:m;y=(Z-Q)/Math.max(1,U-P+C*2),c&&(y=Math.floor(y)),Q+=(Z-Q-y*(U-P))*D,_=y*(1-P),c&&(Q=Math.round(Q),_=Math.round(_));var G=zN(U).map(function(oe){return Q+y*oe});return i(V?G.reverse():G)}return e.domain=function(U){return arguments.length?(t(U),k()):t()},e.range=function(U){return arguments.length?([s,m]=U,s=+s,m=+m,k()):[s,m]},e.rangeRound=function(U){return[s,m]=U,s=+s,m=+m,c=!0,k()},e.bandwidth=function(){return _},e.step=function(){return y},e.round=function(U){return arguments.length?(c=!!U,k()):c},e.padding=function(U){return arguments.length?(P=Math.min(1,C=+U),k()):P},e.paddingInner=function(U){return arguments.length?(P=Math.min(1,U),k()):P},e.paddingOuter=function(U){return arguments.length?(C=+U,k()):C},e.align=function(U){return arguments.length?(D=Math.max(0,Math.min(1,U)),k()):D},e.copy=function(){return G2(t(),[s,m]).round(c).paddingInner(P).paddingOuter(C).align(D)},Bl.apply(k(),arguments)}function wI(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return wI(t())},e}function kN(){return wI(G2.apply(null,arguments).paddingInner(1))}function q2(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function SI(e,t){var i=Object.create(e.prototype);for(var s in t)i[s]=t[s];return i}function jv(){}var xv=.7,$0=1/xv,Sg="\\s*([+-]?\\d+)\\s*",bv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RN=/^#([0-9a-f]{3,8})$/,LN=new RegExp(`^rgb\\(${Sg},${Sg},${Sg}\\)$`),BN=new RegExp(`^rgb\\(${Oc},${Oc},${Oc}\\)$`),jN=new RegExp(`^rgba\\(${Sg},${Sg},${Sg},${bv}\\)$`),NN=new RegExp(`^rgba\\(${Oc},${Oc},${Oc},${bv}\\)$`),FN=new RegExp(`^hsl\\(${bv},${Oc},${Oc}\\)$`),UN=new RegExp(`^hsla\\(${bv},${Oc},${Oc},${bv}\\)$`),KE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};q2(jv,wv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:QE,formatHex:QE,formatHex8:VN,formatHsl:GN,formatRgb:JE,toString:JE});function QE(){return this.rgb().formatHex()}function VN(){return this.rgb().formatHex8()}function GN(){return AI(this).formatHsl()}function JE(){return this.rgb().formatRgb()}function wv(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=RN.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?eM(t):i===3?new xs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?s0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?s0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LN.exec(e))?new xs(t[1],t[2],t[3],1):(t=BN.exec(e))?new xs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jN.exec(e))?s0(t[1],t[2],t[3],t[4]):(t=NN.exec(e))?s0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=FN.exec(e))?nM(t[1],t[2]/100,t[3]/100,1):(t=UN.exec(e))?nM(t[1],t[2]/100,t[3]/100,t[4]):KE.hasOwnProperty(e)?eM(KE[e]):e==="transparent"?new xs(NaN,NaN,NaN,0):null}function eM(e){return new xs(e>>16&255,e>>8&255,e&255,1)}function s0(e,t,i,s){return s<=0&&(e=t=i=NaN),new xs(e,t,i,s)}function qN(e){return e instanceof jv||(e=wv(e)),e?(e=e.rgb(),new xs(e.r,e.g,e.b,e.opacity)):new xs}function $w(e,t,i,s){return arguments.length===1?qN(e):new xs(e,t,i,s??1)}function xs(e,t,i,s){this.r=+e,this.g=+t,this.b=+i,this.opacity=+s}q2(xs,$w,SI(jv,{brighter(e){return e=e==null?$0:Math.pow($0,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?xv:Math.pow(xv,e),new xs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new xs(zp(this.r),zp(this.g),zp(this.b),X0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tM,formatHex:tM,formatHex8:HN,formatRgb:rM,toString:rM}));function tM(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}`}function HN(){return`#${Cp(this.r)}${Cp(this.g)}${Cp(this.b)}${Cp((isNaN(this.opacity)?1:this.opacity)*255)}`}function rM(){const e=X0(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function X0(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function nM(e,t,i,s){return s<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Iu(e,t,i,s)}function AI(e){if(e instanceof Iu)return new Iu(e.h,e.s,e.l,e.opacity);if(e instanceof jv||(e=wv(e)),!e)return new Iu;if(e instanceof Iu)return e;e=e.rgb();var t=e.r/255,i=e.g/255,s=e.b/255,m=Math.min(t,i,s),y=Math.max(t,i,s),_=NaN,c=y-m,P=(y+m)/2;return c?(t===y?_=(i-s)/c+(i<s)*6:i===y?_=(s-t)/c+2:_=(t-i)/c+4,c/=P<.5?y+m:2-y-m,_*=60):c=P>0&&P<1?0:_,new Iu(_,c,P,e.opacity)}function ZN(e,t,i,s){return arguments.length===1?AI(e):new Iu(e,t,i,s??1)}function Iu(e,t,i,s){this.h=+e,this.s=+t,this.l=+i,this.opacity=+s}q2(Iu,ZN,SI(jv,{brighter(e){return e=e==null?$0:Math.pow($0,e),new Iu(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?xv:Math.pow(xv,e),new Iu(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,s=i+(i<.5?i:1-i)*t,m=2*i-s;return new xs(F1(e>=240?e-240:e+120,m,s),F1(e,m,s),F1(e<120?e+240:e-120,m,s),this.opacity)},clamp(){return new Iu(iM(this.h),l0(this.s),l0(this.l),X0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=X0(this.opacity);return`${e===1?"hsl(":"hsla("}${iM(this.h)}, ${l0(this.s)*100}%, ${l0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function iM(e){return e=(e||0)%360,e<0?e+360:e}function l0(e){return Math.max(0,Math.min(1,e||0))}function F1(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const H2=e=>()=>e;function $N(e,t){return function(i){return e+i*t}}function XN(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(s){return Math.pow(e+s*t,i)}}function YN(e){return(e=+e)==1?TI:function(t,i){return i-t?XN(t,i,e):H2(isNaN(t)?i:t)}}function TI(e,t){var i=t-e;return i?$N(e,i):H2(isNaN(e)?t:e)}const aM=(function e(t){var i=YN(t);function s(m,y){var _=i((m=$w(m)).r,(y=$w(y)).r),c=i(m.g,y.g),P=i(m.b,y.b),C=TI(m.opacity,y.opacity);return function(D){return m.r=_(D),m.g=c(D),m.b=P(D),m.opacity=C(D),m+""}}return s.gamma=e,s})(1);function WN(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,s=t.slice(),m;return function(y){for(m=0;m<i;++m)s[m]=e[m]*(1-y)+t[m]*y;return s}}function KN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function QN(e,t){var i=t?t.length:0,s=e?Math.min(i,e.length):0,m=new Array(s),y=new Array(i),_;for(_=0;_<s;++_)m[_]=Lg(e[_],t[_]);for(;_<i;++_)y[_]=t[_];return function(c){for(_=0;_<s;++_)y[_]=m[_](c);return y}}function JN(e,t){var i=new Date;return e=+e,t=+t,function(s){return i.setTime(e*(1-s)+t*s),i}}function Y0(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function eF(e,t){var i={},s={},m;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(m in t)m in e?i[m]=Lg(e[m],t[m]):s[m]=t[m];return function(y){for(m in i)s[m]=i[m](y);return s}}var Xw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,U1=new RegExp(Xw.source,"g");function tF(e){return function(){return e}}function rF(e){return function(t){return e(t)+""}}function nF(e,t){var i=Xw.lastIndex=U1.lastIndex=0,s,m,y,_=-1,c=[],P=[];for(e=e+"",t=t+"";(s=Xw.exec(e))&&(m=U1.exec(t));)(y=m.index)>i&&(y=t.slice(i,y),c[_]?c[_]+=y:c[++_]=y),(s=s[0])===(m=m[0])?c[_]?c[_]+=m:c[++_]=m:(c[++_]=null,P.push({i:_,x:Y0(s,m)})),i=U1.lastIndex;return i<t.length&&(y=t.slice(i),c[_]?c[_]+=y:c[++_]=y),c.length<2?P[0]?rF(P[0].x):tF(t):(t=P.length,function(C){for(var D=0,k;D<t;++D)c[(k=P[D]).i]=k.x(C);return c.join("")})}function Lg(e,t){var i=typeof t,s;return t==null||i==="boolean"?H2(t):(i==="number"?Y0:i==="string"?(s=wv(t))?(t=s,aM):nF:t instanceof wv?aM:t instanceof Date?JN:KN(t)?WN:Array.isArray(t)?QN:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?eF:Y0)(e,t)}function Z2(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}function iF(e,t){t===void 0&&(t=e,e=Lg);for(var i=0,s=t.length-1,m=t[0],y=new Array(s<0?0:s);i<s;)y[i]=e(m,m=t[++i]);return function(_){var c=Math.max(0,Math.min(s-1,Math.floor(_*=s)));return y[c](_-c)}}function aF(e){return function(){return e}}function W0(e){return+e}var oM=[0,1];function No(e){return e}function Yw(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:aF(isNaN(t)?NaN:.5)}function oF(e,t){var i;return e>t&&(i=e,e=t,t=i),function(s){return Math.max(e,Math.min(t,s))}}function sF(e,t,i){var s=e[0],m=e[1],y=t[0],_=t[1];return m<s?(s=Yw(m,s),y=i(_,y)):(s=Yw(s,m),y=i(y,_)),function(c){return y(s(c))}}function lF(e,t,i){var s=Math.min(e.length,t.length)-1,m=new Array(s),y=new Array(s),_=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++_<s;)m[_]=Yw(e[_],e[_+1]),y[_]=i(t[_],t[_+1]);return function(c){var P=Bv(e,c,1,s)-1;return y[P](m[P](c))}}function Nv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gx(){var e=oM,t=oM,i=Lg,s,m,y,_=No,c,P,C;function D(){var U=Math.min(e.length,t.length);return _!==No&&(_=oF(e[0],e[U-1])),c=U>2?lF:sF,P=C=null,k}function k(U){return U==null||isNaN(U=+U)?y:(P||(P=c(e.map(s),t,i)))(s(_(U)))}return k.invert=function(U){return _(m((C||(C=c(t,e.map(s),Y0)))(U)))},k.domain=function(U){return arguments.length?(e=Array.from(U,W0),D()):e.slice()},k.range=function(U){return arguments.length?(t=Array.from(U),D()):t.slice()},k.rangeRound=function(U){return t=Array.from(U),i=Z2,D()},k.clamp=function(U){return arguments.length?(_=U?!0:No,D()):_!==No},k.interpolate=function(U){return arguments.length?(i=U,D()):i},k.unknown=function(U){return arguments.length?(y=U,k):y},function(U,V){return s=U,m=V,D()}}function $2(){return Gx()(No,No)}function uF(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function K0(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,s=e.slice(0,i);return[s.length>1?s[0]+s.slice(2):s,+e.slice(i+1)]}function Cg(e){return e=K0(Math.abs(e)),e?e[1]:NaN}function cF(e,t){return function(i,s){for(var m=i.length,y=[],_=0,c=e[0],P=0;m>0&&c>0&&(P+c+1>s&&(c=Math.max(1,s-P)),y.push(i.substring(m-=c,m+c)),!((P+=c+1)>s));)c=e[_=(_+1)%e.length];return y.reverse().join(t)}}function hF(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var fF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Sv(e){if(!(t=fF.exec(e)))throw new Error("invalid format: "+e);var t;return new X2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Sv.prototype=X2.prototype;function X2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}X2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dF(e){e:for(var t=e.length,i=1,s=-1,m;i<t;++i)switch(e[i]){case".":s=m=i;break;case"0":s===0&&(s=i),m=i;break;default:if(!+e[i])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(m+1):e}var EI;function pF(e,t){var i=K0(e,t);if(!i)return e+"";var s=i[0],m=i[1],y=m-(EI=Math.max(-8,Math.min(8,Math.floor(m/3)))*3)+1,_=s.length;return y===_?s:y>_?s+new Array(y-_+1).join("0"):y>0?s.slice(0,y)+"."+s.slice(y):"0."+new Array(1-y).join("0")+K0(e,Math.max(0,t+y-1))[0]}function sM(e,t){var i=K0(e,t);if(!i)return e+"";var s=i[0],m=i[1];return m<0?"0."+new Array(-m).join("0")+s:s.length>m+1?s.slice(0,m+1)+"."+s.slice(m+1):s+new Array(m-s.length+2).join("0")}const lM={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:uF,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sM(e*100,t),r:sM,s:pF,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function uM(e){return e}var cM=Array.prototype.map,hM=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mF(e){var t=e.grouping===void 0||e.thousands===void 0?uM:cF(cM.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",m=e.decimal===void 0?".":e.decimal+"",y=e.numerals===void 0?uM:hF(cM.call(e.numerals,String)),_=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"":e.minus+"",P=e.nan===void 0?"NaN":e.nan+"";function C(k){k=Sv(k);var U=k.fill,V=k.align,Q=k.sign,Z=k.symbol,G=k.zero,oe=k.width,he=k.comma,me=k.precision,Ce=k.trim,be=k.type;be==="n"?(he=!0,be="g"):lM[be]||(me===void 0&&(me=12),Ce=!0,be="g"),(G||U==="0"&&V==="=")&&(G=!0,U="0",V="=");var ke=Z==="$"?i:Z==="#"&&/[boxX]/.test(be)?"0"+be.toLowerCase():"",je=Z==="$"?s:/[%p]/.test(be)?_:"",gt=lM[be],bt=/[defgprs%]/.test(be);me=me===void 0?6:/[gprs]/.test(be)?Math.max(1,Math.min(21,me)):Math.max(0,Math.min(20,me));function It(yt){var De=ke,Tt=je,Ct,Ft,Le;if(be==="c")Tt=gt(yt)+Tt,yt="";else{yt=+yt;var We=yt<0||1/yt<0;if(yt=isNaN(yt)?P:gt(Math.abs(yt),me),Ce&&(yt=dF(yt)),We&&+yt==0&&Q!=="+"&&(We=!1),De=(We?Q==="("?Q:c:Q==="-"||Q==="("?"":Q)+De,Tt=(be==="s"?hM[8+EI/3]:"")+Tt+(We&&Q==="("?")":""),bt){for(Ct=-1,Ft=yt.length;++Ct<Ft;)if(Le=yt.charCodeAt(Ct),48>Le||Le>57){Tt=(Le===46?m+yt.slice(Ct+1):yt.slice(Ct))+Tt,yt=yt.slice(0,Ct);break}}}he&&!G&&(yt=t(yt,1/0));var _t=De.length+yt.length+Tt.length,at=_t<oe?new Array(oe-_t+1).join(U):"";switch(he&&G&&(yt=t(at+yt,at.length?oe-Tt.length:1/0),at=""),V){case"<":yt=De+yt+Tt+at;break;case"=":yt=De+at+yt+Tt;break;case"^":yt=at.slice(0,_t=at.length>>1)+De+yt+Tt+at.slice(_t);break;default:yt=at+De+yt+Tt;break}return y(yt)}return It.toString=function(){return k+""},It}function D(k,U){var V=C((k=Sv(k),k.type="f",k)),Q=Math.max(-8,Math.min(8,Math.floor(Cg(U)/3)))*3,Z=Math.pow(10,-Q),G=hM[8+Q/3];return function(oe){return V(Z*oe)+G}}return{format:C,formatPrefix:D}}var u0,Y2,MI;gF({thousands:",",grouping:[3],currency:["$",""]});function gF(e){return u0=mF(e),Y2=u0.format,MI=u0.formatPrefix,u0}function yF(e){return Math.max(0,-Cg(Math.abs(e)))}function vF(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cg(t)/3)))*3-Cg(Math.abs(e)))}function _F(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Cg(t)-Cg(e))+1}function PI(e,t,i,s){var m=Hw(e,t,i),y;switch(s=Sv(s??",f"),s.type){case"s":{var _=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(y=vF(m,_))&&(s.precision=y),MI(s,_)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(y=_F(m,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=y-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(y=yF(m))&&(s.precision=y-(s.type==="%")*2);break}}return Y2(s)}function fd(e){var t=e.domain;return e.ticks=function(i){var s=t();return Gw(s[0],s[s.length-1],i??10)},e.tickFormat=function(i,s){var m=t();return PI(m[0],m[m.length-1],i??10,s)},e.nice=function(i){i==null&&(i=10);var s=t(),m=0,y=s.length-1,_=s[m],c=s[y],P,C,D=10;for(c<_&&(C=_,_=c,c=C,C=m,m=y,y=C);D-- >0;){if(C=qw(_,c,i),C===P)return s[m]=_,s[y]=c,t(s);if(C>0)_=Math.floor(_/C)*C,c=Math.ceil(c/C)*C;else if(C<0)_=Math.ceil(_*C)/C,c=Math.floor(c*C)/C;else break;P=C}return e},e}function CI(){var e=$2();return e.copy=function(){return Nv(e,CI())},Bl.apply(e,arguments),fd(e)}function DI(e){var t;function i(s){return s==null||isNaN(s=+s)?t:s}return i.invert=i,i.domain=i.range=function(s){return arguments.length?(e=Array.from(s,W0),i):e.slice()},i.unknown=function(s){return arguments.length?(t=s,i):t},i.copy=function(){return DI(e).unknown(t)},e=arguments.length?Array.from(e,W0):[0,1],fd(i)}function II(e,t){e=e.slice();var i=0,s=e.length-1,m=e[i],y=e[s],_;return y<m&&(_=i,i=s,s=_,_=m,m=y,y=_),e[i]=t.floor(m),e[s]=t.ceil(y),e}function fM(e){return Math.log(e)}function dM(e){return Math.exp(e)}function xF(e){return-Math.log(-e)}function bF(e){return-Math.exp(-e)}function wF(e){return isFinite(e)?+("1e"+e):e<0?0:e}function SF(e){return e===10?wF:e===Math.E?Math.exp:t=>Math.pow(e,t)}function AF(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function pM(e){return(t,i)=>-e(-t,i)}function W2(e){const t=e(fM,dM),i=t.domain;let s=10,m,y;function _(){return m=AF(s),y=SF(s),i()[0]<0?(m=pM(m),y=pM(y),e(xF,bF)):e(fM,dM),t}return t.base=function(c){return arguments.length?(s=+c,_()):s},t.domain=function(c){return arguments.length?(i(c),_()):i()},t.ticks=c=>{const P=i();let C=P[0],D=P[P.length-1];const k=D<C;k&&([C,D]=[D,C]);let U=m(C),V=m(D),Q,Z;const G=c==null?10:+c;let oe=[];if(!(s%1)&&V-U<G){if(U=Math.floor(U),V=Math.ceil(V),C>0){for(;U<=V;++U)for(Q=1;Q<s;++Q)if(Z=U<0?Q/y(-U):Q*y(U),!(Z<C)){if(Z>D)break;oe.push(Z)}}else for(;U<=V;++U)for(Q=s-1;Q>=1;--Q)if(Z=U>0?Q/y(-U):Q*y(U),!(Z<C)){if(Z>D)break;oe.push(Z)}oe.length*2<G&&(oe=Gw(C,D,G))}else oe=Gw(U,V,Math.min(V-U,G)).map(y);return k?oe.reverse():oe},t.tickFormat=(c,P)=>{if(c==null&&(c=10),P==null&&(P=s===10?"s":","),typeof P!="function"&&(!(s%1)&&(P=Sv(P)).precision==null&&(P.trim=!0),P=Y2(P)),c===1/0)return P;const C=Math.max(1,s*c/t.ticks().length);return D=>{let k=D/y(Math.round(m(D)));return k*s<s-.5&&(k*=s),k<=C?P(D):""}},t.nice=()=>i(II(i(),{floor:c=>y(Math.floor(m(c))),ceil:c=>y(Math.ceil(m(c)))})),t}function OI(){const e=W2(Gx()).domain([1,10]);return e.copy=()=>Nv(e,OI()).base(e.base()),Bl.apply(e,arguments),e}function mM(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function gM(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function K2(e){var t=1,i=e(mM(t),gM(t));return i.constant=function(s){return arguments.length?e(mM(t=+s),gM(t)):t},fd(i)}function zI(){var e=K2(Gx());return e.copy=function(){return Nv(e,zI()).constant(e.constant())},Bl.apply(e,arguments)}function yM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function TF(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function EF(e){return e<0?-e*e:e*e}function Q2(e){var t=e(No,No),i=1;function s(){return i===1?e(No,No):i===.5?e(TF,EF):e(yM(i),yM(1/i))}return t.exponent=function(m){return arguments.length?(i=+m,s()):i},fd(t)}function J2(){var e=Q2(Gx());return e.copy=function(){return Nv(e,J2()).exponent(e.exponent())},Bl.apply(e,arguments),e}function MF(){return J2.apply(null,arguments).exponent(.5)}function vM(e){return Math.sign(e)*e*e}function PF(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kI(){var e=$2(),t=[0,1],i=!1,s;function m(y){var _=PF(e(y));return isNaN(_)?s:i?Math.round(_):_}return m.invert=function(y){return e.invert(vM(y))},m.domain=function(y){return arguments.length?(e.domain(y),m):e.domain()},m.range=function(y){return arguments.length?(e.range((t=Array.from(y,W0)).map(vM)),m):t.slice()},m.rangeRound=function(y){return m.range(y).round(!0)},m.round=function(y){return arguments.length?(i=!!y,m):i},m.clamp=function(y){return arguments.length?(e.clamp(y),m):e.clamp()},m.unknown=function(y){return arguments.length?(s=y,m):s},m.copy=function(){return kI(e.domain(),t).round(i).clamp(e.clamp()).unknown(s)},Bl.apply(m,arguments),fd(m)}function RI(){var e=[],t=[],i=[],s;function m(){var _=0,c=Math.max(1,t.length);for(i=new Array(c-1);++_<c;)i[_-1]=ON(e,_/c);return y}function y(_){return _==null||isNaN(_=+_)?s:t[Bv(i,_)]}return y.invertExtent=function(_){var c=t.indexOf(_);return c<0?[NaN,NaN]:[c>0?i[c-1]:e[0],c<i.length?i[c]:e[e.length-1]]},y.domain=function(_){if(!arguments.length)return e.slice();e=[];for(let c of _)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(sd),m()},y.range=function(_){return arguments.length?(t=Array.from(_),m()):t.slice()},y.unknown=function(_){return arguments.length?(s=_,y):s},y.quantiles=function(){return i.slice()},y.copy=function(){return RI().domain(e).range(t).unknown(s)},Bl.apply(y,arguments)}function LI(){var e=0,t=1,i=1,s=[.5],m=[0,1],y;function _(P){return P!=null&&P<=P?m[Bv(s,P,0,i)]:y}function c(){var P=-1;for(s=new Array(i);++P<i;)s[P]=((P+1)*t-(P-i)*e)/(i+1);return _}return _.domain=function(P){return arguments.length?([e,t]=P,e=+e,t=+t,c()):[e,t]},_.range=function(P){return arguments.length?(i=(m=Array.from(P)).length-1,c()):m.slice()},_.invertExtent=function(P){var C=m.indexOf(P);return C<0?[NaN,NaN]:C<1?[e,s[0]]:C>=i?[s[i-1],t]:[s[C-1],s[C]]},_.unknown=function(P){return arguments.length&&(y=P),_},_.thresholds=function(){return s.slice()},_.copy=function(){return LI().domain([e,t]).range(m).unknown(y)},Bl.apply(fd(_),arguments)}function BI(){var e=[.5],t=[0,1],i,s=1;function m(y){return y!=null&&y<=y?t[Bv(e,y,0,s)]:i}return m.domain=function(y){return arguments.length?(e=Array.from(y),s=Math.min(e.length,t.length-1),m):e.slice()},m.range=function(y){return arguments.length?(t=Array.from(y),s=Math.min(e.length,t.length-1),m):t.slice()},m.invertExtent=function(y){var _=t.indexOf(y);return[e[_-1],e[_]]},m.unknown=function(y){return arguments.length?(i=y,m):i},m.copy=function(){return BI().domain(e).range(t).unknown(i)},Bl.apply(m,arguments)}const V1=new Date,G1=new Date;function ia(e,t,i,s){function m(y){return e(y=arguments.length===0?new Date:new Date(+y)),y}return m.floor=y=>(e(y=new Date(+y)),y),m.ceil=y=>(e(y=new Date(y-1)),t(y,1),e(y),y),m.round=y=>{const _=m(y),c=m.ceil(y);return y-_<c-y?_:c},m.offset=(y,_)=>(t(y=new Date(+y),_==null?1:Math.floor(_)),y),m.range=(y,_,c)=>{const P=[];if(y=m.ceil(y),c=c==null?1:Math.floor(c),!(y<_)||!(c>0))return P;let C;do P.push(C=new Date(+y)),t(y,c),e(y);while(C<y&&y<_);return P},m.filter=y=>ia(_=>{if(_>=_)for(;e(_),!y(_);)_.setTime(_-1)},(_,c)=>{if(_>=_)if(c<0)for(;++c<=0;)for(;t(_,-1),!y(_););else for(;--c>=0;)for(;t(_,1),!y(_););}),i&&(m.count=(y,_)=>(V1.setTime(+y),G1.setTime(+_),e(V1),e(G1),Math.floor(i(V1,G1))),m.every=y=>(y=Math.floor(y),!isFinite(y)||!(y>0)?null:y>1?m.filter(s?_=>s(_)%y===0:_=>m.count(0,_)%y===0):m)),m}const Q0=ia(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Q0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ia(t=>{t.setTime(Math.floor(t/e)*e)},(t,i)=>{t.setTime(+t+i*e)},(t,i)=>(i-t)/e):Q0);Q0.range;const Lh=1e3,Ol=Lh*60,Bh=Ol*60,Gh=Bh*24,eS=Gh*7,_M=Gh*30,q1=Gh*365,Dp=ia(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Lh)},(e,t)=>(t-e)/Lh,e=>e.getUTCSeconds());Dp.range;const tS=ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lh)},(e,t)=>{e.setTime(+e+t*Ol)},(e,t)=>(t-e)/Ol,e=>e.getMinutes());tS.range;const rS=ia(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ol)},(e,t)=>(t-e)/Ol,e=>e.getUTCMinutes());rS.range;const nS=ia(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Lh-e.getMinutes()*Ol)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getHours());nS.range;const iS=ia(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getUTCHours());iS.range;const Fv=ia(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ol)/Gh,e=>e.getDate()-1);Fv.range;const qx=ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gh,e=>e.getUTCDate()-1);qx.range;const jI=ia(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Gh,e=>Math.floor(e/Gh));jI.range;function qp(e){return ia(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,i)=>{t.setDate(t.getDate()+i*7)},(t,i)=>(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Ol)/eS)}const Hx=qp(0),J0=qp(1),CF=qp(2),DF=qp(3),Dg=qp(4),IF=qp(5),OF=qp(6);Hx.range;J0.range;CF.range;DF.range;Dg.range;IF.range;OF.range;function Hp(e){return ia(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCDate(t.getUTCDate()+i*7)},(t,i)=>(i-t)/eS)}const Zx=Hp(0),ex=Hp(1),zF=Hp(2),kF=Hp(3),Ig=Hp(4),RF=Hp(5),LF=Hp(6);Zx.range;ex.range;zF.range;kF.range;Ig.range;RF.range;LF.range;const aS=ia(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());aS.range;const oS=ia(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oS.range;const qh=ia(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ia(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,i)=>{t.setFullYear(t.getFullYear()+i*e)});qh.range;const Hh=ia(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ia(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,i)=>{t.setUTCFullYear(t.getUTCFullYear()+i*e)});Hh.range;function NI(e,t,i,s,m,y){const _=[[Dp,1,Lh],[Dp,5,5*Lh],[Dp,15,15*Lh],[Dp,30,30*Lh],[y,1,Ol],[y,5,5*Ol],[y,15,15*Ol],[y,30,30*Ol],[m,1,Bh],[m,3,3*Bh],[m,6,6*Bh],[m,12,12*Bh],[s,1,Gh],[s,2,2*Gh],[i,1,eS],[t,1,_M],[t,3,3*_M],[e,1,q1]];function c(C,D,k){const U=D<C;U&&([C,D]=[D,C]);const V=k&&typeof k.range=="function"?k:P(C,D,k),Q=V?V.range(C,+D+1):[];return U?Q.reverse():Q}function P(C,D,k){const U=Math.abs(D-C)/k,V=U2(([,,G])=>G).right(_,U);if(V===_.length)return e.every(Hw(C/q1,D/q1,k));if(V===0)return Q0.every(Math.max(Hw(C,D,k),1));const[Q,Z]=_[U/_[V-1][2]<_[V][2]/U?V-1:V];return Q.every(Z)}return[c,P]}const[BF,jF]=NI(Hh,oS,Zx,jI,iS,rS),[NF,FF]=NI(qh,aS,Hx,Fv,nS,tS);function H1(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Z1(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nv(e,t,i){return{y:e,m:t,d:i,H:0,M:0,S:0,L:0}}function UF(e){var t=e.dateTime,i=e.date,s=e.time,m=e.periods,y=e.days,_=e.shortDays,c=e.months,P=e.shortMonths,C=iv(m),D=av(m),k=iv(y),U=av(y),V=iv(_),Q=av(_),Z=iv(c),G=av(c),oe=iv(P),he=av(P),me={a:We,A:_t,b:at,B:Kt,c:null,d:TM,e:TM,f:c6,g:x6,G:w6,H:s6,I:l6,j:u6,L:FI,m:h6,M:f6,p:Oe,q:ot,Q:PM,s:CM,S:d6,u:p6,U:m6,V:g6,w:y6,W:v6,x:null,X:null,y:_6,Y:b6,Z:S6,"%":MM},Ce={a:Dt,A:Rt,b:Gt,B:Qt,c:null,d:EM,e:EM,f:M6,g:B6,G:N6,H:A6,I:T6,j:E6,L:VI,m:P6,M:C6,p:Jt,q:zr,Q:PM,s:CM,S:D6,u:I6,U:O6,V:z6,w:k6,W:R6,x:null,X:null,y:L6,Y:j6,Z:F6,"%":MM},be={a:It,A:yt,b:De,B:Tt,c:Ct,d:SM,e:SM,f:n6,g:wM,G:bM,H:AM,I:AM,j:JF,L:r6,m:QF,M:e6,p:bt,q:KF,Q:a6,s:o6,S:t6,u:ZF,U:$F,V:XF,w:HF,W:YF,x:Ft,X:Le,y:wM,Y:bM,Z:WF,"%":i6};me.x=ke(i,me),me.X=ke(s,me),me.c=ke(t,me),Ce.x=ke(i,Ce),Ce.X=ke(s,Ce),Ce.c=ke(t,Ce);function ke(ct,tr){return function(gr){var wt=[],Hn=-1,ar=0,rn=ct.length,cn,Br,Xa;for(gr instanceof Date||(gr=new Date(+gr));++Hn<rn;)ct.charCodeAt(Hn)===37&&(wt.push(ct.slice(ar,Hn)),(Br=xM[cn=ct.charAt(++Hn)])!=null?cn=ct.charAt(++Hn):Br=cn==="e"?" ":"0",(Xa=tr[cn])&&(cn=Xa(gr,Br)),wt.push(cn),ar=Hn+1);return wt.push(ct.slice(ar,Hn)),wt.join("")}}function je(ct,tr){return function(gr){var wt=nv(1900,void 0,1),Hn=gt(wt,ct,gr+="",0),ar,rn;if(Hn!=gr.length)return null;if("Q"in wt)return new Date(wt.Q);if("s"in wt)return new Date(wt.s*1e3+("L"in wt?wt.L:0));if(tr&&!("Z"in wt)&&(wt.Z=0),"p"in wt&&(wt.H=wt.H%12+wt.p*12),wt.m===void 0&&(wt.m="q"in wt?wt.q:0),"V"in wt){if(wt.V<1||wt.V>53)return null;"w"in wt||(wt.w=1),"Z"in wt?(ar=Z1(nv(wt.y,0,1)),rn=ar.getUTCDay(),ar=rn>4||rn===0?ex.ceil(ar):ex(ar),ar=qx.offset(ar,(wt.V-1)*7),wt.y=ar.getUTCFullYear(),wt.m=ar.getUTCMonth(),wt.d=ar.getUTCDate()+(wt.w+6)%7):(ar=H1(nv(wt.y,0,1)),rn=ar.getDay(),ar=rn>4||rn===0?J0.ceil(ar):J0(ar),ar=Fv.offset(ar,(wt.V-1)*7),wt.y=ar.getFullYear(),wt.m=ar.getMonth(),wt.d=ar.getDate()+(wt.w+6)%7)}else("W"in wt||"U"in wt)&&("w"in wt||(wt.w="u"in wt?wt.u%7:"W"in wt?1:0),rn="Z"in wt?Z1(nv(wt.y,0,1)).getUTCDay():H1(nv(wt.y,0,1)).getDay(),wt.m=0,wt.d="W"in wt?(wt.w+6)%7+wt.W*7-(rn+5)%7:wt.w+wt.U*7-(rn+6)%7);return"Z"in wt?(wt.H+=wt.Z/100|0,wt.M+=wt.Z%100,Z1(wt)):H1(wt)}}function gt(ct,tr,gr,wt){for(var Hn=0,ar=tr.length,rn=gr.length,cn,Br;Hn<ar;){if(wt>=rn)return-1;if(cn=tr.charCodeAt(Hn++),cn===37){if(cn=tr.charAt(Hn++),Br=be[cn in xM?tr.charAt(Hn++):cn],!Br||(wt=Br(ct,gr,wt))<0)return-1}else if(cn!=gr.charCodeAt(wt++))return-1}return wt}function bt(ct,tr,gr){var wt=C.exec(tr.slice(gr));return wt?(ct.p=D.get(wt[0].toLowerCase()),gr+wt[0].length):-1}function It(ct,tr,gr){var wt=V.exec(tr.slice(gr));return wt?(ct.w=Q.get(wt[0].toLowerCase()),gr+wt[0].length):-1}function yt(ct,tr,gr){var wt=k.exec(tr.slice(gr));return wt?(ct.w=U.get(wt[0].toLowerCase()),gr+wt[0].length):-1}function De(ct,tr,gr){var wt=oe.exec(tr.slice(gr));return wt?(ct.m=he.get(wt[0].toLowerCase()),gr+wt[0].length):-1}function Tt(ct,tr,gr){var wt=Z.exec(tr.slice(gr));return wt?(ct.m=G.get(wt[0].toLowerCase()),gr+wt[0].length):-1}function Ct(ct,tr,gr){return gt(ct,t,tr,gr)}function Ft(ct,tr,gr){return gt(ct,i,tr,gr)}function Le(ct,tr,gr){return gt(ct,s,tr,gr)}function We(ct){return _[ct.getDay()]}function _t(ct){return y[ct.getDay()]}function at(ct){return P[ct.getMonth()]}function Kt(ct){return c[ct.getMonth()]}function Oe(ct){return m[+(ct.getHours()>=12)]}function ot(ct){return 1+~~(ct.getMonth()/3)}function Dt(ct){return _[ct.getUTCDay()]}function Rt(ct){return y[ct.getUTCDay()]}function Gt(ct){return P[ct.getUTCMonth()]}function Qt(ct){return c[ct.getUTCMonth()]}function Jt(ct){return m[+(ct.getUTCHours()>=12)]}function zr(ct){return 1+~~(ct.getUTCMonth()/3)}return{format:function(ct){var tr=ke(ct+="",me);return tr.toString=function(){return ct},tr},parse:function(ct){var tr=je(ct+="",!1);return tr.toString=function(){return ct},tr},utcFormat:function(ct){var tr=ke(ct+="",Ce);return tr.toString=function(){return ct},tr},utcParse:function(ct){var tr=je(ct+="",!0);return tr.toString=function(){return ct},tr}}}var xM={"-":"",_:" ",0:"0"},Ma=/^\s*\d+/,VF=/^%/,GF=/[\\^$*+?|[\]().{}]/g;function on(e,t,i){var s=e<0?"-":"",m=(s?-e:e)+"",y=m.length;return s+(y<i?new Array(i-y+1).join(t)+m:m)}function qF(e){return e.replace(GF,"\\$&")}function iv(e){return new RegExp("^(?:"+e.map(qF).join("|")+")","i")}function av(e){return new Map(e.map((t,i)=>[t.toLowerCase(),i]))}function HF(e,t,i){var s=Ma.exec(t.slice(i,i+1));return s?(e.w=+s[0],i+s[0].length):-1}function ZF(e,t,i){var s=Ma.exec(t.slice(i,i+1));return s?(e.u=+s[0],i+s[0].length):-1}function $F(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.U=+s[0],i+s[0].length):-1}function XF(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.V=+s[0],i+s[0].length):-1}function YF(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.W=+s[0],i+s[0].length):-1}function bM(e,t,i){var s=Ma.exec(t.slice(i,i+4));return s?(e.y=+s[0],i+s[0].length):-1}function wM(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),i+s[0].length):-1}function WF(e,t,i){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(i,i+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),i+s[0].length):-1}function KF(e,t,i){var s=Ma.exec(t.slice(i,i+1));return s?(e.q=s[0]*3-3,i+s[0].length):-1}function QF(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.m=s[0]-1,i+s[0].length):-1}function SM(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.d=+s[0],i+s[0].length):-1}function JF(e,t,i){var s=Ma.exec(t.slice(i,i+3));return s?(e.m=0,e.d=+s[0],i+s[0].length):-1}function AM(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.H=+s[0],i+s[0].length):-1}function e6(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.M=+s[0],i+s[0].length):-1}function t6(e,t,i){var s=Ma.exec(t.slice(i,i+2));return s?(e.S=+s[0],i+s[0].length):-1}function r6(e,t,i){var s=Ma.exec(t.slice(i,i+3));return s?(e.L=+s[0],i+s[0].length):-1}function n6(e,t,i){var s=Ma.exec(t.slice(i,i+6));return s?(e.L=Math.floor(s[0]/1e3),i+s[0].length):-1}function i6(e,t,i){var s=VF.exec(t.slice(i,i+1));return s?i+s[0].length:-1}function a6(e,t,i){var s=Ma.exec(t.slice(i));return s?(e.Q=+s[0],i+s[0].length):-1}function o6(e,t,i){var s=Ma.exec(t.slice(i));return s?(e.s=+s[0],i+s[0].length):-1}function TM(e,t){return on(e.getDate(),t,2)}function s6(e,t){return on(e.getHours(),t,2)}function l6(e,t){return on(e.getHours()%12||12,t,2)}function u6(e,t){return on(1+Fv.count(qh(e),e),t,3)}function FI(e,t){return on(e.getMilliseconds(),t,3)}function c6(e,t){return FI(e,t)+"000"}function h6(e,t){return on(e.getMonth()+1,t,2)}function f6(e,t){return on(e.getMinutes(),t,2)}function d6(e,t){return on(e.getSeconds(),t,2)}function p6(e){var t=e.getDay();return t===0?7:t}function m6(e,t){return on(Hx.count(qh(e)-1,e),t,2)}function UI(e){var t=e.getDay();return t>=4||t===0?Dg(e):Dg.ceil(e)}function g6(e,t){return e=UI(e),on(Dg.count(qh(e),e)+(qh(e).getDay()===4),t,2)}function y6(e){return e.getDay()}function v6(e,t){return on(J0.count(qh(e)-1,e),t,2)}function _6(e,t){return on(e.getFullYear()%100,t,2)}function x6(e,t){return e=UI(e),on(e.getFullYear()%100,t,2)}function b6(e,t){return on(e.getFullYear()%1e4,t,4)}function w6(e,t){var i=e.getDay();return e=i>=4||i===0?Dg(e):Dg.ceil(e),on(e.getFullYear()%1e4,t,4)}function S6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+on(t/60|0,"0",2)+on(t%60,"0",2)}function EM(e,t){return on(e.getUTCDate(),t,2)}function A6(e,t){return on(e.getUTCHours(),t,2)}function T6(e,t){return on(e.getUTCHours()%12||12,t,2)}function E6(e,t){return on(1+qx.count(Hh(e),e),t,3)}function VI(e,t){return on(e.getUTCMilliseconds(),t,3)}function M6(e,t){return VI(e,t)+"000"}function P6(e,t){return on(e.getUTCMonth()+1,t,2)}function C6(e,t){return on(e.getUTCMinutes(),t,2)}function D6(e,t){return on(e.getUTCSeconds(),t,2)}function I6(e){var t=e.getUTCDay();return t===0?7:t}function O6(e,t){return on(Zx.count(Hh(e)-1,e),t,2)}function GI(e){var t=e.getUTCDay();return t>=4||t===0?Ig(e):Ig.ceil(e)}function z6(e,t){return e=GI(e),on(Ig.count(Hh(e),e)+(Hh(e).getUTCDay()===4),t,2)}function k6(e){return e.getUTCDay()}function R6(e,t){return on(ex.count(Hh(e)-1,e),t,2)}function L6(e,t){return on(e.getUTCFullYear()%100,t,2)}function B6(e,t){return e=GI(e),on(e.getUTCFullYear()%100,t,2)}function j6(e,t){return on(e.getUTCFullYear()%1e4,t,4)}function N6(e,t){var i=e.getUTCDay();return e=i>=4||i===0?Ig(e):Ig.ceil(e),on(e.getUTCFullYear()%1e4,t,4)}function F6(){return"+0000"}function MM(){return"%"}function PM(e){return+e}function CM(e){return Math.floor(+e/1e3)}var mg,qI,HI;U6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function U6(e){return mg=UF(e),qI=mg.format,mg.parse,HI=mg.utcFormat,mg.utcParse,mg}function V6(e){return new Date(e)}function G6(e){return e instanceof Date?+e:+new Date(+e)}function sS(e,t,i,s,m,y,_,c,P,C){var D=$2(),k=D.invert,U=D.domain,V=C(".%L"),Q=C(":%S"),Z=C("%I:%M"),G=C("%I %p"),oe=C("%a %d"),he=C("%b %d"),me=C("%B"),Ce=C("%Y");function be(ke){return(P(ke)<ke?V:c(ke)<ke?Q:_(ke)<ke?Z:y(ke)<ke?G:s(ke)<ke?m(ke)<ke?oe:he:i(ke)<ke?me:Ce)(ke)}return D.invert=function(ke){return new Date(k(ke))},D.domain=function(ke){return arguments.length?U(Array.from(ke,G6)):U().map(V6)},D.ticks=function(ke){var je=U();return e(je[0],je[je.length-1],ke??10)},D.tickFormat=function(ke,je){return je==null?be:C(je)},D.nice=function(ke){var je=U();return(!ke||typeof ke.range!="function")&&(ke=t(je[0],je[je.length-1],ke??10)),ke?U(II(je,ke)):D},D.copy=function(){return Nv(D,sS(e,t,i,s,m,y,_,c,P,C))},D}function q6(){return Bl.apply(sS(NF,FF,qh,aS,Hx,Fv,nS,tS,Dp,qI).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function H6(){return Bl.apply(sS(BF,jF,Hh,oS,Zx,qx,iS,rS,Dp,HI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $x(){var e=0,t=1,i,s,m,y,_=No,c=!1,P;function C(k){return k==null||isNaN(k=+k)?P:_(m===0?.5:(k=(y(k)-i)*m,c?Math.max(0,Math.min(1,k)):k))}C.domain=function(k){return arguments.length?([e,t]=k,i=y(e=+e),s=y(t=+t),m=i===s?0:1/(s-i),C):[e,t]},C.clamp=function(k){return arguments.length?(c=!!k,C):c},C.interpolator=function(k){return arguments.length?(_=k,C):_};function D(k){return function(U){var V,Q;return arguments.length?([V,Q]=U,_=k(V,Q),C):[_(0),_(1)]}}return C.range=D(Lg),C.rangeRound=D(Z2),C.unknown=function(k){return arguments.length?(P=k,C):P},function(k){return y=k,i=k(e),s=k(t),m=i===s?0:1/(s-i),C}}function dd(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ZI(){var e=fd($x()(No));return e.copy=function(){return dd(e,ZI())},Qh.apply(e,arguments)}function $I(){var e=W2($x()).domain([1,10]);return e.copy=function(){return dd(e,$I()).base(e.base())},Qh.apply(e,arguments)}function XI(){var e=K2($x());return e.copy=function(){return dd(e,XI()).constant(e.constant())},Qh.apply(e,arguments)}function lS(){var e=Q2($x());return e.copy=function(){return dd(e,lS()).exponent(e.exponent())},Qh.apply(e,arguments)}function Z6(){return lS.apply(null,arguments).exponent(.5)}function YI(){var e=[],t=No;function i(s){if(s!=null&&!isNaN(s=+s))return t((Bv(e,s,1)-1)/(e.length-1))}return i.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let m of s)m!=null&&!isNaN(m=+m)&&e.push(m);return e.sort(sd),i},i.interpolator=function(s){return arguments.length?(t=s,i):t},i.range=function(){return e.map((s,m)=>t(m/(e.length-1)))},i.quantiles=function(s){return Array.from({length:s+1},(m,y)=>IN(e,y/s))},i.copy=function(){return YI(t).domain(e)},Qh.apply(i,arguments)}function Xx(){var e=0,t=.5,i=1,s=1,m,y,_,c,P,C=No,D,k=!1,U;function V(Z){return isNaN(Z=+Z)?U:(Z=.5+((Z=+D(Z))-y)*(s*Z<s*y?c:P),C(k?Math.max(0,Math.min(1,Z)):Z))}V.domain=function(Z){return arguments.length?([e,t,i]=Z,m=D(e=+e),y=D(t=+t),_=D(i=+i),c=m===y?0:.5/(y-m),P=y===_?0:.5/(_-y),s=y<m?-1:1,V):[e,t,i]},V.clamp=function(Z){return arguments.length?(k=!!Z,V):k},V.interpolator=function(Z){return arguments.length?(C=Z,V):C};function Q(Z){return function(G){var oe,he,me;return arguments.length?([oe,he,me]=G,C=iF(Z,[oe,he,me]),V):[C(0),C(.5),C(1)]}}return V.range=Q(Lg),V.rangeRound=Q(Z2),V.unknown=function(Z){return arguments.length?(U=Z,V):U},function(Z){return D=Z,m=Z(e),y=Z(t),_=Z(i),c=m===y?0:.5/(y-m),P=y===_?0:.5/(_-y),s=y<m?-1:1,V}}function WI(){var e=fd(Xx()(No));return e.copy=function(){return dd(e,WI())},Qh.apply(e,arguments)}function KI(){var e=W2(Xx()).domain([.1,1,10]);return e.copy=function(){return dd(e,KI()).base(e.base())},Qh.apply(e,arguments)}function QI(){var e=K2(Xx());return e.copy=function(){return dd(e,QI()).constant(e.constant())},Qh.apply(e,arguments)}function uS(){var e=Q2(Xx());return e.copy=function(){return dd(e,uS()).exponent(e.exponent())},Qh.apply(e,arguments)}function $6(){return uS.apply(null,arguments).exponent(.5)}const lv=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:G2,scaleDiverging:WI,scaleDivergingLog:KI,scaleDivergingPow:uS,scaleDivergingSqrt:$6,scaleDivergingSymlog:QI,scaleIdentity:DI,scaleImplicit:Zw,scaleLinear:CI,scaleLog:OI,scaleOrdinal:V2,scalePoint:kN,scalePow:J2,scaleQuantile:RI,scaleQuantize:LI,scaleRadial:kI,scaleSequential:ZI,scaleSequentialLog:$I,scaleSequentialPow:lS,scaleSequentialQuantile:YI,scaleSequentialSqrt:Z6,scaleSequentialSymlog:XI,scaleSqrt:MF,scaleSymlog:zI,scaleThreshold:BI,scaleTime:q6,scaleUtc:H6,tickFormat:PI},Symbol.toStringTag,{value:"Module"}));var Jh=e=>e.chartData,JI=it([Jh],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),cS=(e,t,i,s)=>s?JI(e):Jh(e),X6=(e,t,i)=>i?JI(e):Jh(e);function ld(e){if(Array.isArray(e)&&e.length===2){var[t,i]=e;if(mi(t)&&mi(i))return!0}return!1}function DM(e,t,i){return i?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function eO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[i,s]=e,m,y;if(mi(i))m=i;else if(typeof i=="function")return;if(mi(s))y=s;else if(typeof s=="function")return;var _=[m,y];if(ld(_))return _}}function Y6(e,t,i){if(!(!i&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,i);if(ld(s))return DM(s,t,i)}catch{}if(Array.isArray(e)&&e.length===2){var[m,y]=e,_,c;if(m==="auto")t!=null&&(_=Math.min(...t));else if(Yt(m))_=m;else if(typeof m=="function")try{t!=null&&(_=m(t?.[0]))}catch{}else if(typeof m=="string"&&XT.test(m)){var P=XT.exec(m);if(P==null||P[1]==null||t==null)_=void 0;else{var C=+P[1];_=t[0]-C}}else _=t?.[0];if(y==="auto")t!=null&&(c=Math.max(...t));else if(Yt(y))c=y;else if(typeof y=="function")try{t!=null&&(c=y(t?.[1]))}catch{}else if(typeof y=="string"&&YT.test(y)){var D=YT.exec(y);if(D==null||D[1]==null||t==null)c=void 0;else{var k=+D[1];c=t[1]+k}}else c=t?.[1];var U=[_,c];if(ld(U))return t==null?U:DM(U,t,i)}}}var Bg=1e9,W6={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},fS,oi=!0,Rl="[DecimalError] ",kp=Rl+"Invalid argument: ",hS=Rl+"Exponent out of range: ",jg=Math.floor,Mp=Math.pow,K6=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Xs,Aa=1e7,ei=7,tO=9007199254740991,tx=jg(tO/ei),$t={};$t.absoluteValue=$t.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};$t.comparedTo=$t.cmp=function(e){var t,i,s,m,y=this;if(e=new y.constructor(e),y.s!==e.s)return y.s||-e.s;if(y.e!==e.e)return y.e>e.e^y.s<0?1:-1;for(s=y.d.length,m=e.d.length,t=0,i=s<m?s:m;t<i;++t)if(y.d[t]!==e.d[t])return y.d[t]>e.d[t]^y.s<0?1:-1;return s===m?0:s>m^y.s<0?1:-1};$t.decimalPlaces=$t.dp=function(){var e=this,t=e.d.length-1,i=(t-e.e)*ei;if(t=e.d[t],t)for(;t%10==0;t/=10)i--;return i<0?0:i};$t.dividedBy=$t.div=function(e){return Nh(this,new this.constructor(e))};$t.dividedToIntegerBy=$t.idiv=function(e){var t=this,i=t.constructor;return Bn(Nh(t,new i(e),0,1),i.precision)};$t.equals=$t.eq=function(e){return!this.cmp(e)};$t.exponent=function(){return Xi(this)};$t.greaterThan=$t.gt=function(e){return this.cmp(e)>0};$t.greaterThanOrEqualTo=$t.gte=function(e){return this.cmp(e)>=0};$t.isInteger=$t.isint=function(){return this.e>this.d.length-2};$t.isNegative=$t.isneg=function(){return this.s<0};$t.isPositive=$t.ispos=function(){return this.s>0};$t.isZero=function(){return this.s===0};$t.lessThan=$t.lt=function(e){return this.cmp(e)<0};$t.lessThanOrEqualTo=$t.lte=function(e){return this.cmp(e)<1};$t.logarithm=$t.log=function(e){var t,i=this,s=i.constructor,m=s.precision,y=m+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Xs))throw Error(Rl+"NaN");if(i.s<1)throw Error(Rl+(i.s?"NaN":"-Infinity"));return i.eq(Xs)?new s(0):(oi=!1,t=Nh(Av(i,y),Av(e,y),y),oi=!0,Bn(t,m))};$t.minus=$t.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?iO(t,e):rO(t,(e.s=-e.s,e))};$t.modulo=$t.mod=function(e){var t,i=this,s=i.constructor,m=s.precision;if(e=new s(e),!e.s)throw Error(Rl+"NaN");return i.s?(oi=!1,t=Nh(i,e,0,1).times(e),oi=!0,i.minus(t)):Bn(new s(i),m)};$t.naturalExponential=$t.exp=function(){return nO(this)};$t.naturalLogarithm=$t.ln=function(){return Av(this)};$t.negated=$t.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};$t.plus=$t.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?rO(t,e):iO(t,(e.s=-e.s,e))};$t.precision=$t.sd=function(e){var t,i,s,m=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(kp+e);if(t=Xi(m)+1,s=m.d.length-1,i=s*ei+1,s=m.d[s],s){for(;s%10==0;s/=10)i--;for(s=m.d[0];s>=10;s/=10)i++}return e&&t>i?t:i};$t.squareRoot=$t.sqrt=function(){var e,t,i,s,m,y,_,c=this,P=c.constructor;if(c.s<1){if(!c.s)return new P(0);throw Error(Rl+"NaN")}for(e=Xi(c),oi=!1,m=Math.sqrt(+c),m==0||m==1/0?(t=Ic(c.d),(t.length+e)%2==0&&(t+="0"),m=Math.sqrt(t),e=jg((e+1)/2)-(e<0||e%2),m==1/0?t="5e"+e:(t=m.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new P(t)):s=new P(m.toString()),i=P.precision,m=_=i+3;;)if(y=s,s=y.plus(Nh(c,y,_+2)).times(.5),Ic(y.d).slice(0,_)===(t=Ic(s.d)).slice(0,_)){if(t=t.slice(_-3,_+1),m==_&&t=="4999"){if(Bn(y,i+1,0),y.times(y).eq(c)){s=y;break}}else if(t!="9999")break;_+=4}return oi=!0,Bn(s,i)};$t.times=$t.mul=function(e){var t,i,s,m,y,_,c,P,C,D=this,k=D.constructor,U=D.d,V=(e=new k(e)).d;if(!D.s||!e.s)return new k(0);for(e.s*=D.s,i=D.e+e.e,P=U.length,C=V.length,P<C&&(y=U,U=V,V=y,_=P,P=C,C=_),y=[],_=P+C,s=_;s--;)y.push(0);for(s=C;--s>=0;){for(t=0,m=P+s;m>s;)c=y[m]+V[s]*U[m-s-1]+t,y[m--]=c%Aa|0,t=c/Aa|0;y[m]=(y[m]+t)%Aa|0}for(;!y[--_];)y.pop();return t?++i:y.shift(),e.d=y,e.e=i,oi?Bn(e,k.precision):e};$t.toDecimalPlaces=$t.todp=function(e,t){var i=this,s=i.constructor;return i=new s(i),e===void 0?i:(kc(e,0,Bg),t===void 0?t=s.rounding:kc(t,0,8),Bn(i,e+Xi(i)+1,t))};$t.toExponential=function(e,t){var i,s=this,m=s.constructor;return e===void 0?i=Np(s,!0):(kc(e,0,Bg),t===void 0?t=m.rounding:kc(t,0,8),s=Bn(new m(s),e+1,t),i=Np(s,!0,e+1)),i};$t.toFixed=function(e,t){var i,s,m=this,y=m.constructor;return e===void 0?Np(m):(kc(e,0,Bg),t===void 0?t=y.rounding:kc(t,0,8),s=Bn(new y(m),e+Xi(m)+1,t),i=Np(s.abs(),!1,e+Xi(s)+1),m.isneg()&&!m.isZero()?"-"+i:i)};$t.toInteger=$t.toint=function(){var e=this,t=e.constructor;return Bn(new t(e),Xi(e)+1,t.rounding)};$t.toNumber=function(){return+this};$t.toPower=$t.pow=function(e){var t,i,s,m,y,_,c=this,P=c.constructor,C=12,D=+(e=new P(e));if(!e.s)return new P(Xs);if(c=new P(c),!c.s){if(e.s<1)throw Error(Rl+"Infinity");return c}if(c.eq(Xs))return c;if(s=P.precision,e.eq(Xs))return Bn(c,s);if(t=e.e,i=e.d.length-1,_=t>=i,y=c.s,_){if((i=D<0?-D:D)<=tO){for(m=new P(Xs),t=Math.ceil(s/ei+4),oi=!1;i%2&&(m=m.times(c),OM(m.d,t)),i=jg(i/2),i!==0;)c=c.times(c),OM(c.d,t);return oi=!0,e.s<0?new P(Xs).div(m):Bn(m,s)}}else if(y<0)throw Error(Rl+"NaN");return y=y<0&&e.d[Math.max(t,i)]&1?-1:1,c.s=1,oi=!1,m=e.times(Av(c,s+C)),oi=!0,m=nO(m),m.s=y,m};$t.toPrecision=function(e,t){var i,s,m=this,y=m.constructor;return e===void 0?(i=Xi(m),s=Np(m,i<=y.toExpNeg||i>=y.toExpPos)):(kc(e,1,Bg),t===void 0?t=y.rounding:kc(t,0,8),m=Bn(new y(m),e,t),i=Xi(m),s=Np(m,e<=i||i<=y.toExpNeg,e)),s};$t.toSignificantDigits=$t.tosd=function(e,t){var i=this,s=i.constructor;return e===void 0?(e=s.precision,t=s.rounding):(kc(e,1,Bg),t===void 0?t=s.rounding:kc(t,0,8)),Bn(new s(i),e,t)};$t.toString=$t.valueOf=$t.val=$t.toJSON=$t[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xi(e),i=e.constructor;return Np(e,t<=i.toExpNeg||t>=i.toExpPos)};function rO(e,t){var i,s,m,y,_,c,P,C,D=e.constructor,k=D.precision;if(!e.s||!t.s)return t.s||(t=new D(e)),oi?Bn(t,k):t;if(P=e.d,C=t.d,_=e.e,m=t.e,P=P.slice(),y=_-m,y){for(y<0?(s=P,y=-y,c=C.length):(s=C,m=_,c=P.length),_=Math.ceil(k/ei),c=_>c?_+1:c+1,y>c&&(y=c,s.length=1),s.reverse();y--;)s.push(0);s.reverse()}for(c=P.length,y=C.length,c-y<0&&(y=c,s=C,C=P,P=s),i=0;y;)i=(P[--y]=P[y]+C[y]+i)/Aa|0,P[y]%=Aa;for(i&&(P.unshift(i),++m),c=P.length;P[--c]==0;)P.pop();return t.d=P,t.e=m,oi?Bn(t,k):t}function kc(e,t,i){if(e!==~~e||e<t||e>i)throw Error(kp+e)}function Ic(e){var t,i,s,m=e.length-1,y="",_=e[0];if(m>0){for(y+=_,t=1;t<m;t++)s=e[t]+"",i=ei-s.length,i&&(y+=nd(i)),y+=s;_=e[t],s=_+"",i=ei-s.length,i&&(y+=nd(i))}else if(_===0)return"0";for(;_%10===0;)_/=10;return y+_}var Nh=(function(){function e(s,m){var y,_=0,c=s.length;for(s=s.slice();c--;)y=s[c]*m+_,s[c]=y%Aa|0,_=y/Aa|0;return _&&s.unshift(_),s}function t(s,m,y,_){var c,P;if(y!=_)P=y>_?1:-1;else for(c=P=0;c<y;c++)if(s[c]!=m[c]){P=s[c]>m[c]?1:-1;break}return P}function i(s,m,y){for(var _=0;y--;)s[y]-=_,_=s[y]<m[y]?1:0,s[y]=_*Aa+s[y]-m[y];for(;!s[0]&&s.length>1;)s.shift()}return function(s,m,y,_){var c,P,C,D,k,U,V,Q,Z,G,oe,he,me,Ce,be,ke,je,gt,bt=s.constructor,It=s.s==m.s?1:-1,yt=s.d,De=m.d;if(!s.s)return new bt(s);if(!m.s)throw Error(Rl+"Division by zero");for(P=s.e-m.e,je=De.length,be=yt.length,V=new bt(It),Q=V.d=[],C=0;De[C]==(yt[C]||0);)++C;if(De[C]>(yt[C]||0)&&--P,y==null?he=y=bt.precision:_?he=y+(Xi(s)-Xi(m))+1:he=y,he<0)return new bt(0);if(he=he/ei+2|0,C=0,je==1)for(D=0,De=De[0],he++;(C<be||D)&&he--;C++)me=D*Aa+(yt[C]||0),Q[C]=me/De|0,D=me%De|0;else{for(D=Aa/(De[0]+1)|0,D>1&&(De=e(De,D),yt=e(yt,D),je=De.length,be=yt.length),Ce=je,Z=yt.slice(0,je),G=Z.length;G<je;)Z[G++]=0;gt=De.slice(),gt.unshift(0),ke=De[0],De[1]>=Aa/2&&++ke;do D=0,c=t(De,Z,je,G),c<0?(oe=Z[0],je!=G&&(oe=oe*Aa+(Z[1]||0)),D=oe/ke|0,D>1?(D>=Aa&&(D=Aa-1),k=e(De,D),U=k.length,G=Z.length,c=t(k,Z,U,G),c==1&&(D--,i(k,je<U?gt:De,U))):(D==0&&(c=D=1),k=De.slice()),U=k.length,U<G&&k.unshift(0),i(Z,k,G),c==-1&&(G=Z.length,c=t(De,Z,je,G),c<1&&(D++,i(Z,je<G?gt:De,G))),G=Z.length):c===0&&(D++,Z=[0]),Q[C++]=D,c&&Z[0]?Z[G++]=yt[Ce]||0:(Z=[yt[Ce]],G=1);while((Ce++<be||Z[0]!==void 0)&&he--)}return Q[0]||Q.shift(),V.e=P,Bn(V,_?y+Xi(V)+1:y)}})();function nO(e,t){var i,s,m,y,_,c,P=0,C=0,D=e.constructor,k=D.precision;if(Xi(e)>16)throw Error(hS+Xi(e));if(!e.s)return new D(Xs);for(oi=!1,c=k,_=new D(.03125);e.abs().gte(.1);)e=e.times(_),C+=5;for(s=Math.log(Mp(2,C))/Math.LN10*2+5|0,c+=s,i=m=y=new D(Xs),D.precision=c;;){if(m=Bn(m.times(e),c),i=i.times(++P),_=y.plus(Nh(m,i,c)),Ic(_.d).slice(0,c)===Ic(y.d).slice(0,c)){for(;C--;)y=Bn(y.times(y),c);return D.precision=k,t==null?(oi=!0,Bn(y,k)):y}y=_}}function Xi(e){for(var t=e.e*ei,i=e.d[0];i>=10;i/=10)t++;return t}function $1(e,t,i){if(t>e.LN10.sd())throw oi=!0,i&&(e.precision=i),Error(Rl+"LN10 precision limit exceeded");return Bn(new e(e.LN10),t)}function nd(e){for(var t="";e--;)t+="0";return t}function Av(e,t){var i,s,m,y,_,c,P,C,D,k=1,U=10,V=e,Q=V.d,Z=V.constructor,G=Z.precision;if(V.s<1)throw Error(Rl+(V.s?"NaN":"-Infinity"));if(V.eq(Xs))return new Z(0);if(t==null?(oi=!1,C=G):C=t,V.eq(10))return t==null&&(oi=!0),$1(Z,C);if(C+=U,Z.precision=C,i=Ic(Q),s=i.charAt(0),y=Xi(V),Math.abs(y)<15e14){for(;s<7&&s!=1||s==1&&i.charAt(1)>3;)V=V.times(e),i=Ic(V.d),s=i.charAt(0),k++;y=Xi(V),s>1?(V=new Z("0."+i),y++):V=new Z(s+"."+i.slice(1))}else return P=$1(Z,C+2,G).times(y+""),V=Av(new Z(s+"."+i.slice(1)),C-U).plus(P),Z.precision=G,t==null?(oi=!0,Bn(V,G)):V;for(c=_=V=Nh(V.minus(Xs),V.plus(Xs),C),D=Bn(V.times(V),C),m=3;;){if(_=Bn(_.times(D),C),P=c.plus(Nh(_,new Z(m),C)),Ic(P.d).slice(0,C)===Ic(c.d).slice(0,C))return c=c.times(2),y!==0&&(c=c.plus($1(Z,C+2,G).times(y+""))),c=Nh(c,new Z(k),C),Z.precision=G,t==null?(oi=!0,Bn(c,G)):c;c=P,m+=2}}function IM(e,t){var i,s,m;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(i<0&&(i=s),i+=+t.slice(s+1),t=t.substring(0,s)):i<0&&(i=t.length),s=0;t.charCodeAt(s)===48;)++s;for(m=t.length;t.charCodeAt(m-1)===48;)--m;if(t=t.slice(s,m),t){if(m-=s,i=i-s-1,e.e=jg(i/ei),e.d=[],s=(i+1)%ei,i<0&&(s+=ei),s<m){for(s&&e.d.push(+t.slice(0,s)),m-=ei;s<m;)e.d.push(+t.slice(s,s+=ei));t=t.slice(s),s=ei-t.length}else s-=m;for(;s--;)t+="0";if(e.d.push(+t),oi&&(e.e>tx||e.e<-tx))throw Error(hS+i)}else e.s=0,e.e=0,e.d=[0];return e}function Bn(e,t,i){var s,m,y,_,c,P,C,D,k=e.d;for(_=1,y=k[0];y>=10;y/=10)_++;if(s=t-_,s<0)s+=ei,m=t,C=k[D=0];else{if(D=Math.ceil((s+1)/ei),y=k.length,D>=y)return e;for(C=y=k[D],_=1;y>=10;y/=10)_++;s%=ei,m=s-ei+_}if(i!==void 0&&(y=Mp(10,_-m-1),c=C/y%10|0,P=t<0||k[D+1]!==void 0||C%y,P=i<4?(c||P)&&(i==0||i==(e.s<0?3:2)):c>5||c==5&&(i==4||P||i==6&&(s>0?m>0?C/Mp(10,_-m):0:k[D-1])%10&1||i==(e.s<0?8:7))),t<1||!k[0])return P?(y=Xi(e),k.length=1,t=t-y-1,k[0]=Mp(10,(ei-t%ei)%ei),e.e=jg(-t/ei)||0):(k.length=1,k[0]=e.e=e.s=0),e;if(s==0?(k.length=D,y=1,D--):(k.length=D+1,y=Mp(10,ei-s),k[D]=m>0?(C/Mp(10,_-m)%Mp(10,m)|0)*y:0),P)for(;;)if(D==0){(k[0]+=y)==Aa&&(k[0]=1,++e.e);break}else{if(k[D]+=y,k[D]!=Aa)break;k[D--]=0,y=1}for(s=k.length;k[--s]===0;)k.pop();if(oi&&(e.e>tx||e.e<-tx))throw Error(hS+Xi(e));return e}function iO(e,t){var i,s,m,y,_,c,P,C,D,k,U=e.constructor,V=U.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new U(e),oi?Bn(t,V):t;if(P=e.d,k=t.d,s=t.e,C=e.e,P=P.slice(),_=C-s,_){for(D=_<0,D?(i=P,_=-_,c=k.length):(i=k,s=C,c=P.length),m=Math.max(Math.ceil(V/ei),c)+2,_>m&&(_=m,i.length=1),i.reverse(),m=_;m--;)i.push(0);i.reverse()}else{for(m=P.length,c=k.length,D=m<c,D&&(c=m),m=0;m<c;m++)if(P[m]!=k[m]){D=P[m]<k[m];break}_=0}for(D&&(i=P,P=k,k=i,t.s=-t.s),c=P.length,m=k.length-c;m>0;--m)P[c++]=0;for(m=k.length;m>_;){if(P[--m]<k[m]){for(y=m;y&&P[--y]===0;)P[y]=Aa-1;--P[y],P[m]+=Aa}P[m]-=k[m]}for(;P[--c]===0;)P.pop();for(;P[0]===0;P.shift())--s;return P[0]?(t.d=P,t.e=s,oi?Bn(t,V):t):new U(0)}function Np(e,t,i){var s,m=Xi(e),y=Ic(e.d),_=y.length;return t?(i&&(s=i-_)>0?y=y.charAt(0)+"."+y.slice(1)+nd(s):_>1&&(y=y.charAt(0)+"."+y.slice(1)),y=y+(m<0?"e":"e+")+m):m<0?(y="0."+nd(-m-1)+y,i&&(s=i-_)>0&&(y+=nd(s))):m>=_?(y+=nd(m+1-_),i&&(s=i-m-1)>0&&(y=y+"."+nd(s))):((s=m+1)<_&&(y=y.slice(0,s)+"."+y.slice(s)),i&&(s=i-_)>0&&(m+1===_&&(y+="."),y+=nd(s))),e.s<0?"-"+y:y}function OM(e,t){if(e.length>t)return e.length=t,!0}function aO(e){var t,i,s;function m(y){var _=this;if(!(_ instanceof m))return new m(y);if(_.constructor=m,y instanceof m){_.s=y.s,_.e=y.e,_.d=(y=y.d)?y.slice():y;return}if(typeof y=="number"){if(y*0!==0)throw Error(kp+y);if(y>0)_.s=1;else if(y<0)y=-y,_.s=-1;else{_.s=0,_.e=0,_.d=[0];return}if(y===~~y&&y<1e7){_.e=0,_.d=[y];return}return IM(_,y.toString())}else if(typeof y!="string")throw Error(kp+y);if(y.charCodeAt(0)===45?(y=y.slice(1),_.s=-1):_.s=1,K6.test(y))IM(_,y);else throw Error(kp+y)}if(m.prototype=$t,m.ROUND_UP=0,m.ROUND_DOWN=1,m.ROUND_CEIL=2,m.ROUND_FLOOR=3,m.ROUND_HALF_UP=4,m.ROUND_HALF_DOWN=5,m.ROUND_HALF_EVEN=6,m.ROUND_HALF_CEIL=7,m.ROUND_HALF_FLOOR=8,m.clone=aO,m.config=m.set=Q6,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(i=s[t++])||(e[i]=this[i]);return m.config(e),m}function Q6(e){if(!e||typeof e!="object")throw Error(Rl+"Object expected");var t,i,s,m=["precision",1,Bg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<m.length;t+=3)if((s=e[i=m[t]])!==void 0)if(jg(s)===s&&s>=m[t+1]&&s<=m[t+2])this[i]=s;else throw Error(kp+i+": "+s);if((s=e[i="LN10"])!==void 0)if(s==Math.LN10)this[i]=new this(s);else throw Error(kp+i+": "+s);return this}var fS=aO(W6);Xs=new fS(1);const bn=fS;var J6=e=>e,oO={},sO=e=>e===oO,zM=e=>function t(){return arguments.length===0||arguments.length===1&&sO(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},lO=(e,t)=>e===1?t:zM(function(){for(var i=arguments.length,s=new Array(i),m=0;m<i;m++)s[m]=arguments[m];var y=s.filter(_=>_!==oO).length;return y>=e?t(...s):lO(e-y,zM(function(){for(var _=arguments.length,c=new Array(_),P=0;P<_;P++)c[P]=arguments[P];var C=s.map(D=>sO(D)?c.shift():D);return t(...C,...c)}))}),e8=e=>lO(e.length,e),Ww=(e,t)=>{for(var i=[],s=e;s<t;++s)i[s-e]=s;return i},t8=e8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(i=>t[i]).map(e)),r8=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];if(!i.length)return J6;var m=i.reverse(),y=m[0],_=m.slice(1);return function(){return _.reduce((c,P)=>P(c),y(...arguments))}};function uO(e){var t;return e===0?t=1:t=Math.floor(new bn(e).abs().log(10).toNumber())+1,t}function cO(e,t,i){for(var s=new bn(e),m=0,y=[];s.lt(t)&&m<1e5;)y.push(s.toNumber()),s=s.add(i),m++;return y}var hO=e=>{var[t,i]=e,[s,m]=[t,i];return t>i&&([s,m]=[i,t]),[s,m]},fO=(e,t,i)=>{if(e.lte(0))return new bn(0);var s=uO(e.toNumber()),m=new bn(10).pow(s),y=e.div(m),_=s!==1?.05:.1,c=new bn(Math.ceil(y.div(_).toNumber())).add(i).mul(_),P=c.mul(m);return t?new bn(P.toNumber()):new bn(Math.ceil(P.toNumber()))},n8=(e,t,i)=>{var s=new bn(1),m=new bn(e);if(!m.isint()&&i){var y=Math.abs(e);y<1?(s=new bn(10).pow(uO(e)-1),m=new bn(Math.floor(m.div(s).toNumber())).mul(s)):y>1&&(m=new bn(Math.floor(e)))}else e===0?m=new bn(Math.floor((t-1)/2)):i||(m=new bn(Math.floor(e)));var _=Math.floor((t-1)/2),c=r8(t8(P=>m.add(new bn(P-_).mul(s)).toNumber()),Ww);return c(0,t)},dO=function(t,i,s,m){var y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((i-t)/(s-1)))return{step:new bn(0),tickMin:new bn(0),tickMax:new bn(0)};var _=fO(new bn(i).sub(t).div(s-1),m,y),c;t<=0&&i>=0?c=new bn(0):(c=new bn(t).add(i).div(2),c=c.sub(new bn(c).mod(_)));var P=Math.ceil(c.sub(t).div(_).toNumber()),C=Math.ceil(new bn(i).sub(c).div(_).toNumber()),D=P+C+1;return D>s?dO(t,i,s,m,y+1):(D<s&&(C=i>0?C+(s-D):C,P=i>0?P:P+(s-D)),{step:_,tickMin:c.sub(new bn(P).mul(_)),tickMax:c.add(new bn(C).mul(_))})},i8=function(t){var[i,s]=t,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,_=Math.max(m,2),[c,P]=hO([i,s]);if(c===-1/0||P===1/0){var C=P===1/0?[c,...Ww(0,m-1).map(()=>1/0)]:[...Ww(0,m-1).map(()=>-1/0),P];return i>s?C.reverse():C}if(c===P)return n8(c,m,y);var{step:D,tickMin:k,tickMax:U}=dO(c,P,_,y,0),V=cO(k,U.add(new bn(.1).mul(D)),D);return i>s?V.reverse():V},a8=function(t,i){var[s,m]=t,y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[_,c]=hO([s,m]);if(_===-1/0||c===1/0)return[s,m];if(_===c)return[_];var P=Math.max(i,2),C=fO(new bn(c).sub(_).div(P-1),y,0),D=[...cO(new bn(_),new bn(c),C),c];return y===!1&&(D=D.map(k=>Math.round(k))),s>m?D.reverse():D},pO=e=>e.rootProps.maxBarSize,o8=e=>e.rootProps.barGap,mO=e=>e.rootProps.barCategoryGap,s8=e=>e.rootProps.barSize,Yx=e=>e.rootProps.stackOffset,gO=e=>e.rootProps.reverseStackOrder,dS=e=>e.options.chartName,pS=e=>e.rootProps.syncId,yO=e=>e.rootProps.syncMethod,mS=e=>e.options.eventEmitter,Ta={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},kh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},$s={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Wx=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},l8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:kh.angleAxisId,includeHidden:!1,name:void 0,reversed:kh.reversed,scale:kh.scale,tick:kh.tick,tickCount:void 0,ticks:void 0,type:kh.type,unit:void 0},u8={allowDataOverflow:$s.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$s.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$s.scale,tick:$s.tick,tickCount:$s.tickCount,ticks:void 0,type:$s.type,unit:void 0},c8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:kh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:kh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:kh.scale,tick:kh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},h8={allowDataOverflow:$s.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$s.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$s.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$s.scale,tick:$s.tick,tickCount:$s.tickCount,ticks:void 0,type:"category",unit:void 0},gS=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?c8:l8,yS=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?h8:u8,Kx=e=>e.polarOptions,vS=it([Wh,Kh,Ea],aN),vO=it([Kx,vS],(e,t)=>{if(e!=null)return Lu(e.innerRadius,t,0)}),_O=it([Kx,vS],(e,t)=>{if(e!=null)return Lu(e.outerRadius,t,t*.8)}),f8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:i}=e;return[t,i]},xO=it([Kx],f8);it([gS,xO],Wx);var bO=it([vS,vO,_O],(e,t,i)=>{if(!(e==null||t==null||i==null))return[t,i]});it([yS,bO],Wx);var wO=it([un,Kx,vO,_O,Wh,Kh],(e,t,i,s,m,y)=>{if(!(e!=="centric"&&e!=="radial"||t==null||i==null||s==null)){var{cx:_,cy:c,startAngle:P,endAngle:C}=t;return{cx:Lu(_,m,m/2),cy:Lu(c,y,y/2),innerRadius:i,outerRadius:s,startAngle:P,endAngle:C,clockWise:!1}}}),aa=(e,t)=>t,Qx=(e,t,i)=>i;function _S(e){return e?.id}function SO(e,t,i){var{chartData:s=[]}=t,{allowDuplicatedCategory:m,dataKey:y}=i,_=new Map;return e.forEach(c=>{var P,C=(P=c.data)!==null&&P!==void 0?P:s;if(!(C==null||C.length===0)){var D=_S(c);C.forEach((k,U)=>{var V=y==null||m?U:String($i(k,y,null)),Q=$i(k,c.dataKey,0),Z;_.has(V)?Z=_.get(V):Z={},Object.assign(Z,{[D]:Q}),_.set(V,Z)})}}),Array.from(_.values())}function Jx(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var eb=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function tb(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function d8(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return!1}var oa=e=>{var t=un(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Ng=e=>e.tooltip.settings.axisId;function kM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function rx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kM(Object(i),!0).forEach(function(s){p8(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function p8(e,t,i){return(t=m8(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function m8(e){var t=g8(e,"string");return typeof t=="symbol"?t:t+""}function g8(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Kw=[0,"auto"],wa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},AO=(e,t)=>e.cartesianAxis.xAxis[t],ef=(e,t)=>{var i=AO(e,t);return i??wa},Sa={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Kw,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Rv},TO=(e,t)=>e.cartesianAxis.yAxis[t],tf=(e,t)=>{var i=TO(e,t);return i??Sa},y8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},xS=(e,t)=>{var i=e.cartesianAxis.zAxis[t];return i??y8},Go=(e,t,i)=>{switch(t){case"xAxis":return ef(e,i);case"yAxis":return tf(e,i);case"zAxis":return xS(e,i);case"angleAxis":return gS(e,i);case"radiusAxis":return yS(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},v8=(e,t,i)=>{switch(t){case"xAxis":return ef(e,i);case"yAxis":return tf(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},Uv=(e,t,i)=>{switch(t){case"xAxis":return ef(e,i);case"yAxis":return tf(e,i);case"angleAxis":return gS(e,i);case"radiusAxis":return yS(e,i);default:throw new Error("Unexpected axis type: ".concat(t))}},EO=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function MO(e,t){return i=>{switch(e){case"xAxis":return"xAxisId"in i&&i.xAxisId===t;case"yAxis":return"yAxisId"in i&&i.yAxisId===t;case"zAxis":return"zAxisId"in i&&i.zAxisId===t;case"angleAxis":return"angleAxisId"in i&&i.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in i&&i.radiusAxisId===t;default:return!1}}}var rb=e=>e.graphicalItems.cartesianItems,_8=it([aa,Qx],MO),PO=(e,t,i)=>e.filter(i).filter(s=>t?.includeHidden===!0?!0:!s.hide),Vv=it([rb,Go,_8],PO,{memoizeOptions:{resultEqualityCheck:tb}}),CO=it([Vv],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Jx)),DO=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),x8=it([Vv],DO),IO=e=>e.map(t=>t.data).filter(Boolean).flat(1),b8=it([Vv],IO,{memoizeOptions:{resultEqualityCheck:tb}}),OO=(e,t)=>{var{chartData:i=[],dataStartIndex:s,dataEndIndex:m}=t;return e.length>0?e:i.slice(s,m+1)},bS=it([b8,cS],OO),zO=(e,t,i)=>t?.dataKey!=null?e.map(s=>({value:$i(s,t.dataKey)})):i.length>0?i.map(s=>s.dataKey).flatMap(s=>e.map(m=>({value:$i(m,s)}))):e.map(s=>({value:s})),nb=it([bS,Go,Vv],zO);function kO(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function x0(e){if(zc(e)||e instanceof Date){var t=Number(e);if(mi(t))return t}}function RM(e){if(Array.isArray(e)){var t=[x0(e[0]),x0(e[1])];return ld(t)?t:void 0}var i=x0(e);if(i!=null)return[i,i]}function Zh(e){return e.map(x0).filter($L)}function w8(e,t,i){return!i||typeof t!="number"||Ru(t)?[]:i.length?Zh(i.flatMap(s=>{var m=$i(e,s.dataKey),y,_;if(Array.isArray(m)?[y,_]=m:y=_=m,!(!mi(y)||!mi(_)))return[t-y,t+_]})):[]}var sa=e=>{var t=oa(e),i=Ng(e);return Uv(e,t,i)},Gv=it([sa],e=>e?.dataKey),S8=it([CO,cS,sa],SO),RO=(e,t,i,s)=>{var m={},y=t.reduce((_,c)=>{if(c.stackId==null)return _;var P=_[c.stackId];return P==null&&(P=[]),P.push(c),_[c.stackId]=P,_},m);return Object.fromEntries(Object.entries(y).map(_=>{var[c,P]=_,C=s?[...P].reverse():P,D=C.map(_S);return[c,{stackedData:fj(e,D,i),graphicalItems:C}]}))},Qw=it([S8,CO,Yx,gO],RO),LO=(e,t,i,s)=>{var{dataStartIndex:m,dataEndIndex:y}=t;if(s==null&&i!=="zAxis"){var _=yj(e,m,y);if(!(_!=null&&_[0]===0&&_[1]===0))return _}},A8=it([Go],e=>e.allowDataOverflow),wS=e=>{var t;if(e==null||!("domain"in e))return Kw;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var i=Zh(e.ticks);return[Math.min(...i),Math.max(...i)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:Kw},BO=it([Go],wS),jO=it([BO,A8],eO),T8=it([Qw,Jh,aa,jO],LO,{memoizeOptions:{resultEqualityCheck:eb}}),SS=e=>e.errorBars,E8=(e,t,i)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>kO(i,s)),nx=function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];var m=i.filter(Boolean);if(m.length!==0){var y=m.flat(),_=Math.min(...y),c=Math.max(...y);return[_,c]}},NO=(e,t,i,s,m)=>{var y,_;if(i.length>0&&e.forEach(c=>{i.forEach(P=>{var C,D,k=(C=s[P.id])===null||C===void 0?void 0:C.filter(oe=>kO(m,oe)),U=$i(c,(D=t.dataKey)!==null&&D!==void 0?D:P.dataKey),V=w8(c,U,k);if(V.length>=2){var Q=Math.min(...V),Z=Math.max(...V);(y==null||Q<y)&&(y=Q),(_==null||Z>_)&&(_=Z)}var G=RM(U);G!=null&&(y=y==null?G[0]:Math.min(y,G[0]),_=_==null?G[1]:Math.max(_,G[1]))})}),t?.dataKey!=null&&e.forEach(c=>{var P=RM($i(c,t.dataKey));P!=null&&(y=y==null?P[0]:Math.min(y,P[0]),_=_==null?P[1]:Math.max(_,P[1]))}),mi(y)&&mi(_))return[y,_]},M8=it([bS,Go,x8,SS,aa],NO,{memoizeOptions:{resultEqualityCheck:eb}});function P8(e){var{value:t}=e;if(zc(t)||t instanceof Date)return t}var C8=(e,t,i)=>{var s=e.map(P8).filter(m=>m!=null);return i&&(t.dataKey==null||t.allowDuplicatedCategory&&JC(s))?vI(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},FO=e=>e.referenceElements.dots,Fg=(e,t,i)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===i:s.yAxisId===i),D8=it([FO,aa,Qx],Fg),UO=e=>e.referenceElements.areas,I8=it([UO,aa,Qx],Fg),VO=e=>e.referenceElements.lines,O8=it([VO,aa,Qx],Fg),GO=(e,t)=>{if(e!=null){var i=Zh(e.map(s=>t==="xAxis"?s.x:s.y));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},z8=it(D8,aa,GO),qO=(e,t)=>{if(e!=null){var i=Zh(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},k8=it([I8,aa],qO);function R8(e){var t;if(e.x!=null)return Zh([e.x]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.x);return i==null||i.length===0?[]:Zh(i)}function L8(e){var t;if(e.y!=null)return Zh([e.y]);var i=(t=e.segment)===null||t===void 0?void 0:t.map(s=>s.y);return i==null||i.length===0?[]:Zh(i)}var HO=(e,t)=>{if(e!=null){var i=e.flatMap(s=>t==="xAxis"?R8(s):L8(s));if(i.length!==0)return[Math.min(...i),Math.max(...i)]}},B8=it([O8,aa],HO),j8=it(z8,B8,k8,(e,t,i)=>nx(e,i,t)),ZO=(e,t,i,s,m,y,_,c)=>{if(i!=null)return i;var P=_==="vertical"&&c==="xAxis"||_==="horizontal"&&c==="yAxis",C=P?nx(s,y,m):nx(y,m);return Y6(t,C,e.allowDataOverflow)},N8=it([Go,BO,jO,T8,M8,j8,un,aa],ZO,{memoizeOptions:{resultEqualityCheck:eb}}),F8=[0,1],$O=(e,t,i,s,m,y,_)=>{if(!((e==null||i==null||i.length===0)&&_===void 0)){var{dataKey:c,type:P}=e,C=hd(t,y);if(C&&c==null){var D;return vI(0,(D=i?.length)!==null&&D!==void 0?D:0)}return P==="category"?C8(s,e,C):m==="expand"?F8:_}},AS=it([Go,un,bS,nb,Yx,aa,N8],$O),XO=(e,t,i,s,m)=>{if(e!=null){var{scale:y,type:_}=e;if(y==="auto")return t==="radial"&&m==="radiusAxis"?"band":t==="radial"&&m==="angleAxis"?"linear":_==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!i)?"point":_==="category"?"band":"linear";if(typeof y=="string"){var c="scale".concat(Ov(y));return c in lv?c:"point"}}},qv=it([Go,un,EO,dS,aa],XO);function U8(e){if(e!=null){if(e in lv)return lv[e]();var t="scale".concat(Ov(e));if(t in lv)return lv[t]()}}function TS(e,t,i,s){if(!(i==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(i).range(s);var m=U8(t);if(m!=null){var y=m.domain(i).range(s);return sj(y),y}}}var YO=(e,t,i)=>{var s=wS(t);if(!(i!=="auto"&&i!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&ld(e))return i8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&ld(e))return a8(e,t.tickCount,t.allowDecimals)}},ES=it([AS,Uv,qv],YO),WO=(e,t,i,s)=>{if(s!=="angleAxis"&&e?.type==="number"&&ld(t)&&Array.isArray(i)&&i.length>0){var m=t[0],y=i[0],_=t[1],c=i[i.length-1];return[Math.min(m,y),Math.max(_,c)]}return t},V8=it([Go,AS,ES,aa],WO),G8=it(nb,Go,(e,t)=>{if(!(!t||t.type!=="number")){var i=1/0,s=Array.from(Zh(e.map(k=>k.value))).sort((k,U)=>k-U),m=s[0],y=s[s.length-1];if(m==null||y==null)return 1/0;var _=y-m;if(_===0)return 1/0;for(var c=0;c<s.length-1;c++){var P=s[c],C=s[c+1];if(!(P==null||C==null)){var D=C-P;i=Math.min(i,D)}}return i/_}}),KO=it(G8,un,mO,Ea,(e,t,i,s,m)=>m,(e,t,i,s,m)=>{if(!mi(e))return 0;var y=t==="vertical"?s.height:s.width;if(m==="gap")return e*y/2;if(m==="no-gap"){var _=Lu(i,e*y),c=e*y/2;return c-_-(c-_)/y*_}return 0}),q8=(e,t,i)=>{var s=ef(e,t);return s==null||typeof s.padding!="string"?0:KO(e,"xAxis",t,i,s.padding)},H8=(e,t,i)=>{var s=tf(e,t);return s==null||typeof s.padding!="string"?0:KO(e,"yAxis",t,i,s.padding)},Z8=it(ef,q8,(e,t)=>{var i,s;if(e==null)return{left:0,right:0};var{padding:m}=e;return typeof m=="string"?{left:t,right:t}:{left:((i=m.left)!==null&&i!==void 0?i:0)+t,right:((s=m.right)!==null&&s!==void 0?s:0)+t}}),$8=it(tf,H8,(e,t)=>{var i,s;if(e==null)return{top:0,bottom:0};var{padding:m}=e;return typeof m=="string"?{top:t,bottom:t}:{top:((i=m.top)!==null&&i!==void 0?i:0)+t,bottom:((s=m.bottom)!==null&&s!==void 0?s:0)+t}}),X8=it([Ea,Z8,kx,zx,(e,t,i)=>i],(e,t,i,s,m)=>{var{padding:y}=s;return m?[y.left,i.width-y.right]:[e.left+t.left,e.left+e.width-t.right]}),Y8=it([Ea,un,$8,kx,zx,(e,t,i)=>i],(e,t,i,s,m,y)=>{var{padding:_}=m;return y?[s.height-_.bottom,_.top]:t==="horizontal"?[e.top+e.height-i.bottom,e.top+i.top]:[e.top+i.top,e.top+e.height-i.bottom]}),Hv=(e,t,i,s)=>{var m;switch(t){case"xAxis":return X8(e,i,s);case"yAxis":return Y8(e,i,s);case"zAxis":return(m=xS(e,i))===null||m===void 0?void 0:m.range;case"angleAxis":return xO(e);case"radiusAxis":return bO(e,i);default:return}},QO=it([Go,Hv],Wx),ib=it([Go,qv,V8,QO],TS);it([Vv,SS,aa],E8);function JO(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ab=(e,t)=>t,ob=(e,t,i)=>i,W8=it(Ix,ab,ob,(e,t,i)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===i).sort(JO)),K8=it(Ox,ab,ob,(e,t,i)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===i).sort(JO)),ez=(e,t)=>({width:e.width,height:t.height}),Q8=(e,t)=>{var i=typeof t.width=="number"?t.width:Rv;return{width:i,height:e.height}},tz=it(Ea,ef,ez),J8=(e,t,i)=>{switch(t){case"top":return e.top;case"bottom":return i-e.bottom;default:return 0}},eU=(e,t,i)=>{switch(t){case"left":return e.left;case"right":return i-e.right;default:return 0}},tU=it(Kh,Ea,W8,ab,ob,(e,t,i,s,m)=>{var y={},_;return i.forEach(c=>{var P=ez(t,c);_==null&&(_=J8(t,s,e));var C=s==="top"&&!m||s==="bottom"&&m;y[c.id]=_-Number(C)*P.height,_+=(C?-1:1)*P.height}),y}),rU=it(Wh,Ea,K8,ab,ob,(e,t,i,s,m)=>{var y={},_;return i.forEach(c=>{var P=Q8(t,c);_==null&&(_=eU(t,s,e));var C=s==="left"&&!m||s==="right"&&m;y[c.id]=_-Number(C)*P.width,_+=(C?-1:1)*P.width}),y}),nU=(e,t)=>{var i=ef(e,t);if(i!=null)return tU(e,i.orientation,i.mirror)},iU=it([Ea,ef,nU,(e,t)=>t],(e,t,i,s)=>{if(t!=null){var m=i?.[s];return m==null?{x:e.left,y:0}:{x:e.left,y:m}}}),aU=(e,t)=>{var i=tf(e,t);if(i!=null)return rU(e,i.orientation,i.mirror)},oU=it([Ea,tf,aU,(e,t)=>t],(e,t,i,s)=>{if(t!=null){var m=i?.[s];return m==null?{x:0,y:e.top}:{x:m,y:e.top}}}),rz=it(Ea,tf,(e,t)=>{var i=typeof t.width=="number"?t.width:Rv;return{width:i,height:e.height}}),LM=(e,t,i)=>{switch(t){case"xAxis":return tz(e,i).width;case"yAxis":return rz(e,i).height;default:return}},nz=(e,t,i,s)=>{if(i!=null){var{allowDuplicatedCategory:m,type:y,dataKey:_}=i,c=hd(e,s),P=t.map(C=>C.value);if(_&&c&&y==="category"&&m&&JC(P))return P}},MS=it([un,nb,Go,aa],nz),iz=(e,t,i,s)=>{if(!(i==null||i.dataKey==null)){var{type:m,scale:y}=i,_=hd(e,s);if(_&&(m==="number"||y!=="auto"))return t.map(c=>c.value)}},PS=it([un,nb,Uv,aa],iz),BM=it([un,v8,qv,ib,MS,PS,Hv,ES,aa],(e,t,i,s,m,y,_,c,P)=>{if(t!=null){var C=hd(e,P);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:P,categoricalDomain:y,duplicateDomain:m,isCategorical:C,niceTicks:c,range:_,realScaleType:i,scale:s}}}),sU=(e,t,i,s,m,y,_,c,P)=>{if(!(t==null||s==null)){var C=hd(e,P),{type:D,ticks:k,tickCount:U}=t,V=i==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,Q=D==="category"&&s.bandwidth?s.bandwidth()/V:0;Q=P==="angleAxis"&&y!=null&&y.length>=2?_s(y[0]-y[1])*2*Q:Q;var Z=k||m;if(Z){var G=Z.map((oe,he)=>{var me=_?_.indexOf(oe):oe;return{index:he,coordinate:s(me)+Q,value:oe,offset:Q}});return G.filter(oe=>mi(oe.coordinate))}return C&&c?c.map((oe,he)=>({coordinate:s(oe)+Q,value:oe,index:he,offset:Q})).filter(oe=>mi(oe.coordinate)):s.ticks?s.ticks(U).map(oe=>({coordinate:s(oe)+Q,value:oe,offset:Q})):s.domain().map((oe,he)=>({coordinate:s(oe)+Q,value:_?_[oe]:oe,index:he,offset:Q}))}},az=it([un,Uv,qv,ib,ES,Hv,MS,PS,aa],sU),lU=(e,t,i,s,m,y,_)=>{if(!(t==null||i==null||s==null||s[0]===s[1])){var c=hd(e,_),{tickCount:P}=t,C=0;return C=_==="angleAxis"&&s?.length>=2?_s(s[0]-s[1])*2*C:C,c&&y?y.map((D,k)=>({coordinate:i(D)+C,value:D,index:k,offset:C})):i.ticks?i.ticks(P).map(D=>({coordinate:i(D)+C,value:D,offset:C})):i.domain().map((D,k)=>({coordinate:i(D)+C,value:m?m[D]:D,index:k,offset:C}))}},ud=it([un,Uv,ib,Hv,MS,PS,aa],lU),cd=it(Go,ib,(e,t)=>{if(!(e==null||t==null))return rx(rx({},e),{},{scale:t})}),uU=it([Go,qv,AS,QO],TS);it((e,t,i)=>xS(e,i),uU,(e,t)=>{if(!(e==null||t==null))return rx(rx({},e),{},{scale:t})});var cU=it([un,Ix,Ox],(e,t,i)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return i.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),oz=e=>e.options.defaultTooltipEventType,sz=e=>e.options.validateTooltipEventTypes;function lz(e,t,i){if(e==null)return t;var s=e?"axis":"item";return i==null?t:i.includes(s)?s:t}function CS(e,t){var i=oz(e),s=sz(e);return lz(t,i,s)}function hU(e){return ir(t=>CS(t,e))}var uz=(e,t)=>{var i,s=Number(t);if(!(Ru(s)||t==null))return s>=0?e==null||(i=e[s])===null||i===void 0?void 0:i.value:void 0},fU=e=>e.tooltip.settings,ad={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},dU={itemInteraction:{click:ad,hover:ad},axisInteraction:{click:ad,hover:ad},keyboardInteraction:ad,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},cz=bs({name:"tooltip",initialState:dU,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:ai()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:i,next:s}=t.payload,m=Ou(e).tooltipItemPayloads.indexOf(i);m>-1&&(e.tooltipItemPayloads[m]=s)},prepare:ai()},removeTooltipEntrySettings:{reducer(e,t){var i=Ou(e).tooltipItemPayloads.indexOf(t.payload);i>-1&&e.tooltipItemPayloads.splice(i,1)},prepare:ai()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:pU,replaceTooltipEntrySettings:mU,removeTooltipEntrySettings:gU,setTooltipSettingsState:yU,setActiveMouseOverItemIndex:hz,mouseLeaveItem:vU,mouseLeaveChart:fz,setActiveClickItemIndex:_U,setMouseOverAxisIndex:dz,setMouseClickAxisIndex:xU,setSyncInteraction:Jw,setKeyboardInteraction:e2}=cz.actions,bU=cz.reducer;function jM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function c0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(i),!0).forEach(function(s){wU(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):jM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function wU(e,t,i){return(t=SU(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SU(e){var t=AU(e,"string");return typeof t=="symbol"?t:t+""}function AU(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TU(e,t,i){return t==="axis"?i==="click"?e.axisInteraction.click:e.axisInteraction.hover:i==="click"?e.itemInteraction.click:e.itemInteraction.hover}function EU(e){return e.index!=null}var pz=(e,t,i,s)=>{if(t==null)return ad;var m=TU(e,t,i);if(m==null)return ad;if(m.active)return m;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var y=e.settings.active===!0;if(EU(m)){if(y)return c0(c0({},m),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s,graphicalItemId:void 0};return c0(c0({},ad),{},{coordinate:m.coordinate})};function MU(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var i=Number(e);return Number.isFinite(i)?i:void 0}function PU(e,t){var i=MU(e),s=t[0],m=t[1];if(i===void 0)return!1;var y=Math.min(s,m),_=Math.max(s,m);return i>=y&&i<=_}function CU(e,t,i){if(i==null||t==null)return!0;var s=$i(e,t);return s==null||!ld(i)?!0:PU(s,i)}var DS=(e,t,i,s)=>{var m=e?.index;if(m==null)return null;var y=Number(m);if(!mi(y))return m;var _=0,c=1/0;t.length>0&&(c=t.length-1);var P=Math.max(_,Math.min(y,c)),C=t[P];return C==null||CU(C,i,s)?String(P):null},mz=(e,t,i,s,m,y,_,c)=>{if(!(y==null||c==null)){var P=_[0],C=P==null?void 0:c(P.positions,y);if(C!=null)return C;var D=m?.[Number(y)];if(D)return i==="horizontal"?{x:D.coordinate,y:(s.top+t)/2}:{x:(s.left+e)/2,y:D.coordinate}}},gz=(e,t,i,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var m;if(i==="hover"?m=e.itemInteraction.hover.graphicalItemId:m=e.itemInteraction.click.graphicalItemId,m==null&&s!=null){var y=e.tooltipItemPayloads[0];return y!=null?[y]:[]}return e.tooltipItemPayloads.filter(_=>{var c;return((c=_.settings)===null||c===void 0?void 0:c.graphicalItemId)===m})},Zv=e=>e.options.tooltipPayloadSearcher,Ug=e=>e.tooltip;function NM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function FM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NM(Object(i),!0).forEach(function(s){DU(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function DU(e,t,i){return(t=IU(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function IU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zU(e,t){return e??t}var yz=(e,t,i,s,m,y,_)=>{if(!(t==null||y==null)){var{chartData:c,computedData:P,dataStartIndex:C,dataEndIndex:D}=i,k=[];return e.reduce((U,V)=>{var Q,{dataDefinedOnItem:Z,settings:G}=V,oe=zU(Z,c),he=Array.isArray(oe)?ZD(oe,C,D):oe,me=(Q=G?.dataKey)!==null&&Q!==void 0?Q:s,Ce=G?.nameKey,be;if(s&&Array.isArray(he)&&!Array.isArray(he[0])&&_==="axis"?be=eD(he,s,m):be=y(he,t,P,Ce),Array.isArray(be))be.forEach(je=>{var gt=FM(FM({},G),{},{name:je.name,unit:je.unit,color:void 0,fill:void 0});U.push(WT({tooltipEntrySettings:gt,dataKey:je.dataKey,payload:je.payload,value:$i(je.payload,je.dataKey),name:je.name}))});else{var ke;U.push(WT({tooltipEntrySettings:G,dataKey:me,payload:be,value:$i(be,me),name:(ke=$i(be,Ce))!==null&&ke!==void 0?ke:G?.name}))}return U},k)}},IS=it([sa,un,EO,dS,oa],XO),kU=it([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),RU=it([oa,Ng],MO),Vg=it([kU,sa,RU],PO,{memoizeOptions:{resultEqualityCheck:tb}}),LU=it([Vg],e=>e.filter(Jx)),BU=it([Vg],IO,{memoizeOptions:{resultEqualityCheck:tb}}),Gg=it([BU,Jh],OO),jU=it([LU,Jh,sa],SO),OS=it([Gg,sa,Vg],zO),vz=it([sa],wS),NU=it([sa],e=>e.allowDataOverflow),_z=it([vz,NU],eO),FU=it([Vg],e=>e.filter(Jx)),UU=it([jU,FU,Yx,gO],RO),VU=it([UU,Jh,oa,_z],LO),GU=it([Vg],DO),qU=it([Gg,sa,GU,SS,oa],NO,{memoizeOptions:{resultEqualityCheck:eb}}),HU=it([FO,oa,Ng],Fg),ZU=it([HU,oa],GO),$U=it([UO,oa,Ng],Fg),XU=it([$U,oa],qO),YU=it([VO,oa,Ng],Fg),WU=it([YU,oa],HO),KU=it([ZU,WU,XU],nx),QU=it([sa,vz,_z,VU,qU,KU,un,oa],ZO),$v=it([sa,un,Gg,OS,Yx,oa,QU],$O),JU=it([$v,sa,IS],YO),eV=it([sa,$v,JU,oa],WO),xz=e=>{var t=oa(e),i=Ng(e),s=!1;return Hv(e,t,i,s)},bz=it([sa,xz],Wx),wz=it([sa,IS,eV,bz],TS),tV=it([un,OS,sa,oa],nz),rV=it([un,OS,sa,oa],iz),nV=(e,t,i,s,m,y,_,c)=>{if(t){var{type:P}=t,C=hd(e,c);if(s){var D=i==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,k=P==="category"&&s.bandwidth?s.bandwidth()/D:0;return k=c==="angleAxis"&&m!=null&&m?.length>=2?_s(m[0]-m[1])*2*k:k,C&&_?_.map((U,V)=>({coordinate:s(U)+k,value:U,index:V,offset:k})):s.domain().map((U,V)=>({coordinate:s(U)+k,value:y?y[U]:U,index:V,offset:k}))}}},rf=it([un,sa,IS,wz,xz,tV,rV,oa],nV),zS=it([oz,sz,fU],(e,t,i)=>lz(i.shared,e,t)),Sz=e=>e.tooltip.settings.trigger,kS=e=>e.tooltip.settings.defaultIndex,Xv=it([Ug,zS,Sz,kS],pz),Fp=it([Xv,Gg,Gv,$v],DS),Az=it([rf,Fp],uz),Tz=it([Xv],e=>{if(e)return e.dataKey});it([Xv],e=>{if(e)return e.graphicalItemId});var Ez=it([Ug,zS,Sz,kS],gz),iV=it([Wh,Kh,un,Ea,rf,kS,Ez,Zv],mz),aV=it([Xv,iV],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),oV=it([Xv],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),sV=it([Ez,Fp,Jh,Gv,Az,Zv,zS],yz),lV=it([sV],e=>{if(e!=null){var t=e.map(i=>i.payload).filter(i=>i!=null);return Array.from(new Set(t))}});function UM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function VM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UM(Object(i),!0).forEach(function(s){uV(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function uV(e,t,i){return(t=cV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function cV(e){var t=hV(e,"string");return typeof t=="symbol"?t:t+""}function hV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fV=()=>ir(sa),dV=()=>{var e=fV(),t=ir(rf),i=ir(wz);return Mg(!e||!i?void 0:VM(VM({},e),{},{scale:i}),t)};function GM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function gg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(i),!0).forEach(function(s){pV(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function pV(e,t,i){return(t=mV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function mV(e){var t=gV(e,"string");return typeof t=="symbol"?t:t+""}function gV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yV=(e,t,i,s)=>{var m=t.find(y=>y&&y.index===i);if(m){if(e==="horizontal")return{x:m.coordinate,y:s.chartY};if(e==="vertical")return{x:s.chartX,y:m.coordinate}}return{x:0,y:0}},vV=(e,t,i,s)=>{var m=t.find(C=>C&&C.index===i);if(m){if(e==="centric"){var y=m.coordinate,{radius:_}=s;return gg(gg(gg({},s),$a(s.cx,s.cy,_,y)),{},{angle:y,radius:_})}var c=m.coordinate,{angle:P}=s;return gg(gg(gg({},s),$a(s.cx,s.cy,c,P)),{},{angle:P,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function _V(e,t){var{chartX:i,chartY:s}=e;return i>=t.left&&i<=t.left+t.width&&s>=t.top&&s<=t.top+t.height}var Mz=(e,t,i,s,m)=>{var y,_=(y=t?.length)!==null&&y!==void 0?y:0;if(_<=1||e==null)return 0;if(s==="angleAxis"&&m!=null&&Math.abs(Math.abs(m[1]-m[0])-360)<=1e-6)for(var c=0;c<_;c++){var P,C,D,k,U,V=c>0?(P=i[c-1])===null||P===void 0?void 0:P.coordinate:(C=i[_-1])===null||C===void 0?void 0:C.coordinate,Q=(D=i[c])===null||D===void 0?void 0:D.coordinate,Z=c>=_-1?(k=i[0])===null||k===void 0?void 0:k.coordinate:(U=i[c+1])===null||U===void 0?void 0:U.coordinate,G=void 0;if(!(V==null||Q==null||Z==null))if(_s(Q-V)!==_s(Z-Q)){var oe=[];if(_s(Z-Q)===_s(m[1]-m[0])){G=Z;var he=Q+m[1]-m[0];oe[0]=Math.min(he,(he+V)/2),oe[1]=Math.max(he,(he+V)/2)}else{G=V;var me=Z+m[1]-m[0];oe[0]=Math.min(Q,(me+Q)/2),oe[1]=Math.max(Q,(me+Q)/2)}var Ce=[Math.min(Q,(G+Q)/2),Math.max(Q,(G+Q)/2)];if(e>Ce[0]&&e<=Ce[1]||e>=oe[0]&&e<=oe[1]){var be;return(be=i[c])===null||be===void 0?void 0:be.index}}else{var ke=Math.min(V,Z),je=Math.max(V,Z);if(e>(ke+Q)/2&&e<=(je+Q)/2){var gt;return(gt=i[c])===null||gt===void 0?void 0:gt.index}}}else if(t)for(var bt=0;bt<_;bt++){var It=t[bt];if(It!=null){var yt=t[bt+1],De=t[bt-1];if(bt===0&&yt!=null&&e<=(It.coordinate+yt.coordinate)/2||bt===_-1&&De!=null&&e>(It.coordinate+De.coordinate)/2||bt>0&&bt<_-1&&De!=null&&yt!=null&&e>(It.coordinate+De.coordinate)/2&&e<=(It.coordinate+yt.coordinate)/2)return It.index}}return-1},xV=()=>ir(dS),RS=(e,t)=>t,Pz=(e,t,i)=>i,LS=(e,t,i,s)=>s,bV=it(rf,e=>xx(e,t=>t.coordinate)),BS=it([Ug,RS,Pz,LS],pz),jS=it([BS,Gg,Gv,$v],DS),wV=(e,t,i)=>{if(t!=null){var s=Ug(e);return t==="axis"?i==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:i==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},Cz=it([Ug,RS,Pz,LS],gz),ix=it([Wh,Kh,un,Ea,rf,LS,Cz,Zv],mz),SV=it([BS,ix],(e,t)=>{var i;return(i=e.coordinate)!==null&&i!==void 0?i:t}),Dz=it([rf,jS],uz),AV=it([Cz,jS,Jh,Gv,Dz,Zv,RS],yz),TV=it([BS,jS],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),EV=(e,t,i,s,m,y,_)=>{if(!(!e||!i||!s||!m)&&_V(e,_)){var c=vj(e,t),P=Mz(c,y,m,i,s),C=yV(t,m,P,e);return{activeIndex:String(P),activeCoordinate:C}}},MV=(e,t,i,s,m,y,_)=>{if(!(!e||!s||!m||!y||!i)){var c=cN(e,i);if(c){var P=_j(c,t),C=Mz(P,_,y,s,m),D=vV(t,y,C,c);return{activeIndex:String(C),activeCoordinate:D}}}},PV=(e,t,i,s,m,y,_,c)=>{if(!(!e||!t||!s||!m||!y))return t==="horizontal"||t==="vertical"?EV(e,t,s,m,y,_,c):MV(e,t,i,s,m,y,_)},CV=it(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,i)=>i,(e,t,i)=>{if(t!=null){var s=e[t];if(s!=null)return i?s.panoramaElement:s.element}}),DV=it(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(s=>parseInt(s,10)).concat(Object.values(Ta)),i=Array.from(new Set(t));return i.sort((s,m)=>s-m)},{memoizeOptions:{resultEqualityCheck:d8}});function qM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function HM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?qM(Object(i),!0).forEach(function(s){IV(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):qM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function IV(e,t,i){return(t=OV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function OV(e){var t=zV(e,"string");return typeof t=="symbol"?t:t+""}function zV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kV={},RV={zIndexMap:Object.values(Ta).reduce((e,t)=>HM(HM({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),kV)},LV=new Set(Object.values(Ta));function BV(e){return LV.has(e)}var Iz=bs({name:"zIndex",initialState:RV,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]?e.zIndexMap[i].consumers+=1:e.zIndexMap[i]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:ai()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(e.zIndexMap[i].consumers-=1,e.zIndexMap[i].consumers<=0&&!BV(i)&&delete e.zIndexMap[i])},prepare:ai()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i,element:s,isPanorama:m}=t.payload;e.zIndexMap[i]?m?e.zIndexMap[i].panoramaElement=s:e.zIndexMap[i].element=s:e.zIndexMap[i]={consumers:0,element:m?void 0:s,panoramaElement:m?s:void 0}},prepare:ai()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:i}=t.payload;e.zIndexMap[i]&&(t.payload.isPanorama?e.zIndexMap[i].panoramaElement=void 0:e.zIndexMap[i].element=void 0)},prepare:ai()}}}),{registerZIndexPortal:jV,unregisterZIndexPortal:NV,registerZIndexPortalElement:FV,unregisterZIndexPortalElement:UV}=Iz.actions,VV=Iz.reducer;function jl(e){var{zIndex:t,children:i}=e,s=Rj(),m=s&&t!==void 0&&t!==0,y=vo(),_=Li();H.useLayoutEffect(()=>m?(_(jV({zIndex:t})),()=>{_(NV({zIndex:t}))}):_x,[_,t,m]);var c=ir(P=>CV(P,t,y));return m?c?PC.createPortal(i,c):null:i}function t2(){return t2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},t2.apply(null,arguments)}function ZM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function h0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?ZM(Object(i),!0).forEach(function(s){GV(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ZM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function GV(e,t,i){return(t=qV(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function qV(e){var t=HV(e,"string");return typeof t=="symbol"?t:t+""}function HV(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZV(e){var{cursor:t,cursorComp:i,cursorProps:s}=e;return H.isValidElement(t)?H.cloneElement(t,s):H.createElement(i,s)}function $V(e){var t,{coordinate:i,payload:s,index:m,offset:y,tooltipAxisBandSize:_,layout:c,cursor:P,tooltipEventType:C,chartName:D}=e,k=i,U=s,V=m;if(!P||!k||D!=="ScatterChart"&&C!=="axis")return null;var Q,Z,G;if(D==="ScatterChart")Q=k,Z=S4,G=Ta.cursorLine;else if(D==="BarChart")Q=A4(c,k,y,_),Z=pI,G=Ta.cursorRectangle;else if(c==="radial"&&nD(k)){var{cx:oe,cy:he,radius:me,startAngle:Ce,endAngle:be}=mI(k);Q={cx:oe,cy:he,startAngle:Ce,endAngle:be,innerRadius:me,outerRadius:me},Z=yI,G=Ta.cursorLine}else Q={points:pN(c,k,y)},Z=uI,G=Ta.cursorLine;var ke=typeof P=="object"&&"className"in P?P.className:void 0,je=h0(h0(h0(h0({stroke:"#ccc",pointerEvents:"none"},y),Q),Iv(P)),{},{payload:U,payloadIndex:V,className:jn("recharts-tooltip-cursor",ke)});return H.createElement(jl,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:G},H.createElement(ZV,{cursor:P,cursorComp:Z,cursorProps:je}))}function XV(e){var t=dV(),i=QD(),s=Rg(),m=xV();return t==null||i==null||s==null||m==null?null:H.createElement($V,t2({},e,{offset:i,layout:s,tooltipAxisBandSize:t,chartName:m}))}var Oz=H.createContext(null),YV=()=>H.useContext(Oz),X1={exports:{}},$M;function WV(){return $M||($M=1,(function(e){var t=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function m(P,C,D){this.fn=P,this.context=C,this.once=D||!1}function y(P,C,D,k,U){if(typeof D!="function")throw new TypeError("The listener must be a function");var V=new m(D,k||P,U),Q=i?i+C:C;return P._events[Q]?P._events[Q].fn?P._events[Q]=[P._events[Q],V]:P._events[Q].push(V):(P._events[Q]=V,P._eventsCount++),P}function _(P,C){--P._eventsCount===0?P._events=new s:delete P._events[C]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var C=[],D,k;if(this._eventsCount===0)return C;for(k in D=this._events)t.call(D,k)&&C.push(i?k.slice(1):k);return Object.getOwnPropertySymbols?C.concat(Object.getOwnPropertySymbols(D)):C},c.prototype.listeners=function(C){var D=i?i+C:C,k=this._events[D];if(!k)return[];if(k.fn)return[k.fn];for(var U=0,V=k.length,Q=new Array(V);U<V;U++)Q[U]=k[U].fn;return Q},c.prototype.listenerCount=function(C){var D=i?i+C:C,k=this._events[D];return k?k.fn?1:k.length:0},c.prototype.emit=function(C,D,k,U,V,Q){var Z=i?i+C:C;if(!this._events[Z])return!1;var G=this._events[Z],oe=arguments.length,he,me;if(G.fn){switch(G.once&&this.removeListener(C,G.fn,void 0,!0),oe){case 1:return G.fn.call(G.context),!0;case 2:return G.fn.call(G.context,D),!0;case 3:return G.fn.call(G.context,D,k),!0;case 4:return G.fn.call(G.context,D,k,U),!0;case 5:return G.fn.call(G.context,D,k,U,V),!0;case 6:return G.fn.call(G.context,D,k,U,V,Q),!0}for(me=1,he=new Array(oe-1);me<oe;me++)he[me-1]=arguments[me];G.fn.apply(G.context,he)}else{var Ce=G.length,be;for(me=0;me<Ce;me++)switch(G[me].once&&this.removeListener(C,G[me].fn,void 0,!0),oe){case 1:G[me].fn.call(G[me].context);break;case 2:G[me].fn.call(G[me].context,D);break;case 3:G[me].fn.call(G[me].context,D,k);break;case 4:G[me].fn.call(G[me].context,D,k,U);break;default:if(!he)for(be=1,he=new Array(oe-1);be<oe;be++)he[be-1]=arguments[be];G[me].fn.apply(G[me].context,he)}}return!0},c.prototype.on=function(C,D,k){return y(this,C,D,k,!1)},c.prototype.once=function(C,D,k){return y(this,C,D,k,!0)},c.prototype.removeListener=function(C,D,k,U){var V=i?i+C:C;if(!this._events[V])return this;if(!D)return _(this,V),this;var Q=this._events[V];if(Q.fn)Q.fn===D&&(!U||Q.once)&&(!k||Q.context===k)&&_(this,V);else{for(var Z=0,G=[],oe=Q.length;Z<oe;Z++)(Q[Z].fn!==D||U&&!Q[Z].once||k&&Q[Z].context!==k)&&G.push(Q[Z]);G.length?this._events[V]=G.length===1?G[0]:G:_(this,V)}return this},c.prototype.removeAllListeners=function(C){var D;return C?(D=i?i+C:C,this._events[D]&&_(this,D)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c})(X1)),X1.exports}var KV=WV();const QV=Xh(KV);var Tv=new QV,r2="recharts.syncEvent.tooltip",XM="recharts.syncEvent.brush";function zz(e,t){if(t){var i=Number.parseInt(t,10);if(!Ru(i))return e?.[i]}}var JV={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},kz=bs({name:"options",initialState:JV,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),eG=kz.reducer,{createEventEmitter:tG}=kz.actions;function rG(e){return e.tooltip.syncInteraction}var nG={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},Rz=bs({name:"chartData",initialState:nG,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:i,endIndex:s}=t.payload;i!=null&&(e.dataStartIndex=i),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:YM,setDataStartEndIndexes:iG,setComputedData:_X}=Rz.actions,aG=Rz.reducer,oG=["x","y"];function WM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function yg(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WM(Object(i),!0).forEach(function(s){sG(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function sG(e,t,i){return(t=lG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lG(e){var t=uG(e,"string");return typeof t=="symbol"?t:t+""}function uG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cG(e,t){if(e==null)return{};var i,s,m=hG(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function hG(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function fG(){var e=ir(pS),t=ir(mS),i=Li(),s=ir(yO),m=ir(rf),y=Rg(),_=Rx(),c=ir(P=>P.rootProps.className);H.useEffect(()=>{if(e==null)return _x;var P=(C,D,k)=>{if(t!==k&&e===C){if(s==="index"){var U;if(_&&D!==null&&D!==void 0&&(U=D.payload)!==null&&U!==void 0&&U.coordinate&&D.payload.sourceViewBox){var V=D.payload.coordinate,{x:Q,y:Z}=V,G=cG(V,oG),{x:oe,y:he,width:me,height:Ce}=D.payload.sourceViewBox,be=yg(yg({},G),{},{x:_.x+(me?(Q-oe)/me:0)*_.width,y:_.y+(Ce?(Z-he)/Ce:0)*_.height});i(yg(yg({},D),{},{payload:yg(yg({},D.payload),{},{coordinate:be})}))}else i(D);return}if(m!=null){var ke;if(typeof s=="function"){var je={activeTooltipIndex:D.payload.index==null?void 0:Number(D.payload.index),isTooltipActive:D.payload.active,activeIndex:D.payload.index==null?void 0:Number(D.payload.index),activeLabel:D.payload.label,activeDataKey:D.payload.dataKey,activeCoordinate:D.payload.coordinate},gt=s(m,je);ke=m[gt]}else s==="value"&&(ke=m.find(Le=>String(Le.value)===D.payload.label));var{coordinate:bt}=D.payload;if(ke==null||D.payload.active===!1||bt==null||_==null){i(Jw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:It,y:yt}=bt,De=Math.min(It,_.x+_.width),Tt=Math.min(yt,_.y+_.height),Ct={x:y==="horizontal"?ke.coordinate:De,y:y==="horizontal"?Tt:ke.coordinate},Ft=Jw({active:D.payload.active,coordinate:Ct,dataKey:D.payload.dataKey,index:String(ke.index),label:D.payload.label,sourceViewBox:D.payload.sourceViewBox,graphicalItemId:D.payload.graphicalItemId});i(Ft)}}};return Tv.on(r2,P),()=>{Tv.off(r2,P)}},[c,i,t,e,s,m,y,_])}function dG(){var e=ir(pS),t=ir(mS),i=Li();H.useEffect(()=>{if(e==null)return _x;var s=(m,y,_)=>{t!==_&&e===m&&i(iG(y))};return Tv.on(XM,s),()=>{Tv.off(XM,s)}},[i,t,e])}function pG(){var e=Li();H.useEffect(()=>{e(tG())},[e]),fG(),dG()}function mG(e,t,i,s,m,y){var _=ir(V=>wV(V,e,t)),c=ir(mS),P=ir(pS),C=ir(yO),D=ir(rG),k=D?.active,U=Rx();H.useEffect(()=>{if(!k&&P!=null&&c!=null){var V=Jw({active:y,coordinate:i,dataKey:_,index:m,label:typeof s=="number"?String(s):s,sourceViewBox:U,graphicalItemId:void 0});Tv.emit(r2,P,V,c)}},[k,i,_,m,s,c,P,C,y,U])}function KM(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function QM(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?KM(Object(i),!0).forEach(function(s){gG(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):KM(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function gG(e,t,i){return(t=yG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function yG(e){var t=vG(e,"string");return typeof t=="symbol"?t:t+""}function vG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _G(e){return e.dataKey}function xG(e,t){return H.isValidElement(e)?H.cloneElement(e,t):typeof e=="function"?H.createElement(e,t):H.createElement(r4,t)}var JM=[],bG={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function eP(e){var t,i,s=Vo(e,bG),{active:m,allowEscapeViewBox:y,animationDuration:_,animationEasing:c,content:P,filterNull:C,isAnimationActive:D,offset:k,payloadUniqBy:U,position:V,reverseDirection:Q,useTranslate3d:Z,wrapperStyle:G,cursor:oe,shared:he,trigger:me,defaultIndex:Ce,portal:be,axisId:ke}=s,je=Li(),gt=typeof Ce=="number"?String(Ce):Ce;H.useEffect(()=>{je(yU({shared:he,trigger:me,axisId:ke,active:m,defaultIndex:gt}))},[je,he,me,ke,m,gt]);var bt=Rx(),It=lI(),yt=hU(he),{activeIndex:De,isActive:Tt}=(t=ir(Jt=>TV(Jt,yt,me,gt)))!==null&&t!==void 0?t:{},Ct=ir(Jt=>AV(Jt,yt,me,gt)),Ft=ir(Jt=>Dz(Jt,yt,me,gt)),Le=ir(Jt=>SV(Jt,yt,me,gt)),We=Ct,_t=YV(),at=(i=m??Tt)!==null&&i!==void 0?i:!1,[Kt,Oe]=r5([We,at]),ot=yt==="axis"?Ft:void 0;mG(yt,me,Le,ot,De,at);var Dt=be??_t;if(Dt==null||bt==null||yt==null)return null;var Rt=We??JM;at||(Rt=JM),C&&Rt.length&&(Rt=PB(Rt.filter(Jt=>Jt.value!=null&&(Jt.hide!==!0||s.includeHidden)),U,_G));var Gt=Rt.length>0,Qt=H.createElement(u4,{allowEscapeViewBox:y,animationDuration:_,animationEasing:c,isAnimationActive:D,active:at,coordinate:Le,hasPayload:Gt,offset:k,position:V,reverseDirection:Q,useTranslate3d:Z,viewBox:bt,wrapperStyle:G,lastBoundingBox:Kt,innerRef:Oe,hasPortalFromProps:!!be},xG(P,QM(QM({},s),{},{payload:Rt,label:ot,active:at,activeIndex:De,coordinate:Le,accessibilityLayer:It})));return H.createElement(H.Fragment,null,PC.createPortal(Qt,Dt),at&&H.createElement(XV,{cursor:oe,tooltipEventType:yt,coordinate:Le,payload:Rt,index:De}))}var Lz=e=>null;Lz.displayName="Cell";function wG(e,t,i){return(t=SG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function SG(e){var t=AG(e,"string");return typeof t=="symbol"?t:t+""}function AG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TG{constructor(t){wG(this,"cache",new Map),this.maxSize=t}get(t){var i=this.cache.get(t);return i!==void 0&&(this.cache.delete(t),this.cache.set(t,i)),i}set(t,i){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;s!=null&&this.cache.delete(s)}this.cache.set(t,i)}clear(){this.cache.clear()}size(){return this.cache.size}}function tP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function EG(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(i),!0).forEach(function(s){MG(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):tP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function MG(e,t,i){return(t=PG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function PG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DG={cacheSize:2e3,enableCache:!0},Bz=EG({},DG),rP=new TG(Bz.cacheSize),IG={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},nP="recharts_measurement_span";function OG(e,t){var i=t.fontSize||"",s=t.fontFamily||"",m=t.fontWeight||"",y=t.fontStyle||"",_=t.letterSpacing||"",c=t.textTransform||"";return"".concat(e,"|").concat(i,"|").concat(s,"|").concat(m,"|").concat(y,"|").concat(_,"|").concat(c)}var iP=(e,t)=>{try{var i=document.getElementById(nP);i||(i=document.createElement("span"),i.setAttribute("id",nP),i.setAttribute("aria-hidden","true"),document.body.appendChild(i)),Object.assign(i.style,IG,t),i.textContent="".concat(e);var s=i.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},uv=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Fx.isSsr)return{width:0,height:0};if(!Bz.enableCache)return iP(t,i);var s=OG(t,i),m=rP.get(s);if(m)return m;var y=iP(t,i);return rP.set(s,y),y},jz;function zG(e,t,i){return(t=kG(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function kG(e){var t=RG(e,"string");return typeof t=="symbol"?t:t+""}function RG(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,LG=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,BG=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,jG={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},NG=["cm","mm","pt","pc","in","Q","px"];function FG(e){return NG.includes(e)}var bg="NaN";function UG(e,t){return e*jG[t]}class Za{static parse(t){var i,[,s,m]=(i=BG.exec(t))!==null&&i!==void 0?i:[];return s==null?Za.NaN:new Za(parseFloat(s),m??"")}constructor(t,i){this.num=t,this.unit=i,this.num=t,this.unit=i,Ru(t)&&(this.unit=""),i!==""&&!LG.test(i)&&(this.num=NaN,this.unit=""),FG(i)&&(this.num=UG(t,i),this.unit="px")}add(t){return this.unit!==t.unit?new Za(NaN,""):new Za(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Za(NaN,""):new Za(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Za(NaN,""):new Za(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Za(NaN,""):new Za(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ru(this.num)}}jz=Za;zG(Za,"NaN",new jz(NaN,""));function Nz(e){if(e==null||e.includes(bg))return bg;for(var t=e;t.includes("*")||t.includes("/");){var i,[,s,m,y]=(i=aP.exec(t))!==null&&i!==void 0?i:[],_=Za.parse(s??""),c=Za.parse(y??""),P=m==="*"?_.multiply(c):_.divide(c);if(P.isNaN())return bg;t=t.replace(aP,P.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var C,[,D,k,U]=(C=oP.exec(t))!==null&&C!==void 0?C:[],V=Za.parse(D??""),Q=Za.parse(U??""),Z=k==="+"?V.add(Q):V.subtract(Q);if(Z.isNaN())return bg;t=t.replace(oP,Z.toString())}return t}var sP=/\(([^()]*)\)/;function VG(e){for(var t=e,i;(i=sP.exec(t))!=null;){var[,s]=i;t=t.replace(sP,Nz(s))}return t}function GG(e){var t=e.replace(/\s+/g,"");return t=VG(t),t=Nz(t),t}function qG(e){try{return GG(e)}catch{return bg}}function Y1(e){var t=qG(e.slice(5,-1));return t===bg?"":t}var HG=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],ZG=["dx","dy","angle","className","breakAll"];function n2(){return n2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},n2.apply(null,arguments)}function lP(e,t){if(e==null)return{};var i,s,m=$G(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function $G(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var Fz=/[ \f\n\r\t\v\u2028\u2029]+/,Uz=e=>{var{children:t,breakAll:i,style:s}=e;try{var m=[];si(t)||(i?m=t.toString().split(""):m=t.toString().split(Fz));var y=m.map(c=>({word:c,width:uv(c,s).width})),_=i?0:uv("",s).width;return{wordsWithComputedWidth:y,spaceWidth:_}}catch{return null}};function XG(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var Vz=(e,t,i,s)=>e.reduce((m,y)=>{var{word:_,width:c}=y,P=m[m.length-1];if(P&&c!=null&&(t==null||s||P.width+c+i<Number(t)))P.words.push(_),P.width+=c+i;else{var C={words:[_],width:c};m.push(C)}return m},[]),Gz=e=>e.reduce((t,i)=>t.width>i.width?t:i),YG="",uP=(e,t,i,s,m,y,_,c)=>{var P=e.slice(0,t),C=Uz({breakAll:i,style:s,children:P+YG});if(!C)return[!1,[]];var D=Vz(C.wordsWithComputedWidth,y,_,c),k=D.length>m||Gz(D).width>Number(y);return[k,D]},WG=(e,t,i,s,m)=>{var{maxLines:y,children:_,style:c,breakAll:P}=e,C=Yt(y),D=String(_),k=Vz(t,s,i,m);if(!C||m)return k;var U=k.length>y||Gz(k).width>Number(s);if(!U)return k;for(var V=0,Q=D.length-1,Z=0,G;V<=Q&&Z<=D.length-1;){var oe=Math.floor((V+Q)/2),he=oe-1,[me,Ce]=uP(D,he,P,c,y,s,i,m),[be]=uP(D,oe,P,c,y,s,i,m);if(!me&&!be&&(V=oe+1),me&&be&&(Q=oe-1),!me&&be){G=Ce;break}Z++}return G||k},cP=e=>{var t=si(e)?[]:e.toString().split(Fz);return[{words:t,width:void 0}]},KG=e=>{var{width:t,scaleToFit:i,children:s,style:m,breakAll:y,maxLines:_}=e;if((t||i)&&!Fx.isSsr){var c,P,C=Uz({breakAll:y,children:s,style:m});if(C){var{wordsWithComputedWidth:D,spaceWidth:k}=C;c=D,P=k}else return cP(s);return WG({breakAll:y,children:s,maxLines:_,style:m},c,P,t,!!i)}return cP(s)},qz="#808080",QG={angle:0,breakAll:!1,capHeight:"0.71em",fill:qz,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},NS=H.forwardRef((e,t)=>{var i=Vo(e,QG),{x:s,y:m,lineHeight:y,capHeight:_,fill:c,scaleToFit:P,textAnchor:C,verticalAnchor:D}=i,k=lP(i,HG),U=H.useMemo(()=>KG({breakAll:k.breakAll,children:k.children,maxLines:k.maxLines,scaleToFit:P,style:k.style,width:k.width}),[k.breakAll,k.children,k.maxLines,P,k.style,k.width]),{dx:V,dy:Q,angle:Z,className:G,breakAll:oe}=k,he=lP(k,ZG);if(!zc(s)||!zc(m)||U.length===0)return null;var me=Number(s)+(Yt(V)?V:0),Ce=Number(m)+(Yt(Q)?Q:0);if(!mi(me)||!mi(Ce))return null;var be;switch(D){case"start":be=Y1("calc(".concat(_,")"));break;case"middle":be=Y1("calc(".concat((U.length-1)/2," * -").concat(y," + (").concat(_," / 2))"));break;default:be=Y1("calc(".concat(U.length-1," * -").concat(y,")"));break}var ke=[];if(P){var je=U[0].width,{width:gt}=k;ke.push("scale(".concat(Yt(gt)&&Yt(je)?gt/je:1,")"))}return Z&&ke.push("rotate(".concat(Z,", ").concat(me,", ").concat(Ce,")")),ke.length&&(he.transform=ke.join(" ")),H.createElement("text",n2({},Fo(he),{ref:t,x:me,y:Ce,className:jn("recharts-text",G),textAnchor:C,fill:c.includes("url")?qz:c}),U.map((bt,It)=>{var yt=bt.words.join(oe?"":" ");return H.createElement("tspan",{x:me,dy:It===0?be:y,key:"".concat(yt,"-").concat(It)},yt)}))});NS.displayName="Text";var JG=["labelRef"],eq=["content"];function hP(e,t){if(e==null)return{};var i,s,m=tq(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function tq(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function fP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function Ri(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?fP(Object(i),!0).forEach(function(s){rq(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):fP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function rq(e,t,i){return(t=nq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function nq(e){var t=iq(e,"string");return typeof t=="symbol"?t:t+""}function iq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rh(){return Rh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Rh.apply(null,arguments)}var Hz=H.createContext(null),aq=e=>{var{x:t,y:i,upperWidth:s,lowerWidth:m,width:y,height:_,children:c}=e,P=H.useMemo(()=>({x:t,y:i,upperWidth:s,lowerWidth:m,width:y,height:_}),[t,i,s,m,y,_]);return H.createElement(Hz.Provider,{value:P},c)},Zz=()=>{var e=H.useContext(Hz),t=Rx();return e||KD(t)},oq=H.createContext(null),sq=()=>{var e=H.useContext(oq),t=ir(wO);return e||t},lq=e=>{var{value:t,formatter:i}=e,s=si(e.children)?t:e.children;return typeof i=="function"?i(s):s},FS=e=>e!=null&&typeof e=="function",uq=(e,t)=>{var i=_s(t-e),s=Math.min(Math.abs(t-e),360);return i*s},cq=(e,t,i,s,m)=>{var{offset:y,className:_}=e,{cx:c,cy:P,innerRadius:C,outerRadius:D,startAngle:k,endAngle:U,clockWise:V}=m,Q=(C+D)/2,Z=uq(k,U),G=Z>=0?1:-1,oe,he;switch(t){case"insideStart":oe=k+G*y,he=V;break;case"insideEnd":oe=U-G*y,he=!V;break;case"end":oe=U+G*y,he=V;break;default:throw new Error("Unsupported position ".concat(t))}he=Z<=0?he:!he;var me=$a(c,P,Q,oe),Ce=$a(c,P,Q,oe+(he?1:-1)*359),be="M".concat(me.x,",").concat(me.y,`
    A`).concat(Q,",").concat(Q,",0,1,").concat(he?0:1,`,
    `).concat(Ce.x,",").concat(Ce.y),ke=si(e.id)?fv("recharts-radial-line-"):e.id;return H.createElement("text",Rh({},s,{dominantBaseline:"central",className:jn("recharts-radial-bar-label",_)}),H.createElement("defs",null,H.createElement("path",{id:ke,d:be})),H.createElement("textPath",{xlinkHref:"#".concat(ke)},i))},hq=(e,t,i)=>{var{cx:s,cy:m,innerRadius:y,outerRadius:_,startAngle:c,endAngle:P}=e,C=(c+P)/2;if(i==="outside"){var{x:D,y:k}=$a(s,m,_+t,C);return{x:D,y:k,textAnchor:D>=s?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:s,y:m,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:s,y:m,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:s,y:m,textAnchor:"middle",verticalAnchor:"end"};var U=(y+_)/2,{x:V,y:Q}=$a(s,m,U,C);return{x:V,y:Q,textAnchor:"middle",verticalAnchor:"middle"}},i2=e=>"cx"in e&&Yt(e.cx),fq=(e,t)=>{var{parentViewBox:i,offset:s,position:m}=e,y;i!=null&&!i2(i)&&(y=i);var{x:_,y:c,upperWidth:P,lowerWidth:C,height:D}=t,k=_,U=_+(P-C)/2,V=(k+U)/2,Q=(P+C)/2,Z=k+P/2,G=D>=0?1:-1,oe=G*s,he=G>0?"end":"start",me=G>0?"start":"end",Ce=P>=0?1:-1,be=Ce*s,ke=Ce>0?"end":"start",je=Ce>0?"start":"end";if(m==="top"){var gt={x:k+P/2,y:c-oe,textAnchor:"middle",verticalAnchor:he};return Ri(Ri({},gt),y?{height:Math.max(c-y.y,0),width:P}:{})}if(m==="bottom"){var bt={x:U+C/2,y:c+D+oe,textAnchor:"middle",verticalAnchor:me};return Ri(Ri({},bt),y?{height:Math.max(y.y+y.height-(c+D),0),width:C}:{})}if(m==="left"){var It={x:V-be,y:c+D/2,textAnchor:ke,verticalAnchor:"middle"};return Ri(Ri({},It),y?{width:Math.max(It.x-y.x,0),height:D}:{})}if(m==="right"){var yt={x:V+Q+be,y:c+D/2,textAnchor:je,verticalAnchor:"middle"};return Ri(Ri({},yt),y?{width:Math.max(y.x+y.width-yt.x,0),height:D}:{})}var De=y?{width:Q,height:D}:{};return m==="insideLeft"?Ri({x:V+be,y:c+D/2,textAnchor:je,verticalAnchor:"middle"},De):m==="insideRight"?Ri({x:V+Q-be,y:c+D/2,textAnchor:ke,verticalAnchor:"middle"},De):m==="insideTop"?Ri({x:k+P/2,y:c+oe,textAnchor:"middle",verticalAnchor:me},De):m==="insideBottom"?Ri({x:U+C/2,y:c+D-oe,textAnchor:"middle",verticalAnchor:he},De):m==="insideTopLeft"?Ri({x:k+be,y:c+oe,textAnchor:je,verticalAnchor:me},De):m==="insideTopRight"?Ri({x:k+P-be,y:c+oe,textAnchor:ke,verticalAnchor:me},De):m==="insideBottomLeft"?Ri({x:U+be,y:c+D-oe,textAnchor:je,verticalAnchor:he},De):m==="insideBottomRight"?Ri({x:U+C-be,y:c+D-oe,textAnchor:ke,verticalAnchor:he},De):m&&typeof m=="object"&&(Yt(m.x)||hv(m.x))&&(Yt(m.y)||hv(m.y))?Ri({x:_+Lu(m.x,Q),y:c+Lu(m.y,D),textAnchor:"end",verticalAnchor:"end"},De):Ri({x:Z,y:c+D/2,textAnchor:"middle",verticalAnchor:"middle"},De)},dq={angle:0,offset:5,zIndex:Ta.label,position:"middle",textBreakAll:!1};function id(e){var t=Vo(e,dq),{viewBox:i,position:s,value:m,children:y,content:_,className:c="",textBreakAll:P,labelRef:C}=t,D=sq(),k=Zz(),U=s==="center"?k:D??k,V,Q,Z;if(i==null?V=U:i2(i)?V=i:V=KD(i),!V||si(m)&&si(y)&&!H.isValidElement(_)&&typeof _!="function")return null;var G=Ri(Ri({},t),{},{viewBox:V});if(H.isValidElement(_)){var{labelRef:oe}=G,he=hP(G,JG);return H.cloneElement(_,he)}if(typeof _=="function"){var{content:me}=G,Ce=hP(G,eq);if(Q=H.createElement(_,Ce),H.isValidElement(Q))return Q}else Q=lq(t);var be=Fo(t);if(i2(V)){if(s==="insideStart"||s==="insideEnd"||s==="end")return cq(t,s,Q,be,V);Z=hq(V,t.offset,t.position)}else Z=fq(t,V);return H.createElement(jl,{zIndex:t.zIndex},H.createElement(NS,Rh({ref:C,className:jn("recharts-label",c)},be,Z,{textAnchor:XG(be.textAnchor)?be.textAnchor:Z.textAnchor,breakAll:P}),Q))}id.displayName="Label";var pq=(e,t,i)=>{if(!e)return null;var s={viewBox:t,labelRef:i};return e===!0?H.createElement(id,Rh({key:"label-implicit"},s)):zc(e)?H.createElement(id,Rh({key:"label-implicit",value:e},s)):H.isValidElement(e)?e.type===id?H.cloneElement(e,Ri({key:"label-implicit"},s)):H.createElement(id,Rh({key:"label-implicit",content:e},s)):FS(e)?H.createElement(id,Rh({key:"label-implicit",content:e},s)):e&&typeof e=="object"?H.createElement(id,Rh({},e,{key:"label-implicit"},s)):null};function mq(e){var{label:t,labelRef:i}=e,s=Zz();return pq(t,s,i)||null}var W1={},K1={},dP;function gq(){return dP||(dP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return i[i.length-1]}e.last=t})(K1)),K1}var Q1={},pP;function yq(){return pP||(pP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){return Array.isArray(i)?i:Array.from(i)}e.toArray=t})(Q1)),Q1}var mP;function vq(){return mP||(mP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gq(),i=yq(),s=D2();function m(y){if(s.isArrayLike(y))return t.last(i.toArray(y))}e.last=m})(W1)),W1}var J1,gP;function _q(){return gP||(gP=1,J1=vq().last),J1}var xq=_q();const bq=Xh(xq);var wq=["valueAccessor"],Sq=["dataKey","clockWise","id","textBreakAll","zIndex"];function ax(){return ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},ax.apply(null,arguments)}function yP(e,t){if(e==null)return{};var i,s,m=Aq(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function Aq(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var Tq=e=>Array.isArray(e.value)?bq(e.value):e.value,$z=H.createContext(void 0),Xz=$z.Provider,Yz=H.createContext(void 0);Yz.Provider;function Eq(){return H.useContext($z)}function Mq(){return H.useContext(Yz)}function b0(e){var{valueAccessor:t=Tq}=e,i=yP(e,wq),{dataKey:s,clockWise:m,id:y,textBreakAll:_,zIndex:c}=i,P=yP(i,Sq),C=Eq(),D=Mq(),k=C||D;return!k||!k.length?null:H.createElement(jl,{zIndex:c??Ta.label},H.createElement(zl,{className:"recharts-label-list"},k.map((U,V)=>{var Q,Z=si(s)?t(U,V):$i(U&&U.payload,s),G=si(y)?{}:{id:"".concat(y,"-").concat(V)};return H.createElement(id,ax({key:"label-".concat(V)},Fo(U),P,G,{fill:(Q=i.fill)!==null&&Q!==void 0?Q:U.fill,parentViewBox:U.parentViewBox,value:Z,textBreakAll:_,viewBox:U.viewBox,index:V,zIndex:0}))})))}b0.displayName="LabelList";function Wz(e){var{label:t}=e;return t?t===!0?H.createElement(b0,{key:"labelList-implicit"}):H.isValidElement(t)||FS(t)?H.createElement(b0,{key:"labelList-implicit",content:t}):typeof t=="object"?H.createElement(b0,ax({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function a2(){return a2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},a2.apply(null,arguments)}var Kz=e=>{var{cx:t,cy:i,r:s,className:m}=e,y=jn("recharts-dot",m);return Yt(t)&&Yt(i)&&Yt(s)?H.createElement("circle",a2({},ku(e),P2(e),{className:y,cx:t,cy:i,r:s})):null},Pq={radiusAxis:{},angleAxis:{}},Qz=bs({name:"polarAxis",initialState:Pq,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:xX,removeRadiusAxis:bX,addAngleAxis:wX,removeAngleAxis:SX}=Qz.actions,Cq=Qz.reducer,ew={exports:{}},En={};var vP;function Dq(){if(vP)return En;vP=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),_=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),U=Symbol.for("react.view_transition"),V=Symbol.for("react.client.reference");function Q(Z){if(typeof Z=="object"&&Z!==null){var G=Z.$$typeof;switch(G){case e:switch(Z=Z.type,Z){case i:case m:case s:case P:case C:case U:return Z;default:switch(Z=Z&&Z.$$typeof,Z){case _:case c:case k:case D:return Z;case y:return Z;default:return G}}case t:return G}}}return En.ContextConsumer=y,En.ContextProvider=_,En.Element=e,En.ForwardRef=c,En.Fragment=i,En.Lazy=k,En.Memo=D,En.Portal=t,En.Profiler=m,En.StrictMode=s,En.Suspense=P,En.SuspenseList=C,En.isContextConsumer=function(Z){return Q(Z)===y},En.isContextProvider=function(Z){return Q(Z)===_},En.isElement=function(Z){return typeof Z=="object"&&Z!==null&&Z.$$typeof===e},En.isForwardRef=function(Z){return Q(Z)===c},En.isFragment=function(Z){return Q(Z)===i},En.isLazy=function(Z){return Q(Z)===k},En.isMemo=function(Z){return Q(Z)===D},En.isPortal=function(Z){return Q(Z)===t},En.isProfiler=function(Z){return Q(Z)===m},En.isStrictMode=function(Z){return Q(Z)===s},En.isSuspense=function(Z){return Q(Z)===P},En.isSuspenseList=function(Z){return Q(Z)===C},En.isValidElementType=function(Z){return typeof Z=="string"||typeof Z=="function"||Z===i||Z===m||Z===s||Z===P||Z===C||typeof Z=="object"&&Z!==null&&(Z.$$typeof===k||Z.$$typeof===D||Z.$$typeof===_||Z.$$typeof===y||Z.$$typeof===c||Z.$$typeof===V||Z.getModuleId!==void 0)},En.typeOf=Q,En}var _P;function Iq(){return _P||(_P=1,ew.exports=Dq()),ew.exports}var Oq=Iq(),xP=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",bP=null,tw=null,Jz=e=>{if(e===bP&&Array.isArray(tw))return tw;var t=[];return H.Children.forEach(e,i=>{si(i)||(Oq.isFragment(i)?t=t.concat(Jz(i.props.children)):t.push(i))}),tw=t,bP=e,t};function zq(e,t){var i=[],s=[];return Array.isArray(t)?s=t.map(m=>xP(m)):s=[xP(t)],Jz(e).forEach(m=>{var y=Ag(m,"type.displayName")||Ag(m,"type.name");y&&s.indexOf(y)!==-1&&i.push(m)}),i}var ek=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,rw={},wP;function kq(){return wP||(wP=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(i){if(typeof i!="object"||i==null)return!1;if(Object.getPrototypeOf(i)===null)return!0;if(Object.prototype.toString.call(i)!=="[object Object]"){const m=i[Symbol.toStringTag];return m==null||!Object.getOwnPropertyDescriptor(i,Symbol.toStringTag)?.writable?!1:i.toString()===`[object ${m}]`}let s=i;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(i)===s}e.isPlainObject=t})(rw)),rw}var nw,SP;function Rq(){return SP||(SP=1,nw=kq().isPlainObject),nw}var Lq=Rq();const Bq=Xh(Lq);var AP,TP,EP,MP,PP;function CP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function DP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(i),!0).forEach(function(s){jq(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):CP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function jq(e,t,i){return(t=Nq(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Nq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},ox.apply(null,arguments)}function ov(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var IP=(e,t,i,s,m)=>{var y=i-s,_;return _=Ci(AP||(AP=ov(["M ",",",""])),e,t),_+=Ci(TP||(TP=ov(["L ",",",""])),e+i,t),_+=Ci(EP||(EP=ov(["L ",",",""])),e+i-y/2,t+m),_+=Ci(MP||(MP=ov(["L ",",",""])),e+i-y/2-s,t+m),_+=Ci(PP||(PP=ov(["L ",","," Z"])),e,t),_},Uq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Vq=e=>{var t=Vo(e,Uq),{x:i,y:s,upperWidth:m,lowerWidth:y,height:_,className:c}=t,{animationEasing:P,animationDuration:C,animationBegin:D,isUpdateAnimationActive:k}=t,U=H.useRef(null),[V,Q]=H.useState(-1),Z=H.useRef(m),G=H.useRef(y),oe=H.useRef(_),he=H.useRef(i),me=H.useRef(s),Ce=Vx(e,"trapezoid-");if(H.useEffect(()=>{if(U.current&&U.current.getTotalLength)try{var Ct=U.current.getTotalLength();Ct&&Q(Ct)}catch{}},[]),i!==+i||s!==+s||m!==+m||y!==+y||_!==+_||m===0&&y===0||_===0)return null;var be=jn("recharts-trapezoid",c);if(!k)return H.createElement("g",null,H.createElement("path",ox({},Fo(t),{className:be,d:IP(i,s,m,y,_)})));var ke=Z.current,je=G.current,gt=oe.current,bt=he.current,It=me.current,yt="0px ".concat(V===-1?1:V,"px"),De="".concat(V,"px 0px"),Tt=cI(["strokeDasharray"],C,P);return H.createElement(Ux,{animationId:Ce,key:Ce,canBegin:V>0,duration:C,easing:P,isActive:k,begin:D},Ct=>{var Ft=Di(ke,m,Ct),Le=Di(je,y,Ct),We=Di(gt,_,Ct),_t=Di(bt,i,Ct),at=Di(It,s,Ct);U.current&&(Z.current=Ft,G.current=Le,oe.current=We,he.current=_t,me.current=at);var Kt=Ct>0?{transition:Tt,strokeDasharray:De}:{strokeDasharray:yt};return H.createElement("path",ox({},Fo(t),{className:be,d:IP(_t,at,Ft,Le,We),ref:U,style:DP(DP({},Kt),t.style)}))})},Gq=["option","shapeType","activeClassName"];function qq(e,t){if(e==null)return{};var i,s,m=Hq(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function Hq(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function OP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function sx(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?OP(Object(i),!0).forEach(function(s){Zq(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):OP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function Zq(e,t,i){return(t=$q(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function $q(e){var t=Xq(e,"string");return typeof t=="symbol"?t:t+""}function Xq(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yq(e,t){return sx(sx({},t),e)}function Wq(e,t){return e==="symbols"}function zP(e){var{shapeType:t,elementProps:i}=e;switch(t){case"rectangle":return H.createElement(pI,i);case"trapezoid":return H.createElement(Vq,i);case"sector":return H.createElement(yI,i);case"symbols":if(Wq(t))return H.createElement(rD,i);break;case"curve":return H.createElement(uI,i);default:return null}}function Kq(e){return H.isValidElement(e)?e.props:e}function tk(e){var{option:t,shapeType:i,activeClassName:s="recharts-active-shape"}=e,m=qq(e,Gq),y;if(H.isValidElement(t))y=H.cloneElement(t,sx(sx({},m),Kq(t)));else if(typeof t=="function")y=t(m,m.index);else if(Bq(t)&&typeof t!="boolean"){var _=Yq(t,m);y=H.createElement(zP,{shapeType:i,elementProps:_})}else{var c=m;y=H.createElement(zP,{shapeType:i,elementProps:c})}return m.isActive?H.createElement(zl,{className:s},y):y}var rk=(e,t,i)=>{var s=Li();return(m,y)=>_=>{e?.(m,y,_),s(hz({activeIndex:String(y),activeDataKey:t,activeCoordinate:m.tooltipPosition,activeGraphicalItemId:i}))}},nk=e=>{var t=Li();return(i,s)=>m=>{e?.(i,s,m),t(vU())}},ik=(e,t,i)=>{var s=Li();return(m,y)=>_=>{e?.(m,y,_),s(_U({activeIndex:String(y),activeDataKey:t,activeCoordinate:m.tooltipPosition,activeGraphicalItemId:i}))}};function ak(e){var{tooltipEntrySettings:t}=e,i=Li(),s=vo(),m=H.useRef(null);return H.useLayoutEffect(()=>{s||(m.current===null?i(pU(t)):m.current!==t&&i(mU({prev:m.current,next:t})),m.current=t)},[t,i,s]),H.useLayoutEffect(()=>()=>{m.current&&(i(gU(m.current)),m.current=null)},[i]),null}function ok(e){var{legendPayload:t}=e,i=Li(),s=vo(),m=H.useRef(null);return H.useLayoutEffect(()=>{s||(m.current===null?i(Xj(t)):m.current!==t&&i(Yj({prev:m.current,next:t})),m.current=t)},[i,s,t]),H.useLayoutEffect(()=>()=>{m.current&&(i(Wj(m.current)),m.current=null)},[i]),null}var iw,Qq=()=>{var[e]=H.useState(()=>fv("uid-"));return e},Jq=(iw=sR.useId)!==null&&iw!==void 0?iw:Qq;function e7(e,t){var i=Jq();return t||(e?"".concat(e,"-").concat(i):i)}var t7=H.createContext(void 0),sk=e=>{var{id:t,type:i,children:s}=e,m=e7("recharts-".concat(i),t);return H.createElement(t7.Provider,{value:m},s(m))},r7={cartesianItems:[],polarItems:[]},lk=bs({name:"graphicalItems",initialState:r7,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:ai()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:i,next:s}=t.payload,m=Ou(e).cartesianItems.indexOf(i);m>-1&&(e.cartesianItems[m]=s)},prepare:ai()},removeCartesianGraphicalItem:{reducer(e,t){var i=Ou(e).cartesianItems.indexOf(t.payload);i>-1&&e.cartesianItems.splice(i,1)},prepare:ai()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:ai()},removePolarGraphicalItem:{reducer(e,t){var i=Ou(e).polarItems.indexOf(t.payload);i>-1&&e.polarItems.splice(i,1)},prepare:ai()}}}),{addCartesianGraphicalItem:n7,replaceCartesianGraphicalItem:i7,removeCartesianGraphicalItem:a7,addPolarGraphicalItem:AX,removePolarGraphicalItem:TX}=lk.actions,o7=lk.reducer,s7=e=>{var t=Li(),i=H.useRef(null);return H.useLayoutEffect(()=>{i.current===null?t(n7(e)):i.current!==e&&t(i7({prev:i.current,next:e})),i.current=e},[t,e]),H.useLayoutEffect(()=>()=>{i.current&&(t(a7(i.current)),i.current=null)},[t]),null},uk=H.memo(s7),l7=["points"];function kP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function aw(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(i),!0).forEach(function(s){u7(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):kP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function u7(e,t,i){return(t=c7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c7(e){var t=h7(e,"string");return typeof t=="symbol"?t:t+""}function h7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lx(){return lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},lx.apply(null,arguments)}function f7(e,t){if(e==null)return{};var i,s,m=d7(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function d7(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function p7(e){var{option:t,dotProps:i,className:s}=e;if(H.isValidElement(t))return H.cloneElement(t,i);if(typeof t=="function")return t(i);var m=jn(s,typeof t!="boolean"?t.className:""),y=i??{},{points:_}=y,c=f7(y,l7);return H.createElement(Kz,lx({},c,{className:m}))}function m7(e,t){return e==null?!1:t?!0:e.length===1}function g7(e){var{points:t,dot:i,className:s,dotClassName:m,dataKey:y,baseProps:_,needClip:c,clipPathId:P,zIndex:C=Ta.scatter}=e;if(!m7(t,i))return null;var D=ek(i),k=eL(i),U=t.map((Q,Z)=>{var G,oe,he=aw(aw(aw({r:3},_),k),{},{index:Z,cx:(G=Q.x)!==null&&G!==void 0?G:void 0,cy:(oe=Q.y)!==null&&oe!==void 0?oe:void 0,dataKey:y,value:Q.value,payload:Q.payload,points:t});return H.createElement(p7,{key:"dot-".concat(Z),option:i,dotProps:he,className:m})}),V={};return c&&P!=null&&(V.clipPath="url(#clipPath-".concat(D?"":"dots-").concat(P,")")),H.createElement(jl,{zIndex:C},H.createElement(zl,lx({className:s},V),U))}function RP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function LP(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?RP(Object(i),!0).forEach(function(s){y7(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):RP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function y7(e,t,i){return(t=v7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v7(e){var t=_7(e,"string");return typeof t=="symbol"?t:t+""}function _7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ck=0,x7={xAxis:{},yAxis:{},zAxis:{}},hk=bs({name:"cartesianAxis",initialState:x7,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:ai()},replaceXAxis:{reducer(e,t){var{prev:i,next:s}=t.payload;e.xAxis[i.id]!==void 0&&(i.id!==s.id&&delete e.xAxis[i.id],e.xAxis[s.id]=s)},prepare:ai()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:ai()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:ai()},replaceYAxis:{reducer(e,t){var{prev:i,next:s}=t.payload;e.yAxis[i.id]!==void 0&&(i.id!==s.id&&delete e.yAxis[i.id],e.yAxis[s.id]=s)},prepare:ai()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:ai()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:ai()},replaceZAxis:{reducer(e,t){var{prev:i,next:s}=t.payload;e.zAxis[i.id]!==void 0&&(i.id!==s.id&&delete e.zAxis[i.id],e.zAxis[s.id]=s)},prepare:ai()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:ai()},updateYAxisWidth(e,t){var{id:i,width:s}=t.payload,m=e.yAxis[i];if(m){var y=m.widthHistory||[];if(y.length===3&&y[0]===y[2]&&s===y[1]&&s!==m.width&&Math.abs(s-y[0])<=1)return;var _=[...y,s].slice(-3);e.yAxis[i]=LP(LP({},e.yAxis[i]),{},{width:s,widthHistory:_})}}}}),{addXAxis:b7,replaceXAxis:w7,removeXAxis:S7,addYAxis:A7,replaceYAxis:T7,removeYAxis:E7,addZAxis:EX,replaceZAxis:MX,removeZAxis:PX,updateYAxisWidth:M7}=hk.actions,P7=hk.reducer,C7=it([Ea],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),D7=it([C7,Wh,Kh],(e,t,i)=>{if(!(!e||t==null||i==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,i-e.top-e.bottom)}}),US=()=>ir(D7),I7=()=>ir(lV);function BP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function ow(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(i),!0).forEach(function(s){O7(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):BP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function O7(e,t,i){return(t=z7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function z7(e){var t=k7(e,"string");return typeof t=="symbol"?t:t+""}function k7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R7=e=>{var{point:t,childIndex:i,mainColor:s,activeDot:m,dataKey:y,clipPath:_}=e;if(m===!1||t.x==null||t.y==null)return null;var c={index:i,dataKey:y,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},P=ow(ow(ow({},c),Iv(m)),P2(m)),C;return H.isValidElement(m)?C=H.cloneElement(m,P):typeof m=="function"?C=m(P):C=H.createElement(Kz,P),H.createElement(zl,{className:"recharts-active-dot",clipPath:_},C)};function L7(e){var{points:t,mainColor:i,activeDot:s,itemDataKey:m,clipPath:y,zIndex:_=Ta.activeDot}=e,c=ir(Fp),P=I7();if(t==null||P==null)return null;var C=t.find(D=>P.includes(D.payload));return si(C)?null:H.createElement(jl,{zIndex:_},H.createElement(R7,{point:C,childIndex:Number(c),mainColor:i,dataKey:m,activeDot:s,clipPath:y}))}var jP=(e,t,i)=>{var s=i??e;if(!si(s))return Lu(s,t,0)},B7=(e,t,i)=>{var s={},m=e.filter(Jx),y=e.filter(C=>C.stackId==null),_=m.reduce((C,D)=>(C[D.stackId]||(C[D.stackId]=[]),C[D.stackId].push(D),C),s),c=Object.entries(_).map(C=>{var[D,k]=C,U=k.map(Q=>Q.dataKey),V=jP(t,i,k[0].barSize);return{stackId:D,dataKeys:U,barSize:V}}),P=y.map(C=>{var D=[C.dataKey].filter(U=>U!=null),k=jP(t,i,C.barSize);return{stackId:void 0,dataKeys:D,barSize:k}});return[...c,...P]};function NP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function f0(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(i),!0).forEach(function(s){j7(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):NP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function j7(e,t,i){return(t=N7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function N7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U7(e,t,i,s,m){var y=s.length;if(!(y<1)){var _=Lu(e,i,0,!0),c,P=[];if(mi(s[0].barSize)){var C=!1,D=i/y,k=s.reduce((oe,he)=>oe+(he.barSize||0),0);k+=(y-1)*_,k>=i&&(k-=(y-1)*_,_=0),k>=i&&D>0&&(C=!0,D*=.9,k=y*D);var U=(i-k)/2>>0,V={offset:U-_,size:0};c=s.reduce((oe,he)=>{var me,Ce={stackId:he.stackId,dataKeys:he.dataKeys,position:{offset:V.offset+V.size+_,size:C?D:(me=he.barSize)!==null&&me!==void 0?me:0}},be=[...oe,Ce];return V=be[be.length-1].position,be},P)}else{var Q=Lu(t,i,0,!0);i-2*Q-(y-1)*_<=0&&(_=0);var Z=(i-2*Q-(y-1)*_)/y;Z>1&&(Z>>=0);var G=mi(m)?Math.min(Z,m):Z;c=s.reduce((oe,he,me)=>[...oe,{stackId:he.stackId,dataKeys:he.dataKeys,position:{offset:Q+(Z+_)*me+(Z-G)/2,size:G}}],P)}return c}}var V7=(e,t,i,s,m,y,_)=>{var c=si(_)?t:_,P=U7(i,s,m!==y?m:y,e,c);return m!==y&&P!=null&&(P=P.map(C=>f0(f0({},C),{},{position:f0(f0({},C.position),{},{offset:C.position.offset-m/2})}))),P},G7=(e,t)=>{var i=_S(t);if(!(!e||i==null||t==null)){var{stackId:s}=t;if(s!=null){var m=e[s];if(m){var{stackedData:y}=m;if(y)return y.find(_=>_.key===i)}}}};function q7(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&mi(e.zIndex)?e.zIndex:t}var H7=e=>{var{chartData:t}=e,i=Li(),s=vo();return H.useEffect(()=>s?()=>{}:(i(YM(t)),()=>{i(YM(void 0))}),[t,i,s]),null},FP={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fk=bs({name:"brush",initialState:FP,reducers:{setBrushSettings(e,t){return t.payload==null?FP:t.payload}}}),{setBrushSettings:CX}=fk.actions,Z7=fk.reducer;function $7(e,t,i){return(t=X7(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function X7(e){var t=Y7(e,"string");return typeof t=="symbol"?t:t+""}function Y7(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class VS{static create(t){return new VS(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:i,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var m=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+m}case"end":{var y=this.bandwidth?this.bandwidth():0;return this.scale(t)+y}default:return this.scale(t)}if(i){var _=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+_}return this.scale(t)}}isInRange(t){var i=this.range(),s=i[0],m=i[i.length-1];return s<=m?t>=s&&t<=m:t>=m&&t<=s}}$7(VS,"EPS",1e-4);function W7(e){return(e%180+180)%180}var K7=function(t){var{width:i,height:s}=t,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,y=W7(m),_=y*Math.PI/180,c=Math.atan(s/i),P=_>c&&_<Math.PI-c?s/Math.sin(_):i/Math.cos(_);return Math.abs(P)},Q7={dots:[],areas:[],lines:[]},dk=bs({name:"referenceElements",initialState:Q7,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var i=Ou(e).dots.findIndex(s=>s===t.payload);i!==-1&&e.dots.splice(i,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var i=Ou(e).areas.findIndex(s=>s===t.payload);i!==-1&&e.areas.splice(i,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var i=Ou(e).lines.findIndex(s=>s===t.payload);i!==-1&&e.lines.splice(i,1)}}}),{addDot:DX,removeDot:IX,addArea:OX,removeArea:zX,addLine:kX,removeLine:RX}=dk.actions,J7=dk.reducer,e9=H.createContext(void 0),t9=e=>{var{children:t}=e,[i]=H.useState("".concat(fv("recharts"),"-clip")),s=US();if(s==null)return null;var{x:m,y,width:_,height:c}=s;return H.createElement(e9.Provider,{value:i},H.createElement("defs",null,H.createElement("clipPath",{id:i},H.createElement("rect",{x:m,y,height:c,width:_}))),t)};function pk(e,t){if(t<1)return[];if(t===1)return e;for(var i=[],s=0;s<e.length;s+=t){var m=e[s];m!==void 0&&i.push(m)}return i}function r9(e,t,i){var s={width:e.width+t.width,height:e.height+t.height};return K7(s,i)}function n9(e,t,i){var s=i==="width",{x:m,y,width:_,height:c}=e;return t===1?{start:s?m:y,end:s?m+_:y+c}:{start:s?m+_:y+c,end:s?m:y}}function Ev(e,t,i,s,m){if(e*t<e*s||e*t>e*m)return!1;var y=i();return e*(t-e*y/2-s)>=0&&e*(t+e*y/2-m)<=0}function i9(e,t){return pk(e,t+1)}function a9(e,t,i,s,m){for(var y=(s||[]).slice(),{start:_,end:c}=t,P=0,C=1,D=_,k=function(){var Q=s?.[P];if(Q===void 0)return{v:pk(s,C)};var Z=P,G,oe=()=>(G===void 0&&(G=i(Q,Z)),G),he=Q.coordinate,me=P===0||Ev(e,he,oe,D,c);me||(P=0,D=_,C+=1),me&&(D=he+e*(oe()/2+m),P+=C)},U;C<=y.length;)if(U=k(),U)return U.v;return[]}function o9(e,t,i,s,m){var y=(s||[]).slice(),_=y.length;if(_===0)return[];for(var{start:c,end:P}=t,C=1;C<=_;C++){for(var D=(_-1)%C,k=c,U=!0,V=function(){var he=s[Q],me=Q,Ce,be=()=>(Ce===void 0&&(Ce=i(he,me)),Ce),ke=he.coordinate,je=Q===D||Ev(e,ke,be,k,P);if(!je)return U=!1,1;je&&(k=ke+e*(be()/2+m))},Q=D;Q<_&&!V();Q+=C);if(U){for(var Z=[],G=D;G<_;G+=C)Z.push(s[G]);return Z}}return[]}function UP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function go(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(i),!0).forEach(function(s){s9(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):UP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function s9(e,t,i){return(t=l9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l9(e){var t=u9(e,"string");return typeof t=="symbol"?t:t+""}function u9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c9(e,t,i,s,m){for(var y=(s||[]).slice(),_=y.length,{start:c}=t,{end:P}=t,C=function(U){var V=y[U],Q,Z=()=>(Q===void 0&&(Q=i(V,U)),Q);if(U===_-1){var G=e*(V.coordinate+e*Z()/2-P);y[U]=V=go(go({},V),{},{tickCoord:G>0?V.coordinate-G*e:V.coordinate})}else y[U]=V=go(go({},V),{},{tickCoord:V.coordinate});if(V.tickCoord!=null){var oe=Ev(e,V.tickCoord,Z,c,P);oe&&(P=V.tickCoord-e*(Z()/2+m),y[U]=go(go({},V),{},{isShow:!0}))}},D=_-1;D>=0;D--)C(D);return y}function h9(e,t,i,s,m,y){var _=(s||[]).slice(),c=_.length,{start:P,end:C}=t;if(y){var D=s[c-1],k=i(D,c-1),U=e*(D.coordinate+e*k/2-C);if(_[c-1]=D=go(go({},D),{},{tickCoord:U>0?D.coordinate-U*e:D.coordinate}),D.tickCoord!=null){var V=Ev(e,D.tickCoord,()=>k,P,C);V&&(C=D.tickCoord-e*(k/2+m),_[c-1]=go(go({},D),{},{isShow:!0}))}}for(var Q=y?c-1:c,Z=function(he){var me=_[he],Ce,be=()=>(Ce===void 0&&(Ce=i(me,he)),Ce);if(he===0){var ke=e*(me.coordinate-e*be()/2-P);_[he]=me=go(go({},me),{},{tickCoord:ke<0?me.coordinate-ke*e:me.coordinate})}else _[he]=me=go(go({},me),{},{tickCoord:me.coordinate});if(me.tickCoord!=null){var je=Ev(e,me.tickCoord,be,P,C);je&&(P=me.tickCoord+e*(be()/2+m),_[he]=go(go({},me),{},{isShow:!0}))}},G=0;G<Q;G++)Z(G);return _}function GS(e,t,i){var{tick:s,ticks:m,viewBox:y,minTickGap:_,orientation:c,interval:P,tickFormatter:C,unit:D,angle:k}=e;if(!m||!m.length||!s)return[];if(Yt(P)||Fx.isSsr){var U;return(U=i9(m,Yt(P)?P:0))!==null&&U!==void 0?U:[]}var V=[],Q=c==="top"||c==="bottom"?"width":"height",Z=D&&Q==="width"?uv(D,{fontSize:t,letterSpacing:i}):{width:0,height:0},G=(me,Ce)=>{var be=typeof C=="function"?C(me.value,Ce):me.value;return Q==="width"?r9(uv(be,{fontSize:t,letterSpacing:i}),Z,k):uv(be,{fontSize:t,letterSpacing:i})[Q]},oe=m.length>=2?_s(m[1].coordinate-m[0].coordinate):1,he=n9(y,oe,Q);return P==="equidistantPreserveStart"?a9(oe,he,G,m,_):P==="equidistantPreserveEnd"?o9(oe,he,G,m,_):(P==="preserveStart"||P==="preserveStartEnd"?V=h9(oe,he,G,m,_,P==="preserveStartEnd"):V=c9(oe,he,G,m,_),V.filter(me=>me.isShow))}var f9=e=>{var{ticks:t,label:i,labelGapWithTick:s=5,tickSize:m=0,tickMargin:y=0}=e,_=0;if(t){Array.from(t).forEach(D=>{if(D){var k=D.getBoundingClientRect();k.width>_&&(_=k.width)}});var c=i?i.getBoundingClientRect().width:0,P=m+y,C=_+P+c+(i?s:0);return Math.round(C)}return 0},d9=["axisLine","width","height","className","hide","ticks","axisType"];function p9(e,t){if(e==null)return{};var i,s,m=m9(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function m9(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function Up(){return Up=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Up.apply(null,arguments)}function VP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function Zi(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?VP(Object(i),!0).forEach(function(s){g9(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):VP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function g9(e,t,i){return(t=y9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y9(e){var t=v9(e,"string");return typeof t=="symbol"?t:t+""}function v9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fh={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ta.axis};function _9(e){var{x:t,y:i,width:s,height:m,orientation:y,mirror:_,axisLine:c,otherSvgProps:P}=e;if(!c)return null;var C=Zi(Zi(Zi({},P),ku(c)),{},{fill:"none"});if(y==="top"||y==="bottom"){var D=+(y==="top"&&!_||y==="bottom"&&_);C=Zi(Zi({},C),{},{x1:t,y1:i+D*m,x2:t+s,y2:i+D*m})}else{var k=+(y==="left"&&!_||y==="right"&&_);C=Zi(Zi({},C),{},{x1:t+k*s,y1:i,x2:t+k*s,y2:i+m})}return H.createElement("line",Up({},C,{className:jn("recharts-cartesian-axis-line",Ag(c,"className"))}))}function x9(e,t,i,s,m,y,_,c,P){var C,D,k,U,V,Q,Z=c?-1:1,G=e.tickSize||_,oe=Yt(e.tickCoord)?e.tickCoord:e.coordinate;switch(y){case"top":C=D=e.coordinate,U=i+ +!c*m,k=U-Z*G,Q=k-Z*P,V=oe;break;case"left":k=U=e.coordinate,D=t+ +!c*s,C=D-Z*G,V=C-Z*P,Q=oe;break;case"right":k=U=e.coordinate,D=t+ +c*s,C=D+Z*G,V=C+Z*P,Q=oe;break;default:C=D=e.coordinate,U=i+ +c*m,k=U+Z*G,Q=k+Z*P,V=oe;break}return{line:{x1:C,y1:k,x2:D,y2:U},tick:{x:V,y:Q}}}function b9(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function w9(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function S9(e){var{option:t,tickProps:i,value:s}=e,m,y=jn(i.className,"recharts-cartesian-axis-tick-value");if(H.isValidElement(t))m=H.cloneElement(t,Zi(Zi({},i),{},{className:y}));else if(typeof t=="function")m=t(Zi(Zi({},i),{},{className:y}));else{var _="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(_=jn(_,t?.className)),m=H.createElement(NS,Up({},i,{className:_}),s)}return m}var A9=H.forwardRef((e,t)=>{var{ticks:i=[],tick:s,tickLine:m,stroke:y,tickFormatter:_,unit:c,padding:P,tickTextProps:C,orientation:D,mirror:k,x:U,y:V,width:Q,height:Z,tickSize:G,tickMargin:oe,fontSize:he,letterSpacing:me,getTicksConfig:Ce,events:be,axisType:ke}=e,je=GS(Zi(Zi({},Ce),{},{ticks:i}),he,me),gt=b9(D,k),bt=w9(D,k),It=ku(Ce),yt=Iv(s),De={};typeof m=="object"&&(De=m);var Tt=Zi(Zi({},It),{},{fill:"none"},De),Ct=je.map(We=>Zi({entry:We},x9(We,U,V,Q,Z,D,G,k,oe))),Ft=Ct.map(We=>{var{entry:_t,line:at}=We;return H.createElement(zl,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(_t.value,"-").concat(_t.coordinate,"-").concat(_t.tickCoord)},m&&H.createElement("line",Up({},Tt,at,{className:jn("recharts-cartesian-axis-tick-line",Ag(m,"className"))})))}),Le=Ct.map((We,_t)=>{var{entry:at,tick:Kt}=We,Oe=Zi(Zi(Zi(Zi({textAnchor:gt,verticalAnchor:bt},It),{},{stroke:"none",fill:y},yt),Kt),{},{index:_t,payload:at,visibleTicksCount:je.length,tickFormatter:_,padding:P},C);return H.createElement(zl,Up({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(at.value,"-").concat(at.coordinate,"-").concat(at.tickCoord)},C2(be,at,_t)),s&&H.createElement(S9,{option:s,tickProps:Oe,value:"".concat(typeof _=="function"?_(at.value,_t):at.value).concat(c||"")}))});return H.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(ke,"-ticks")},Le.length>0&&H.createElement(jl,{zIndex:Ta.label},H.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(ke,"-tick-labels"),ref:t},Le)),Ft.length>0&&H.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(ke,"-tick-lines")},Ft))}),T9=H.forwardRef((e,t)=>{var{axisLine:i,width:s,height:m,className:y,hide:_,ticks:c,axisType:P}=e,C=p9(e,d9),[D,k]=H.useState(""),[U,V]=H.useState(""),Q=H.useRef(null);H.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var G;return f9({ticks:Q.current,label:(G=e.labelRef)===null||G===void 0?void 0:G.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var Z=H.useCallback(G=>{if(G){var oe=G.getElementsByClassName("recharts-cartesian-axis-tick-value");Q.current=oe;var he=oe[0];if(he){var me=window.getComputedStyle(he),Ce=me.fontSize,be=me.letterSpacing;(Ce!==D||be!==U)&&(k(Ce),V(be))}}},[D,U]);return _||s!=null&&s<=0||m!=null&&m<=0?null:H.createElement(jl,{zIndex:e.zIndex},H.createElement(zl,{className:jn("recharts-cartesian-axis",y)},H.createElement(_9,{x:e.x,y:e.y,width:s,height:m,orientation:e.orientation,mirror:e.mirror,axisLine:i,otherSvgProps:ku(e)}),H.createElement(A9,{ref:Z,axisType:P,events:C,fontSize:D,getTicksConfig:e,height:e.height,letterSpacing:U,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:c,unit:e.unit,width:e.width,x:e.x,y:e.y}),H.createElement(aq,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},H.createElement(mq,{label:e.label,labelRef:e.labelRef}),e.children)))}),qS=H.forwardRef((e,t)=>{var i=Vo(e,Fh);return H.createElement(T9,Up({},i,{ref:t}))});qS.displayName="CartesianAxis";var E9=["x1","y1","x2","y2","key"],M9=["offset"],P9=["xAxisId","yAxisId"],C9=["xAxisId","yAxisId"];function GP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function yo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(i),!0).forEach(function(s){D9(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):GP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function D9(e,t,i){return(t=I9(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I9(e){var t=O9(e,"string");return typeof t=="symbol"?t:t+""}function O9(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ip(){return Ip=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Ip.apply(null,arguments)}function ux(e,t){if(e==null)return{};var i,s,m=z9(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function z9(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var k9=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:i,x:s,y:m,width:y,height:_,ry:c}=e;return H.createElement("rect",{x:s,y:m,ry:c,width:y,height:_,stroke:"none",fill:t,fillOpacity:i,className:"recharts-cartesian-grid-bg"})};function mk(e){var{option:t,lineItemProps:i}=e,s;if(H.isValidElement(t))s=H.cloneElement(t,i);else if(typeof t=="function")s=t(i);else{var m,{x1:y,y1:_,x2:c,y2:P,key:C}=i,D=ux(i,E9),k=(m=ku(D))!==null&&m!==void 0?m:{},{offset:U}=k,V=ux(k,M9);s=H.createElement("line",Ip({},V,{x1:y,y1:_,x2:c,y2:P,fill:"none",key:C}))}return s}function R9(e){var{x:t,width:i,horizontal:s=!0,horizontalPoints:m}=e;if(!s||!m||!m.length)return null;var{xAxisId:y,yAxisId:_}=e,c=ux(e,P9),P=m.map((C,D)=>{var k=yo(yo({},c),{},{x1:t,y1:C,x2:t+i,y2:C,key:"line-".concat(D),index:D});return H.createElement(mk,{key:"line-".concat(D),option:s,lineItemProps:k})});return H.createElement("g",{className:"recharts-cartesian-grid-horizontal"},P)}function L9(e){var{y:t,height:i,vertical:s=!0,verticalPoints:m}=e;if(!s||!m||!m.length)return null;var{xAxisId:y,yAxisId:_}=e,c=ux(e,C9),P=m.map((C,D)=>{var k=yo(yo({},c),{},{x1:C,y1:t,x2:C,y2:t+i,key:"line-".concat(D),index:D});return H.createElement(mk,{option:s,lineItemProps:k,key:"line-".concat(D)})});return H.createElement("g",{className:"recharts-cartesian-grid-vertical"},P)}function B9(e){var{horizontalFill:t,fillOpacity:i,x:s,y:m,width:y,height:_,horizontalPoints:c,horizontal:P=!0}=e;if(!P||!t||!t.length||c==null)return null;var C=c.map(k=>Math.round(k+m-m)).sort((k,U)=>k-U);m!==C[0]&&C.unshift(0);var D=C.map((k,U)=>{var V=!C[U+1],Q=V?m+_-k:C[U+1]-k;if(Q<=0)return null;var Z=U%t.length;return H.createElement("rect",{key:"react-".concat(U),y:k,x:s,height:Q,width:y,stroke:"none",fill:t[Z],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},D)}function j9(e){var{vertical:t=!0,verticalFill:i,fillOpacity:s,x:m,y,width:_,height:c,verticalPoints:P}=e;if(!t||!i||!i.length)return null;var C=P.map(k=>Math.round(k+m-m)).sort((k,U)=>k-U);m!==C[0]&&C.unshift(0);var D=C.map((k,U)=>{var V=!C[U+1],Q=V?m+_-k:C[U+1]-k;if(Q<=0)return null;var Z=U%i.length;return H.createElement("rect",{key:"react-".concat(U),x:k,y,width:Q,height:c,stroke:"none",fill:i[Z],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return H.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},D)}var N9=(e,t)=>{var{xAxis:i,width:s,height:m,offset:y}=e;return $D(GS(yo(yo(yo({},Fh),i),{},{ticks:XD(i),viewBox:{x:0,y:0,width:s,height:m}})),y.left,y.left+y.width,t)},F9=(e,t)=>{var{yAxis:i,width:s,height:m,offset:y}=e;return $D(GS(yo(yo(yo({},Fh),i),{},{ticks:XD(i),viewBox:{x:0,y:0,width:s,height:m}})),y.top,y.top+y.height,t)},U9={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Ta.grid};function o2(e){var t=JD(),i=eI(),s=QD(),m=yo(yo({},Vo(e,U9)),{},{x:Yt(e.x)?e.x:s.left,y:Yt(e.y)?e.y:s.top,width:Yt(e.width)?e.width:s.width,height:Yt(e.height)?e.height:s.height}),{xAxisId:y,yAxisId:_,x:c,y:P,width:C,height:D,syncWithTicks:k,horizontalValues:U,verticalValues:V}=m,Q=vo(),Z=ir(bt=>BM(bt,"xAxis",y,Q)),G=ir(bt=>BM(bt,"yAxis",_,Q));if(!Eg(C)||!Eg(D)||!Yt(c)||!Yt(P))return null;var oe=m.verticalCoordinatesGenerator||N9,he=m.horizontalCoordinatesGenerator||F9,{horizontalPoints:me,verticalPoints:Ce}=m;if((!me||!me.length)&&typeof he=="function"){var be=U&&U.length,ke=he({yAxis:G?yo(yo({},G),{},{ticks:be?U:G.ticks}):void 0,width:t??C,height:i??D,offset:s},be?!0:k);QT(Array.isArray(ke),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof ke,"]")),Array.isArray(ke)&&(me=ke)}if((!Ce||!Ce.length)&&typeof oe=="function"){var je=V&&V.length,gt=oe({xAxis:Z?yo(yo({},Z),{},{ticks:je?V:Z.ticks}):void 0,width:t??C,height:i??D,offset:s},je?!0:k);QT(Array.isArray(gt),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof gt,"]")),Array.isArray(gt)&&(Ce=gt)}return H.createElement(jl,{zIndex:m.zIndex},H.createElement("g",{className:"recharts-cartesian-grid"},H.createElement(k9,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),H.createElement(B9,Ip({},m,{horizontalPoints:me})),H.createElement(j9,Ip({},m,{verticalPoints:Ce})),H.createElement(R9,Ip({},m,{offset:s,horizontalPoints:me,xAxis:Z,yAxis:G})),H.createElement(L9,Ip({},m,{offset:s,verticalPoints:Ce,xAxis:Z,yAxis:G}))))}o2.displayName="CartesianGrid";var V9={},gk=bs({name:"errorBars",initialState:V9,reducers:{addErrorBar:(e,t)=>{var{itemId:i,errorBar:s}=t.payload;e[i]||(e[i]=[]),e[i].push(s)},replaceErrorBar:(e,t)=>{var{itemId:i,prev:s,next:m}=t.payload;e[i]&&(e[i]=e[i].map(y=>y.dataKey===s.dataKey&&y.direction===s.direction?m:y))},removeErrorBar:(e,t)=>{var{itemId:i,errorBar:s}=t.payload;e[i]&&(e[i]=e[i].filter(m=>m.dataKey!==s.dataKey||m.direction!==s.direction))}}}),{addErrorBar:LX,replaceErrorBar:BX,removeErrorBar:jX}=gk.actions,G9=gk.reducer,q9=["children"];function H9(e,t){if(e==null)return{};var i,s,m=Z9(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function Z9(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var $9={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},X9=H.createContext($9);function yk(e){var{children:t}=e,i=H9(e,q9);return H.createElement(X9.Provider,{value:i},t)}function HS(e,t){var i,s,m=ir(C=>ef(C,e)),y=ir(C=>tf(C,t)),_=(i=m?.allowDataOverflow)!==null&&i!==void 0?i:wa.allowDataOverflow,c=(s=y?.allowDataOverflow)!==null&&s!==void 0?s:Sa.allowDataOverflow,P=_||c;return{needClip:P,needClipX:_,needClipY:c}}function vk(e){var{xAxisId:t,yAxisId:i,clipPathId:s}=e,m=US(),{needClipX:y,needClipY:_,needClip:c}=HS(t,i);if(!c||!m)return null;var{x:P,y:C,width:D,height:k}=m;return H.createElement("clipPath",{id:"clipPath-".concat(s)},H.createElement("rect",{x:y?P:P-D/2,y:_?C:C-k/2,width:y?D:D*2,height:_?k:k*2}))}var _k=(e,t,i,s)=>cd(e,"xAxis",t,s),xk=(e,t,i,s)=>ud(e,"xAxis",t,s),bk=(e,t,i,s)=>cd(e,"yAxis",i,s),wk=(e,t,i,s)=>ud(e,"yAxis",i,s),Y9=it([un,_k,bk,xk,wk],(e,t,i,s,m)=>hd(e,"xAxis")?Mg(t,s,!1):Mg(i,m,!1)),W9=(e,t,i,s,m)=>m;function K9(e){return e.type==="line"}var Q9=it([rb,W9],(e,t)=>e.filter(K9).find(i=>i.id===t)),J9=it([un,_k,bk,xk,wk,Q9,Y9,cS],(e,t,i,s,m,y,_,c)=>{var{chartData:P,dataStartIndex:C,dataEndIndex:D}=c;if(!(y==null||t==null||i==null||s==null||m==null||s.length===0||m.length===0||_==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:k,data:U}=y,V;if(U!=null&&U.length>0?V=U:V=P?.slice(C,D+1),V!=null)return FH({layout:e,xAxis:t,yAxis:i,xAxisTicks:s,yAxisTicks:m,dataKey:k,bandSize:_,displayedData:V})}});function eH(e){var t=Iv(e),i=3,s=2;if(t!=null){var{r:m,strokeWidth:y}=t,_=Number(m),c=Number(y);return(Number.isNaN(_)||_<0)&&(_=i),(Number.isNaN(c)||c<0)&&(c=s),{r:_,strokeWidth:c}}return{r:i,strokeWidth:s}}var sw={exports:{}},lw={};var qP;function tH(){if(qP)return lw;qP=1;var e=Og();function t(P,C){return P===C&&(P!==0||1/P===1/C)||P!==P&&C!==C}var i=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,m=e.useRef,y=e.useEffect,_=e.useMemo,c=e.useDebugValue;return lw.useSyncExternalStoreWithSelector=function(P,C,D,k,U){var V=m(null);if(V.current===null){var Q={hasValue:!1,value:null};V.current=Q}else Q=V.current;V=_(function(){function G(be){if(!oe){if(oe=!0,he=be,be=k(be),U!==void 0&&Q.hasValue){var ke=Q.value;if(U(ke,be))return me=ke}return me=be}if(ke=me,i(he,be))return ke;var je=k(be);return U!==void 0&&U(ke,je)?(he=be,ke):(he=be,me=je)}var oe=!1,he,me,Ce=D===void 0?null:D;return[function(){return G(C())},Ce===null?void 0:function(){return G(Ce())}]},[C,D,k,U]);var Z=s(P,V[0],V[1]);return y(function(){Q.hasValue=!0,Q.value=Z},[Z]),c(Z),Z},lw}var HP;function rH(){return HP||(HP=1,sw.exports=tH()),sw.exports}rH();function nH(e){e()}function iH(){let e=null,t=null;return{clear(){e=null,t=null},notify(){nH(()=>{let i=e;for(;i;)i.callback(),i=i.next})},get(){const i=[];let s=e;for(;s;)i.push(s),s=s.next;return i},subscribe(i){let s=!0;const m=t={callback:i,next:null,prev:t};return m.prev?m.prev.next=m:e=m,function(){!s||e===null||(s=!1,m.next?m.next.prev=m.prev:t=m.prev,m.prev?m.prev.next=m.next:e=m.next)}}}}var ZP={notify(){},get:()=>[]};function aH(e,t){let i,s=ZP,m=0,y=!1;function _(Z){D();const G=s.subscribe(Z);let oe=!1;return()=>{oe||(oe=!0,G(),k())}}function c(){s.notify()}function P(){Q.onStateChange&&Q.onStateChange()}function C(){return y}function D(){m++,i||(i=e.subscribe(P),s=iH())}function k(){m--,i&&m===0&&(i(),i=void 0,s.clear(),s=ZP)}function U(){y||(y=!0,D())}function V(){y&&(y=!1,k())}const Q={addNestedSub:_,notifyNestedSubs:c,handleChangeWrapper:P,isSubscribed:C,trySubscribe:U,tryUnsubscribe:V,getListeners:()=>s};return Q}var oH=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sH=oH(),lH=()=>typeof navigator<"u"&&navigator.product==="ReactNative",uH=lH(),cH=()=>sH||uH?H.useLayoutEffect:H.useEffect,hH=cH();function $P(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function fH(e,t){if($P(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(let m=0;m<i.length;m++)if(!Object.prototype.hasOwnProperty.call(t,i[m])||!$P(e[i[m]],t[i[m]]))return!1;return!0}var dH=Symbol.for("react-redux-context"),pH=typeof globalThis<"u"?globalThis:{};function mH(){if(!H.createContext)return{};const e=pH[dH]??=new Map;let t=e.get(H.createContext);return t||(t=H.createContext(null),e.set(H.createContext,t)),t}var gH=mH();function yH(e){const{children:t,context:i,serverState:s,store:m}=e,y=H.useMemo(()=>{const P=aH(m);return{store:m,subscription:P,getServerState:s?()=>s:void 0}},[m,s]),_=H.useMemo(()=>m.getState(),[m]);hH(()=>{const{subscription:P}=y;return P.onStateChange=P.notifyNestedSubs,P.trySubscribe(),_!==m.getState()&&P.notifyNestedSubs(),()=>{P.tryUnsubscribe(),P.onStateChange=void 0}},[y,_]);const c=i||gH;return H.createElement(c.Provider,{value:y},t)}var vH=yH,_H=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function xH(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function sb(e,t){var i=new Set([...Object.keys(e),...Object.keys(t)]);for(var s of i)if(_H.has(s)){if(e[s]==null&&t[s]==null)continue;if(!fH(e[s],t[s]))return!1}else if(!xH(e[s],t[s]))return!1;return!0}var bH=["id"],wH=["type","layout","connectNulls","needClip","shape"],SH=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Mv.apply(null,arguments)}function XP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function Dc(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?XP(Object(i),!0).forEach(function(s){AH(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):XP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function AH(e,t,i){return(t=TH(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function TH(e){var t=EH(e,"string");return typeof t=="symbol"?t:t+""}function EH(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZS(e,t){if(e==null)return{};var i,s,m=MH(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function MH(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var PH=e=>{var{dataKey:t,name:i,stroke:s,legendType:m,hide:y}=e;return[{inactive:y,dataKey:t,type:m,color:s,value:Dx(i,t),payload:e}]},CH=H.memo(e=>{var{dataKey:t,data:i,stroke:s,strokeWidth:m,fill:y,name:_,hide:c,unit:P,tooltipType:C,id:D}=e,k={dataDefinedOnItem:i,positions:void 0,settings:{stroke:s,strokeWidth:m,fill:y,dataKey:t,nameKey:void 0,name:Dx(_,t),hide:c,type:C,color:s,unit:P,graphicalItemId:D}};return H.createElement(ak,{tooltipEntrySettings:k})}),Sk=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function DH(e,t){for(var i=e.length%2!==0?[...e,0]:e,s=[],m=0;m<t;++m)s=[...s,...i];return s}var IH=(e,t,i)=>{var s=i.reduce((k,U)=>k+U);if(!s)return Sk(t,e);for(var m=Math.floor(e/s),y=e%s,_=t-e,c=[],P=0,C=0;P<i.length;C+=i[P],++P)if(C+i[P]>y){c=[...i.slice(0,P),y-C];break}var D=c.length%2===0?[0,_]:[_];return[...DH(i,m),...c,...D].map(k=>"".concat(k,"px")).join(", ")};function OH(e){var{clipPathId:t,points:i,props:s}=e,{dot:m,dataKey:y,needClip:_}=s,{id:c}=s,P=ZS(s,bH),C=ku(P);return H.createElement(g7,{points:i,dot:m,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:y,baseProps:C,needClip:_,clipPathId:t})}function zH(e){var{showLabels:t,children:i,points:s}=e,m=H.useMemo(()=>s?.map(y=>{var _,c,P={x:(_=y.x)!==null&&_!==void 0?_:0,y:(c=y.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Dc(Dc({},P),{},{value:y.value,payload:y.payload,viewBox:P,parentViewBox:void 0,fill:void 0})}),[s]);return H.createElement(Xz,{value:t?m:void 0},i)}function YP(e){var{clipPathId:t,pathRef:i,points:s,strokeDasharray:m,props:y}=e,{type:_,layout:c,connectNulls:P,needClip:C,shape:D}=y,k=ZS(y,wH),U=Dc(Dc({},Fo(k)),{},{fill:"none",className:"recharts-line-curve",clipPath:C?"url(#clipPath-".concat(t,")"):void 0,points:s,type:_,layout:c,connectNulls:P,strokeDasharray:m??y.strokeDasharray});return H.createElement(H.Fragment,null,s?.length>1&&H.createElement(tk,Mv({shapeType:"curve",option:D},U,{pathRef:i})),H.createElement(OH,{points:s,clipPathId:t,props:y}))}function kH(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function RH(e){var{clipPathId:t,props:i,pathRef:s,previousPointsRef:m,longestAnimatedLengthRef:y}=e,{points:_,strokeDasharray:c,isAnimationActive:P,animationBegin:C,animationDuration:D,animationEasing:k,animateNewValues:U,width:V,height:Q,onAnimationEnd:Z,onAnimationStart:G}=i,oe=m.current,he=Vx(_,"recharts-line-"),me=H.useRef(he),[Ce,be]=H.useState(!1),ke=!Ce,je=H.useCallback(()=>{typeof Z=="function"&&Z(),be(!1)},[Z]),gt=H.useCallback(()=>{typeof G=="function"&&G(),be(!0)},[G]),bt=kH(s.current),It=H.useRef(0);me.current!==he&&(It.current=y.current,me.current=he);var yt=It.current;return H.createElement(zH,{points:_,showLabels:ke},i.children,H.createElement(Ux,{animationId:he,begin:C,duration:D,isActive:P,easing:k,onAnimationEnd:je,onAnimationStart:gt,key:he},De=>{var Tt=Di(yt,bt+yt,De),Ct=Math.min(Tt,bt),Ft;if(P)if(c){var Le="".concat(c).split(/[,\s]+/gim).map(at=>parseFloat(at));Ft=IH(Ct,bt,Le)}else Ft=Sk(bt,Ct);else Ft=c==null?void 0:String(c);if(De>0&&bt>0&&(m.current=_,y.current=Math.max(y.current,Ct)),oe){var We=oe.length/_.length,_t=De===1?_:_.map((at,Kt)=>{var Oe=Math.floor(Kt*We);if(oe[Oe]){var ot=oe[Oe];return Dc(Dc({},at),{},{x:Di(ot.x,at.x,De),y:Di(ot.y,at.y,De)})}return U?Dc(Dc({},at),{},{x:Di(V*2,at.x,De),y:Di(Q/2,at.y,De)}):Dc(Dc({},at),{},{x:at.x,y:at.y})});return m.current=_t,H.createElement(YP,{props:i,points:_t,clipPathId:t,pathRef:s,strokeDasharray:Ft})}return H.createElement(YP,{props:i,points:_,clipPathId:t,pathRef:s,strokeDasharray:Ft})}),H.createElement(Wz,{label:i.label}))}function LH(e){var{clipPathId:t,props:i}=e,s=H.useRef(null),m=H.useRef(0),y=H.useRef(null);return H.createElement(RH,{props:i,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:m,pathRef:y})}var BH=(e,t)=>{var i,s;return{x:(i=e.x)!==null&&i!==void 0?i:void 0,y:(s=e.y)!==null&&s!==void 0?s:void 0,value:e.value,errorVal:$i(e.payload,t)}};class jH extends H.Component{render(){var{hide:t,dot:i,points:s,className:m,xAxisId:y,yAxisId:_,top:c,left:P,width:C,height:D,id:k,needClip:U,zIndex:V}=this.props;if(t)return null;var Q=jn("recharts-line",m),Z=k,{r:G,strokeWidth:oe}=eH(i),he=ek(i),me=G*2+oe,Ce=U?"url(#clipPath-".concat(he?"":"dots-").concat(Z,")"):void 0;return H.createElement(jl,{zIndex:V},H.createElement(zl,{className:Q},U&&H.createElement("defs",null,H.createElement(vk,{clipPathId:Z,xAxisId:y,yAxisId:_}),!he&&H.createElement("clipPath",{id:"clipPath-dots-".concat(Z)},H.createElement("rect",{x:P-me/2,y:c-me/2,width:C+me,height:D+me}))),H.createElement(yk,{xAxisId:y,yAxisId:_,data:s,dataPointFormatter:BH,errorBarOffset:0},H.createElement(LH,{props:this.props,clipPathId:Z}))),H.createElement(L7,{activeDot:this.props.activeDot,points:s,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:Ce}))}}var Ak={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ta.line,type:"linear"};function NH(e){var t=Vo(e,Ak),{activeDot:i,animateNewValues:s,animationBegin:m,animationDuration:y,animationEasing:_,connectNulls:c,dot:P,hide:C,isAnimationActive:D,label:k,legendType:U,xAxisId:V,yAxisId:Q,id:Z}=t,G=ZS(t,SH),{needClip:oe}=HS(V,Q),he=US(),me=Rg(),Ce=vo(),be=ir(It=>J9(It,V,Q,Ce,Z));if(me!=="horizontal"&&me!=="vertical"||be==null||he==null)return null;var{height:ke,width:je,x:gt,y:bt}=he;return H.createElement(jH,Mv({},G,{id:Z,connectNulls:c,dot:P,activeDot:i,animateNewValues:s,animationBegin:m,animationDuration:y,animationEasing:_,isAnimationActive:D,hide:C,label:k,legendType:U,xAxisId:V,yAxisId:Q,points:be,layout:me,height:ke,width:je,left:gt,top:bt,needClip:oe}))}function FH(e){var{layout:t,xAxis:i,yAxis:s,xAxisTicks:m,yAxisTicks:y,dataKey:_,bandSize:c,displayedData:P}=e;return P.map((C,D)=>{var k=$i(C,_);if(t==="horizontal"){var U=ZT({axis:i,ticks:m,bandSize:c,entry:C,index:D}),V=si(k)?null:s.scale(k);return{x:U,y:V,value:k,payload:C}}var Q=si(k)?null:i.scale(k),Z=ZT({axis:s,ticks:y,bandSize:c,entry:C,index:D});return Q==null||Z==null?null:{x:Q,y:Z,value:k,payload:C}}).filter(Boolean)}function UH(e){var t=Vo(e,Ak),i=vo();return H.createElement(sk,{id:t.id,type:"line"},s=>H.createElement(H.Fragment,null,H.createElement(ok,{legendPayload:PH(t)}),H.createElement(CH,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),H.createElement(uk,{type:"line",id:s,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:i}),H.createElement(NH,Mv({},t,{id:s}))))}var Tk=H.memo(UH,sb);Tk.displayName="Line";function Zp(e,t){var i,s;return(i=(s=e.graphicalItems.cartesianItems.find(m=>m.id===t))===null||s===void 0?void 0:s.xAxisId)!==null&&i!==void 0?i:ck}function $p(e,t){var i,s;return(i=(s=e.graphicalItems.cartesianItems.find(m=>m.id===t))===null||s===void 0?void 0:s.yAxisId)!==null&&i!==void 0?i:ck}var VH="Invariant failed";function GH(e,t){throw new Error(VH)}function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},s2.apply(null,arguments)}function cx(e){return H.createElement(tk,s2({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var qH=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,m)=>{if(Yt(t))return t;var y=Yt(s)||si(s);return y?t(s,m):(y||GH(),i)}},HH=(e,t,i)=>i,ZH=(e,t)=>t,Yv=it([rb,ZH],(e,t)=>e.filter(i=>i.type==="bar").find(i=>i.id===t)),$H=it([Yv],e=>e?.maxBarSize),XH=(e,t,i,s)=>s,YH=it([un,rb,Zp,$p,HH],(e,t,i,s,m)=>t.filter(y=>e==="horizontal"?y.xAxisId===i:y.yAxisId===s).filter(y=>y.isPanorama===m).filter(y=>y.hide===!1).filter(y=>y.type==="bar")),WH=(e,t,i)=>{var s=un(e),m=Zp(e,t),y=$p(e,t);if(!(m==null||y==null))return s==="horizontal"?Qw(e,"yAxis",y,i):Qw(e,"xAxis",m,i)},KH=(e,t)=>{var i=un(e),s=Zp(e,t),m=$p(e,t);if(!(s==null||m==null))return i==="horizontal"?LM(e,"xAxis",s):LM(e,"yAxis",m)},QH=it([YH,s8,KH],B7),JH=(e,t,i)=>{var s,m,y=Yv(e,t);if(y!=null){var _=Zp(e,t),c=$p(e,t);if(!(_==null||c==null)){var P=un(e),C=pO(e),{maxBarSize:D}=y,k=si(D)?C:D,U,V;return P==="horizontal"?(U=cd(e,"xAxis",_,i),V=ud(e,"xAxis",_,i)):(U=cd(e,"yAxis",c,i),V=ud(e,"yAxis",c,i)),(s=(m=Mg(U,V,!0))!==null&&m!==void 0?m:k)!==null&&s!==void 0?s:0}}},Ek=(e,t,i)=>{var s=un(e),m=Zp(e,t),y=$p(e,t);if(!(m==null||y==null)){var _,c;return s==="horizontal"?(_=cd(e,"xAxis",m,i),c=ud(e,"xAxis",m,i)):(_=cd(e,"yAxis",y,i),c=ud(e,"yAxis",y,i)),Mg(_,c)}},eZ=it([QH,pO,o8,mO,JH,Ek,$H],V7),tZ=(e,t,i)=>{var s=Zp(e,t);if(s!=null)return cd(e,"xAxis",s,i)},rZ=(e,t,i)=>{var s=$p(e,t);if(s!=null)return cd(e,"yAxis",s,i)},nZ=(e,t,i)=>{var s=Zp(e,t);if(s!=null)return ud(e,"xAxis",s,i)},iZ=(e,t,i)=>{var s=$p(e,t);if(s!=null)return ud(e,"yAxis",s,i)},aZ=it([eZ,Yv],(e,t)=>{if(!(e==null||t==null)){var i=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(i!=null)return i.position}}),oZ=it([WH,Yv],G7),sZ=it([Ea,j2,tZ,rZ,nZ,iZ,aZ,un,X6,Ek,oZ,Yv,XH],(e,t,i,s,m,y,_,c,P,C,D,k,U)=>{var{chartData:V,dataStartIndex:Q,dataEndIndex:Z}=P;if(!(k==null||_==null||t==null||c!=="horizontal"&&c!=="vertical"||i==null||s==null||m==null||y==null||C==null)){var{data:G}=k,oe;if(G!=null&&G.length>0?oe=G:oe=V?.slice(Q,Z+1),oe!=null)return LZ({layout:c,barSettings:k,pos:_,parentViewBox:t,bandSize:C,xAxis:i,yAxis:s,xAxisTicks:m,yAxisTicks:y,stackedData:D,displayedData:oe,offset:e,cells:U,dataStartIndex:Q})}}),lZ=["index"];function l2(){return l2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},l2.apply(null,arguments)}function uZ(e,t){if(e==null)return{};var i,s,m=cZ(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function cZ(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var Mk=H.createContext(void 0),hZ=e=>{var t=H.useContext(Mk);if(t!=null)return t.stackId;if(e!=null)return dj(e)},fZ=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),dZ=e=>{var t=H.useContext(Mk);if(t!=null){var{stackId:i}=t;return"url(#".concat(fZ(i,e),")")}},pZ=e=>{var{index:t}=e,i=uZ(e,lZ),s=dZ(t);return H.createElement(zl,l2({className:"recharts-bar-stack-layer",clipPath:s},i))},mZ=["onMouseEnter","onMouseLeave","onClick"],gZ=["value","background","tooltipPosition"],yZ=["id"],vZ=["onMouseEnter","onClick","onMouseLeave"];function $h(){return $h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},$h.apply(null,arguments)}function WP(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function jo(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?WP(Object(i),!0).forEach(function(s){_Z(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):WP(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function _Z(e,t,i){return(t=xZ(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function xZ(e){var t=bZ(e,"string");return typeof t=="symbol"?t:t+""}function bZ(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hx(e,t){if(e==null)return{};var i,s,m=wZ(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function wZ(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var SZ=e=>{var{dataKey:t,name:i,fill:s,legendType:m,hide:y}=e;return[{inactive:y,dataKey:t,type:m,color:s,value:Dx(i,t),payload:e}]},AZ=H.memo(e=>{var{dataKey:t,stroke:i,strokeWidth:s,fill:m,name:y,hide:_,unit:c,tooltipType:P,id:C}=e,D={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:i,strokeWidth:s,fill:m,dataKey:t,nameKey:void 0,name:Dx(y,t),hide:_,type:P,color:m,unit:c,graphicalItemId:C}};return H.createElement(ak,{tooltipEntrySettings:D})});function TZ(e){var t=ir(Fp),{data:i,dataKey:s,background:m,allOtherBarProps:y}=e,{onMouseEnter:_,onMouseLeave:c,onClick:P}=y,C=hx(y,mZ),D=rk(_,s,y.id),k=nk(c),U=ik(P,s,y.id);if(!m||i==null)return null;var V=Iv(m);return H.createElement(jl,{zIndex:q7(m,Ta.barBackground)},i.map((Q,Z)=>{var{value:G,background:oe,tooltipPosition:he}=Q,me=hx(Q,gZ);if(!oe)return null;var Ce=D(Q,Z),be=k(Q,Z),ke=U(Q,Z),je=jo(jo(jo(jo(jo({option:m,isActive:String(Z)===t},me),{},{fill:"#eee"},oe),V),C2(C,Q,Z)),{},{onMouseEnter:Ce,onMouseLeave:be,onClick:ke,dataKey:s,index:Z,className:"recharts-bar-background-rectangle"});return H.createElement(cx,$h({key:"background-bar-".concat(Z)},je))}))}function EZ(e){var{showLabels:t,children:i,rects:s}=e,m=s?.map(y=>{var _={x:y.x,y:y.y,width:y.width,lowerWidth:y.width,upperWidth:y.width,height:y.height};return jo(jo({},_),{},{value:y.value,payload:y.payload,parentViewBox:y.parentViewBox,viewBox:_,fill:y.fill})});return H.createElement(Xz,{value:t?m:void 0},i)}function MZ(e){var{shape:t,activeBar:i,baseProps:s,entry:m,index:y,dataKey:_}=e,c=ir(Fp),P=ir(Tz),C=i&&String(y)===c&&(P==null||_===P),D=C?i:t;return C?H.createElement(jl,{zIndex:Ta.activeBar},H.createElement(cx,$h({},s,{name:String(s.name)},m,{isActive:C,option:D,index:y,dataKey:_}))):H.createElement(cx,$h({},s,{name:String(s.name)},m,{isActive:C,option:D,index:y,dataKey:_}))}function PZ(e){var{shape:t,baseProps:i,entry:s,index:m,dataKey:y}=e;return H.createElement(cx,$h({},i,{name:String(i.name)},s,{isActive:!1,option:t,index:m,dataKey:y}))}function CZ(e){var t,{data:i,props:s}=e,m=(t=ku(s))!==null&&t!==void 0?t:{},{id:y}=m,_=hx(m,yZ),{shape:c,dataKey:P,activeBar:C}=s,{onMouseEnter:D,onClick:k,onMouseLeave:U}=s,V=hx(s,vZ),Q=rk(D,P,y),Z=nk(U),G=ik(k,P,y);return i?H.createElement(H.Fragment,null,i.map((oe,he)=>H.createElement(pZ,$h({index:he,key:"rectangle-".concat(oe?.x,"-").concat(oe?.y,"-").concat(oe?.value,"-").concat(he),className:"recharts-bar-rectangle"},C2(V,oe,he),{onMouseEnter:Q(oe,he),onMouseLeave:Z(oe,he),onClick:G(oe,he)}),C?H.createElement(MZ,{shape:c,activeBar:C,baseProps:_,entry:oe,index:he,dataKey:P}):H.createElement(PZ,{shape:c,baseProps:_,entry:oe,index:he,dataKey:P})))):null}function DZ(e){var{props:t,previousRectanglesRef:i}=e,{data:s,layout:m,isAnimationActive:y,animationBegin:_,animationDuration:c,animationEasing:P,onAnimationEnd:C,onAnimationStart:D}=t,k=i.current,U=Vx(t,"recharts-bar-"),[V,Q]=H.useState(!1),Z=!V,G=H.useCallback(()=>{typeof C=="function"&&C(),Q(!1)},[C]),oe=H.useCallback(()=>{typeof D=="function"&&D(),Q(!0)},[D]);return H.createElement(EZ,{showLabels:Z,rects:s},H.createElement(Ux,{animationId:U,begin:_,duration:c,isActive:y,easing:P,onAnimationEnd:G,onAnimationStart:oe,key:U},he=>{var me=he===1?s:s?.map((Ce,be)=>{var ke=k&&k[be];if(ke)return jo(jo({},Ce),{},{x:Di(ke.x,Ce.x,he),y:Di(ke.y,Ce.y,he),width:Di(ke.width,Ce.width,he),height:Di(ke.height,Ce.height,he)});if(m==="horizontal"){var je=Di(0,Ce.height,he),gt=Di(Ce.stackedBarStart,Ce.y,he);return jo(jo({},Ce),{},{y:gt,height:je})}var bt=Di(0,Ce.width,he),It=Di(Ce.stackedBarStart,Ce.x,he);return jo(jo({},Ce),{},{width:bt,x:It})});return he>0&&(i.current=me??null),me==null?null:H.createElement(zl,null,H.createElement(CZ,{props:t,data:me}))}),H.createElement(Wz,{label:t.label}),t.children)}function IZ(e){var t=H.useRef(null);return H.createElement(DZ,{previousRectanglesRef:t,props:e})}var Pk=0,OZ=(e,t)=>{var i=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:i,errorVal:$i(e,t)}};class zZ extends H.PureComponent{render(){var{hide:t,data:i,dataKey:s,className:m,xAxisId:y,yAxisId:_,needClip:c,background:P,id:C}=this.props;if(t||i==null)return null;var D=jn("recharts-bar",m),k=C;return H.createElement(zl,{className:D,id:C},c&&H.createElement("defs",null,H.createElement(vk,{clipPathId:k,xAxisId:y,yAxisId:_})),H.createElement(zl,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(k,")"):void 0},H.createElement(TZ,{data:i,dataKey:s,background:P,allOtherBarProps:this.props}),H.createElement(IZ,this.props)))}}var kZ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:Pk,xAxisId:0,yAxisId:0,zIndex:Ta.bar};function RZ(e){var{xAxisId:t,yAxisId:i,hide:s,legendType:m,minPointSize:y,activeBar:_,animationBegin:c,animationDuration:P,animationEasing:C,isAnimationActive:D}=e,{needClip:k}=HS(t,i),U=Rg(),V=vo(),Q=zq(e.children,Lz),Z=ir(he=>sZ(he,e.id,V,Q));if(U!=="vertical"&&U!=="horizontal")return null;var G,oe=Z?.[0];return oe==null||oe.height==null||oe.width==null?G=0:G=U==="vertical"?oe.height/2:oe.width/2,H.createElement(yk,{xAxisId:t,yAxisId:i,data:Z,dataPointFormatter:OZ,errorBarOffset:G},H.createElement(zZ,$h({},e,{layout:U,needClip:k,data:Z,xAxisId:t,yAxisId:i,hide:s,legendType:m,minPointSize:y,activeBar:_,animationBegin:c,animationDuration:P,animationEasing:C,isAnimationActive:D})))}function LZ(e){var{layout:t,barSettings:{dataKey:i,minPointSize:s},pos:m,bandSize:y,xAxis:_,yAxis:c,xAxisTicks:P,yAxisTicks:C,stackedData:D,displayedData:k,offset:U,cells:V,parentViewBox:Q,dataStartIndex:Z}=e,G=t==="horizontal"?c:_,oe=D?G.scale.domain():null,he=pj({numericAxis:G}),me=G.scale(he);return k.map((Ce,be)=>{var ke,je,gt,bt,It,yt;if(D){var De=D[be+Z];if(De==null)return null;ke=lj(De,oe)}else ke=$i(Ce,i),Array.isArray(ke)||(ke=[he,ke]);var Tt=qH(s,Pk)(ke[1],be);if(t==="horizontal"){var Ct,[Ft,Le]=[c.scale(ke[0]),c.scale(ke[1])];je=$T({axis:_,ticks:P,bandSize:y,offset:m.offset,entry:Ce,index:be}),gt=(Ct=Le??Ft)!==null&&Ct!==void 0?Ct:void 0,bt=m.size;var We=Ft-Le;if(It=Ru(We)?0:We,yt={x:je,y:U.top,width:bt,height:U.height},Math.abs(Tt)>0&&Math.abs(It)<Math.abs(Tt)){var _t=_s(It||Tt)*(Math.abs(Tt)-Math.abs(It));gt-=_t,It+=_t}}else{var[at,Kt]=[_.scale(ke[0]),_.scale(ke[1])];if(je=at,gt=$T({axis:c,ticks:C,bandSize:y,offset:m.offset,entry:Ce,index:be}),bt=Kt-at,It=m.size,yt={x:U.left,y:gt,width:U.width,height:It},Math.abs(Tt)>0&&Math.abs(bt)<Math.abs(Tt)){var Oe=_s(bt||Tt)*(Math.abs(Tt)-Math.abs(bt));bt+=Oe}}if(je==null||gt==null||bt==null||It==null)return null;var ot=jo(jo({},Ce),{},{stackedBarStart:me,x:je,y:gt,width:bt,height:It,value:D?ke:ke[1],payload:Ce,background:yt,tooltipPosition:{x:je+bt/2,y:gt+It/2},parentViewBox:Q},V&&V[be]&&V[be].props);return ot}).filter(Boolean)}function BZ(e){var t=Vo(e,kZ),i=hZ(t.stackId),s=vo();return H.createElement(sk,{id:t.id,type:"bar"},m=>H.createElement(H.Fragment,null,H.createElement(ok,{legendPayload:SZ(t)}),H.createElement(AZ,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:m}),H.createElement(uk,{type:"bar",id:m,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:i,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:s}),H.createElement(jl,{zIndex:t.zIndex},H.createElement(RZ,$h({},t,{id:m})))))}var Ck=H.memo(BZ,sb);Ck.displayName="Bar";var jZ=["domain","range"],NZ=["domain","range"];function KP(e,t){if(e==null)return{};var i,s,m=FZ(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function FZ(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function QP(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function Dk(e,t){if(e===t)return!0;var{domain:i,range:s}=e,m=KP(e,jZ),{domain:y,range:_}=t,c=KP(t,NZ);return!QP(i,y)||!QP(s,_)?!1:sb(m,c)}var UZ=["dangerouslySetInnerHTML","ticks","scale"],VZ=["id","scale"];function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},u2.apply(null,arguments)}function JP(e,t){if(e==null)return{};var i,s,m=GZ(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function GZ(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function qZ(e){var t=Li(),i=H.useRef(null);return H.useLayoutEffect(()=>{i.current===null?t(b7(e)):i.current!==e&&t(w7({prev:i.current,next:e})),i.current=e},[e,t]),H.useLayoutEffect(()=>()=>{i.current&&(t(S7(i.current)),i.current=null)},[t]),null}var HZ=e=>{var{xAxisId:t,className:i}=e,s=ir(j2),m=vo(),y="xAxis",_=ir(oe=>az(oe,y,t,m)),c=ir(oe=>tz(oe,t)),P=ir(oe=>iU(oe,t)),C=ir(oe=>AO(oe,t));if(c==null||P==null||C==null)return null;var{dangerouslySetInnerHTML:D,ticks:k,scale:U}=e,V=JP(e,UZ),{id:Q,scale:Z}=C,G=JP(C,VZ);return H.createElement(qS,u2({},V,G,{x:P.x,y:P.y,width:c.width,height:c.height,className:jn("recharts-".concat(y," ").concat(y),i),viewBox:s,ticks:_,axisType:y}))},ZZ={allowDataOverflow:wa.allowDataOverflow,allowDecimals:wa.allowDecimals,allowDuplicatedCategory:wa.allowDuplicatedCategory,angle:wa.angle,axisLine:Fh.axisLine,height:wa.height,hide:!1,includeHidden:wa.includeHidden,interval:wa.interval,minTickGap:wa.minTickGap,mirror:wa.mirror,orientation:wa.orientation,padding:wa.padding,reversed:wa.reversed,scale:wa.scale,tick:wa.tick,tickCount:wa.tickCount,tickLine:Fh.tickLine,tickSize:Fh.tickSize,type:wa.type,xAxisId:0},$Z=e=>{var t=Vo(e,ZZ);return H.createElement(H.Fragment,null,H.createElement(qZ,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),H.createElement(HZ,t))},c2=H.memo($Z,Dk);c2.displayName="XAxis";var XZ=["dangerouslySetInnerHTML","ticks","scale"],YZ=["id","scale"];function h2(){return h2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},h2.apply(null,arguments)}function eC(e,t){if(e==null)return{};var i,s,m=WZ(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function WZ(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function KZ(e){var t=Li(),i=H.useRef(null);return H.useLayoutEffect(()=>{i.current===null?t(A7(e)):i.current!==e&&t(T7({prev:i.current,next:e})),i.current=e},[e,t]),H.useLayoutEffect(()=>()=>{i.current&&(t(E7(i.current)),i.current=null)},[t]),null}var QZ=e=>{var{yAxisId:t,className:i,width:s,label:m}=e,y=H.useRef(null),_=H.useRef(null),c=ir(j2),P=vo(),C=Li(),D="yAxis",k=ir(ke=>rz(ke,t)),U=ir(ke=>oU(ke,t)),V=ir(ke=>az(ke,D,t,P)),Q=ir(ke=>TO(ke,t));if(H.useLayoutEffect(()=>{if(!(s!=="auto"||!k||FS(m)||H.isValidElement(m)||Q==null)){var ke=y.current;if(ke){var je=ke.getCalculatedWidth();Math.round(k.width)!==Math.round(je)&&C(M7({id:t,width:je}))}}},[V,k,C,m,t,s,Q]),k==null||U==null||Q==null)return null;var{dangerouslySetInnerHTML:Z,ticks:G,scale:oe}=e,he=eC(e,XZ),{id:me,scale:Ce}=Q,be=eC(Q,YZ);return H.createElement(qS,h2({},he,be,{ref:y,labelRef:_,x:U.x,y:U.y,tickTextProps:s==="auto"?{width:void 0}:{width:s},width:k.width,height:k.height,className:jn("recharts-".concat(D," ").concat(D),i),viewBox:c,ticks:V,axisType:D}))},JZ={allowDataOverflow:Sa.allowDataOverflow,allowDecimals:Sa.allowDecimals,allowDuplicatedCategory:Sa.allowDuplicatedCategory,angle:Sa.angle,axisLine:Fh.axisLine,hide:!1,includeHidden:Sa.includeHidden,interval:Sa.interval,minTickGap:Sa.minTickGap,mirror:Sa.mirror,orientation:Sa.orientation,padding:Sa.padding,reversed:Sa.reversed,scale:Sa.scale,tick:Sa.tick,tickCount:Sa.tickCount,tickLine:Fh.tickLine,tickSize:Fh.tickSize,type:Sa.type,width:Sa.width,yAxisId:0},e$=e=>{var t=Vo(e,JZ);return H.createElement(H.Fragment,null,H.createElement(KZ,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),H.createElement(QZ,t))},f2=H.memo(e$,Dk);f2.displayName="YAxis";var t$=(e,t)=>t,$S=it([t$,un,wO,oa,bz,rf,bV,Ea],PV),XS=e=>{var t=e.currentTarget.getBoundingClientRect(),i=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/i),chartY:Math.round((e.clientY-t.top)/s)}},Ik=kl("mouseClick"),Ok=kv();Ok.startListening({actionCreator:Ik,effect:(e,t)=>{var i=e.payload,s=$S(t.getState(),XS(i));s?.activeIndex!=null&&t.dispatch(xU({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var d2=kl("mouseMove"),zk=kv(),d0=null;zk.startListening({actionCreator:d2,effect:(e,t)=>{var i=e.payload;d0!==null&&cancelAnimationFrame(d0);var s=XS(i);d0=requestAnimationFrame(()=>{var m=t.getState(),y=CS(m,m.tooltip.settings.shared);if(y==="axis"){var _=$S(m,s);_?.activeIndex!=null?t.dispatch(dz({activeIndex:_.activeIndex,activeDataKey:void 0,activeCoordinate:_.activeCoordinate})):t.dispatch(fz())}d0=null})}});function r$(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var tC={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},kk=bs({name:"rootProps",initialState:tC,reducers:{updateOptions:(e,t)=>{var i;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(i=t.payload.barGap)!==null&&i!==void 0?i:tC.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),n$=kk.reducer,{updateOptions:i$}=kk.actions,Rk=bs({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:NX}=Rk.actions,a$=Rk.reducer,Lk=kl("keyDown"),Bk=kl("focus"),YS=kv();YS.startListening({actionCreator:Lk,effect:(e,t)=>{var i=t.getState(),s=i.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:m}=i.tooltip,y=e.payload;if(!(y!=="ArrowRight"&&y!=="ArrowLeft"&&y!=="Enter")){var _=DS(m,Gg(i),Gv(i),$v(i)),c=_==null?-1:Number(_);if(!(!Number.isFinite(c)||c<0)){var P=rf(i);if(y==="Enter"){var C=ix(i,"axis","hover",String(m.index));t.dispatch(e2({active:!m.active,activeIndex:m.index,activeCoordinate:C}));return}var D=cU(i),k=D==="left-to-right"?1:-1,U=y==="ArrowRight"?1:-1,V=c+U*k;if(!(P==null||V>=P.length||V<0)){var Q=ix(i,"axis","hover",String(V));t.dispatch(e2({active:!0,activeIndex:V.toString(),activeCoordinate:Q}))}}}}}});YS.startListening({actionCreator:Bk,effect:(e,t)=>{var i=t.getState(),s=i.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:m}=i.tooltip;if(!m.active&&m.index==null){var y="0",_=ix(i,"axis","hover",String(y));t.dispatch(e2({active:!0,activeIndex:y,activeCoordinate:_}))}}}});var Il=kl("externalEvent"),jk=kv(),uw=new Map;jk.startListening({actionCreator:Il,effect:(e,t)=>{var{handler:i,reactEvent:s}=e.payload;if(i!=null){s.persist();var m=s.type,y=uw.get(m);y!==void 0&&cancelAnimationFrame(y);var _=requestAnimationFrame(()=>{try{var c=t.getState(),P={activeCoordinate:aV(c),activeDataKey:Tz(c),activeIndex:Fp(c),activeLabel:Az(c),activeTooltipIndex:Fp(c),isTooltipActive:oV(c)};i(P,s)}finally{uw.delete(m)}});uw.set(m,_)}}});var o$=it([Ug],e=>e.tooltipItemPayloads),s$=it([o$,Zv,(e,t)=>t,(e,t,i)=>i],(e,t,i,s)=>{var m=e.find(c=>c.settings.graphicalItemId===s);if(m!=null){var{positions:y}=m;if(y!=null){var _=t(y,i);return _}}}),Nk=kl("touchMove"),Fk=kv();Fk.startListening({actionCreator:Nk,effect:(e,t)=>{var i=e.payload;if(!(i.touches==null||i.touches.length===0)){var s=t.getState(),m=CS(s,s.tooltip.settings.shared);if(m==="axis"){var y=i.touches[0];if(y==null)return;var _=$S(s,XS({clientX:y.clientX,clientY:y.clientY,currentTarget:i.currentTarget}));_?.activeIndex!=null&&t.dispatch(dz({activeIndex:_.activeIndex,activeDataKey:void 0,activeCoordinate:_.activeCoordinate}))}else if(m==="item"){var c,P=i.touches[0];if(document.elementFromPoint==null||P==null)return;var C=document.elementFromPoint(P.clientX,P.clientY);if(!C||!C.getAttribute)return;var D=C.getAttribute(bj),k=(c=C.getAttribute(wj))!==null&&c!==void 0?c:void 0,U=Vg(s).find(Z=>Z.id===k);if(D==null||U==null||k==null)return;var{dataKey:V}=U,Q=s$(s,D,k);t.dispatch(hz({activeDataKey:V,activeIndex:D,activeCoordinate:Q,activeGraphicalItemId:k}))}}}});var l$=vD({brush:Z7,cartesianAxis:P7,chartData:aG,errorBars:G9,graphicalItems:o7,layout:rj,legend:Kj,options:eG,polarAxis:Cq,polarOptions:a$,referenceElements:J7,rootProps:n$,tooltip:bU,zIndex:VV}),u$=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return M5({reducer:l$,preloadedState:t,middleware:s=>{var m;return s({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((m="es6")!==null&&m!==void 0?m:"")}).concat([Ok.middleware,zk.middleware,YS.middleware,jk.middleware,Fk.middleware])},enhancers:s=>{var m=s;return typeof s=="function"&&(m=s()),m.concat(zD({type:"raf"}))},devTools:{serialize:{replacer:r$},name:"recharts-".concat(i)}})};function c$(e){var{preloadedState:t,children:i,reduxStoreName:s}=e,m=vo(),y=H.useRef(null);if(m)return i;y.current==null&&(y.current=u$(t,s));var _=I2;return H.createElement(vH,{context:_,store:y.current},i)}function h$(e){var{layout:t,margin:i}=e,s=Li(),m=vo();return H.useEffect(()=>{m||(s(J5(t)),s(Q5(i)))},[s,m,t,i]),null}var f$=H.memo(h$,sb);function d$(e){var t=Li();return H.useEffect(()=>{t(i$(e))},[t,e]),null}function rC(e){var{zIndex:t,isPanorama:i}=e,s=H.useRef(null),m=Li();return H.useLayoutEffect(()=>(s.current&&m(FV({zIndex:t,element:s.current,isPanorama:i})),()=>{m(UV({zIndex:t,isPanorama:i}))}),[m,t,i]),H.createElement("g",{tabIndex:-1,ref:s})}function nC(e){var{children:t,isPanorama:i}=e,s=ir(DV);if(!s||s.length===0)return t;var m=s.filter(_=>_<0),y=s.filter(_=>_>0);return H.createElement(H.Fragment,null,m.map(_=>H.createElement(rC,{key:_,zIndex:_,isPanorama:i})),t,y.map(_=>H.createElement(rC,{key:_,zIndex:_,isPanorama:i})))}var p$=["children"];function m$(e,t){if(e==null)return{};var i,s,m=g$(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function g$(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},fx.apply(null,arguments)}var y$={width:"100%",height:"100%",display:"block"},v$=H.forwardRef((e,t)=>{var i=JD(),s=eI(),m=lI();if(!Eg(i)||!Eg(s))return null;var{children:y,otherAttributes:_,title:c,desc:P}=e,C,D;return _!=null&&(typeof _.tabIndex=="number"?C=_.tabIndex:C=m?0:void 0,typeof _.role=="string"?D=_.role:D=m?"application":void 0),H.createElement(RC,fx({},_,{title:c,desc:P,role:D,tabIndex:C,width:i,height:s,style:y$,ref:t}),y)}),_$=e=>{var{children:t}=e,i=ir(kx);if(!i)return null;var{width:s,height:m,y,x:_}=i;return H.createElement(RC,{width:s,height:m,x:_,y},t)},iC=H.forwardRef((e,t)=>{var{children:i}=e,s=m$(e,p$),m=vo();return m?H.createElement(_$,null,H.createElement(nC,{isPanorama:!0},i)):H.createElement(v$,fx({ref:t},s),H.createElement(nC,{isPanorama:!1},i))});function x$(){var e=Li(),[t,i]=H.useState(null),s=ir(xj);return H.useEffect(()=>{if(t!=null){var m=t.getBoundingClientRect(),y=m.width/t.offsetWidth;mi(y)&&y!==s&&e(tj(y))}},[t,e,s]),i}function aC(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),i.push.apply(i,s)}return i}function b$(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(i),!0).forEach(function(s){w$(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):aC(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function w$(e,t,i){return(t=S$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S$(e){var t=A$(e,"string");return typeof t=="symbol"?t:t+""}function A$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vp(){return Vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Vp.apply(null,arguments)}var T$=()=>(pG(),null);function dx(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var E$=H.forwardRef((e,t)=>{var i,s,m=H.useRef(null),[y,_]=H.useState({containerWidth:dx((i=e.style)===null||i===void 0?void 0:i.width),containerHeight:dx((s=e.style)===null||s===void 0?void 0:s.height)}),c=H.useCallback((C,D)=>{_(k=>{var U=Math.round(C),V=Math.round(D);return k.containerWidth===U&&k.containerHeight===V?k:{containerWidth:U,containerHeight:V}})},[]),P=H.useCallback(C=>{if(typeof t=="function"&&t(C),C!=null&&typeof ResizeObserver<"u"){var{width:D,height:k}=C.getBoundingClientRect();c(D,k);var U=Q=>{var{width:Z,height:G}=Q[0].contentRect;c(Z,G)},V=new ResizeObserver(U);V.observe(C),m.current=V}},[t,c]);return H.useEffect(()=>()=>{var C=m.current;C?.disconnect()},[c]),H.createElement(H.Fragment,null,H.createElement(Lx,{width:y.containerWidth,height:y.containerHeight}),H.createElement("div",Vp({ref:P},e)))}),M$=H.forwardRef((e,t)=>{var{width:i,height:s}=e,[m,y]=H.useState({containerWidth:dx(i),containerHeight:dx(s)}),_=H.useCallback((P,C)=>{y(D=>{var k=Math.round(P),U=Math.round(C);return D.containerWidth===k&&D.containerHeight===U?D:{containerWidth:k,containerHeight:U}})},[]),c=H.useCallback(P=>{if(typeof t=="function"&&t(P),P!=null){var{width:C,height:D}=P.getBoundingClientRect();_(C,D)}},[t,_]);return H.createElement(H.Fragment,null,H.createElement(Lx,{width:m.containerWidth,height:m.containerHeight}),H.createElement("div",Vp({ref:c},e)))}),P$=H.forwardRef((e,t)=>{var{width:i,height:s}=e;return H.createElement(H.Fragment,null,H.createElement(Lx,{width:i,height:s}),H.createElement("div",Vp({ref:t},e)))}),C$=H.forwardRef((e,t)=>{var{width:i,height:s}=e;return hv(i)||hv(s)?H.createElement(M$,Vp({},e,{ref:t})):H.createElement(P$,Vp({},e,{ref:t}))});function D$(e){return e===!0?E$:C$}var I$=H.forwardRef((e,t)=>{var{children:i,className:s,height:m,onClick:y,onContextMenu:_,onDoubleClick:c,onMouseDown:P,onMouseEnter:C,onMouseLeave:D,onMouseMove:k,onMouseUp:U,onTouchEnd:V,onTouchMove:Q,onTouchStart:Z,style:G,width:oe,responsive:he,dispatchTouchEvents:me=!0}=e,Ce=H.useRef(null),be=Li(),[ke,je]=H.useState(null),[gt,bt]=H.useState(null),It=x$(),yt=WD(),De=yt?.width>0?yt.width:oe,Tt=yt?.height>0?yt.height:m,Ct=H.useCallback(ct=>{It(ct),typeof t=="function"&&t(ct),je(ct),bt(ct),ct!=null&&(Ce.current=ct)},[It,t,je,bt]),Ft=H.useCallback(ct=>{be(Ik(ct)),be(Il({handler:y,reactEvent:ct}))},[be,y]),Le=H.useCallback(ct=>{be(d2(ct)),be(Il({handler:C,reactEvent:ct}))},[be,C]),We=H.useCallback(ct=>{be(fz()),be(Il({handler:D,reactEvent:ct}))},[be,D]),_t=H.useCallback(ct=>{be(d2(ct)),be(Il({handler:k,reactEvent:ct}))},[be,k]),at=H.useCallback(()=>{be(Bk())},[be]),Kt=H.useCallback(ct=>{be(Lk(ct.key))},[be]),Oe=H.useCallback(ct=>{be(Il({handler:_,reactEvent:ct}))},[be,_]),ot=H.useCallback(ct=>{be(Il({handler:c,reactEvent:ct}))},[be,c]),Dt=H.useCallback(ct=>{be(Il({handler:P,reactEvent:ct}))},[be,P]),Rt=H.useCallback(ct=>{be(Il({handler:U,reactEvent:ct}))},[be,U]),Gt=H.useCallback(ct=>{be(Il({handler:Z,reactEvent:ct}))},[be,Z]),Qt=H.useCallback(ct=>{me&&be(Nk(ct)),be(Il({handler:Q,reactEvent:ct}))},[be,me,Q]),Jt=H.useCallback(ct=>{be(Il({handler:V,reactEvent:ct}))},[be,V]),zr=D$(he);return H.createElement(Oz.Provider,{value:ke},H.createElement(sL.Provider,{value:gt},H.createElement(zr,{width:De??G?.width,height:Tt??G?.height,className:jn("recharts-wrapper",s),style:b$({position:"relative",cursor:"default",width:De,height:Tt},G),onClick:Ft,onContextMenu:Oe,onDoubleClick:ot,onFocus:at,onKeyDown:Kt,onMouseDown:Dt,onMouseEnter:Le,onMouseLeave:We,onMouseMove:_t,onMouseUp:Rt,onTouchEnd:Jt,onTouchMove:Qt,onTouchStart:Gt,ref:Ct},H.createElement(T$,null),i)))}),O$=["width","height","responsive","children","className","style","compact","title","desc"];function z$(e,t){if(e==null)return{};var i,s,m=k$(e,t);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(e);for(s=0;s<y.length;s++)i=y[s],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(m[i]=e[i])}return m}function k$(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;i[s]=e[s]}return i}var R$=H.forwardRef((e,t)=>{var{width:i,height:s,responsive:m,children:y,className:_,style:c,compact:P,title:C,desc:D}=e,k=z$(e,O$),U=ku(k);return P?H.createElement(H.Fragment,null,H.createElement(Lx,{width:i,height:s}),H.createElement(iC,{otherAttributes:U,title:C,desc:D},y)):H.createElement(I$,{className:_,style:c,width:i,height:s,responsive:m??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},H.createElement(iC,{otherAttributes:U,title:C,desc:D,ref:t},H.createElement(t9,null,y)))});function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},p2.apply(null,arguments)}var L$={top:5,right:5,bottom:5,left:5},B$={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:L$,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Uk=H.forwardRef(function(t,i){var s,m=Vo(t.categoricalChartProps,B$),{chartName:y,defaultTooltipEventType:_,validateTooltipEventTypes:c,tooltipPayloadSearcher:P,categoricalChartProps:C}=t,D={chartName:y,defaultTooltipEventType:_,validateTooltipEventTypes:c,tooltipPayloadSearcher:P,eventEmitter:void 0};return H.createElement(c$,{preloadedState:{options:D},reduxStoreName:(s=C.id)!==null&&s!==void 0?s:y},H.createElement(H7,{chartData:C.data}),H.createElement(f$,{layout:m.layout,margin:m.margin}),H.createElement(d$,{baseValue:m.baseValue,accessibilityLayer:m.accessibilityLayer,barCategoryGap:m.barCategoryGap,maxBarSize:m.maxBarSize,stackOffset:m.stackOffset,barGap:m.barGap,barSize:m.barSize,syncId:m.syncId,syncMethod:m.syncMethod,className:m.className,reverseStackOrder:m.reverseStackOrder}),H.createElement(R$,p2({},m,{ref:i})))}),j$=["axis"],N$=H.forwardRef((e,t)=>H.createElement(Uk,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:j$,tooltipPayloadSearcher:zz,categoricalChartProps:e,ref:t})),F$=["axis","item"],U$=H.forwardRef((e,t)=>H.createElement(Uk,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:F$,tooltipPayloadSearcher:zz,categoricalChartProps:e,ref:t}));function V$({theme:e,selectedStationData:t}){console.log(" LeftSidebar rendered with selectedStationData:",t);const[i,s]=H.useState(0),[m,y]=H.useState(0),_=506;H.useEffect(()=>{const Z=new Date,G=Z.getFullYear(),he=new Date(G,11,31)-Z,me=Math.ceil(he/(1e3*60*60*24));s(Math.max(0,me))},[]),H.useEffect(()=>{(async()=>{try{const he=await fetch("https://docs.google.com/spreadsheets/d/1_2Hiy8llH0mwVXmCbDXGYQ0goP_FnU5JRn412QFd2G0/export?format=csv");if(!he.ok)throw new Error(`HTTP error: ${he.status}`);const be=(await he.text()).trim().split(/\r?\n/).map(gt=>gt.split(",").map(bt=>bt.trim())).slice(1);let ke=0;be.forEach(gt=>{const bt=gt[0],It=Number(gt[1])||0;bt.includes(" ")&&(ke=It)});const je=ke/_*100;y(Math.round(je))}catch(G){console.error("Error fetching completion data:",G),y(0)}})()},[]);const[c,P]=H.useState([{name:"400-450",value:25},{name:"450-500",value:35},{name:"500-550",value:20},{name:"550+",value:20}]),[C,D]=H.useState([{name:"0-10",value:15},{name:"10-20",value:30},{name:"20-30",value:35},{name:"30+",value:20}]);H.useEffect(()=>{if(console.log(" LeftSidebar useEffect triggered, selectedStationData:",t),t&&t.elevation&&t.slope){console.log(" Updating charts with station data:",t);const Z=t.elevation,G=t.slope,oe=[{name:"400-450",value:0},{name:"450-500",value:0},{name:"500-550",value:0},{name:"550+",value:0}],he=[{name:"0-10",value:0},{name:"10-20",value:0},{name:"20-30",value:0},{name:"30+",value:0}];Z>=400&&Z<450?oe[0].value=100:Z>=450&&Z<500?oe[1].value=100:Z>=500&&Z<550?oe[2].value=100:Z>=550&&(oe[3].value=100),G>=0&&G<10?he[0].value=100:G>=10&&G<20?he[1].value=100:G>=20&&G<30?he[2].value=100:G>=30&&(he[3].value=100),console.log(" Setting elevation data:",oe),console.log(" Setting slope data:",he),P(oe),D(he)}else console.log(" Resetting to default charts"),P([{name:"400-450",value:25},{name:"450-500",value:35},{name:"500-550",value:20},{name:"550+",value:20}]),D([{name:"0-10",value:15},{name:"10-20",value:30},{name:"20-30",value:35},{name:"30+",value:20}])},[t]);const k=[{title:" ",value:i},{title:"  ",value:506},{title:" ",value:`${m}%`}],U={border:e==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",borderRadius:"8px",padding:"10px",background:e==="dark"?"#252525":"#ffffff",textAlign:"center",marginBottom:"10px",boxShadow:e==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 4px rgba(0,0,0,0.08)"},V={fontSize:"13px",color:e==="dark"?"#dddddd":"#555555",marginBottom:"5px"},Q={fontSize:"22px",fontWeight:"bold",color:e==="dark"?"#eaeaea":"#111111"};return we.jsxs("div",{style:{padding:"12px",height:"100%",overflowY:"auto",overflowX:"hidden",background:"transparent",color:e==="dark"?"#eaeaea":"#111111",boxSizing:"border-box",width:"100%"},children:[we.jsx("h3",{style:{marginBottom:"12px",fontSize:"16px",textAlign:"center",color:e==="dark"?"#eaeaea":"#111111"},children:""}),we.jsx("div",{style:{marginBottom:"20px"},children:k.map((Z,G)=>we.jsxs("div",{style:U,children:[we.jsx("div",{style:V,children:Z.title}),we.jsx("div",{style:Q,children:Z.value})]},G))}),we.jsxs("div",{style:{marginBottom:"18px",display:"flex",flexDirection:"column",alignItems:"center"},children:[we.jsxs("h4",{style:{fontSize:"14px",marginBottom:"8px",textAlign:"center",color:e==="dark"?"#eaeaea":"#111111"},children:["  (%)",t&&we.jsxs("div",{style:{fontSize:"12px",color:"#d4af37",marginTop:"4px"},children:[t.name,": ",t.elevation,""]})]}),we.jsxs(U$,{width:235,height:180,data:c,children:[we.jsx(o2,{strokeDasharray:"3 3",stroke:"var(--chart-grid)"}),we.jsx(c2,{dataKey:"name",tick:{fontSize:10},interval:0,angle:-15,textAnchor:"end",height:45,stroke:"var(--text-primary)"}),we.jsx(f2,{tickFormatter:Z=>`${Z}%`,tick:{fontSize:10},width:35,stroke:"var(--text-primary)"}),we.jsx(eP,{formatter:Z=>`${Z}%`,contentStyle:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}}),we.jsx(Ck,{dataKey:"value",fill:"var(--chart-bar)",name:" "})]})]}),we.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[we.jsxs("h4",{style:{fontSize:"14px",marginBottom:"8px",textAlign:"center",color:e==="dark"?"#eaeaea":"#111111"},children:["   (%)",t&&we.jsxs("div",{style:{fontSize:"12px",color:"#d4af37",marginTop:"4px"},children:[t.name,": ",t.slope?.toFixed(2),""]})]}),we.jsxs(N$,{width:235,height:180,data:C,children:[we.jsx(o2,{strokeDasharray:"3 3",stroke:"var(--chart-grid)"}),we.jsx(c2,{dataKey:"name",tick:{fontSize:8},interval:0,angle:-45,textAnchor:"end",height:55,stroke:"var(--text-primary)"}),we.jsx(f2,{tickFormatter:Z=>`${Z}%`,tick:{fontSize:10},width:35,stroke:"var(--text-primary)"}),we.jsx(eP,{formatter:Z=>`${Z}%`,contentStyle:{background:"var(--bg-card)",color:"var(--text-primary)",border:"1px solid var(--border-color)"}}),we.jsx(Tk,{type:"monotone",dataKey:"value",stroke:"var(--chart-line)",name:" ",dot:{r:3}})]})]})]})}function G$({mapRef:e,onZoom:t,onZoomAll:i,onRockyZoneZoom:s,theme:m}){const[y,_]=H.useState("all"),[c,P]=H.useState("all"),[C,D]=H.useState([]),[k,U]=H.useState({area:!0,roads:!0,boundary:!0,hillshade:!0,newPoints:!0,allStations:!0}),[V,Q]=H.useState("default"),Z={background:m==="dark"?"#252525":"#ffffff",border:m==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",borderRadius:"10px",padding:"12px",marginBottom:"12px",boxShadow:m==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 4px rgba(0,0,0,0.08)"},G={fontSize:"14px",fontWeight:500,marginBottom:"6px",display:"block",color:m==="dark"?"#eaeaea":"#111111"},oe={width:"100%",padding:"8px 10px",borderRadius:"8px",border:m==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",backgroundColor:m==="dark"?"#252525":"#ffffff",color:m==="dark"?"#eaeaea":"#111111",fontSize:"14px",outline:"none",cursor:"pointer"};H.useEffect(()=>{(async()=>{try{D([{display:"Critical zone",value:"Rock fall"},{display:"Transition zone",value:"Transition zone"}])}catch(be){console.error("Error fetching rocky zones:",be),D([{display:"Critical zone",value:"Rock fall"},{display:"Transition zone",value:"Transition zone"}])}})()},[]);function he(Ce){const be=Ce.target.value;P(be),be==="all"?i&&i():s&&s(be)}const me=Ce=>{const be=!k[Ce];U(ke=>({...ke,[Ce]:be})),e&&e.current&&e.current.toggleLayer&&e.current.toggleLayer(Ce)};return we.jsxs("div",{style:{padding:"12px",height:"100%",overflowY:"auto",background:"transparent",color:m==="dark"?"#eaeaea":"#111111"},children:[we.jsx("h3",{style:{marginBottom:"12px",fontSize:"16px",color:m==="dark"?"#eaeaea":"#111111"},children:" "}),we.jsx("div",{style:{marginBottom:"20px"},children:we.jsxs("div",{style:Z,children:[we.jsx("label",{style:G,children:" "}),we.jsxs("select",{value:c,onChange:he,style:oe,children:[we.jsx("option",{value:"all",children:""}),C.map((Ce,be)=>we.jsx("option",{value:Ce.value,children:Ce.display},be))]})]})}),we.jsx("div",{style:{marginBottom:"20px"},children:we.jsxs("div",{style:{...Z,marginBottom:0},children:[we.jsx("h6",{style:{marginTop:0,marginBottom:10,fontSize:"14px",fontWeight:600},children:"Legend"}),we.jsx("div",{style:{fontWeight:600,marginBottom:6,fontSize:"13px"},children:"Points"}),we.jsxs("div",{style:{fontSize:"13px",marginBottom:4},children:[we.jsx("span",{style:{color:"#007bff"},children:""})," S "]}),we.jsxs("div",{style:{fontSize:"13px",marginBottom:4},children:[we.jsx("span",{style:{color:"#ffff00"},children:""})," N "]}),we.jsxs("div",{style:{fontSize:"13px",marginBottom:4},children:[we.jsx("span",{style:{color:"#ff0000"},children:""})," Samples"]}),we.jsxs("div",{style:{fontSize:"13px",marginBottom:4},children:[we.jsx("span",{style:{color:"#ff0000"},children:""})," Critical"]}),we.jsxs("div",{style:{fontSize:"13px",marginBottom:8},children:[we.jsx("span",{style:{color:"#ff0000"},children:""})," Transitional"]}),we.jsx("hr",{style:{margin:"8px 0",borderColor:m==="dark"?"rgba(255,255,255,0.1)":"#dcdcdc"}}),V==="dark"&&we.jsx("div",{style:{marginBottom:8},children:we.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",fontSize:"13px"},children:[we.jsx("input",{type:"checkbox",checked:k?.hillshade||!1,onChange:()=>me("hillshade"),style:{accentColor:m==="dark"?"#4da3ff":"#007bff",cursor:"pointer"}}),"DEM"]})}),we.jsx("div",{style:{fontWeight:600,marginBottom:6,fontSize:"13px"},children:"Layers"}),[{key:"area",label:"Area"},{key:"roads",label:"Roads"},{key:"boundary",label:"Boundary"},{key:"newPoints",label:"Rocky points"},{key:"allStations",label:"Stations"}].map(Ce=>we.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,cursor:"pointer",fontSize:"13px"},children:[we.jsx("input",{type:"checkbox",checked:k?.[Ce.key]||!1,onChange:()=>me(Ce.key),style:{accentColor:m==="dark"?"#4da3ff":"#007bff",cursor:"pointer"}}),Ce.label]},Ce.key))]})}),we.jsxs("div",{style:{marginTop:12,padding:10,background:m==="dark"?"#252525":"#ffffff",borderRadius:8,border:m==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",fontSize:14,color:m==="dark"?"#eaeaea":"#111111"},children:["Project for Slope and Rockfall Hazard Assessment in the Holy Sites and Implementation of Engineering Protection Measures",we.jsx("div",{style:{marginTop:6,fontWeight:700,fontSize:14},children:"Project Code: T-2025-82"})]})]})}const oC=60;function q$(){const[e]=H.useState(!0),[t]=H.useState(!0),[i,s]=H.useState(null),m=H.useRef(null),{theme:y,toggleTheme:_}=DC();return we.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",backgroundColor:"var(--bg-primary)",color:"var(--text-primary)"},children:[we.jsx("div",{style:{height:oC},children:we.jsx(H3,{theme:y,onToggleTheme:_})}),we.jsxs("div",{style:{flex:1,position:"relative",height:`calc(100vh - ${oC}px)`,paddingLeft:e?260:0,paddingRight:t?260:0},children:[we.jsx(W3,{ref:m,theme:y,onStationSelect:s}),e&&we.jsx("div",{style:{position:"absolute",top:0,left:0,width:260,height:"100%",background:y==="dark"?"#1a1a1a":"#ffffff",borderRight:y==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",borderRadius:0,boxShadow:y==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 4px rgba(0,0,0,0.08)",zIndex:20,overflow:"hidden"},children:we.jsx(V$,{theme:y,selectedStationData:i})}),t&&we.jsx("div",{style:{position:"absolute",top:0,right:0,width:260,height:"100%",background:y==="dark"?"#1a1a1a":"#ffffff",borderLeft:y==="dark"?"1px solid rgba(255,255,255,0.1)":"1px solid #dcdcdc",borderRadius:0,boxShadow:y==="dark"?"0 2px 8px rgba(0,0,0,0.3)":"0 1px 4px rgba(0,0,0,0.08)",zIndex:20,overflow:"hidden"},children:we.jsx(G$,{theme:y,mapRef:m,onZoom:c=>m.current&&m.current.zoomToFeatureByName(c),onZoomAll:()=>m.current&&m.current.fitToAll(),onRockyZoneZoom:c=>m.current&&m.current.zoomToRockyZone(c)})})]})]})}const H$=()=>{const e=g2(),[t,i]=H.useState(!1),{theme:s,toggleTheme:m}=DC(),y=()=>{i(!t)};return we.jsxs("div",{className:"header-wrapper",children:[we.jsx("div",{className:"logos-section",children:we.jsx("img",{src:s==="dark"?"/src/assets/HeaderAndLogo/Logo Dark mode.png":"/src/assets/HeaderAndLogo/Logo Light mode.png",alt:"Vision Logo",className:"header-logo",onClick:()=>e("/"),onError:_=>{_.target.src="/src/assets/HeaderAndLogo/Logo Dark mode.png"}})}),we.jsxs("header",{className:"top-header",children:[we.jsx("button",{className:"menu-toggle",onClick:y,children:t?"":""}),we.jsxs("nav",{className:`nav-links ${t?"active":""}`,children:[we.jsx("a",{href:"/",onClick:()=>i(!1),children:""}),we.jsx("a",{href:"/map",onClick:()=>i(!1),children:" "}),we.jsx("a",{href:"/#",onClick:()=>i(!1),children:""}),we.jsx("a",{href:"/contact",onClick:()=>i(!1),children:" "}),we.jsx("button",{className:"theme-toggle-btn",onClick:m,title:"Switch Theme",children:s==="dark"?we.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#b69767",xmlns:"http://www.w3.org/2000/svg",children:[we.jsx("path",{d:"M12 3V4M12 20V21M4 12H3M21 12H20M5.31412 5.31412L6.02115 6.02115M17.9789 17.9789L18.6859 18.6859M5.31412 18.6859L6.02115 17.9789M17.9789 6.02115L18.6859 5.31412",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),we.jsx("circle",{cx:"12",cy:"12",r:"5",stroke:"white",strokeWidth:"2"})]}):we.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#b69767",xmlns:"http://www.w3.org/2000/svg",children:we.jsx("path",{d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]})]})},Z$=()=>{const e=g2();return we.jsx("section",{className:"hero-section",children:we.jsx("div",{className:"vision-container",children:we.jsxs("div",{className:"vision-box",onClick:()=>e("/map"),children:[we.jsxs("h2",{className:"vision-title",children:[" ",we.jsx("br",{})," "]}),we.jsx("span",{className:"arrow-icon",style:{transform:"revert"},children:""})]})})})},$$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABbCAMAAADEKmKVAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMA4KAgwBBggPBAMNCwkHBQNMOJBwAAAAlwSFlzAAALEgAACxIB0t1+/AAABO1JREFUaIHNWdeW6yAMpHds/v9r70GiuSTGGx6uXjbOxmMYtUEmq0zaTSu7DK6Z3HxCC/ta5N2kbsItRGYIKwQu3ai1yAyIkErki1XYMaVEOwlbxl7jTptS8pIQroUIShLiTEpUroAWKRmJa88874TsKSW9ANkhtawFiCIkpEQXQGuAUXnBUecHGA6PWxCBAjZPkW8gPsLl9js0zeHAW1DgJsISsgE0LxYv8ZP+36FNJQQzkKXkIRIXQAsAzcFtSyrq6tsF0Bp5SF7QhPnjl0RITCkQDGxMR1d9+7OplEzG2CkWVld8uaCI8JZ5VuvN1Z3435EhZ+LzV3+yWBjpZteUEDLEdLVFhQ/D74Dk1nUwe6r8pTcsMXHgVt0tmismhBD6rQsyAy3YuLky7ULrQfQlVTqLhfLZXzNRp9E8f4FsoTFi0YAWto13S1AmhmmrtG+lYMqU7/0WRchR+YVRT1kxj11KR8He+0UVPbrIFELwiy1NVoGiPsIGnGgDfV3gl8A4L8iwNxNlK+lPxnHzsldVWCwqP1+4N5zIGiKZi3CpDHeWs6W6TJm29fIkgv1NI98Fm99UhjvLES2qx5wQoSBLRTG68dkgC3fCIwZp6KH6xYBWGu2Y2FwxU6NRAy+h6ksNPWJLSTxDS1E3KoLOJuoX6CoN7c1UBuRJWnyzvSGdTDQxpcdWSSeh5UY/4OrqWw395u2qHTKaTOSEOJvZyJxsdsxyDbQ2riNw/QCtChNefS3NCF0iBAogI1/dKHVhgj2pDYvp0YV9OUB8gLblh1Q/l0decqpiQ7J+km210Im5ml49uHtYDLCXUroeiXksrmOzNTegboOby9/9RlvZUgroNt9V1RWHnasqlIX0+nwv01m0nqsTH4P4lbFzF9YHLbHPBfGtudOyc8evdW8+iO/tpHhCK/GuRKSZCOJ7y9yG9p92yH4VxNxae0dYHPwmcTTAdZnNzASxLX6mVz9L2vVBXur+KojdWLbZ4YbiKgNPZMPPxFQQb+lgg4ThDSw35AGZzbmOYWDmH1uoBA17VHtejmumU5VCHSZZMnZsjYzyLlU9r3O7GQWVcyBDyV1r0M+q3ZjDoTCKMqs8koe5gyXDOxRGiHdIPexi0MbAWhNAbgqaYw7E1kYcJCAsW0BKFDwtYvm0Az3Pftwgj+GMHkA/Gwkpl+90pjT4vS7R7jrglxNJKGDTvvBYZGjtLfKTTJkaPMAQoQ+IsM737mfZB+yJjHme4lgtuhSiIgYxmeeTAyJps9WLVqe/Jk46TswiNJXn2VOVSN9qKg6IaDm0KZzzzQyInjsBoig8v4VS4/xUCDQ5+qF/lQHRYaY6PyCqXZfedd2tHHpKkaP2dMR5si9aoY1m+cZEVHUnLwYinxUOvfJKp85Bg31oaRcNA3y8fYXS1eTAi7sAXR82ZTfywZ+UOP/zPL8r98KLOi2b/TAgOks1enijcR5FvbV+SupT/PJc+vNUq53tNAeJWClhfwiPi7USEAZ9oMq7mZ9tPEcb16ciJvxV1w62HbBVv2K/ThHrKhmMq6BEeUb7Lv5uWS4nGl2vqqDQOHhhYubxxeygj1Q6C8mfoUUbPqEsw3/QqdnVN/Opjcy6cdSiPw7eXalWXsAoRGsdRT2m/Iaco298GT2IoxWvYGUZkA3m47pX9W7XIY++8/R7wxMeIeQft5du0EfjnqUAAAAASUVORK5CYII=",X$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAABbCAMAAACrt/z9AAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAYNDgwPCgQIAQMCBwULCQGkyVyQAAAAlwSFlzAAALEgAACxIB0t1+/AAABldJREFUaIHFWtmWpCAMdUFZXP//a+eUBAiQBGuxJy/dx5JwuVkBuz8QZ5RS8/YXU7XFbvN0guy9/c9ollWduezr8t/QbMd4UjL8D0y23ycSjZdhdX+JZlkHAQzIePwRJscYisJkHkezzLWhhtXp6x9VM6cejrq+BDP5QAdAlzX3HO2jiFzpJSEVJkDe39FLj1oNGySLowzQlSyjo00PpgBTGIoHdD0DSPNjeILBiJpFAeosEKqfAgT6e+InElBnR/LxrwQMdlDqaEDwmFzC9wIGG8kwZgB1ShjzrYgOwQHSz4W+ZDAeEFD0QOgvk0g+C0g/FfpKjmAWULc/E/qrV7tzv/OAlvOJ0AeDTWy0eECDJl4A5/vtBmBvKHWpyClljMYGguw4/hLPJhusL/v8C9huVu3Q6G9D364mxKqVDLYYqbU+JzWblr1viXtpmb0OMNhKjNt2CU0uX4V+D6taUyqp48Sut5vrS77IjqlTHTU4ZZVs9ZzNNs7GmF1J9vvci45sJv8nN5jtc3JUKuham0ORu6SPAc2EsgG/4PKtxzQTGzCrN3OoDPaHXYilgvjcTZQ5X/4ony8sujeg8bMwC33nOSqKqVLmO0XKK2LrjigukPzaT+nGhnk09xbtDfxR8XDBOSBpSFlvvzuDT9XTJ3j6Ak/XWc5ub/RcPnkyrZ2MJ8yGY3xhIN1OvNa//8FRSEw/RXxarWOIoTi+u2v3vdQH1T4wMUmBg33qJqKhIv2WxPQzSdzmpw0ekZ6voSqTC4Xa+9gyvlvIYvoZxJG+/Ztn9HJWZypR1v9+o4V1uN/M0o8gHvaWzOta2XMYKbesZYNt96vjXNO51yzjgYCxLV4qaXZnhh7XCuU+0V+dpYnSUMxlu2YkzOi1txDJSd0yJardHvigd5guYc7luKfacfWpmXt90IcU1+d6qDiKmKVKH/WMShU9cYsig3HHyQz8R+VTHSbjj4ejO8Mr7lUXArBG/R7QS7jODCxFKJ8w+Ta680E9FrM0CnpUZ7bGQVl0WFp3xFPWTxgm5osU9OUsKnOuQnXETgDuWbSw2cmbeXI1K1Fn5LPEyEKVVlyhJ/sN3E8ItRD0MUxTnZEoQv5fKlccUrRKvnqEoE9tri0Hc2G60cEWpmQGhnVw+xoIenq5MkWI1KUadAnZg6XESt6beseJpws5za0TaSrYEkFcDOKjjHTTE1SemZRTNyiykVhVDJEQFUUuv2LJSlfd5koUuezq2uYjVrAm2YnZqsylSyjcIVDL4Siqrq51McBJiKjCOx6XCvQLOTQsGD8rrxcxoERpRESxS3dK09xvDTxhaKKIu9XXFaNBd5mm3CpexZ/MsEiH/3ljqZkmBCjzub5WvfTFdTO3PiGVA0WLpoYOxgEpuiQoHczDmZbt50rDcH3yQrSWQs+00Cu4LG4TCI2sFLUFV1mX7SAbWuChol7s4UgHfFEDggCNcdnSWHJii40nH2G4UkugpgJENJlMoz9A/chLxxKylwjI5YZH1FSAiMtYYusxvtbjHaE6XYLXpTMM3PQX1JSAyC7cFiepvSfFe1u9S1gmQgeW5AQ1NSUg8rZ6TWB29JGCNxnRMfkJ2SQUCVc85gAIclBevWHF52g0OagS77FM0x23O+LutwCURyysqFqxf0ypE44x0jcY4ilxAEQ5JKiofIW/qwRjEhUwHbU3vhaK7NcUQcaoDeA9i4xuSMSVw6Zobx20JncoPzAIm556p7ozz7to5XLW2LhNzXPrBKj8wOBgV+Sdk2beT52nqHSyw+2VSUAQs8FCgI/4KmCpvQ1NXtO63D17u2RMgBZMUUiJxJJ6OvRAqkuUuN+6dfUEmc8HIlB0ZeO9MGA1JacdmI11Lkb7eOeYPrztqQRW5tSKkB3swFHnxXMOue92tHsJzhZSigmrC18pkPsgwm2x4FuCtB+4dXUZ8ETHBYr2sD0T9vf8IbdNXhBLYTvaMR60QQCK5lOY1LRWHCosivZbdwYEnuAAJ/LuStjKGgTu4vRb0d7ZncKT7YXpOIKCIul+85j0kpisyg1dUjYZUibpRy95n3ndVW80ScsKQ+I2oWLzvduA+0IG7FYNJ9IteSP/A6EipNrpUelfP4GGqX138DxGEXVxUGxqGO+nP6P4VshKlh3sCN8/OP1z4SpfmghHV9d1/wBqjhJvBTG90gAAAABJRU5ErkJggg==",Y$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAABbCAMAAACs2eCtAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMA4CCg8BAwgEDA0HCQULBgXtqVYwAAAAlwSFlzAAALEgAACxIB0t1+/AAABG5JREFUaIHFWuu6rSAILK3MyvL9n/Z84g3Urrr24V/tVsg4DGC7e2fTyqW2tuxievnr5zZtvaY28J94m6UumZybR+QdDZILY/vi/UrW1NNm39qvGDDFB+t9beeI2QgKWB129/axkacJFr+UN8U6W9r4sp7E2Z/HrZkv8DRckfoY2vga4T3X6QOrkdWuDCP6uxWDr63Sk7hDz9ps9qsumdnTV6wm+CpXsgTMJITIIJVXLH1gc2mjVlCINFQT/1DBwl1rreitcXfalwZrdvW7QpmVLvTWPAR1TzLAZMX33TJQHeSOlV1uC0ois7yGhIvWA76eQHYH5TeMyuxUkVujCQBdrwCeHLFbHEb/HUFFSOH4EECzMovjMDc+lknDqYhQn1FB2SjJ0j5u1o63SgAfaOKMkogJ+57FEi9ZFtqICSLdw/V3V0vmyrLPGwSK395/LiVk033HFDBk/o7AzzRy1QMNessMy4mlnSsCoHR8F103csf0Rq5SWsiQxar3+UtcDTTl37la8IUMIhFVibj6zkADUuoqNLpOa3v09ul7GTFkDuoQ0ZyxbEjkqkItZlxD0MYJpI0Ys40I2Ssjyi61Hlhcglv9ih9ZKmoj/q2IWhFdHRoFntacV7ahzYIu12qFd8UgzcJijqxmvzCF9cJ2FYYOzpXNsVhW9u9bZXMyoh+0Aly5q6hcjIj8a0s6E6cVBqk16IU3UYOfTUq8UqQVWRfT17WcUOVJOdyiI9qbHTX8K78g9JxJxymxtHwxoDit8hkf7ArqhzlRwGWVMhv2ZfV8VQqrZKrFhCoepUtfH1TXjU/eIpqM3UDCG8FmQy39nN2PnnuD+R7MSMblmlXlbIpM5MMjNiCpOv/7GwNmnEMo6ySd2uUByNoOvs5X+/LrYCcbwQe2nCXOWHW6NIvceOmkwq9Bb4VfPEkzXjx41rpYZF89nJo6/3GeXcfFs8OdSI/Dxa/T47rLZd2K4n56cA59BTk2hQPHHT1sxjtLVNbfjgrqInKWHNGCJ3pkK0Kuz3cQAnyni6FHtKAhyQneGMKCfucKwh1jnZ/TAwtc+R+X0lHrFqg3XkOYbLN/kM3eePAFnrQIf3HLYrG4XUKYss/JDUtJydHZQuCm88VjRl1BCPDZ7zgcld5Np8YLqXvEsNz7LyBUCPwNlY30+5g7riiEmoR1CiFmH2KSXecczVOHq3DLfKnwB1/sQSLvmk67Pqg1LRIAKD2RxgN6uos5hDh5cVCFCe3IFGpGS5tSwqQQkuTFQXWPWrwBdR8sVpKt9F2G43t41FFwAn1ny8lwWmAhIQuZdHKqn1mx6mcspM7J/Fb+RFsy1FMhDPsEQgIfHd++RJXpS4SQRpkMparQOJQMcTIlYXw5hU816CAzgfGQbelxZvWoRPZALSESCl+DodZlaSD/5B1Q+CBD6v8DgI7QnnXrY4rV2er6078w0Lg/dNXLX5uhCdH/35nJoJovQS9MegDlQ+35bv1/oMVfuSLN8+9Mmhoz3pbzBsa67h+3NaVGafu3tQAAAABJRU5ErkJggg==",W$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABbCAMAAAAr6AmrAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMA4NBg8BCgwECAIDBwsJBQ8LJHKQAAAAlwSFlzAAALEgAACxIB0t1+/AAABIhJREFUaIHtWduSpCAMBbmD2vz/126RgAICouu+7amaqRkbDyH30OQTOD3FYhbfAN/s4B3HuZuhbjEH0P47lnvPR3tHqB637x5bwEkXccvtvV+11noFRXjvZfhPj7ijOGqGG0gCGyPUe1M8bkAGAeDXE7kXOSE3LES9sBvup/oOu1JBiKDe+xtneegn4CJA6cJfN/bceZNatWUKqvjhnwyUM4NwVjjF0Py7T8aO/+yfcf9K11PnIUYQQe/GKO9p30C2UrGYUDkhLFd6129V7T16JoRKe3b8ds2VjQgqX2+4w/4R/EIQETRy8YvlPmuBIRGqx61aNO5eKxPcrH18c6MVLUud0Mbi4BNNAZehr/yuUXmNN9lLH26YEWkj5OuQcFcfSdjPXZ2qETY2Oaj3NK0xBjxa9U+eaUvf59Mq73Jp9Shbs4PgOXegH9ZmmgTXkDhytLhV+lymFmOQlFheGMuPWtyZ3ayBjDByYur99oqbELEPskwS3OaJ+tD0LTchv6OUdQXf33JDdaT98FvR1u+44djt4BGrJRbj54W+AVsnenYw8wKvvOW2HV/ZIftgoYWWqUCLW8YFmaSy3TI4eIwSP4zLs0+5HhjBwv4CvPBpzJ+1ZtTb4odN7rVQUjlJyGzLVvxY0BxtbqxbTVsi2bMk1al2Gzxuc7fazSNM9H0lVeA/PYWZulrIpGO7Z1mTtjtQYBUxo8yjUUkvpTGsEV0n6qNVSWvp0O33mfmnPm6pLH7Raqx2tFuqB9zlA1Vzh7mH4g4z0+wjbonVTs2OEAX3UCdiQ+sO24AOWrbMjq4pzsdhZhu0AW2MfNAySDth9N6GmaYHu5bthklSq5gopECdT81Uk4ipQUdzTlwcPOLm8pfMOajSA4TOlBCm1E7IrtThDFpjfMIQtjx07cSRjZ3XPMio/wuFXLlXabQLFWHd0J6vzXjlrny+M/e/4nYF8/bcrQfcgsl0pyTZF57Xs+UX+M/9nlukcK2gmWFNX7WaYVm5cOu1egXuU2q3dBv6FTe1W5kUK796xJLXV3QjULPOihfbuqw13JecO3/lVy3PEoxAoZVCEbPCh60iVUecJ26BQi9qqV4RkL6OxAjXnxxiDM95lC3mo/5MxY2vgDKs8WW3BZJGRWEGPnpLfpjDwnHWqAC4q43NOKZWGrXneGVBXKkM5sntVBCs9MuGszZnSbkKX/FKnhqS+JqFpfS86V+zbFYY1uZTw0ZO7kZHEY8bDXaKnnzomidZRmIy7mxT6Yjezr3Jj1ZthPgZY36tQHJrWBt+OFrBGBbHt1UdflFcYOjVzPbfKsgky34QY0eeXkHfFbRwhxRmKlU+M/A7xcrdrXMHydT5JHxwJ0W85BaxJ8t1eHCnDeVpzEdwwWa0uEhCbnO0Ub0JfwJWV86J3IFxsTEx3d9+TyLmWLhg2oyqzfEFtzjz7u23R8+BF28p2XwMwUJEf8Q5+V3oC0CK378cDQ6wIt9+i3S/8g/0EhoD2b8e/GtuJ55fBswgBDlfvgzCDLGWfZY7cmCQT30j/wJMbuud1ISQP/AseeecuOO6AAAAAElFTkSuQmCC",K$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAAAuCAMAAABwB5XZAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAgMBA8NCgEDBgULCQIHDgeakrZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAUdJREFUWIXt1tluhDAMBVAbQjaW8f9/bQVIE18rpUTTadUqfoscDgjFduiHI/Iy6DfyIItahvnholrn2c13PzA6EVFrLyKSCz2JiCvptKe5gVb2QbsVaCkfetAyNtAT0pKQLq86ad9Ch2v6+bs7/QJNA9KENDHS5/abNBmakD5sXTVTA00O6RHp3YaCbKEpTlBfgecM69tQj38bcfP6HIRxhL65Jq+PH42sxwWFvEAatASN9SxvtTeZqvJ4tvdmoY8+aEdrcM+Hz86Be/UA8Njjzz6UqKqlWlMaDL0gLRFpu33TC4+07XeftkfbPUH7PTq/j/5iXrTQNDfR4YomZ4ZHbbaUZ2NtFKmDj5qho5ktAz4bK6PITqqiZWYo7kUeunojc9a9YONNp1fmpNNWMxEvcj3eEf1uX6X73f6P0/1uX4nvvNsT0QdGaTAKL9YiUQAAAABJRU5ErkJggg==",Q$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB3CAMAAAD/7HQ1AAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMA4CBgoPAQwIBA0DCQcFCwgx9K9wAAAAlwSFlzAAALEgAACxIB0t1+/AAABYdJREFUaIHtm9mWrCoMhkVFBife/2nPMgQICIqWus9F56ZXlZafhD+DYDc1Noq85X86rvZkWXXtQ1Mmb3kud+f2t1jRhytgEY6r7AknY5zvgsnx684emOFtAl5UZCUwHFBK9caY9TJ4MsYQ6eQoJXCLB+SdSbaunePPleCGgK+6emAADs6m4Bb9/QZ4Qm14Z1OKrBHXPXDQ8Ey/eR0MjuaQBpyzvwFPdqwLcfZlMIbTJbBywDU4+4qqO3JjfKjnWkdvLh6Csy+AFaOpra8nT8k412tgOhGbsbGSCwgurcHNLxlwJ6XMgnvkaSGwRvFK8mpS0xmwK0B5rujAwePEL5B3XGOGavAMoJBpWziPVc1zBqxqwS3fDRBcUBVU4CohQNrCTlQGnJ/j3kmiUVL0MwxU1wYVSTsCh5YBN1lVcyyEg3UI71yRnJOfPgyGVNc2zaDdJHXoBv0uWGLUh1DefDwWEs11cDFXC9QR6EOubsjb34qI+hGsAmnF+xB13eZD4MHm3u/AM16iHxTHj/wpcLHnmjCa+nBjLcZTRSD/oOqtEHOXwMAmTKPsfMC/gFun4w7JYkCN17TXdeAx29769Nj23Bi93YNVRE2yrgPniwSUbx3Np+2DXgZjV6zJM9eMPn8X7NTMJQ5a+QfWRzLXZpMQIgW3IYr4Kjs56fBFhbruq3r7CV+iHhNCaqqryPfBNm6GuM3UqrYi3wZ3mKmakbgY5NxXpZDbYOHVCwWRBVHZJYK3wFDvod9q7VAH7kXFahYl7oKDP52YYLJBVH4WXgCPIUFxrA6DFxUMXuzIXbRmZ/btrRZC49eZM63xzPBiJ8DliHW7x6zbZidU+wlNpj0x+Rw4SHhpknsgi33OngPrRGTU69By58BM/mRQHqD8BkVRndmIChDmwTV168AmbHowYfvEHD5BffTfi4fAEC7SjyzkChU8wWk/8BR48nNpGw42dVsbOq+FuU/AGeVdsKJ6MU2H2HoYDFfPxauLb0Ec+yCYeX9mLMxC+ziYKGhQc7+lXCHk0ia660vgpGrSx7BEUMafPcUxk9SCICoSac+A4yyR1l3/eEFboEfAYe7ynUYQVRj8GRiWNc/AccuzX+2ANJ20QMfg1mr0BAwOpC3Pzti+Yh6CXdE6AU9xtV/24CAqPytHYB+SJ2AWtTy5ZjJpgeZjMI5XCDEegiEThuFku9i4BVoPwTb3uYevA7DygtJFcEjTC0HlwX08X8dgGLEyRXAQ/nQGHhKBlsFwZt80rT4AdzjLyuWaPVjb9pOZeKXmQFyQ4bnP8/knFbges/eWVzUxnVAK4LBLfQAmvd7UnIFFQsmYrfCOzFgR3CzupFCbfwZb0RouD9cOhzWMNweew840XbY4BNsQGM8WLWcyX6fVqQ4siVbLYHUHrPI2BPD5Mu0t8LHVXeAYfOTRvXWbYli/fgwe6A8+BA/a/BtwfDoF55UI4YRhmonj3OWzYBgAW5ph5im4NID4Fk9UXQT3frdSfQtmrl229zB9BjZx5pKfjhhblHSDyRT39OQD4NUXsKh3fB8M7Uzv47l9A9z71RpywL6HxOwCnx374+Bg9AhdurIvi3wEJm+44GsBX4GbEQ+6t1seBXduevvc5dpOyiVaNnsM7K38wlrknT9wLfhn+wP/r8GP2R/4CKyTXpS87nFu6Xb4Bs5vrYgdOLXM64ZlS911fvY/BufW8z8Bu9VD3G/UGbDb1kRjuKVZABf+tQEtLDc5Mi7bKwIWyUoa+Q35+npIuItE5E/BlPwtmJApmONkkq1rTuYYvxbwImatdTE4kCm4XtXXzqZgT/4c7Mjfg5Hs4vjarN2f4ybaGrys09uqTshfgz35c3BpI/YFS7fGPiPv9uS+Iu83A+0/Kbxsxsj/AMkZdyPZhrSUAAAAAElFTkSuQmCC",J$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABbCAMAAAAr6AmrAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAYOAw8BCggEDAINBQkHCwyC+NvAAAAAlwSFlzAAALEgAACxIB0t1+/AAAA2pJREFUaIHtmUl27CoMQA2mdb//1f5jI0AIYecZz34xSirhchGiraG/jGL13nvrPmAVZTHqSMVv03dkIQ9S9o/sx5mSz7LqD9CCIx/HIcdutGmgj0Mtn6HVbp1zi/WZ3gdPAfEifaZtzBnVE5YxQkTxsV5jzDsGFHJvrvJ5AfX1NdoCmrEbAf42KjrUVxE9ObulOQMj4fu0AedCgigDAYKYv5z+Idp7gcp5Db16F/ERixVTaEHdkq/Yoe58/byUM/JqT3cEZb+qbtfPZCE014dhAMQDhi0+jyRoS7tC6qGO2TdsRSlnnkNeoxZfDSYy9HkI1xwp9z7DK7YbykB0sH1OA5NGUMvcjHgfbxQImODGLfNBW9xuIc6cU7naXW1ON12mIMQBDStf9BZzdxblehfCGVYqW7JRSNStMppvplgyVY6nLvb6FcXMPCnnguVXJI7hBnWLD4lr7OBZfjpQIqRdUsIOHBpjlipOuZaH1mE10sJ4v8a9HVKnWk1aylQexHcunpLTpspqhZmBj5NgZJoxtYw2VT7PHXEaa1Fkw5TE66MC/GG+U56GcokYkbzLetW89qRDnPIw0HU4y095U6RHha0cCMcq1+wkHybIUnX+jAgcLgAxFmR0umP3Dy3S1QN6X+wA0LOtqF8pN9i1I84VYHnyO1V+ZsfYptNVnOxqKusfVPkP7BiVOHBxeDdSn983H9gRBv8wo6a0G1N9fh1/OgvEg89Ve0UhEuqKeg878aZ8kbhIKsSmix3jMOsRB9tBcPrYMeRG4nGNZ4g+Npl6cJH4iF3cYOP17Cs2PoBHymfsId1Z08T+jh13+nxo+I4NqxbaPD9kX2dvj7a3bvYoD5kjXOw/vewwa/h6vWz3+Lcf+8f+sX/sH/vH/n+ww/Gav1PcsZdnNtyN+KfsG/YkH9j4Du9F/YjeZC97rNVgj+TtgTwqNdmTzbds9t5Anh2gkBcxjp2Ur8Lcd6hyQ75iY+UrJJqweWVOnrBL5ePYF3K/pMonibYW5TGbKksbbtmJ3YKcTTLymc0qYzanjEaXvguZEdgtZcSuqg600MchydRDyojdVm7L01Ioc2xOGSVe+0vLnflesWC3lJ/ka2XCvle+keeUr7L9WZmXV7xy+L8zq/+qXMkzj1wF3Np/UEb1Nnv3Vf8wDP8B9PyoNUPbizEAAAAASUVORK5CYII=",eX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABhCAMAAACOCS1gAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAINAwEGDAgEDwoOBwsFCQ7zUDpgAAAAlwSFlzAAALEgAACxIB0t1+/AAABDNJREFUaIG1mVe2hCAMQAFBpKjsf7XvPAkSigro5GuKXDKpkCGJTAsnvxGunVPTT9CUOfcj+KbcIUr4naz8bBfpThGELNr5Fx8IXx0SxuAn0A/QlLmqsA+0BlM7le8hX7MtkBjlOfy1P8GPmhOSw83bZJqQjgCfxe4/3N8qPnu9j9d8dkpPhHDj4Uv6KO21kvCeTH8//JoVfWJX5RzrNJMpo4L7H+PmAF5DNOk+tvemQZ+cIQ8kGshxt0bhflVM8imgggWsG2UTDXUKSCKg12BcVG+2TvYUFrL/8ncqGU1Lw/f7cguqyRz1iplv0YObcWzfhqqXcIWob2osIWQv0B92IGESNPuieEeZbLT6+oOOv+1mIPcuhC7WpjpSK/vjrCZHLpvPIiIRyDfzjaapnA1+fgw5us+r7IkelI/6dp2AJ2V7ACG2U5fr6B5LrGmuVZh96dQsZ+dGw6Rs51jF7GWtaTu3ePYe873SDmXBbmv/nr0Qq66XBTYT+oT3sAkPBFUoLmKQ0nmETQiFWC/8uXi2f+Mbx1qSCFmklBtKQsQOiVSeXn0MHS+ht9XS+HT5vMptOnHwKCwsQsxEM+xonws0bMDBT0ENiJq64UQ8TlfSoAhUm7H9A4VW4GZmafV0V0U7mbFBrdya+cIyTCutPNcbzkB515myZYVDAtrscoUoVbm9IdyKFm8TdBGAAX3ktA0mydkQEmrP6Em1yk0W7ksHGt4wUrLP2sFE4jAuzi5y6WoerXoQczaN6jmdVuqAL+q3QWhYr0mFnRZdk/UwLvRaoD0OLroL8nbB5llFnx/PAAt2MLCRrRLv4AZ2aKTv27QMcXHIPfv/dJXc7x+OGDpBoOJXZxPCbXr0vIH7qhsOZ34ne8f+z0aNbFOrfIkVnJulEKE5rg/s/7CIV/DLk0NeEPw+j2zs2MvbGR9mp5mGtI0jOV1hb43sWoucnVOnlUSWEmr1vBY2lDmUoketwyOnRQa+iZWihQ0FA1V1WXPBf5u3OM2a2KB4LIxQo+3tqjY28bEST4FQpB8GcW1s/xRqwZvLzTTM5rnicK5RH7DLI4/f7aYStLOhnaBavrnHqWojG5IP67lo/XA7aWVTlMut0soG53XNk5rZS61ifcSGZlU5Zn7ABsU7RjbtbKhYT6OmyZy31A72OTO8u136GSXtZcdD9k0ZYWj3HnYcSV7Oe3dcfLvY0Sym7lEojxBMfew411e1DA0DYfiuk338MXbZdGDjcB3qZaPTvy6MDs5In+yaVp3hUng0a3QD7OjRPEcz1gg7DvWzHNWpj4fY6P+3FD4lE68xNroU3izVg+zTo9VJipd5lB08evNf4ahNYoL/hA1peN2I3rCffPWGLStR+BV7e+hCnm2XEbEPQViZh3bKdRC+Z18H4S/ZtmHxvVyf78//5ofl5kLFrXwlF+FLCPkDrEGXF+/vW6sAAAAASUVORK5CYII=",tX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAABbCAMAAACYoCGxAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAYBDg8NAwgMBAIKCQsHBQpCSinQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAxVJREFUaIHtmtmSrCAMhgUFWcTm/Z92SgOSsNnLTJ+LQ26mqjv+H2ST1pk+NGaVWs2nKi+YnP1p2/eIiw9mv4Wc/WXsdxTNppTtaLFE9HNHZnVqezxF3IKY7Ds4iG6rhHiQEU2ZZPbagW54KH9mETLadTpsuWWiqC287iLO1XPWW9eaZNQdEpVGozZkCDz8eUKmFYhgBvbnvG+1QOqQzhYklln7SB3Cb1t6jBC9eFOmWB7jotEBzGe2t5FR5m5ekEQVAy0QBbtyVa8xjmXqq7rM0D0I2naRyKdJar2eMXZVHYVE+tMfIoFsweMjEG3c2N4uSNQk/dlfEMkVkZj8IeOV0KKy7mcSE5dtXWJw+a68V6qUkI0mSEJzf+5Hx11qfUSLB8iC+4IuGgZpMdJgaDqtb27ikYjWhTJSDxM/azJvPMjA7aCbDBDpFNa08XF5gh80IG0DSGRrQud+xdw3tKAYcgdXV8iHaGkpFtvDNohXh9mVVoqKW+ZFc26h0F1/CrSJkJg5oC9kShY0Z2rfB5Q5dslMO6VUiF71IADZsrtvIGEtV3MaSKRpIrlDiRLVyJMReOUS6ZkQSDBxbbqBVLdE4pPKBOutqDm3xK8jya0oEeWMYywrm6R6cDI52l7HRDaRuAPQt47eex9LQaR6Oig40tp1JHho8MxCidyMPaBKZ1cmvQ1HK66sg2ShANrIg6rLK5OexsSt6kJ3Ke92WbEOsr6qaDiXKHkvIy3SUXWXaLhiUW28jDyXvsDhb667UPG8YF9Hngo6xPcGGe/CXuE58DJygcYUzyCnibnjVE2PCyVyy09NVA+PzZtcNqxASp+f5KhetSY+Q+4+/1GU6aWaEC2XF5Hn4CYHuUzvqgl0b/hj5DSxo3bmvefy28jSBvIfIPf8F9tbyHWe6UOeDtIUTfcO8pyvpuuSORO9d5DrzYAayIEcyIEcyIEcyIEcyIEcyIEcyIEcyIH8P5FcBzsftqoV2fm2F3+gCpfjg7lwsbmLiBBZ/HfJ35ulj8O/Ypq8RvwSEt7ffs+OZ+5mx7n+a3tM0w+H5cPBiRagdwAAAABJRU5ErkJggg==",rX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFsAAABVCAMAAAAR4mjbAAAAM1BMVEVMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADlf1jlAAAAEHRSTlMA4KBg8IAgQMAQsJBQMNBwGDitNgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAw9JREFUWIXtWdmyqyAQDKuCW///195ii6hIRMe6L2eerFRs254dPy02SdH0/xbrgX41OxFj52ZfxF6IsbtoDJgpoR12vFoAkMqdYfeAIoXeYg9vYY8AOmrs5MsZYIYYOzdS4jtsUm+66FhtpITOfElvf9h/2P8bewZIa0hmHQD+DrTwReQVcC1f6MDRBoB1HGD00Eb6gs0A+tlKhKFBvEE8EZYAbeH28Sf9hQJ6YmybWljUndA0AB3gOHWMDytg9piHNjL03VYIKuIhGReRT62urFCULP4dRrKMoRk0nbbT7KBl9quLx+fEg7TDfoaiSPwYEofIoEj8GBH6EBjPiX/5KrWTVz3eds4D+XHi1xLwacXiYTs1Q4G8eZb4Om4GdhvMJkD2jxKfh9fWm+Vj6gGpwqhyn3jCdInzXfdM6PW287l6ewuMtAPatP4o2bfE3E38RDsMPHHd8+XFvwmw3K9YkbbLQCXTcYYKFx3veXc/8RNt34JHrD0+yxgGDFZK3urSRDu04AGQ+lCiRJK97UAi0Y6paWZg1pPcViiTfNq2fCfaqQVPnt8+Mhysf2JLMCbaa0kSpS0bfsRqPJJItLNSKuQxWWQIH9uiSk77K7Dpuj2ACE40Laok2leH7QZVEm1++ZbrqgTafnQ4T+rJZuvgZVU8baPqe5Nhm9nqqioD0AtX7GoHu2oX69dUiSUa6Ct1QmM3RFxTRcU8ri4e/aEVX1ElbpFD9QVLJ6a/VXFVCZjrlW0pRdBPVUbvw/rmqy2Kw0ldFeOnbVut9cL6Fyu9fU0Vr4es+XDk0Rvl+yuqONb23B3TEDs8P/PGuSpjLRH1EoHnpSLZqSrs9OOEEfEglg31ADpTRZzNMl3cpyT/vcefqMLKVc9HHCCtuFREi6os5T7gWxns5ZOHkipGFjeYCwG/s4IqqkTbOBeyxt3joEpxf/G5VAn4sh1UGQoVwg01dybVnSq6EDrOi/c+KW5VsUfaS/sQmcypEhPc+OZo1cZ8hrP+nrmbmfvUkSZdehs/7mvhK+YVTZ+xaK3Tn39J5EZobTDqlAAAAABJRU5ErkJggg==",nX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHQAAABbCAMAAACVvlH2AAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAwICg8DBgQBDQcCCw4JBQ2oHCHQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAWJJREFUaIHt2duOhCAQRVFosFHwwv9/7QQUVKYzMRndPDTnzURdQSktVNyWXnnZ33e6S+kH7/3AqtGE1c1E1WyC6mYqUt3Mt3hzajYFpx5MTn0dTEwdgzJlhVFNoTBqqUCqrqF2VdQaV3gdKasmk1RXU6NqmkXlO+ZJdZ+5nHqsFko9V+hn9f3H8f83f6mPoKVZqKs5Pm2e1Edu6ScztYVDz5veD5Y1dX4qgmaXn8WgmToY1twmLmwKsWivaPP+NLOZzWxmMxnTVTCFrGC6CqYIrZ12rCnmslMHzHhLLWyKQBjYjC0lbMZ5NMBmXIrNacMxppj2pa2bPWP2gQmrBTtOHjLXeaT2HxKEuX273jMB5vrtOo9SWuQfiEygnBd3Yf9bsoQyVZa4qIc4c3nXlm9NJz0cac6Vz2QS+EBDP1ANVQaLzeiLKyLT0IY2tKENrYhWebV9A6rjmgHOHNYMbEwnfgBYznlH+7ey4AAAAABJRU5ErkJggg==",iX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAABbCAMAAABK8CvpAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAYNDg8BAwwIBAoCBQkHCwcRS5wAAAAAlwSFlzAAALEgAACxIB0t1+/AAAA8hJREFUaIG9mmuXxBAMhrUoehv//9fuqVupaEW78mHPmanx9CVIYsn3tkjJ/6HbknGm9diRJ7XWWnbDHfK0Zt14Rp7WQyeclac17cRz8noJ9PJ6CTTyhOgl0MpTqpdAK4+QTgKdPEI6CfTyegn08joJHIK8LgLXU54TyNZ/QqlVbkaRl0cINat+3KSaPgRNSm4i7CmnPDe4fq8RX2AnQfXVxPk4fziK/QVuyPrTmkUiFAMabO28a1dUbPsSN1j2ORsBUe7vyUQQdTs70yrnc4Z/7byJId7YDf74JnBzwLmi6foBDgF0DV/iCJnGKuBXOEJ4DZDTr3BVQNfkE1zo7Vfs7VvcY39f4556/Bx3P4e7ffRtfmaBYPQgXm5isE3Fjc3w0r1VyQdTSxHkrTiehpd8swKnVHbUzPeHs9EHppjz8SSZPfFIs8eAAnpL3hlsMGRPKnl3S9rGueCoG+VJFFHN06woMZ+lYPo6s2lbmY+MGmZ/PJfiV5q4p5Ly7GG8eu4j77CB3gJjEcp0KLyD/a7Sq3iEbzdAE0tb95zC9MzL2WE8tXU8H62DwOCEyxzPtyFmrlvL86c0AHQaUtphG4+1I3lloOnCj/gRH4b4j0l+ddB6XhF4OBMLiOMx38PH409cTkPwCkAeD6EvDfJkcBt5MFBdXMS3jXaSaPtF8UDg7nsVl11dBWKUd+J4ENCVsKAd3RMjB0XyAOBQop3E5vGEgeoueVU/EY8Gmnez8GsMz3sHbOC9Arbw3gBreBPVIo0m2oE1vPEahLwA1vAYEO61Amt4GzjIbcC6+EUC0V4bEOOf6gOnQfDo1WtagAiezrISC2TPCc2FFxIk82kv7L60BMRUxcB4noE3hrZpmhtbIEJgIX9gQHo1QYUUMwOIumYWNHob85d2mXpc5bTREuJ6kRcTJJa/tWucAJE8QrhKjKvh54hAymeHg51LAKsPtMWJBlI+F0YH7QNy/grm7w3zgrMrnbp1YYtxmAVYMOeMeswW4+DKi4d2ZTzok+vvkIBkgzX5O1pfDqcCsHnAVpVcync92wlZxpJPX9Ywksido2b3QOVFlBq6TufzqqziJqHbDACI5PkStabXlcGHDZq1YG5q8SvTrwzsL23m0PCPDcqvDOwqM8CGK0CfqzJkqFIu4z2ZXxk3NTTIdOX1S243G+oDr/UGrryhFm1tHk8Sbai0dhbt6YwakPT3PhSgsqaTtVxFr7U12lTEuabv7N2N+FK5bwZr887IVN3R4Ow17iCGcu+TVXvWk027/N1u1kJscVHZGyHkD25QgoEtzuhFAAAAAElFTkSuQmCC",Dl=({title:e,icon:t})=>we.jsxs("div",{className:"service-card",children:[we.jsx("div",{className:"service-icon",children:we.jsx("img",{src:t,alt:"Service Icon"})}),we.jsx("div",{className:"service-title",children:e})]}),aX=()=>we.jsxs("div",{className:"content-container",children:[we.jsx("div",{className:"section-title-box",children:"     "}),we.jsx("div",{className:"section-second-title",children:"      "}),we.jsxs("div",{className:"services-grid",children:[we.jsx(Dl,{title:"                     ",icon:$$}),we.jsx(Dl,{title:"        .",icon:X$}),we.jsx(Dl,{title:"        (1:200)     .",icon:Y$}),we.jsx(Dl,{title:"          (  -     -  )         ",icon:W$}),we.jsx(Dl,{title:"                                 .",icon:K$}),we.jsx(Dl,{title:"             ",icon:Q$}),we.jsx(Dl,{title:"                 ",icon:J$}),we.jsx(Dl,{title:"         -  -  .",icon:eX}),we.jsx(Dl,{title:"             ",icon:tX}),we.jsx(Dl,{title:"         (     )     ",icon:rX}),we.jsx(Dl,{title:"     BoltsAnchor      ",icon:nX}),we.jsx(Dl,{title:"                     ",icon:iX})]})]}),oX=()=>{const[e,t]=H.useState(null),i={right:[{label:" ",value:"118.84 "},{label:" ",value:"1012"},{label:" ",value:"506"}],left:[{label:" ",value:"4"},{label:" ",value:"0"},{label:" ",value:""}]},s={1:{right:[{label:" ",value:"  "},{label:"",value:"13.73 "},{label:" ",value:"73"}],left:[{label:"   ",value:"From s1.0 To s_73.0"},{label:" ",value:"0.178"},{label:" ",value:"0"}]},2:{right:[{label:" ",value:"  "},{label:"",value:"41.85 "},{label:" ",value:"282"}],left:[{label:"   ",value:"From s74.0 To s_355.0"},{label:" ",value:"0.280"},{label:" ",value:"0"}]},3:{right:[{label:" ",value:"  "},{label:"",value:"44.21 "},{label:" ",value:"113"}],left:[{label:"   ",value:"From s356.0 To s_468.0"},{label:" ",value:"0.246"},{label:" ",value:"0"}]},4:{right:[{label:" ",value:"  "},{label:"",value:"19.05 "},{label:" ",value:"38"}],left:[{label:"   ",value:"From s469.0 To s_506.0"},{label:" ",value:"0.186"},{label:" ",value:"0"}]}},m=e?s[e].right:i.right,y=e?s[e].left:i.left;return we.jsx("div",{className:"content-container2",children:we.jsxs("div",{className:"map-section-wrapper",children:[we.jsx("div",{className:"map-border-top"}),we.jsx("h2",{className:"map-section-title",children:" "}),we.jsxs("div",{className:"map-content-grid",children:[we.jsx("div",{className:"map-stats-side right-side",children:m.map((_,c)=>we.jsxs("div",{className:"stat-card",children:[we.jsx("h4",{children:_.label}),we.jsx("p",{children:_.value})]},c))}),we.jsx("div",{className:"map-container-center",children:we.jsxs("svg",{version:"1.1",id:"InteractiveMap",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 595.3 841.9",className:"interactive-map-svg",xmlSpace:"preserve",children:[we.jsx("g",{className:"map-group",onMouseEnter:()=>t(1),onMouseLeave:()=>t(null),children:we.jsx("path",{className:`map-region ${e===1?"active-path":""}`,d:`M470.9,446.9H305.1c-0.8,0-1.5-0.7-1.5-1.5V296.6c0-0.5,0.2-0.9,0.6-1.2c0.4-0.3,0.9-0.4,1.3-0.3l13.6,3.7\r
                  c0.3,0.1,0.6,0.3,0.9,0.6l47,69.7l17,13.5l27.8,19.7l60,41.9c0.5,0.4,0.8,1.1,0.6,1.7C472.1,446.5,471.6,446.9,470.9,446.9z`})}),we.jsx("g",{className:"map-group",onMouseEnter:()=>t(2),onMouseLeave:()=>t(null),children:we.jsx("path",{className:`map-region ${e===2?"active-path":""}`,d:`M305.1,446.9H151.3c-0.8,0-1.4-0.6-1.5-1.3c-0.1-0.7,0.4-1.5,1.1-1.6l8.9-2.3l10.1-7.2l4.7-9.9l1.9-8.4\r
                  l-37.9-33.4l-5.4-1.4c-0.3-0.1-0.6-0.3-0.8-0.6l-9-12.1l-7.5-0.9c-0.4,0-0.7-0.2-1-0.5l-9.4-10.9l-6.8-4.2l-3,1\r
                  c-0.5,0.2-1,0.1-1.4-0.3l-5.8-4.6c-0.1,0-0.1-0.1-0.1-0.1l-7.3-7.6l-3.1-2.7l-1,0.1c-0.1,0-0.1,0-0.2,0l-7.9,0.1l-4.6,1l-8.1,2.2\r
                  c-0.1,0-0.2,0-0.3,0.1l-5,0.2c-0.6,0-1.1-0.3-1.4-0.8s-0.3-1.1,0-1.6l1.9-2.9l-0.1-5.4c0-0.6,0.3-1.1,0.8-1.4l12.4-6.4l5.4-4.3\r
                  c0.1-0.1,0.3-0.2,0.5-0.3l16.3-5.2l13.9-11.7c0.1-0.1,0.3-0.2,0.4-0.3l23.8-9l15.7-7.2l22.6-22.2c0.1-0.1,0.2-0.1,0.3-0.2l11.1-6.8\r
                  l9.2-8.8l-1.3-5.9c-0.2-0.8,0.3-1.5,1-1.8l5.8-1.8l5.8-2.9c0.2-0.1,0.4-0.2,0.6-0.2L211,234l6.8-1c0,0,0.1,0,0.1,0l4.2-0.2l6.8-4.2\r
                  c0.1-0.1,0.2-0.1,0.4-0.2l11-3.2c0.7-0.2,1.4,0.1,1.7,0.7l2.6,4.9l2.7,0.1l7.1-1.9c0.6-0.2,1.3,0.1,1.7,0.6l7.2,11.2\r
                  c0.1,0.1,0.1,0.2,0.1,0.3l11.5,31.7c0,0.1,0.1,0.2,0.1,0.3l1.6,13.1l16.3,5.3l12.6,3.5c0.7,0.2,1.1,0.8,1.1,1.4v148.8\r
                  C306.6,446.2,305.9,446.9,305.1,446.9z`})}),we.jsx("g",{className:"map-group",onMouseEnter:()=>t(3),onMouseLeave:()=>t(null),children:we.jsx("path",{className:`map-region ${e===3?"active-path":""}`,d:`M421.7,632.7h-1.6l-29.3-0.2c-0.2,0-0.4,0-0.6-0.1L338,608.6c-0.1,0-0.2-0.1-0.3-0.2l-33.5-24.3\r
                  c-0.4-0.3-0.6-0.7-0.6-1.2V445.4c0-0.8,0.7-1.5,1.5-1.5h165.8c0.3,0,0.6,0.1,0.9,0.3l13.7,9.6c0.3,0.2,0.5,0.5,0.6,0.8l17.6,58.5\r
                  l14.3,28.7c0.1,0.2,0.1,0.4,0.2,0.6l1.8,23.2l5.7,15c0,0.1,0,0.1,0.1,0.2l3.3,12.8l6.6,22.7l6.4,6.7c0.4,0.4,0.5,1.1,0.3,1.6\r
                  s-0.7,0.9-1.4,0.9l-73.7-0.8l-45.2,8.1C421.9,632.7,421.8,632.7,421.7,632.7z`})}),we.jsx("g",{className:"map-group",onMouseEnter:()=>t(4),onMouseLeave:()=>t(null),children:we.jsx("path",{className:`map-region ${e===4?"active-path":""}`,d:`M305.1,584.4c-0.3,0-0.6-0.1-0.9-0.3l-0.7-0.5c-0.1,0-0.1-0.1-0.2-0.1L284,564.7l-25.1-24.1l-103.5-25.2\r
                  c-0.3-0.1-0.5-0.2-0.7-0.4l-13.1-13.1l-24.1-27.3c-0.2-0.3-0.4-0.6-0.4-1l-0.3-16.2c0-0.6,0.3-1.1,0.8-1.3l11.2-6.2\r
                  c0.1-0.1,0.2-0.1,0.3-0.1l21.8-5.8c0.1,0,0.3-0.1,0.4-0.1h153.8c0.8,0,1.5,0.7,1.5,1.5v137.5c0,0.6-0.3,1.1-0.8,1.3\r
                  C305.6,584.3,305.3,584.4,305.1,584.4z`})})]})}),we.jsx("div",{className:"map-stats-side left-side",children:y.map((_,c)=>we.jsxs("div",{className:"stat-card",children:[we.jsx("h4",{children:_.label}),we.jsx("p",{children:_.value})]},c))})]}),we.jsx("div",{className:"map-border-bottom"})]})})},sX=()=>{const e=["/src/assets/Photos/Photos (1).png","/src/assets/Photos/Photos (2).png","/src/assets/Photos/Photos (3).png","/src/assets/Photos/Photos (4).png","/src/assets/Photos/Photos (5).png","/src/assets/Photos/Photos (6).png","/src/assets/Photos/Photos (7).png","/src/assets/Photos/Photos (8).png"],t=H.useRef(null),i=s=>{if(t.current){const{current:m}=t,y=320,_=m.scrollWidth-m.clientWidth;s==="left"?Math.abs(m.scrollLeft)>=_-10?m.scrollTo({left:0,behavior:"smooth"}):m.scrollBy({left:-y,behavior:"smooth"}):Math.abs(m.scrollLeft)<=10?m.scrollTo({left:-_,behavior:"smooth"}):m.scrollBy({left:y,behavior:"smooth"})}};return we.jsxs("div",{style:{width:"100%",position:"relative",marginBottom:"80px"},children:[we.jsx("div",{style:{textAlign:"center"},children:we.jsx("h2",{className:"section-title-box",style:{margin:"0 auto 40px auto",display:"inline-block"},children:" "})}),we.jsxs("div",{className:"slider-container-wrapper",children:[we.jsx("button",{className:"slider-btn prev-btn",onClick:()=>i("right"),children:""}),we.jsx("div",{className:"field-gallery slider",ref:t,children:e.map((s,m)=>we.jsx("div",{className:"gallery-item slider-item",children:we.jsx("img",{src:s,alt:`Documentation ${m+1}`,className:"gallery-img"})},m))}),we.jsx("button",{className:"slider-btn next-btn",onClick:()=>i("left"),children:""})]})]})},lX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQcAAABfCAMAAADS3/K7AAAAbFBMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhrgIhadAAAAI3RSTlMAMGDgEPBwwIBAINCgkO+wUP4f+5yH/bg8z1fUWOj59MxM9jeRg/MAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAtMSURBVHic7Zxrk6woEobxmoBaek73mdn77G7+//+4kdwEBAssO6pjY/JDd1WBKI8vkIkgO7FfP/CvydS/fODjZzLlgR9/OyvyqYmXjv4S+/kDEcd0bREhlfCJiI/vwkEuHSIOs3yxHMBMrUZK+JESxAfm0JXabRzkjMaG7aWClByStXqohIQgPjGHrtju4jAO6Cwp3WIDzNRq1AkJQXxgDl2x3cOhB/RseaUoI4dErR4m4YD5E3Poyu1VDqozaDofwyAZa0RzsUBHNK7VaBMOgvjAHLpye4VD367DQBgGHwO2jEn63wHf+toynRwOtXq4hEgQny7hBUFc59CudOrGYaBxYpt0L7m6S5uWul7Ta2BhrcY9IRLEx55yXRAXOfR8sCfWGED65TVi5Otk28lc3kY8OUS1engJgSA+vYTrgrjEwVJYW4shfSPEuOqMUHqaoL/1azX6CYEgPvyUy4K4wmFT3WI3kgR65TudlCIWrZciTQRyCGr1CBI8QXwGCZcFUc+hVw5T1+pv1BMMT+rYqrtcMpr+jplajWGCJ4iPMOWqIKo5SGr2gz3dVoCBzkIHTU8Hj/4PzNTqESU4QXxGCVcFUctBdQdga6RaBRc58wBx0tAzYBwztRrjBCeIjzjloiAqOfSEgecvPLbVlU8AnyiiHw7Hm1rFcnCCiOVwWRCVHED7Sda6w2UcL9jWnUCcRx4JqrpWBzk4QRzkcFUQdRxausXh16c22dxNyPBgCTmYWh3lYJAe5XBVEHUc6P572l4Tl3E0V3eO2J0Unmxkj7QcjCAScrgoiCoOTeTLJS/wYE5AvfbDM5aUg+KQkoPikJLDRUFUcRjDZsHYyE/M+oY7udXvY2NL97ljjjbk5HBNEFUcuImqC017XB4HftJTBnJwbmUsB5cQy8F3RK8IoprDcy/AMyWJYJjNcvDl8HBhRiSHH79ycviVDdDKrJ4D4lwcSqsBZed2wiGQw2jjjFgOYL/FcngEEdoFQVRx2MdJ4FvJkWPYsa55Dr4cJhd3xnL4ab/GchhPIvYiq+IQd+kDPLEhHCG6qJvNlCxs4HmUg/l+lEMYsv/7azkUDpSBeQOEwOx44ctBSQbScjA/HOUQxezV4WPlATNWmt8O1uwFxnLQtUrJQf2SkkMYtFc/OqgF9zSyCs2PrEgOw/NSTRUgLQf1U0oOjPW/vSCI+vmHGkn4GFSMPifLPMqBBJGWA2OPtBxCN79WEBfm5SSfsMxmH4M6KO17JOTAGKTlwNiYlsNrgrg2Xy03Dk9hdH5wqTGk71JKDtr+mbvD6UnqFwTx0vOsJjsTFU5GMdZoahVyIPtHSg7KUnJgrP/XZUHU5b76SN/UND1o5uXw9zo5hBMidYKojLt59YM6ujozbTWlk7NyEJVyiCbIqqpWpwdArHg4pc1SyEWqeTn4HmLhI6zLgqjj0KjbOpY3j2Z2tcxN798ph+uCqOwnDe9pKXiSLdvZu6ochlvlcF0QtePFfp4OeCsyypCCr+Fc9pRrTkVy+O9P/0ojOTTBLbkoiOpxs42nEQFg9SbnFoDEbP6ck0+ZHDhltKmHQDMYhi4Kot5/kMEz6SLr8hM3RXIYespok305/IcyDjcI4oof1RY8vvFrcTLYVsjBpsc3HCK/5JogrvmTbWmEcU6hSg42Q3S/hcmw2yVBXPWrm6VIFHD2AKtSDjpHQg53COKF+KLh5z3FsLbPHI0qOegsCTnEgsjCPbEX1w2KcU7CgHks8Dsr5UB5knKIBJGl+3UcdHWE8B5sjaK4zEo5UKakHCJB5PHm7Z3r7avlgOhPhoGf8VVBvJNDtRxCE37GVwXxRg4X5OAbhBlfFMQbORTLIb3cRJjly/cI4n0ciuWQ1gOkcjqrFsT7OBTLId0/iHRWY9WCeBuHcjkkBQG5vMZqBfE2DtkLbRL3+CgIc91lgihw6d7GYT1WStuSuMUHQexPe/bfusC59tCVLOF5GwfvToYrrz09uLWXrAm99zmVEE5y9DvPktUQ33D/5lvsTw7a/uSgrYbDPNPWvKsb8b63VXCY6WHWULLd4v+ag/Lyu5xbssDJFFzDV7Oe7KUtrl9pdXpo+ymziSKeNfas91yF4vnCfjyf2bzbavqHpaW1wm4/RXBv8xx6f247w0EK8if2a5F8OBQHCOxsfXbKBCLnRQHG5fGiGYLFTnkOyp+ZTttFP2DrcdBLsL4tB+GmII8blBwHM0W5J/QFO9l6xHHnoB3KNb6yb8Jh81x8prtN1VO0AP5TJevSu+vdDh5vwuTmtQvyuJdjJ+Rx6OOVB3LkPHWS+zn40Y/iwNrJzQ0cOexLBg+hYpd4wAXQhnoY9l6yXRYRcRDxk5vBRiNm1OrHWZ3ldg4CDxzYXs8UBxs9JeZQjs2ENj/ul6teo2DuuO5lt5AD91ZiIsK2n1FnUJsrKQy/nQNdDffvf46DNnWDZI7DMRAOOajXapjS9JjbhRxUkMkdh45Y0CkNB6mbML+fgwzv71MOSj863JXRckIeumJ9k+BATUMvKpupqwHFNOgnW7tEuVdVnvWFaA6047hrByrhbg5in9Qp40ACym0xmJRWeEdgnXPBRUI3pj/ZN3rpk2Sz7s1y5fbB1+0czJgJ+0f33XGQ7ueOKpC2WTX4VYnCPZ/Kc9itgsNut3M4McehoDKm2kSg91athxy6ddRCmVqVYdADQooDiN1tNxxW82IGXfA358DNBtc5bGZHk23aN0hYs9hds/TguWrx79s4UNcLC708JbMn44It+3hba++bj3JP6+4LLMfrhb1xXk57gSdr6apNliw+Sdtb1z+QP/HG8/v2Vg7dAq+9i+4+K+PQ6KBS/QfBQIUzZkph9YK/HsC+SGoB+9keTIMDgNcMJHbDk8Him3EQelBQ8cusRmmeCKm0c2ncSuUErt7Bxj333wAhe/nqyyrvshoOygme2ZGDC/6GfWuidoZFwEH5RDf2i+/h4DDsHDhrhKqcjqlabxzUHDqfQ2+8wu9o5Rx2DD4H21pUTD65uvsLGx0HE4J/l6YQWDmHHUPEQe2y3OyEmn2MD3piAOXOoUOkl6yl97K+2ar8aivpiENjPs00azCY3pE4CHWM2Gc0keIqu15D0ISv4KoZSc57+iP1J5oSbuh9fpwLxjY+MtZybr0k9aOJH1o6fv/DuWzo0EaXslH5Lb87zrJzjhEHqT9J1TdYH584qNmkzXIAItTsI8pEyjHbKoQJQQX9GXULmvTiWUn/pG5ns8k70dmt7HpJp5IKMOKmnjTZUhqOACWT3HXtwoCIOJj3GXBV6daMo4oDzZB1mxl0KUGIznYgdNTscRgog+hVB8Nx2hA3Wqc9M10i4Gwi6FVNCu0caEID1NlbRtH21DNbCg7L7Ryy/aS6VcJf5k7KVxxU1zFpDt6SYBNw03zbzgHpeMHpV8GxW9wZAQGHnmozGdmtOHsc1Bvv2IArTsyIxpaiGvPNHJwXFXGQqx4j/NWeo+VghhC0E4l7PyMVIO44dIjDhKIjH3NWNVh7WFbEVmVsAXkzEMEFhw6H3nGYEAFB52qM02JLmYYv4KAfNC0+hw70dneaie/se1IGhcVwEJYD11va9C62xg6iHdcXLhBm5GDXkS84zdjp3f56umlS/QMtBTMvhDU8gThtaHbdz6p/MAfionrq+znoW94m/MnWf+nJooZRw8E8AFKY9BR0o1U1Q8skgApDGtbAIkW/wEqb7wBWWCRAy6GDbYWNCfoJgJ5yCQpWuD5uoTCmaZqGUiVr6V+j8tpS2AjL8mRTUD0HfRPbmMMqTe+lPSQ10+Q4aCdSITSXM31HX6ps4sKFjOo2UFTp4s3FjOrew2zKJBf7faNc6jcz6m4AsP0Pf9cjHoQzl3YAAAAASUVORK5CYII=",uX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAMAAACfvvDEAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAMKBw8BAgQMCA0GDgUJCwJIbPBQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAR5JREFUOI2N1euyhCAIAGDKC2iX5f2f9sxupiLkiX9N35AgGqhYMCWHi34hYjkz30EuPrptZxmEpsPRfYOMvKfhmNlvgwvZhsy8voWSTiHz2eRnCpnrWt0/kH3pQPDWy/TbppKELrkaMIfS5PJ8/FIacA8g5f60ylrCLfm7r1aHrpQupbqyFSBaxer17wCHAUl8+IoI6aVEc38s6YBeyqTkingdooCImCYyiXF8L9tJcKp2KVseVJspZTuFEZZ3tXsAMKbTkB97PA256Q7b0gdZ37M8QX/GlPeRU0mVvFsXx/JHmWt/x2kepO8uvG0mvbifJRVSQoCjX2svs7prQ9eBTsqBKdGu7yrp6RdylON3Sb/OfjXhSETUXa0lAOAP9JhCUjdmaCwAAAAASUVORK5CYII=",cX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAAoCAMAAABU4iNhAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAsCBgENDwwIBA4KCQcDBQ2J3c5QAAAAlwSFlzAAALEgAACxIB0t1+/AAAAQ9JREFUOI2tlduuhSAMREcoQhG0//+1J15At4BicuZJzAq1w1CxiycjddmocErZBrYrUCLn8REUMdQJJpT8KygyrKTrAEUYoPfax6b6XPnIP1rCZRcg5OeIQjRdymcrNaAHe9XEQEZdJgOoPKYJSM6cJGGoNBJzH5m0UHfKWBEP3EmHpdiPt5ZNQeYTmBbW29txI22LNHvIeEw2tkhDmMMQCfMbyXuz43ysm6RPORgOL5qkBUsq+19kf/XckXrrSDxBuS6X+p1fT1NzzKmtkUVCDvKekErqdi+K1ImqJlmXSf5wO95v3PMtPr+Iry179zAZ6MO06Z9gH6Zi/6T9ML1/zKjJXY1TofWXMW6NIYA/LcZPMBmKDQMAAAAASUVORK5CYII=",hX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAMAAACfvvDEAAAAM1BMVEVMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhp8z9inAAAAEHRSTlMAIDBg8NAQgMBAkLBQ4KBwlgEmaQAAAAlwSFlzAAALEgAACxIB0t1+/AAAAOdJREFUOI3t1NkOxCAIBdDrUlG7+f9fO4EutsloSTOPw0sTPDEVQQBwY+mGHxMzhKHvJBaWGlhKBpwKlhLw8I9nOESlpHeye7aLpADT+ekqsxR3VkgjktRyVchVZLsSVfrU3fJWpZjb5+lXfmjJZWtAb+VLfEJD/oscpFc5w8Wy2MKetMooK7uscTblo8SxaUuaMcbpVuGW5KwP1/ttyCCppJCTpBwuR2pI2hcBpL+8yJlvxO4zukgq19Le+nMgknbMRMfY5z1V3r82P5PtV+MeFkYHecxUzzdPLDD1HoQt4jmrqR8GAD5a81ASC5ohhwAAAABJRU5ErkJggg==",fX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAMAAACfvvDEAAAAM1BMVEUaGhoaGhoaGhoaGhoaGhoaGhoaGhpMaXEaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhoaGhpKSF6fAAAAEHRSTlOAsHBQENAwAMDwYOAgkECgDdPORgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAVRJREFUOI2NldeWhDAMQ50qJ0Px/3/tnpRhU8iAH+GCjCUHAhDpqSIAwhHkuZwFbW9AEQeiV6CIJ35J6tckfUnHudxwP/BnJBVKqR70diLFQDEra7tRHPYS+SeD1SLCMA0Ycc59Jv2krBt9wn7zRekNSbnp7ES8+/akv5lsxlGn0TXSkcJZrWo668OSFJ2Vs37w/RQGMngvIh97JHwwoSdTYkRkB8XBgokUgssuNINckOJTXoO1IziTLlulMMV2ImWvVo3XZ1LyeMI2bs0NuaFYpZ/ICFOt4t8k4RRTrfrhZs1PSCbJx64TcuVHVavUkrzyY7JVR6vfkWH73gr5kdDqd2STH0axar8lu/wUk+K1Ki2pu/yUTsJWV6Ulz8EUxsHM/+t5kdwtYtEo5QbSzSdZPapqpzcJWRTRuC+r0jSEa1n+7TnPIPRHxaLSvwOwz/8jA+APGldW3+ueiIAAAAAASUVORK5CYII=",dX=()=>we.jsxs("div",{className:"footer-wrapper",dir:"rtl",children:[we.jsxs("div",{className:"contact-dark-section",children:[we.jsx("div",{className:"contact-header-title",children:" "}),we.jsxs("div",{className:"contact-container",children:[we.jsxs("div",{className:"contact-info-side",children:[we.jsxs("div",{className:"address-block",children:[we.jsx("span",{className:"location-icon",children:""}),we.jsx("p",{children:"  -    -        -   2861 -   9761 -   24353 -   -   601"})]}),we.jsx("div",{className:"map-wrapper",children:we.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m17!1m12!1m3!1d3715.210549283236!2d39.770297975266345!3d21.381612780357433!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m2!1m1!2zMjHCsDIyJzUzLjgiTiAzOcKwNDYnMjIuMyJF!5e0!3m2!1sen!2seg!4v1768316079155!5m2!1sen!2seg",width:"100%",height:"260",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Google Map"})})]}),we.jsx("div",{className:"contact-form-side",children:we.jsxs("form",{children:[we.jsx("input",{type:"text",placeholder:"",className:"footer-input"}),we.jsx("input",{type:"email",placeholder:"",className:"footer-input"}),we.jsx("textarea",{placeholder:"",className:"footer-textarea",rows:"5"}),we.jsx("button",{type:"button",className:"footer-send-btn",children:""})]})})]})]}),we.jsx("div",{className:"golden-footer-body",children:we.jsxs("div",{className:"footer-columns",children:[we.jsxs("div",{className:"col-branding",children:[we.jsx("div",{className:"logos-row",children:we.jsx("img",{src:lX,alt:"Kidana",className:"footer-logo"})}),we.jsx("p",{className:"branding-text",children:"                   ."})]}),we.jsx("div",{className:"col-links",children:we.jsxs("ul",{className:"footer-nav",children:[we.jsx("li",{children:we.jsx(_g,{to:"/",children:" "})}),we.jsx("li",{children:we.jsx(_g,{to:"/map",children:" "})}),we.jsx("li",{children:we.jsx(_g,{to:"/#",children:""})}),we.jsx("li",{children:we.jsx(_g,{to:"/",children:" "})})]})}),we.jsxs("div",{className:"col-social",children:[we.jsxs("a",{href:"#",className:"social-item",children:[we.jsx("img",{src:uX,alt:"Facebook"}),we.jsx("span",{children:" "})]}),we.jsxs("a",{href:"#",className:"social-item",children:[we.jsx("img",{src:cX,alt:"Twitter"}),we.jsx("span",{children:" "})]}),we.jsxs("a",{href:"#",className:"social-item",children:[we.jsx("img",{src:hX,alt:"LinkedIn"}),we.jsx("span",{children:" "})]}),we.jsxs("a",{href:"#",className:"social-item",children:[we.jsx("img",{src:fX,alt:"Instagram"}),we.jsx("span",{children:" "})]})]})]})}),we.jsx("div",{className:"copyright-bar",children:"       2026"})]}),cw=()=>we.jsx("div",{className:"section-divider-container",children:we.jsx("img",{src:"/src/assets/InfoMap/Art.png",alt:""})}),pX=()=>we.jsxs("div",{className:"golden-contour-bg",dir:"rtl",children:[we.jsx(H$,{}),we.jsx(Z$,{}),we.jsx(aX,{}),we.jsx(cw,{}),we.jsx(oX,{}),we.jsx(cw,{}),we.jsx(sX,{}),we.jsx(cw,{}),we.jsx(dX,{})]});function mX(){return we.jsx(q3,{children:we.jsx(k3,{children:we.jsxs(c3,{children:[we.jsx(fw,{path:"/",element:we.jsx(pX,{})}),we.jsx(fw,{path:"/map",element:we.jsx(q$,{})})]})})})}dR.createRoot(document.getElementById("root")).render(we.jsx(H.StrictMode,{children:we.jsx(mX,{})}));
